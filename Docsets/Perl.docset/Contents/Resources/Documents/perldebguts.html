<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <title>perldebguts - perldoc.perl.org</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta http-equiv="Content-Language" content="en-gb">
  <link rel="search" type="application/opensearchdescription+xml" title="Search perldoc.perl.org" href="/static/search.xml"/>
  <link href="static/css-20100830.css" rel="stylesheet" rev="stylesheet" type="text/css" media="screen">
  <link href="static/exploreperl.css" rel="stylesheet" rev="stylesheet" type="text/css">
</head>

<body onLoad="perldoc.startup();" onPageShow="if (event.persisted) perldoc.startup();">
    <div id="page" style="width:  731px">
      
      <div id="header" style="display: none">
	<div id="homepage_link">
	  <a href="index.html"></a>
	</div>
	<div id="strapline">
	  Perl Programming Documentation
	</div>
	<div id="download_link" class="download">
	  <a href="http://www.perl.org/get.html">Download Perl</a>
	</div>
	<div id="explore_link" class="download">
	  <a id="explore_anchor" href="#">Explore</a>
	</div>
      </div>
      
      <div id="body">
        <div id="left_column" style="display: none">
          <div class="side_group">
            
	    <div class="side_panel doc_panel">
              <p>Manual</p>
              <ul>
                <li><a href="index-overview.html">Overview</a>
                <li><a href="index-tutorials.html">Tutorials</a>
                <li><a href="index-faq.html">FAQs</a>
                <li><a href="index-history.html">History / Changes</a>
                <li><a href="index-licence.html">License</a>
              </ul>
            </div>
            <div class="side_panel doc_panel">
              <p>Reference</p>
              <ul>
                <li><a href="index-language.html">Language</a>
                <li><a href="index-functions.html">Functions</a>
                <li><a href="perlop.html">Operators</a>
                <li><a href="perlvar.html">Special Variables</a>
                <li><a href="index-pragmas.html">Pragmas</a>
                <li><a href="index-utilities.html">Utilities</a>
                <li><a href="index-internals.html">Internals</a>
                <li><a href="index-platforms.html">Platform Specific</a>
              </ul>
            </div>
            <div class="side_panel doc_panel">
              <p>Modules</p>
              <ul>
		<li>
		
                
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		
                  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		
                  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		
                  
		
                  
		    
		  
		
                  
		
                  
		
		
                    <a href="index-modules-A.html">A</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-B.html">B</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-C.html">C</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-D.html">D</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-E.html">E</a>
                    
                      
                        <li>
                      
                    
                
                    <a href="index-modules-F.html">F</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-G.html">G</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-H.html">H</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-I.html">I</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-L.html">L</a>
                    
                      
                        <li>
                      
                    
                
                    <a href="index-modules-M.html">M</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-N.html">N</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-O.html">O</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-P.html">P</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-S.html">S</a>
                    
                      
                        <li>
                      
                    
                
                    <a href="index-modules-T.html">T</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-U.html">U</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-X.html">X</a>
                    
                
              </ul>
            </div>
            
	      <div class="side_panel doc_panel">
		<p>Tools</p>
		<ul>
		  <li><a href="preferences.html">Preferences</a>
		</ul>
	      </div>
            
          </div>
        </div>
        <div id="centre_column" style="margin-left: 0px; margin-right: 0px">
          <div id="content_header" style="display: none">
            <div id="title_bar">
              <div id="page_name">
                <h1>perldebguts</h1>
              </div>
              <div id="perl_version">
                Perl 5 version 14.0 documentation
              </div>
              <div class="page_links" id="page_links_top">
                <a href="#" onClick="toolbar.goToTop();return false;">Go to top</a>
		
              </div>
	      <div class="page_links" id="page_links_bottom">
		
                  <a href="#" id="page_index_toggle">Show page index</a> &bull;
		
                <a href="#" id="recent_pages_toggle">Show recent pages</a>		
	      </div>
	      <div id="search_form">
		<form action="search.html" method="GET" id="search">
		  <input type="text" name="q" id="search_box" alt="Search">
		</form>
	      </div>
            </div>
            <div id="breadcrumbs">
                
    <a href="index.html">Home</a> &gt;
    
      
        <a href="index-internals.html">Internals and C language interface</a> &gt;
      
    
    perldebguts
  

            </div>
          </div>
          <div id="content_body" style="font-size:100%">
	    <!--[if lt IE 7]>
 <div class="noscript">
   <p>
     <strong>It looks like you're using Internet Explorer 6. This is a very old
     browser which does not offer full support for modern websites.</strong>
   </p>
   <p>
     Unfortunately this means that this website will not work on
     your computer.
   </p>
   <p>
     Don't miss out though! To view the site (and get a better experience from
     many other websites), simply upgrade to
     <a href="http://www.microsoft.com/windows/Internet-explorer/default.aspx">Internet
Explorer 8</a>
     or download an alternative browser such as
     <a href="http://www.mozilla.com/en-US/firefox/firefox.html">Firefox</a>,
     <a href="http://www.apple.com/safari/download/">Safari</a>, or
     <a href="http://www.google.co.uk/chrome">Google Chrome</a>.
   </p>
   <p>
     All of these browsers are free. If you're using a PC at work, you may
     need to contact your IT administrator.
   </p>
 </div>
<![endif]-->
	    <noscript>
	      <div class="noscript">
	      <p>
                <strong>Please note: Many features of this site require JavaScript. You appear to have JavaScript disabled,
	        or are running a non-JavaScript capable web browser.</strong>
	      </p>
	      <p>
		To get the best experience, please enable JavaScript or download a modern web browser such as <a href="http://www.microsoft.com/windows/Internet-explorer/default.aspx">Internet Explorer 8</a>, <a href="http://www.mozilla.com/en-US/firefox/firefox.html">Firefox</a>, <a href="http://www.apple.com/safari/download/">Safari</a>, or <a href="http://www.google.co.uk/chrome">Google Chrome</a>.
              </p>
	      </div>
	    </noscript>

	    <div id="recent_pages" class="hud_container">
	      <div id="recent_pages_header" class="hud_header">
		<div id="recent_pages_close" class="hud_close"><a href="#" onClick="recentPages.hide();return false;"></a></div>
		<div id="recent_pages_title" class="hud_title"><span class="hud_span_top">Recently read</span></div>
		<div id="recent_pages_topright" class="hud_topright"></div>
	      </div>
	      <div id="recent_pages_content" class="hud_content">
	      </div>
	      <div id="recent_pages_footer" class="hud_footer">
		<div id="recent_pages_bottomleft" class="hud_bottomleft"></div>
		<div id="recent_pages_bottom" class="hud_bottom"><span class="hud_span_bottom"></span></div>
		<div id="recent_pages_resize" class="hud_resize"></div>
	      </div>
	    </div>
  
	    <div id="from_search"></div>
            <h1>perldebguts</h1>


  <!--    -->
<ul><li><a href="#NAME">NAME</a><li><a href="#DESCRIPTION">DESCRIPTION</a><li><a href="#Debugger-Internals">Debugger Internals</a><ul><li><a href="#Writing-Your-Own-Debugger">Writing Your Own Debugger</a></ul><li><a href="#Frame-Listing-Output-Examples">Frame Listing Output Examples</a><li><a href="#Debugging-Regular-Expressions">Debugging Regular Expressions</a><ul><li><a href="#Compile-time-Output">Compile-time Output</a><li><a href="#Types-of-Nodes">Types of Nodes</a><li><a href="#Run-time-Output">Run-time Output</a></ul><li><a href="#Debugging-Perl-Memory-Usage">Debugging Perl Memory Usage</a><ul><li><a href="#Using-%24ENV%7bPERL_DEBUG_MSTATS%7d">Using $ENV{PERL_DEBUG_MSTATS}</a></ul><li><a href="#SEE-ALSO">SEE ALSO</a></ul><a name="NAME"></a><h1>NAME</h1>
<p>perldebguts - Guts of Perl debugging</p>
<a name="DESCRIPTION"></a><h1>DESCRIPTION</h1>
<p>This is not <a href="perldebug.html">perldebug</a>, which tells you how to use
the debugger.  This manpage describes low-level details concerning
the debugger's internals, which range from difficult to impossible
to understand for anyone who isn't incredibly intimate with Perl's guts.
Caveat lector.</p>
<a name="Debugger-Internals"></a><h1>Debugger Internals</h1>
<p>Perl has special debugging hooks at compile-time and run-time used
to create debugging environments.  These hooks are not to be confused
with the <i>perl -Dxxx</i> command described in <a href="perlrun.html">perlrun</a>, which is
usable only if a special Perl is built per the instructions in the
<i>INSTALL</i> podpage in the Perl source tree.</p>
<p>For example, whenever you call Perl's built-in <code class="inline"><a class="l_k" href="functions/caller.html">caller</a></code> function
from the package <code class="inline"><span class="w">DB</span></code>
, the arguments that the corresponding stack
frame was called with are copied to the <code class="inline"><span class="i">@DB::args</span></code>
 array.  These
mechanisms are enabled by calling Perl with the <b>-d</b> switch.
Specifically, the following additional features are enabled
(cf. <a href="perlvar.html#%24%5eP">$^P in perlvar</a>):</p>
<ul>
<li>
<p>Perl inserts the contents of <code class="inline"><span class="i">$ENV</span>{<span class="w">PERL5DB</span>}</code>
 (or <code class="inline">BEGIN <span class="s">{</span><a class="l_k" href="functions/require.html">require</a>
<span class="q">&#39;perl5db.pl&#39;</span><span class="s">}</span></code>
 if not present) before the first line of your program.</p>
</li>
<li>
<p>Each array <code class="inline"><span class="i">@</span>{<span class="q">&quot;_&lt;$filename&quot;</span>}</code>
 holds the lines of $filename for a
file compiled by Perl.  The same is also true for <code class="inline"><a class="l_k" href="functions/eval.html">eval</a></code>ed strings
that contain subroutines, or which are currently being executed.
The $filename for <code class="inline"><a class="l_k" href="functions/eval.html">eval</a></code>ed strings looks like <code class="inline"><span class="s">(</span><a class="l_k" href="functions/eval.html">eval</a> <span class="n">34</span><span class="s">)</span></code>
.
Code assertions in regexes look like <code class="inline"><span class="s">(</span><span class="w">re_eval</span> <span class="n">19</span><span class="s">)</span></code>
.</p>
<p>Values in this array are magical in numeric context: they compare
equal to zero only if the line is not breakable.</p>
</li>
<li>
<p>Each hash <code class="inline"><span class="i">%</span>{<span class="q">&quot;_&lt;$filename&quot;</span>}</code>
 contains breakpoints and actions keyed
by line number.  Individual entries (as opposed to the whole hash)
are settable.  Perl only cares about Boolean true here, although
the values used by <i>perl5db.pl</i> have the form
<code class="inline"><span class="q">&quot;$break_condition\0$action&quot;</span></code>
.</p>
<p>The same holds for evaluated strings that contain subroutines, or
which are currently being executed.  The $filename for <code class="inline"><a class="l_k" href="functions/eval.html">eval</a></code>ed strings
looks like <code class="inline"><span class="s">(</span><a class="l_k" href="functions/eval.html">eval</a> <span class="n">34</span><span class="s">)</span></code>
 or <code class="inline"><span class="s">(</span><span class="w">re_eval</span> <span class="n">19</span><span class="s">)</span></code>
.</p>
</li>
<li>
<p>Each scalar <code class="inline"><span class="i">$</span>{<span class="q">&quot;_&lt;$filename&quot;</span>}</code>
 contains <code class="inline"><span class="q">&quot;_&lt;$filename&quot;</span></code>
.  This is
also the case for evaluated strings that contain subroutines, or
which are currently being executed.  The $filename for <code class="inline"><a class="l_k" href="functions/eval.html">eval</a></code>ed
strings looks like <code class="inline"><span class="s">(</span><a class="l_k" href="functions/eval.html">eval</a> <span class="n">34</span><span class="s">)</span></code>
 or <code class="inline"><span class="s">(</span><span class="w">re_eval</span> <span class="n">19</span><span class="s">)</span></code>
.</p>
</li>
<li>
<p>After each <code class="inline"><a class="l_k" href="functions/require.html">require</a></code>d file is compiled, but before it is executed,
<code class="inline"><span class="i">DB::postponed</span><span class="s">(</span><span class="i">*</span>{<span class="q">&quot;_&lt;$filename&quot;</span>}<span class="s">)</span></code>
 is called if the subroutine
<code class="inline"><span class="w">DB::postponed</span></code>
 exists.  Here, the $filename is the expanded name of
the <code class="inline"><a class="l_k" href="functions/require.html">require</a></code>d file, as found in the values of %INC.</p>
</li>
<li>
<p>After each subroutine <code class="inline"><span class="w">subname</span></code>
 is compiled, the existence of
<code class="inline"><span class="i">$DB::postponed</span>{<span class="w">subname</span>}</code>
 is checked.  If this key exists,
<code class="inline"><span class="i">DB::postponed</span><span class="s">(</span><span class="w">subname</span><span class="s">)</span></code>
 is called if the <code class="inline"><span class="w">DB::postponed</span></code>
 subroutine
also exists.</p>
</li>
<li>
<p>A hash <code class="inline"><span class="i">%DB::sub</span></code>
 is maintained, whose keys are subroutine names
and whose values have the form <code class="inline"><span class="j">filename:</span><span class="w">startline</span>-<span class="w">endline</span></code>
.
<code class="inline"><span class="w">filename</span></code>
 has the form <code class="inline"><span class="s">(</span><a class="l_k" href="functions/eval.html">eval</a> <span class="n">34</span><span class="s">)</span></code>
 for subroutines defined inside
<code class="inline"><a class="l_k" href="functions/eval.html">eval</a></code>s, or <code class="inline"><span class="s">(</span><span class="w">re_eval</span> <span class="n">19</span><span class="s">)</span></code>
 for those within regex code assertions.</p>
</li>
<li>
<p>When the execution of your program reaches a point that can hold a
breakpoint, the <code class="inline"><span class="i">DB::DB</span><span class="s">(</span><span class="s">)</span></code>
 subroutine is called if any of the variables
<code class="inline"><span class="i">$DB::trace</span></code>
, <code class="inline"><span class="i">$DB::single</span></code>
, or <code class="inline"><span class="i">$DB::signal</span></code>
 is true.  These variables
are not <code class="inline"><a class="l_k" href="functions/local.html">local</a></code>izable.  This feature is disabled when executing
inside <code class="inline"><span class="i">DB::DB</span><span class="s">(</span><span class="s">)</span></code>
, including functions called from it 
unless <code class="inline"><span class="i">$^D</span> &amp; <span class="s">(</span><span class="n">1</span>&lt;&lt;<span class="n">30</span><span class="s">)</span></code>
 is true.</p>
</li>
<li>
<p>When execution of the program reaches a subroutine call, a call to
<code class="inline"><span class="i">&amp;DB::sub</span></code>
(<i>args</i>) is made instead, with <code class="inline"><span class="i">$DB::sub</span></code>
 holding the
name of the called subroutine. (This doesn't happen if the subroutine
was compiled in the <code class="inline"><span class="w">DB</span></code>
 package.)</p>
</li>
</ul>
<p>Note that if <code class="inline"><span class="i">&amp;DB::sub</span></code>
 needs external data for it to work, no
subroutine call is possible without it. As an example, the standard
debugger's <code class="inline"><span class="i">&amp;DB::sub</span></code>
 depends on the <code class="inline"><span class="i">$DB::deep</span></code>
 variable
(it defines how many levels of recursion deep into the debugger you can go
before a mandatory break).  If <code class="inline"><span class="i">$DB::deep</span></code>
 is not defined, subroutine
calls are not possible, even though <code class="inline"><span class="i">&amp;DB::sub</span></code>
 exists.</p>
<a name="Writing-Your-Own-Debugger"></a><h2>Writing Your Own Debugger</h2>
<a name="Environment-Variables"></a><h3>Environment Variables</h3>
<p>The <code class="inline"><span class="w">PERL5DB</span></code>
 environment variable can be used to define a debugger.
For example, the minimal "working" debugger (it actually doesn't do anything)
consists of one line:</p>
<pre class="verbatim"><ol><li><a name="DB::DB"></a>  sub <span class="m">DB::DB</span> <span class="s">{</span><span class="s">}</span></li></ol></pre><p>It can easily be defined like this:</p>
<pre class="verbatim"><ol><li>  $ PERL5DB="sub DB::DB {}" perl -d your-script</li></ol></pre><p>Another brief debugger, slightly more useful, can be created
with only the line:</p>
<pre class="verbatim"><ol><li><a name="DB::DB"></a>  sub <span class="m">DB::DB</span> <span class="s">{</span><a class="l_k" href="functions/print.html">print</a> ++<span class="i">$i</span><span class="sc">;</span> <a class="l_k" href="functions/scalar.html">scalar</a> <span class="q">&lt;STDIN&gt;</span><span class="s">}</span></li></ol></pre><p>This debugger prints a number which increments for each statement
encountered and waits for you to hit a newline before continuing
to the next statement.</p>
<p>The following debugger is actually useful:</p>
<pre class="verbatim"><ol><li>  <span class="s">{</span></li><li><a name="package-DB"></a>    package <span class="i">DB</span><span class="sc">;</span></li><li><a name="DB"></a>    sub <span class="m">DB</span>  <span class="s">{</span><span class="s">}</span></li><li><a name="sub"></a>    sub <span class="m">sub</span> <span class="s">{</span><a class="l_k" href="functions/print.html">print</a> ++<span class="i">$i</span><span class="cm">,</span> <span class="q">&quot; $sub\n&quot;</span><span class="sc">;</span> <span class="i">&amp;$sub</span><span class="s">}</span></li><li><a name="package-main"></a>  <span class="s">}</span></li></ol></pre><p>It prints the sequence number of each subroutine call and the name of the
called subroutine.  Note that <code class="inline"><span class="i">&amp;DB::sub</span></code>
 is being compiled into the
package <code class="inline"><span class="w">DB</span></code>
 through the use of the <code class="inline"><a class="l_k" href="functions/package.html">package</a></code> directive.</p>
<p>When it starts, the debugger reads your rc file (<i>./.perldb</i> or
<i>~/.perldb</i> under Unix), which can set important options.
(A subroutine (<code class="inline"><span class="i">&amp;afterinit</span></code>
) can be defined here as well; it is executed
after the debugger completes its own initialization.)</p>
<p>After the rc file is read, the debugger reads the PERLDB_OPTS
environment variable and uses it to set debugger options. The
contents of this variable are treated as if they were the argument
of an <code class="inline"><span class="w">o</span> ...</code>
 debugger command (q.v. in <a href="perldebug.html#Configurable-Options">Configurable Options in perldebug</a>).</p>
<a name="Debugger-Internal-Variables"></a><h3>Debugger Internal Variables</h3>
<p>In addition to the file and subroutine-related variables mentioned above,
the debugger also maintains various magical internal variables.</p>
<ul>
<li>
<p><code class="inline"><span class="i">@DB::dbline</span></code>
 is an alias for <code class="inline"><span class="i">@</span>{<span class="q">&quot;::_&lt;current_file&quot;</span>}</code>
, which
holds the lines of the currently-selected file (compiled by Perl), either
explicitly chosen with the debugger's <code class="inline"><span class="w">f</span></code>
 command, or implicitly by flow
of execution.</p>
<p>Values in this array are magical in numeric context: they compare
equal to zero only if the line is not breakable.</p>
</li>
<li>
<p><code class="inline"><span class="i">%DB::dbline</span></code>
 is an alias for <code class="inline"><span class="i">%</span>{<span class="q">&quot;::_&lt;current_file&quot;</span>}</code>
, which
contains breakpoints and actions keyed by line number in
the currently-selected file, either explicitly chosen with the
debugger's <code class="inline"><span class="w">f</span></code>
 command, or implicitly by flow of execution.</p>
<p>As previously noted, individual entries (as opposed to the whole hash)
are settable.  Perl only cares about Boolean true here, although
the values used by <i>perl5db.pl</i> have the form
<code class="inline"><span class="q">&quot;$break_condition\0$action&quot;</span></code>
.</p>
</li>
</ul>
<a name="Debugger-Customization-Functions"></a><h3>Debugger Customization Functions</h3>
<p>Some functions are provided to simplify customization.</p>
<ul>
<li>
<p>See <a href="perldebug.html#Configurable-Options">Configurable Options in perldebug</a> for a description of options parsed by
<code class="inline"><span class="i">DB::parse_options</span><span class="s">(</span><span class="w">string</span><span class="s">)</span></code>
.</p>
</li>
<li>
<p><code class="inline"><span class="i">DB::dump_trace</span><span class="s">(</span><span class="w">skip</span><span class="s">[</span><span class="cm">,</span><span class="w">count</span><span class="s">]</span><span class="s">)</span></code>
 skips the specified number of frames
and returns a list containing information about the calling frames (all
of them, if <code class="inline"><span class="w">count</span></code>
 is missing).  Each entry is reference to a hash
with keys <code class="inline"><span class="w">context</span></code>
 (either <code class="inline">.</code>, <code class="inline"><span class="i">$</span></code>
, or <code class="inline"><span class="i">@</span></code>
), <code class="inline"><a class="l_k" href="functions/sub.html">sub</a></code> (subroutine
name, or info about <code class="inline"><a class="l_k" href="functions/eval.html">eval</a></code>), <code class="inline"><span class="w">args</span></code>
 (<code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code> or a reference to
an array), <code class="inline"><span class="w">file</span></code>
, and <code class="inline"><span class="w">line</span></code>
.</p>
</li>
<li>
<p><code class="inline"><span class="i">DB::print_trace</span><span class="s">(</span><span class="w">FH</span><span class="cm">,</span> <span class="w">skip</span><span class="s">[</span><span class="cm">,</span> <span class="w">count</span><span class="s">[</span><span class="cm">,</span> <span class="w">short</span><span class="s">]</span><span class="s">]</span><span class="s">)</span></code>
 prints
formatted info about caller frames.  The last two functions may be
convenient as arguments to <code class="inline">&lt;</code>
, <code class="inline">&lt;&lt;</code>
 commands.</p>
</li>
</ul>
<p>Note that any variables and functions that are not documented in
this manpages (or in <a href="perldebug.html">perldebug</a>) are considered for internal   
use only, and as such are subject to change without notice.</p>
<a name="Frame-Listing-Output-Examples"></a><h1>Frame Listing Output Examples</h1>
<p>The <code class="inline"><span class="w">frame</span></code>
 option can be used to control the output of frame 
information.  For example, contrast this expression trace:</p>
<pre class="verbatim"><ol><li> $ perl -de 42</li><li> Stack dump during die enabled outside of evals.</li><li></li><li> Loading DB routines from perl5db.pl patch level 0.94</li><li> Emacs support available.</li><li></li><li> Enter h or `h h' for help.</li><li></li><li> main::(-e:1):   0</li><li>   DB&lt;1&gt; sub foo { 14 }</li><li></li><li>   DB&lt;2&gt; sub bar { 3 }</li><li></li><li>   DB&lt;3&gt; t print foo() * bar()</li><li> main::((eval 172):3):   print foo() + bar();</li><li> main::foo((eval 168):2):</li><li> main::bar((eval 170):2):</li><li> 42</li></ol></pre><p>with this one, once the <code class="inline"><span class="w">o</span></code>
ption <code class="inline"><span class="w">frame</span>=<span class="n">2</span></code>
 has been set:</p>
<pre class="verbatim"><ol><li>   DB&lt;4&gt; o f=2</li><li>                frame = '2'</li><li>   DB&lt;5&gt; t print foo() * bar()</li><li> 3:      foo() * bar()</li><li> entering main::foo</li><li>  2:     sub foo { 14 };</li><li> exited main::foo</li><li> entering main::bar</li><li>  2:     sub bar { 3 };</li><li> exited main::bar</li><li> 42</li></ol></pre><p>By way of demonstration, we present below a laborious listing
resulting from setting your <code class="inline"><span class="w">PERLDB_OPTS</span></code>
 environment variable to
the value <code class="inline"><span class="w">f</span>=<span class="w">n</span> <span class="w">N</span></code>
, and running <i>perl -d -V</i> from the command line.
Examples using various values of <code class="inline"><span class="w">n</span></code>
 are shown to give you a feel
for the difference between settings.  Long though it may be, this
is not a complete listing, but only excerpts.</p>
<dl>
<dt>1</dt><dd>
<pre class="verbatim"><ol><li>  <span class="w">entering</span> <span class="w">main::BEGIN</span></li><li>   <span class="w">entering</span> <span class="w">Config::BEGIN</span></li><li>    <span class="w">Package</span> <span class="w">lib</span>/<span class="w">Exporter</span>.<span class="w">pm</span>.</li><li>    <span class="w">Package</span> <span class="w">lib</span>/<span class="w">Carp</span>.<span class="w">pm</span>.</li><li>   <span class="w">Package</span> <span class="w">lib</span>/<span class="w">Config</span>.<span class="w">pm</span>.</li><li>   <span class="w">entering</span> <span class="w">Config::TIEHASH</span></li><li>   <span class="w">entering</span> <span class="w">Exporter::import</span></li><li>    <span class="w">entering</span> <span class="w">Exporter::export</span></li><li>  <span class="w">entering</span> <span class="w">Config::myconfig</span></li><li>   <span class="w">entering</span> <span class="w">Config::FETCH</span></li><li>   <span class="w">entering</span> <span class="w">Config::FETCH</span></li><li>   <span class="w">entering</span> <span class="w">Config::FETCH</span></li><li>   <span class="w">entering</span> <span class="w">Config::FETCH</span></li></ol></pre></dd>
<dt>2</dt><dd>
<pre class="verbatim"><ol><li>  <span class="w">entering</span> <span class="w">main::BEGIN</span></li><li>   <span class="w">entering</span> <span class="w">Config::BEGIN</span></li><li>    <span class="w">Package</span> <span class="w">lib</span>/<span class="w">Exporter</span>.<span class="w">pm</span>.</li><li>    <span class="w">Package</span> <span class="w">lib</span>/<span class="w">Carp</span>.<span class="w">pm</span>.</li><li>   <span class="w">exited</span> <span class="w">Config::BEGIN</span></li><li>   <span class="w">Package</span> <span class="w">lib</span>/<span class="w">Config</span>.<span class="w">pm</span>.</li><li>   <span class="w">entering</span> <span class="w">Config::TIEHASH</span></li><li>   <span class="w">exited</span> <span class="w">Config::TIEHASH</span></li><li>   <span class="w">entering</span> <span class="w">Exporter::import</span></li><li>    <span class="w">entering</span> <span class="w">Exporter::export</span></li><li>    <span class="w">exited</span> <span class="w">Exporter::export</span></li><li>   <span class="w">exited</span> <span class="w">Exporter::import</span></li><li>  <span class="w">exited</span> <span class="w">main::BEGIN</span></li><li>  <span class="w">entering</span> <span class="w">Config::myconfig</span></li><li>   <span class="w">entering</span> <span class="w">Config::FETCH</span></li><li>   <span class="w">exited</span> <span class="w">Config::FETCH</span></li><li>   <span class="w">entering</span> <span class="w">Config::FETCH</span></li><li>   <span class="w">exited</span> <span class="w">Config::FETCH</span></li><li>   <span class="w">entering</span> <span class="w">Config::FETCH</span></li></ol></pre></dd>
<dt>3</dt><dd>
<pre class="verbatim"><ol><li>  in  $=main::BEGIN() from /dev/null:0</li><li>   in  $=Config::BEGIN() from lib/Config.pm:2</li><li>    Package lib/Exporter.pm.</li><li>    Package lib/Carp.pm.</li><li>   Package lib/Config.pm.</li><li>   in  $=Config::TIEHASH('Config') from lib/Config.pm:644</li><li>   in  $=Exporter::import('Config', 'myconfig', 'config_vars') from /dev/null:0</li><li>    in  $=Exporter::export('Config', 'main', 'myconfig', 'config_vars') from li</li><li>  in  @=Config::myconfig() from /dev/null:0</li><li>   in  $=Config::FETCH(ref(Config), 'package') from lib/Config.pm:574</li><li>   in  $=Config::FETCH(ref(Config), 'baserev') from lib/Config.pm:574</li><li>   in  $=Config::FETCH(ref(Config), 'PERL_VERSION') from lib/Config.pm:574</li><li>   in  $=Config::FETCH(ref(Config), 'PERL_SUBVERSION') from lib/Config.pm:574</li><li>   in  $=Config::FETCH(ref(Config), 'osname') from lib/Config.pm:574</li><li>   in  $=Config::FETCH(ref(Config), 'osvers') from lib/Config.pm:574</li></ol></pre></dd>
<dt>4</dt><dd>
<pre class="verbatim"><ol><li>  in  $=main::BEGIN() from /dev/null:0</li><li>   in  $=Config::BEGIN() from lib/Config.pm:2</li><li>    Package lib/Exporter.pm.</li><li>    Package lib/Carp.pm.</li><li>   out $=Config::BEGIN() from lib/Config.pm:0</li><li>   Package lib/Config.pm.</li><li>   in  $=Config::TIEHASH('Config') from lib/Config.pm:644</li><li>   out $=Config::TIEHASH('Config') from lib/Config.pm:644</li><li>   in  $=Exporter::import('Config', 'myconfig', 'config_vars') from /dev/null:0</li><li>    in  $=Exporter::export('Config', 'main', 'myconfig', 'config_vars') from lib/</li><li>    out $=Exporter::export('Config', 'main', 'myconfig', 'config_vars') from lib/</li><li>   out $=Exporter::import('Config', 'myconfig', 'config_vars') from /dev/null:0</li><li>  out $=main::BEGIN() from /dev/null:0</li><li>  in  @=Config::myconfig() from /dev/null:0</li><li>   in  $=Config::FETCH(ref(Config), 'package') from lib/Config.pm:574</li><li>   out $=Config::FETCH(ref(Config), 'package') from lib/Config.pm:574</li><li>   in  $=Config::FETCH(ref(Config), 'baserev') from lib/Config.pm:574</li><li>   out $=Config::FETCH(ref(Config), 'baserev') from lib/Config.pm:574</li><li>   in  $=Config::FETCH(ref(Config), 'PERL_VERSION') from lib/Config.pm:574</li><li>   out $=Config::FETCH(ref(Config), 'PERL_VERSION') from lib/Config.pm:574</li><li>   in  $=Config::FETCH(ref(Config), 'PERL_SUBVERSION') from lib/Config.pm:574</li></ol></pre></dd>
<dt>5</dt><dd>
<pre class="verbatim"><ol><li>  in  $=main::BEGIN() from /dev/null:0</li><li>   in  $=Config::BEGIN() from lib/Config.pm:2</li><li>    Package lib/Exporter.pm.</li><li>    Package lib/Carp.pm.</li><li>   out $=Config::BEGIN() from lib/Config.pm:0</li><li>   Package lib/Config.pm.</li><li>   in  $=Config::TIEHASH('Config') from lib/Config.pm:644</li><li>   out $=Config::TIEHASH('Config') from lib/Config.pm:644</li><li>   in  $=Exporter::import('Config', 'myconfig', 'config_vars') from /dev/null:0</li><li>    in  $=Exporter::export('Config', 'main', 'myconfig', 'config_vars') from lib/E</li><li>    out $=Exporter::export('Config', 'main', 'myconfig', 'config_vars') from lib/E</li><li>   out $=Exporter::import('Config', 'myconfig', 'config_vars') from /dev/null:0</li><li>  out $=main::BEGIN() from /dev/null:0</li><li>  in  @=Config::myconfig() from /dev/null:0</li><li>   in  $=Config::FETCH('Config=HASH(0x1aa444)', 'package') from lib/Config.pm:574</li><li>   out $=Config::FETCH('Config=HASH(0x1aa444)', 'package') from lib/Config.pm:574</li><li>   in  $=Config::FETCH('Config=HASH(0x1aa444)', 'baserev') from lib/Config.pm:574</li><li>   out $=Config::FETCH('Config=HASH(0x1aa444)', 'baserev') from lib/Config.pm:574</li></ol></pre></dd>
<dt>6</dt><dd>
<pre class="verbatim"><ol><li>  in  $=CODE(0x15eca4)() from /dev/null:0</li><li>   in  $=CODE(0x182528)() from lib/Config.pm:2</li><li>    Package lib/Exporter.pm.</li><li>   out $=CODE(0x182528)() from lib/Config.pm:0</li><li>   scalar context return from CODE(0x182528): undef</li><li>   Package lib/Config.pm.</li><li>   in  $=Config::TIEHASH('Config') from lib/Config.pm:628</li><li>   out $=Config::TIEHASH('Config') from lib/Config.pm:628</li><li>   scalar context return from Config::TIEHASH:   empty hash</li><li>   in  $=Exporter::import('Config', 'myconfig', 'config_vars') from /dev/null:0</li><li>    in  $=Exporter::export('Config', 'main', 'myconfig', 'config_vars') from lib/Exporter.pm:171</li><li>    out $=Exporter::export('Config', 'main', 'myconfig', 'config_vars') from lib/Exporter.pm:171</li><li>    scalar context return from Exporter::export: ''</li><li>   out $=Exporter::import('Config', 'myconfig', 'config_vars') from /dev/null:0</li><li>   scalar context return from Exporter::import: ''</li></ol></pre></dd>
</dl>
<p>In all cases shown above, the line indentation shows the call tree.
If bit 2 of <code class="inline"><span class="w">frame</span></code>
 is set, a line is printed on exit from a
subroutine as well.  If bit 4 is set, the arguments are printed
along with the caller info.  If bit 8 is set, the arguments are
printed even if they are tied or references.  If bit 16 is set, the
return value is printed, too.</p>
<p>When a package is compiled, a line like this</p>
<pre class="verbatim"><ol><li>    <span class="w">Package</span> <span class="w">lib</span>/<span class="w">Carp</span>.<span class="w">pm</span>.</li></ol></pre><p>is printed with proper indentation.</p>
<a name="Debugging-Regular-Expressions"></a><h1>Debugging Regular Expressions</h1>
<p>There are two ways to enable debugging output for regular expressions.</p>
<p>If your perl is compiled with <code class="inline">-<span class="w">DDEBUGGING</span></code>
, you may use the
<b>-Dr</b> flag on the command line.</p>
<p>Otherwise, one can <code class="inline"><a class="l_k" href="functions/use.html">use</a> <span class="w">re</span> <span class="q">&#39;debug&#39;</span></code>
, which has effects at
compile time and run time.  Since Perl 5.9.5, this pragma is lexically
scoped.</p>
<a name="Compile-time-Output"></a><h2>Compile-time Output</h2>
<p>The debugging output at compile time looks like this:</p>
<pre class="verbatim"><ol><li>  Compiling REx `[bc]d(ef*g)+h[ij]k$'</li><li>  size 45 Got 364 bytes for offset annotations.</li><li>  first at 1</li><li>  rarest char g at 0</li><li>  rarest char d at 0</li><li>     1: ANYOF[bc](12)</li><li>    12: EXACT &lt;d&gt;(14)</li><li>    14: CURLYX[0] {1,32767}(28)</li><li>    16:   OPEN1(18)</li><li>    18:     EXACT &lt;e&gt;(20)</li><li>    20:     STAR(23)</li><li>    21:       EXACT &lt;f&gt;(0)</li><li>    23:     EXACT &lt;g&gt;(25)</li><li>    25:   CLOSE1(27)</li><li>    27:   WHILEM[1/1](0)</li><li>    28: NOTHING(29)</li><li>    29: EXACT &lt;h&gt;(31)</li><li>    31: ANYOF[ij](42)</li><li>    42: EXACT &lt;k&gt;(44)</li><li>    44: EOL(45)</li><li>    45: END(0)</li><li>  anchored `de' at 1 floating `gh' at 3..2147483647 (checking floating) </li><li>        stclass `ANYOF[bc]' minlen 7 </li><li>  Offsets: [45]</li><li>  	1[4] 0[0] 0[0] 0[0] 0[0] 0[0] 0[0] 0[0] 0[0] 0[0] 0[0] 5[1]</li><li>  	0[0] 12[1] 0[0] 6[1] 0[0] 7[1] 0[0] 9[1] 8[1] 0[0] 10[1] 0[0]</li><li>  	11[1] 0[0] 12[0] 12[0] 13[1] 0[0] 14[4] 0[0] 0[0] 0[0] 0[0]</li><li>  	0[0] 0[0] 0[0] 0[0] 0[0] 0[0] 18[1] 0[0] 19[1] 20[0]  </li><li>  Omitting $` $&amp; $' support.</li></ol></pre><p>The first line shows the pre-compiled form of the regex.  The second
shows the size of the compiled form (in arbitrary units, usually
4-byte words) and the total number of bytes allocated for the
offset/length table, usually 4+<code class="inline"><span class="w">size</span></code>
*8.  The next line shows the
label <i>id</i> of the first node that does a match.</p>
<p>The</p>
<pre class="verbatim"><ol><li>  anchored `de' at 1 floating `gh' at 3..2147483647 (checking floating) </li><li>        stclass `ANYOF[bc]' minlen 7</li></ol></pre><p>line (split into two lines above) contains optimizer
information.  In the example shown, the optimizer found that the match 
should contain a substring <code class="inline"><span class="w">de</span></code>
 at offset 1, plus substring <code class="inline"><span class="w">gh</span></code>

at some offset between 3 and infinity.  Moreover, when checking for
these substrings (to abandon impossible matches quickly), Perl will check
for the substring <code class="inline"><span class="w">gh</span></code>
 before checking for the substring <code class="inline"><span class="w">de</span></code>
.  The
optimizer may also use the knowledge that the match starts (at the
<code class="inline"><span class="w">first</span></code>
 <i>id</i>) with a character class, and no string 
shorter than 7 characters can possibly match.</p>
<p>The fields of interest which may appear in this line are</p>
<ul>
<li><a name="anchored-_STRING_-at-_POS_"></a><b><code class="inline"><span class="w">anchored</span></code>
 <i>STRING</i> <code class="inline"><span class="w">at</span></code>
 <i>POS</i></b>
</li>
<li><a name="floating-_STRING_-at-_POS1..POS2_"></a><b><code class="inline"><span class="w">floating</span></code>
 <i>STRING</i> <code class="inline"><span class="w">at</span></code>
 <i>POS1..POS2</i></b>
<p>See above.</p>
</li>
<li><a name="matching-floating%2fanchored"></a><b><code class="inline"><span class="w">matching</span> <span class="w">floating</span>/<span class="w">anchored</span></code>
</b>
<p>Which substring to check first.</p>
</li>
<li><a name="minlen"></a><b><code class="inline"><span class="w">minlen</span></code>
</b>
<p>The minimal length of the match.</p>
</li>
<li><a name="stclass-_TYPE_"></a><b><code class="inline"><span class="w">stclass</span></code>
 <i>TYPE</i></b>
<p>Type of first matching node.</p>
</li>
<li><a name="noscan"></a><b><code class="inline"><span class="w">noscan</span></code>
</b>
<p>Don't scan for the found substrings.</p>
</li>
<li><a name="isall"></a><b><code class="inline"><span class="w">isall</span></code>
</b>
<p>Means that the optimizer information is all that the regular
expression contains, and thus one does not need to enter the regex engine at
all.</p>
</li>
<li><a name="GPOS"></a><b><code class="inline"><span class="w">GPOS</span></code>
</b>
<p>Set if the pattern contains <code class="inline">\<span class="w">G</span></code>
.</p>
</li>
<li><a name="plus"></a><b><code class="inline"><span class="w">plus</span></code>
</b>
<p>Set if the pattern starts with a repeated char (as in <code class="inline">x+y</code>).</p>
</li>
<li><a name="implicit"></a><b><code class="inline"><span class="w">implicit</span></code>
</b>
<p>Set if the pattern starts with <code class="inline">.*</code>.</p>
</li>
<li><a name="with-eval"></a><b><code class="inline"><span class="w">with</span> <a class="l_k" href="functions/eval.html">eval</a></code>
</b>
<p>Set if the pattern contain eval-groups, such as <code class="inline">(?{ code })</code> and
<code class="inline"><span class="s">(</span><span class="q">??</span><span class="s">{</span> <span class="w">code</span> <span class="s">}</span><span class="s">)</span></code>
.</p>
</li>
<li><a name="anchored(TYPE)"></a><b><code class="inline"><span class="i">anchored</span><span class="s">(</span><span class="w">TYPE</span><span class="s">)</span></code>
</b>
<p>If the pattern may match only at a handful of places, with <code class="inline"><span class="w">TYPE</span></code>

being <code class="inline"><span class="w">BOL</span></code>
, <code class="inline"><span class="w">MBOL</span></code>
, or <code class="inline"><span class="w">GPOS</span></code>
.  See the table below.</p>
</li>
</ul>
<p>If a substring is known to match at end-of-line only, it may be
followed by <code class="inline"><span class="i">$</span></code>
, as in <code class="inline">floating `k'$</code>.</p>
<p>The optimizer-specific information is used to avoid entering (a slow) regex
engine on strings that will not definitely match.  If the <code class="inline"><span class="w">isall</span></code>
 flag
is set, a call to the regex engine may be avoided even when the optimizer
found an appropriate place for the match.</p>
<p>Above the optimizer section is the list of <i>nodes</i> of the compiled
form of the regex.  Each line has format</p>
<p><code class="inline">   </code>
<i>id</i>: <i>TYPE</i> <i>OPTIONAL-INFO</i> (<i>next-id</i>)</p>
<a name="Types-of-Nodes"></a><h2>Types of Nodes</h2>
<p>Here are the possible types, with short descriptions:</p>
<pre class="verbatim"><ol><li> <span class="c"># TYPE arg-description [num-args] [longjump-len] DESCRIPTION</span></li><li></li><li> <span class="c"># Exit points</span></li><li> END   <a class="l_k" href="functions/no.html">no</a>        <span class="w">End</span> <span class="w">of</span> <span class="w">program</span>.</li><li> <span class="w">SUCCEED</span>   <a class="l_k" href="functions/no.html">no</a>        <span class="w">Return</span> <span class="w">from</span> <span class="w">a</span> <span class="w">subroutine</span><span class="cm">,</span> <span class="w">basically</span>.</li><li></li><li> <span class="c"># Anchors:</span></li><li></li><li> <span class="w">BOL</span>        <a class="l_k" href="functions/no.html">no</a>      <span class="w">Match</span> <span class="q">&quot;&quot;</span> <span class="w">at</span> <span class="w">beginning</span> <span class="w">of</span> <span class="w">line</span>.</li><li> <span class="w">MBOL</span>       <a class="l_k" href="functions/no.html">no</a>      <span class="w">Same</span><span class="cm">,</span> <span class="w">assuming</span> <span class="w">multiline</span>.</li><li> <span class="w">SBOL</span>       <a class="l_k" href="functions/no.html">no</a>      <span class="w">Same</span><span class="cm">,</span> <span class="w">assuming</span> <span class="w">singleline</span>.</li><li> <span class="w">EOS</span>        <a class="l_k" href="functions/no.html">no</a>      <span class="w">Match</span> <span class="q">&quot;&quot;</span> <span class="w">at</span> <span class="w">end</span> <span class="w">of</span> <span class="w">string</span>.</li><li> <span class="w">EOL</span>        <a class="l_k" href="functions/no.html">no</a>      <span class="w">Match</span> <span class="q">&quot;&quot;</span> <span class="w">at</span> <span class="w">end</span> <span class="w">of</span> <span class="w">line</span>.</li><li> <span class="w">MEOL</span>       <a class="l_k" href="functions/no.html">no</a>      <span class="w">Same</span><span class="cm">,</span> <span class="w">assuming</span> <span class="w">multiline</span>.</li><li> <span class="w">SEOL</span>       <a class="l_k" href="functions/no.html">no</a>      <span class="w">Same</span><span class="cm">,</span> <span class="w">assuming</span> <span class="w">singleline</span>.</li><li> <span class="w">BOUND</span>      <a class="l_k" href="functions/no.html">no</a>      <span class="w">Match</span> <span class="q">&quot;&quot;</span> <span class="w">at</span> <span class="w">any</span> <span class="w">word</span> <span class="w">boundary</span> <span class="w">using</span> <span class="w">native</span> <span class="w">charset</span></li><li>                    <span class="w">semantics</span> for <span class="w">non</span>-<span class="w">utf8</span></li><li> <span class="w">BOUNDL</span>     <a class="l_k" href="functions/no.html">no</a>      <span class="w">Match</span> <span class="q">&quot;&quot;</span> <span class="w">at</span> <span class="w">any</span> <span class="w">locale</span> <span class="w">word</span> <span class="w">boundary</span></li><li> <span class="w">BOUNDU</span>     <a class="l_k" href="functions/no.html">no</a>      <span class="w">Match</span> <span class="q">&quot;&quot;</span> <span class="w">at</span> <span class="w">any</span> <span class="w">word</span> <span class="w">boundary</span> <span class="w">using</span> <span class="w">Unicode</span> <span class="w">semantics</span></li><li> <span class="w">BOUNDA</span>     <a class="l_k" href="functions/no.html">no</a>      <span class="w">Match</span> <span class="q">&quot;&quot;</span> <span class="w">at</span> <span class="w">any</span> <span class="w">word</span> <span class="w">boundary</span> <span class="w">using</span> <span class="w">ASCII</span> <span class="w">semantics</span></li><li> <span class="w">NBOUND</span>     <a class="l_k" href="functions/no.html">no</a>      <span class="w">Match</span> <span class="q">&quot;&quot;</span> <span class="w">at</span> <span class="w">any</span> <span class="w">word</span> <span class="w">non</span>-<span class="w">boundary</span> <span class="w">using</span> <span class="w">native</span> <span class="w">charset</span></li><li>                    <span class="w">semantics</span> for <span class="w">non</span>-<span class="w">utf8</span></li><li> <span class="w">NBOUNDL</span>    <a class="l_k" href="functions/no.html">no</a>      <span class="w">Match</span> <span class="q">&quot;&quot;</span> <span class="w">at</span> <span class="w">any</span> <span class="w">locale</span> <span class="w">word</span> <span class="w">non</span>-<span class="w">boundary</span></li><li> <span class="w">NBOUNDU</span>    <a class="l_k" href="functions/no.html">no</a>      <span class="w">Match</span> <span class="q">&quot;&quot;</span> <span class="w">at</span> <span class="w">any</span> <span class="w">word</span> <span class="w">non</span>-<span class="w">boundary</span> <span class="w">using</span> <span class="w">Unicode</span> <span class="w">semantics</span></li><li> <span class="w">NBOUNDA</span>    <a class="l_k" href="functions/no.html">no</a>      <span class="w">Match</span> <span class="q">&quot;&quot;</span> <span class="w">at</span> <span class="w">any</span> <span class="w">word</span> <span class="w">non</span>-<span class="w">boundary</span> <span class="w">using</span> <span class="w">ASCII</span> <span class="w">semantics</span></li><li> <span class="w">GPOS</span>       <a class="l_k" href="functions/no.html">no</a>      <span class="w">Matches</span> <span class="w">where</span> <a class="l_k" href="functions/last.html">last</a> <span class="q">m//g</span> <span class="w">left</span> <span class="w">off</span>.</li><li></li><li> <span class="c"># [Special] alternatives:</span></li><li></li><li> <span class="w">REG_ANY</span>    <a class="l_k" href="functions/no.html">no</a>      <span class="w">Match</span> <span class="w">any</span> <span class="w">one</span> <span class="w">character</span> <span class="s">(</span><span class="w">except</span> <span class="w">newline</span><span class="s">)</span>.</li><li> <span class="w">SANY</span>       <a class="l_k" href="functions/no.html">no</a>      <span class="w">Match</span> <span class="w">any</span> <span class="w">one</span> <span class="w">character</span>.</li><li> <span class="w">CANY</span>       <a class="l_k" href="functions/no.html">no</a>      <span class="w">Match</span> <span class="w">any</span> <span class="w">one</span> <span class="w">byte</span>.</li><li> <span class="w">ANYOF</span>      <span class="w">sv</span>      <span class="w">Match</span> <span class="w">character</span> <span class="w">in</span> <span class="s">(</span>or not <span class="w">in</span><span class="s">)</span> <span class="w">this</span> <span class="w">class</span><span class="cm">,</span> <span class="w">single</span> <span class="w">char</span></li><li>                    <span class="w">match</span> <span class="w">only</span></li><li> <span class="w">ANYOFV</span>     <span class="w">sv</span>      <span class="w">Match</span> <span class="w">character</span> <span class="w">in</span> <span class="s">(</span>or not <span class="w">in</span><span class="s">)</span> <span class="w">this</span> <span class="w">class</span><span class="cm">,</span> <span class="w">can</span></li><li>                    <span class="w">match</span>-<span class="w">multiple</span> <span class="w">chars</span></li><li> <span class="w">ALNUM</span>      <a class="l_k" href="functions/no.html">no</a>      <span class="w">Match</span> <span class="w">any</span> <span class="w">alphanumeric</span> <span class="w">character</span> <span class="w">using</span> <span class="w">native</span> <span class="w">charset</span></li><li>                    <span class="w">semantics</span> for <span class="w">non</span>-<span class="w">utf8</span></li><li> <span class="w">ALNUML</span>     <a class="l_k" href="functions/no.html">no</a>      <span class="w">Match</span> <span class="w">any</span> <span class="w">alphanumeric</span> <span class="w">char</span> <span class="w">in</span> <span class="w">locale</span></li><li> <span class="w">ALNUMU</span>     <a class="l_k" href="functions/no.html">no</a>      <span class="w">Match</span> <span class="w">any</span> <span class="w">alphanumeric</span> <span class="w">char</span> <span class="w">using</span> <span class="w">Unicode</span> <span class="w">semantics</span></li><li> <span class="w">ALNUMA</span>     <a class="l_k" href="functions/no.html">no</a>      <span class="w">Match</span> <span class="s">[</span><span class="w">A</span>-<span class="w">Za</span>-<span class="w">z_0</span>-<span class="n">9</span><span class="s">]</span></li><li> <span class="w">NALNUM</span>     <a class="l_k" href="functions/no.html">no</a>      <span class="w">Match</span> <span class="w">any</span> <span class="w">non</span>-<span class="w">alphanumeric</span> <span class="w">character</span> <span class="w">using</span> <span class="w">native</span> <span class="w">charset</span></li><li>                    <span class="w">semantics</span> for <span class="w">non</span>-<span class="w">utf8</span></li><li> <span class="w">NALNUML</span>    <a class="l_k" href="functions/no.html">no</a>      <span class="w">Match</span> <span class="w">any</span> <span class="w">non</span>-<span class="w">alphanumeric</span> <span class="w">char</span> <span class="w">in</span> <span class="w">locale</span></li><li> <span class="w">NALNUMU</span>    <a class="l_k" href="functions/no.html">no</a>      <span class="w">Match</span> <span class="w">any</span> <span class="w">non</span>-<span class="w">alphanumeric</span> <span class="w">char</span> <span class="w">using</span> <span class="w">Unicode</span> <span class="w">semantics</span></li><li> <span class="w">NALNUMA</span>    <a class="l_k" href="functions/no.html">no</a>      <span class="w">Match</span> <span class="s">[</span>^<span class="w">A</span>-<span class="w">Za</span>-<span class="w">z_0</span>-<span class="n">9</span><span class="s">]</span></li><li> <span class="w">SPACE</span>      <a class="l_k" href="functions/no.html">no</a>      <span class="w">Match</span> <span class="w">any</span> <span class="w">whitespace</span> <span class="w">character</span> <span class="w">using</span> <span class="w">native</span> <span class="w">charset</span></li><li>                    <span class="w">semantics</span> for <span class="w">non</span>-<span class="w">utf8</span></li><li> <span class="w">SPACEL</span>     <a class="l_k" href="functions/no.html">no</a>      <span class="w">Match</span> <span class="w">any</span> <span class="w">whitespace</span> <span class="w">char</span> <span class="w">in</span> <span class="w">locale</span></li><li> <span class="w">SPACEU</span>     <a class="l_k" href="functions/no.html">no</a>      <span class="w">Match</span> <span class="w">any</span> <span class="w">whitespace</span> <span class="w">char</span> <span class="w">using</span> <span class="w">Unicode</span> <span class="w">semantics</span></li><li> <span class="w">SPACEA</span>     <a class="l_k" href="functions/no.html">no</a>      <span class="w">Match</span> <span class="s">[</span> \<span class="w">t</span>\<span class="w">n</span>\<span class="w">f</span>\<span class="w">r</span><span class="s">]</span></li><li> <span class="w">NSPACE</span>     <a class="l_k" href="functions/no.html">no</a>      <span class="w">Match</span> <span class="w">any</span> <span class="w">non</span>-<span class="w">whitespace</span> <span class="w">character</span> <span class="w">using</span> <span class="w">native</span> <span class="w">charset</span></li><li>                    <span class="w">semantics</span> for <span class="w">non</span>-<span class="w">utf8</span></li><li> <span class="w">NSPACEL</span>    <a class="l_k" href="functions/no.html">no</a>      <span class="w">Match</span> <span class="w">any</span> <span class="w">non</span>-<span class="w">whitespace</span> <span class="w">char</span> <span class="w">in</span> <span class="w">locale</span></li><li> <span class="w">NSPACEU</span>    <a class="l_k" href="functions/no.html">no</a>      <span class="w">Match</span> <span class="w">any</span> <span class="w">non</span>-<span class="w">whitespace</span> <span class="w">char</span> <span class="w">using</span> <span class="w">Unicode</span> <span class="w">semantics</span></li><li> <span class="w">NSPACEA</span>    <a class="l_k" href="functions/no.html">no</a>      <span class="w">Match</span> <span class="s">[</span>^ \<span class="w">t</span>\<span class="w">n</span>\<span class="w">f</span>\<span class="w">r</span><span class="s">]</span></li><li> <span class="w">DIGIT</span>      <a class="l_k" href="functions/no.html">no</a>      <span class="w">Match</span> <span class="w">any</span> <span class="w">numeric</span> <span class="w">character</span> <span class="w">using</span> <span class="w">native</span> <span class="w">charset</span> <span class="w">semantics</span></li><li>                    for <span class="w">non</span>-<span class="w">utf8</span></li><li> <span class="w">DIGITL</span>     <a class="l_k" href="functions/no.html">no</a>      <span class="w">Match</span> <span class="w">any</span> <span class="w">numeric</span> <span class="w">character</span> <span class="w">in</span> <span class="w">locale</span></li><li> <span class="w">DIGITA</span>     <a class="l_k" href="functions/no.html">no</a>      <span class="w">Match</span> <span class="s">[</span><span class="n">0</span>-<span class="n">9</span><span class="s">]</span></li><li> <span class="w">NDIGIT</span>     <a class="l_k" href="functions/no.html">no</a>      <span class="w">Match</span> <span class="w">any</span> <span class="w">non</span>-<span class="w">numeric</span> <span class="w">character</span> <span class="w">using</span> <span class="w">native</span> <span class="w">charset</span></li><li> <span class="w">i</span>                  <span class="w">semantics</span> for <span class="w">non</span>-<span class="w">utf8</span></li><li> <span class="w">NDIGITL</span>    <a class="l_k" href="functions/no.html">no</a>      <span class="w">Match</span> <span class="w">any</span> <span class="w">non</span>-<span class="w">numeric</span> <span class="w">character</span> <span class="w">in</span> <span class="w">locale</span></li><li> <span class="w">NDIGITA</span>    <a class="l_k" href="functions/no.html">no</a>      <span class="w">Match</span> <span class="s">[</span>^<span class="n">0</span>-<span class="n">9</span><span class="s">]</span></li><li> <span class="w">CLUMP</span>      <a class="l_k" href="functions/no.html">no</a>      <span class="w">Match</span> <span class="w">any</span> <span class="w">extended</span> <span class="w">grapheme</span> <span class="w">cluster</span> <span class="w">sequence</span></li><li></li><li> <span class="c"># Alternation</span></li><li></li><li> <span class="c"># BRANCH        The set of branches constituting a single choice are hooked</span></li><li> <span class="c">#               together with their &quot;next&quot; pointers, since precedence prevents</span></li><li> <span class="c">#               anything being concatenated to any individual branch.  The</span></li><li> <span class="c">#               &quot;next&quot; pointer of the last BRANCH in a choice points to the</span></li><li> <span class="c">#               thing following the whole choice.  This is also where the</span></li><li> <span class="c">#               final &quot;next&quot; pointer of each individual branch points; each</span></li><li> <span class="c">#               branch starts with the operand node of a BRANCH node.</span></li><li> <span class="c">#</span></li><li> <span class="w">BRANCH</span>	<span class="w">node</span>        <span class="w">Match</span> <span class="w">this</span> <span class="w">alternative</span><span class="cm">,</span> or <span class="w">the</span> <a class="l_k" href="functions/next.html">next</a>...</li><li></li><li> <span class="c"># Back pointer</span></li><li></li><li> <span class="c"># BACK          Normal &quot;next&quot; pointers all implicitly point forward; BACK</span></li><li> <span class="c">#               exists to make loop structures possible.</span></li><li> <span class="c"># not used</span></li><li> <span class="w">BACK</span>       <a class="l_k" href="functions/no.html">no</a>      <span class="w">Match</span> <span class="q">&quot;&quot;</span><span class="cm">,</span> <span class="q">&quot;next&quot;</span> <span class="w">ptr</span> <span class="w">points</span> <span class="w">backward</span>.</li><li></li><li> <span class="c"># Literals</span></li><li></li><li> <span class="w">EXACT</span>      <span class="w">str</span>     <span class="w">Match</span> <span class="w">this</span> <span class="w">string</span> <span class="s">(</span><span class="w">preceded</span> <span class="w">by</span> <a class="l_k" href="functions/length.html">length</a><span class="s">)</span>.</li><li> <span class="w">EXACTF</span>     <span class="w">str</span>     <span class="w">Match</span> <span class="w">this</span> <span class="w">string</span><span class="cm">,</span> <span class="w">folded</span><span class="cm">,</span> <span class="w">native</span> <span class="w">charset</span> <span class="w">semantics</span> for</li><li>                    <span class="w">non</span>-<span class="w">utf8</span> <span class="s">(</span><span class="w">prec</span>. <span class="w">by</span> <a class="l_k" href="functions/length.html">length</a><span class="s">)</span>.</li><li> <span class="w">EXACTFL</span>    <span class="w">str</span>     <span class="w">Match</span> <span class="w">this</span> <span class="w">string</span><span class="cm">,</span> <span class="w">folded</span> <span class="w">in</span> <span class="w">locale</span> <span class="s">(</span><span class="w">w</span>/<span class="w">len</span><span class="s">)</span>.</li><li> <span class="w">EXACTFU</span>    <span class="w">str</span>     <span class="w">Match</span> <span class="w">this</span> <span class="w">string</span><span class="cm">,</span> <span class="w">folded</span><span class="cm">,</span> <span class="w">Unicode</span> <span class="w">semantics</span> for <span class="w">non</span>-<span class="i">utf8</span></li><li>                    <span class="s">(</span><span class="w">prec</span>. <span class="w">by</span> <a class="l_k" href="functions/length.html">length</a><span class="s">)</span>.</li><li> <span class="w">EXACTFA</span>    <span class="w">str</span>	    <span class="w">Match</span> <span class="w">this</span> <span class="w">string</span><span class="cm">,</span> <span class="w">folded</span><span class="cm">,</span> <span class="w">Unicode</span> <span class="w">semantics</span> for <span class="w">non</span>-<span class="w">utf8</span><span class="cm">,</span></li><li>                    <span class="w">but</span> <a class="l_k" href="functions/no.html">no</a> <span class="w">ASCII</span>-<span class="w">range</span> <span class="w">character</span> <span class="w">matches</span> <span class="w">outside</span> <span class="w">ASCII</span> <span class="s">(</span><span class="w">prec</span>.</li><li>                    <span class="w">by</span> <a class="l_k" href="functions/length.html">length</a><span class="s">)</span><span class="cm">,</span>.</li><li></li><li> <span class="c"># Do nothing types</span></li><li></li><li> <span class="w">NOTHING</span>    <a class="l_k" href="functions/no.html">no</a>        <span class="w">Match</span> <span class="w">empty</span> <span class="w">string</span>.</li><li> <span class="c"># A variant of above which delimits a group, thus stops optimizations</span></li><li> <span class="w">TAIL</span>       <a class="l_k" href="functions/no.html">no</a>        <span class="w">Match</span> <span class="w">empty</span> <span class="w">string</span>. <span class="w">Can</span> <span class="w">jump</span> <span class="w">here</span> <span class="w">from</span> <span class="w">outside</span>.</li><li></li><li> <span class="c"># Loops</span></li><li></li><li> <span class="c"># STAR,PLUS    &#39;?&#39;, and complex &#39;*&#39; and &#39;+&#39;, are implemented as circular</span></li><li> <span class="c">#               BRANCH structures using BACK.  Simple cases (one character</span></li><li> <span class="c">#               per match) are implemented with STAR and PLUS for speed</span></li><li> <span class="c">#               and to minimize recursive plunges.</span></li><li> <span class="c">#</span></li><li> <span class="w">STAR</span>       <span class="w">node</span>    <span class="w">Match</span> <span class="w">this</span> <span class="s">(</span><span class="w">simple</span><span class="s">)</span> <span class="w">thing</span> <span class="n">0</span> or <span class="w">more</span> <a class="l_k" href="functions/times.html">times</a>.</li><li> <span class="w">PLUS</span>       <span class="w">node</span>    <span class="w">Match</span> <span class="w">this</span> <span class="s">(</span><span class="w">simple</span><span class="s">)</span> <span class="w">thing</span> <span class="n">1</span> or <span class="w">more</span> <a class="l_k" href="functions/times.html">times</a>.</li><li></li><li> <span class="w">CURLY</span>      <span class="w">sv</span> <span class="n">2</span>    <span class="w">Match</span> <span class="w">this</span> <span class="w">simple</span> <span class="w">thing</span> <span class="s">{</span><span class="w">n</span><span class="cm">,</span><span class="q">m} times.</span></li><li> <span class="q"> CURLYN     no 2    Capture next-after-this simple thing</span></li><li> <span class="q"> CURLYM     no 2    Capture this medium-complex thing {n,m}</span> <a class="l_k" href="functions/times.html">times</a>.</li><li> <span class="w">CURLYX</span>     <span class="w">sv</span> <span class="n">2</span>    <span class="w">Match</span> <span class="w">this</span> <span class="w">complex</span> <span class="w">thing</span> <span class="s">{</span><span class="w">n</span><span class="cm">,</span><span class="q">m} times.</span></li><li></li><li> <span class="q"> # This terminator creates a loop structure for CURLYX</span></li><li> <span class="q"> WHILEM     no      Do curly processing and see if rest matches.</span></li><li></li><li> <span class="q"> # Buffer related</span></li><li></li><li> <span class="q"> # OPEN,CLOSE,GROUPP     ...are numbered at compile time.</span></li><li> <span class="q"> OPEN       num 1   Mark this point in input as start of #n.</span></li><li> <span class="q"> CLOSE      num 1   Analogous to OPEN.</span></li><li></li><li> <span class="q"> REF        num 1   Match some already matched string</span></li><li> <span class="q"> REFF       num 1   Match already matched string, folded using native charset</span></li><li>                    <span class="q">                    semantics for non-utf8</span></li><li> <span class="q"> REFFL      num 1   Match already matched string, folded in loc.</span></li><li> <span class="q"> REFFU      num 1   Match already matched string, folded using unicode</span></li><li>                    <span class="q">                    semantics for non-utf8</span></li><li> <span class="q"> REFFA      num 1   Match already matched string, folded using unicode</span></li><li>                    <span class="q">                    semantics for non-utf8, no mixing ASCII, non-ASCII</span></li><li></li><li> <span class="q"> # Named references.  Code in regcomp.c assumes that these all are after the</span></li><li> <span class="q"> # numbered references</span></li><li> <span class="q"> NREF       no-sv 1 Match some already matched string</span></li><li> <span class="q"> NREFF      no-sv 1 Match already matched string, folded using native charset</span></li><li>                    <span class="q">                    semantics for non-utf8</span></li><li> <span class="q"> NREFFL     no-sv 1 Match already matched string, folded in loc.</span></li><li> <span class="q"> NREFFU     num   1 Match already matched string, folded using unicode</span></li><li>                    <span class="q">                    semantics for non-utf8</span></li><li> <span class="q"> NREFFA     num   1 Match already matched string, folded using unicode</span></li><li>                    <span class="q">                    semantics for non-utf8, no mixing ASCII, non-ASCII</span></li><li></li><li> <span class="q"> IFMATCH    off 1 2 Succeeds if the following matches.</span></li><li> <span class="q"> UNLESSM    off 1 2 Fails if the following matches.</span></li><li> <span class="q"> SUSPEND    off 1 1 &quot;Independent&quot; sub-RE.</span></li><li> <span class="q"> IFTHEN     off 1 1 Switch, should be preceded by switcher.</span></li><li> <span class="q"> GROUPP     num 1   Whether the group matched.</span></li><li></li><li> <span class="q"> # Support for long RE</span></li><li></li><li> <span class="q"> LONGJMP    off 1 1 Jump far away.</span></li><li> <span class="q"> BRANCHJ    off 1 1 BRANCH with long offset.</span></li><li></li><li> <span class="q"> # The heavy worker</span></li><li></li><li> <span class="q"> EVAL       evl 1   Execute some Perl code.</span></li><li></li><li> <span class="q"> # Modifiers</span></li><li></li><li> <span class="q"> MINMOD     no      Next operator is not greedy.</span></li><li> <span class="q"> LOGICAL    no      Next opcode should set the flag only.</span></li><li></li><li> <span class="q"> # This is not used yet</span></li><li> <span class="q"> RENUM      off 1 1 Group with independently numbered parens.</span></li><li></li><li> <span class="q"> # Trie Related</span></li><li></li><li> <span class="q"> # Behave the same as A|LIST|OF|WORDS would. The &#39;..C&#39; variants have</span></li><li> <span class="q"> # inline charclass data (ascii only), the &#39;C&#39; store it in the structure.</span></li><li> <span class="q"> # NOTE: the relative order of the TRIE-like regops  is significant</span></li><li></li><li> <span class="q"> TRIE       trie 1    Match many EXACT(F[ALU]?)? at once. flags==type</span></li><li> <span class="q"> TRIEC      charclass Same as TRIE, but with embedded charclass data</span></li><li></li><li> <span class="q"> # For start classes, contains an added fail table.</span></li><li> <span class="q"> AHOCORASICK trie 1   Aho Corasick stclass. flags==type</span></li><li> <span class="q"> AHOCORASICKC charclass Same as AHOCORASICK, but with embedded charclass data</span></li><li></li><li> <span class="q"> # Regex Subroutines</span></li><li> <span class="q"> GOSUB      num/ofs 2L recurse to paren arg1 at (signed) ofs arg2</span></li><li> <span class="q"> GOSTART    no         recurse to start of pattern</span></li><li></li><li> <span class="q"> # Special conditionals</span></li><li> <span class="q"> NGROUPP    no-sv 1   Whether the group matched.</span></li><li> <span class="q"> INSUBP     num 1     Whether we are in a specific recurse.</span></li><li> <span class="q"> DEFINEP    none 1    Never execute directly.</span></li><li></li><li> <span class="q"> # Backtracking Verbs</span></li><li> <span class="q"> ENDLIKE    none      Used only for the type field of verbs</span></li><li> <span class="q"> OPFAIL     none      Same as (?!)</span></li><li> <span class="q"> ACCEPT     parno 1   Accepts the current matched string.</span></li><li></li><li></li><li> <span class="q"> # Verbs With Arguments</span></li><li> <span class="q"> VERB       no-sv 1   Used only for the type field of verbs</span></li><li> <span class="q"> PRUNE      no-sv 1   Pattern fails at this startpoint if no-backtracking through this</span></li><li> <span class="q"> MARKPOINT  no-sv 1   Push the current location for rollback by cut.</span></li><li> <span class="q"> SKIP       no-sv 1   On failure skip forward (to the mark) before retrying</span></li><li> <span class="q"> COMMIT     no-sv 1   Pattern fails outright if backtracking through this</span></li><li> <span class="q"> CUTGROUP   no-sv 1   On failure go to the next alternation in the group</span></li><li></li><li> <span class="q"> # Control what to keep in $&amp;.</span></li><li> <span class="q"> KEEPS      no        $&amp; begins here.</span></li><li></li><li> <span class="q"> # New charclass like patterns</span></li><li> <span class="q"> LNBREAK    none      generic newline pattern</span></li><li> <span class="q"> VERTWS     none      vertical whitespace         (Perl 6)</span></li><li> <span class="q"> NVERTWS    none      not vertical whitespace     (Perl 6)</span></li><li> <span class="q"> HORIZWS    none      horizontal whitespace       (Perl 6)</span></li><li> <span class="q"> NHORIZWS   none      not horizontal whitespace   (Perl 6)</span></li><li></li><li> <span class="q"> FOLDCHAR   codepoint 1 codepoint with tricky case folding properties.</span></li><li></li><li> <span class="q"> # SPECIAL  REGOPS</span></li><li></li><li> <span class="q"> # This is not really a node, but an optimized away piece of a &quot;long&quot; node.</span></li><li> <span class="q"> # To simplify debugging output, we mark it as if it were a node</span></li><li> <span class="q"> OPTIMIZED  off       Placeholder for dump.</span></li><li></li><li> <span class="q"> # Special opcode with the property that no opcode in a compiled program</span></li><li> <span class="q"> # will ever be of this type. Thus it can be used as a flag value that</span></li><li> <span class="q"> # no other opcode has been seen. END is used similarly, in that an END</span></li><li> <span class="q"> # node cant be optimized. So END implies &quot;unoptimizable&quot; and PSEUDO mean</span></li><li> <span class="q"> # &quot;not seen anything to optimize yet&quot;.</span></li><li> <span class="q"> PSEUDO     off       Pseudo opcode for internal use.</span></li></ol></pre><p>Following the optimizer information is a dump of the offset/length
table, here split across several lines:</p>
<pre class="verbatim"><ol><li>  <span class="j">Offsets:</span> <span class="s">[</span><span class="n">45</span><span class="s">]</span></li><li>  	<span class="n">1</span><span class="s">[</span><span class="n">4</span><span class="s">]</span> <span class="n">0</span><span class="s">[</span><span class="n">0</span><span class="s">]</span> <span class="n">0</span><span class="s">[</span><span class="n">0</span><span class="s">]</span> <span class="n">0</span><span class="s">[</span><span class="n">0</span><span class="s">]</span> <span class="n">0</span><span class="s">[</span><span class="n">0</span><span class="s">]</span> <span class="n">0</span><span class="s">[</span><span class="n">0</span><span class="s">]</span> <span class="n">0</span><span class="s">[</span><span class="n">0</span><span class="s">]</span> <span class="n">0</span><span class="s">[</span><span class="n">0</span><span class="s">]</span> <span class="n">0</span><span class="s">[</span><span class="n">0</span><span class="s">]</span> <span class="n">0</span><span class="s">[</span><span class="n">0</span><span class="s">]</span> <span class="n">0</span><span class="s">[</span><span class="n">0</span><span class="s">]</span> <span class="n">5</span><span class="s">[</span><span class="n">1</span><span class="s">]</span></li><li>  	<span class="n">0</span><span class="s">[</span><span class="n">0</span><span class="s">]</span> <span class="n">12</span><span class="s">[</span><span class="n">1</span><span class="s">]</span> <span class="n">0</span><span class="s">[</span><span class="n">0</span><span class="s">]</span> <span class="n">6</span><span class="s">[</span><span class="n">1</span><span class="s">]</span> <span class="n">0</span><span class="s">[</span><span class="n">0</span><span class="s">]</span> <span class="n">7</span><span class="s">[</span><span class="n">1</span><span class="s">]</span> <span class="n">0</span><span class="s">[</span><span class="n">0</span><span class="s">]</span> <span class="n">9</span><span class="s">[</span><span class="n">1</span><span class="s">]</span> <span class="n">8</span><span class="s">[</span><span class="n">1</span><span class="s">]</span> <span class="n">0</span><span class="s">[</span><span class="n">0</span><span class="s">]</span> <span class="n">10</span><span class="s">[</span><span class="n">1</span><span class="s">]</span> <span class="n">0</span><span class="s">[</span><span class="n">0</span><span class="s">]</span></li><li>  	<span class="n">11</span><span class="s">[</span><span class="n">1</span><span class="s">]</span> <span class="n">0</span><span class="s">[</span><span class="n">0</span><span class="s">]</span> <span class="n">12</span><span class="s">[</span><span class="n">0</span><span class="s">]</span> <span class="n">12</span><span class="s">[</span><span class="n">0</span><span class="s">]</span> <span class="n">13</span><span class="s">[</span><span class="n">1</span><span class="s">]</span> <span class="n">0</span><span class="s">[</span><span class="n">0</span><span class="s">]</span> <span class="n">14</span><span class="s">[</span><span class="n">4</span><span class="s">]</span> <span class="n">0</span><span class="s">[</span><span class="n">0</span><span class="s">]</span> <span class="n">0</span><span class="s">[</span><span class="n">0</span><span class="s">]</span> <span class="n">0</span><span class="s">[</span><span class="n">0</span><span class="s">]</span> <span class="n">0</span><span class="s">[</span><span class="n">0</span><span class="s">]</span></li><li>  	<span class="n">0</span><span class="s">[</span><span class="n">0</span><span class="s">]</span> <span class="n">0</span><span class="s">[</span><span class="n">0</span><span class="s">]</span> <span class="n">0</span><span class="s">[</span><span class="n">0</span><span class="s">]</span> <span class="n">0</span><span class="s">[</span><span class="n">0</span><span class="s">]</span> <span class="n">0</span><span class="s">[</span><span class="n">0</span><span class="s">]</span> <span class="n">0</span><span class="s">[</span><span class="n">0</span><span class="s">]</span> <span class="n">18</span><span class="s">[</span><span class="n">1</span><span class="s">]</span> <span class="n">0</span><span class="s">[</span><span class="n">0</span><span class="s">]</span> <span class="n">19</span><span class="s">[</span><span class="n">1</span><span class="s">]</span> <span class="n">20</span><span class="s">[</span><span class="n">0</span><span class="s">]</span></li></ol></pre><p>The first line here indicates that the offset/length table contains 45
entries.  Each entry is a pair of integers, denoted by <code class="inline"><span class="w">offset</span><span class="s">[</span><a class="l_k" href="functions/length.html">length</a><span class="s">]</span></code>
.
Entries are numbered starting with 1, so entry #1 here is <code class="inline"><span class="n">1</span><span class="s">[</span><span class="n">4</span><span class="s">]</span></code>
 and
entry #12 is <code class="inline"><span class="n">5</span><span class="s">[</span><span class="n">1</span><span class="s">]</span></code>
.  <code class="inline"><span class="n">1</span><span class="s">[</span><span class="n">4</span><span class="s">]</span></code>
 indicates that the node labeled <code class="inline">1:</code>
(the <code class="inline">1: ANYOF[bc]</code>) begins at character position 1 in the
pre-compiled form of the regex, and has a length of 4 characters.
<code class="inline"><span class="n">5</span><span class="s">[</span><span class="n">1</span><span class="s">]</span></code>
 in position 12 
indicates that the node labeled <code class="inline">12:</code>
(the <code class="inline">12: EXACT &lt;d&gt;</code>) begins at character position 5 in the
pre-compiled form of the regex, and has a length of 1 character.
<code class="inline"><span class="n">12</span><span class="s">[</span><span class="n">1</span><span class="s">]</span></code>
 in position 14 
indicates that the node labeled <code class="inline">14:</code>
(the <code class="inline">14: CURLYX[0] {1,32767}</code>) begins at character position 12 in the
pre-compiled form of the regex, and has a length of 1 character---that
is, it corresponds to the <code class="inline">+</code>
 symbol in the precompiled regex.</p>
<p><code class="inline"><span class="n">0</span><span class="s">[</span><span class="n">0</span><span class="s">]</span></code>
 items indicate that there is no corresponding node.</p>
<a name="Run-time-Output"></a><h2>Run-time Output</h2>
<p>First of all, when doing a match, one may get no run-time output even
if debugging is enabled.  This means that the regex engine was never
entered and that all of the job was therefore done by the optimizer.</p>
<p>If the regex engine was entered, the output may look like this:</p>
<pre class="verbatim"><ol><li>  Matching `[bc]d(ef*g)+h[ij]k$' against `abcdefg__gh__'</li><li>    Setting an EVAL scope, savestack=3</li><li>     2 &lt;ab&gt; &lt;cdefg__gh_&gt;    |  1: ANYOF</li><li>     3 &lt;abc&gt; &lt;defg__gh_&gt;    | 11: EXACT &lt;d&gt;</li><li>     4 &lt;abcd&gt; &lt;efg__gh_&gt;    | 13: CURLYX {1,32767}</li><li>     4 &lt;abcd&gt; &lt;efg__gh_&gt;    | 26:   WHILEM</li><li>				0 out of 1..32767  cc=effff31c</li><li>     4 &lt;abcd&gt; &lt;efg__gh_&gt;    | 15:     OPEN1</li><li>     4 &lt;abcd&gt; &lt;efg__gh_&gt;    | 17:     EXACT &lt;e&gt;</li><li>     5 &lt;abcde&gt; &lt;fg__gh_&gt;    | 19:     STAR</li><li>			     EXACT &lt;f&gt; can match 1 times out of 32767...</li><li>    Setting an EVAL scope, savestack=3</li><li>     6 &lt;bcdef&gt; &lt;g__gh__&gt;    | 22:       EXACT &lt;g&gt;</li><li>     7 &lt;bcdefg&gt; &lt;__gh__&gt;    | 24:       CLOSE1</li><li>     7 &lt;bcdefg&gt; &lt;__gh__&gt;    | 26:       WHILEM</li><li>				    1 out of 1..32767  cc=effff31c</li><li>    Setting an EVAL scope, savestack=12</li><li>     7 &lt;bcdefg&gt; &lt;__gh__&gt;    | 15:         OPEN1</li><li>     7 &lt;bcdefg&gt; &lt;__gh__&gt;    | 17:         EXACT &lt;e&gt;</li><li>       restoring \1 to 4(4)..7</li><li>				    failed, try continuation...</li><li>     7 &lt;bcdefg&gt; &lt;__gh__&gt;    | 27:         NOTHING</li><li>     7 &lt;bcdefg&gt; &lt;__gh__&gt;    | 28:         EXACT &lt;h&gt;</li><li>				    failed...</li><li>				failed...</li></ol></pre><p>The most significant information in the output is about the particular <i>node</i>
of the compiled regex that is currently being tested against the target string.
The format of these lines is</p>
<p><code class="inline">    </code>
<i>STRING-OFFSET</i> &lt;<i>PRE-STRING</i>&gt; &lt;<i>POST-STRING</i>&gt;   |<i>ID</i>:  <i>TYPE</i></p>
<p>The <i>TYPE</i> info is indented with respect to the backtracking level.
Other incidental information appears interspersed within.</p>
<a name="Debugging-Perl-Memory-Usage"></a><h1>Debugging Perl Memory Usage</h1>
<p>Perl is a profligate wastrel when it comes to memory use.  There
is a saying that to estimate memory usage of Perl, assume a reasonable
algorithm for memory allocation, multiply that estimate by 10, and
while you still may miss the mark, at least you won't be quite so
astonished.  This is not absolutely true, but may provide a good
grasp of what happens.</p>
<p>Assume that an integer cannot take less than 20 bytes of memory, a
float cannot take less than 24 bytes, a string cannot take less
than 32 bytes (all these examples assume 32-bit architectures, the
result are quite a bit worse on 64-bit architectures).  If a variable
is accessed in two of three different ways (which require an integer,
a float, or a string), the memory footprint may increase yet another
20 bytes.  A sloppy malloc(3) implementation can inflate these
numbers dramatically.</p>
<p>On the opposite end of the scale, a declaration like</p>
<pre class="verbatim"><ol><li>  sub <span class="m">foo</span><span class="sc">;</span></li></ol></pre><p>may take up to 500 bytes of memory, depending on which release of Perl
you're running.</p>
<p>Anecdotal estimates of source-to-compiled code bloat suggest an
eightfold increase.  This means that the compiled form of reasonable
(normally commented, properly indented etc.) code will take
about eight times more space in memory than the code took
on disk.</p>
<p>The <b>-DL</b> command-line switch is obsolete since circa Perl 5.6.0
(it was available only if Perl was built with <code class="inline">-<span class="w">DDEBUGGING</span></code>
).
The switch was used to track Perl's memory allocations and possible
memory leaks.  These days the use of malloc debugging tools like
<i>Purify</i> or <i>valgrind</i> is suggested instead.  See also
<a href="perlhacktips.html#PERL_MEM_LOG">PERL_MEM_LOG in perlhacktips</a>.</p>
<p>One way to find out how much memory is being used by Perl data
structures is to install the Devel::Size module from CPAN: it gives
you the minimum number of bytes required to store a particular data
structure.  Please be mindful of the difference between the size()
and total_size().</p>
<p>If Perl has been compiled using Perl's malloc you can analyze Perl
memory usage by setting $ENV{PERL_DEBUG_MSTATS}.</p>
<a name="Using-%24ENV%7bPERL_DEBUG_MSTATS%7d"></a><h2>Using <code class="inline"><span class="i">$ENV</span>{<span class="w">PERL_DEBUG_MSTATS</span>}</code>
</h2>
<p>If your perl is using Perl's malloc() and was compiled with the
necessary switches (this is the default), then it will print memory
usage statistics after compiling your code when <code class="inline"><span class="i">$ENV</span>{<span class="w">PERL_DEBUG_MSTATS</span>}
&gt; <span class="n">1</span></code>
, and before termination of the program when <code class="inline"><span class="i">$ENV</span>{<span class="w">PERL_DEBUG_MSTATS</span>} &gt;= <span class="n">1</span></code>
.  The report format is similar to
the following example:</p>
<pre class="verbatim"><ol><li>  $ PERL_DEBUG_MSTATS=2 perl -e "require Carp"</li><li>  Memory allocation statistics after compilation: (buckets 4(4)..8188(8192)</li><li>     14216 free:   130   117    28     7     9   0   2     2   1 0 0</li><li>		437    61    36     0     5</li><li>     60924 used:   125   137   161    55     7   8   6    16   2 0 1</li><li>		 74   109   304    84    20</li><li>  Total sbrk(): 77824/21:119. Odd ends: pad+heads+chain+tail: 0+636+0+2048.</li><li>  Memory allocation statistics after execution:   (buckets 4(4)..8188(8192)</li><li>     30888 free:   245    78    85    13     6   2   1     3   2 0 1</li><li>		315   162    39    42    11</li><li>    175816 used:   265   176  1112   111    26  22  11    27   2 1 1</li><li>		196   178  1066   798    39</li><li>  Total sbrk(): 215040/47:145. Odd ends: pad+heads+chain+tail: 0+2192+0+6144.</li></ol></pre><p>It is possible to ask for such a statistic at arbitrary points in
your execution using the mstat() function out of the standard
Devel::Peek module.</p>
<p>Here is some explanation of that format:</p>
<ul>
<li><a name="buckets-SMALLEST(APPROX)..GREATEST(APPROX)"></a><b><code class="inline"><span class="w">buckets</span> <span class="i">SMALLEST</span><span class="s">(</span><span class="w">APPROX</span><span class="s">)</span>..<span class="i">GREATEST</span><span class="s">(</span><span class="w">APPROX</span><span class="s">)</span></code>
</b>
<p>Perl's malloc() uses bucketed allocations.  Every request is rounded
up to the closest bucket size available, and a bucket is taken from
the pool of buckets of that size.</p>
<p>The line above describes the limits of buckets currently in use.
Each bucket has two sizes: memory footprint and the maximal size
of user data that can fit into this bucket.  Suppose in the above
example that the smallest bucket were size 4.  The biggest bucket
would have usable size 8188, and the memory footprint would be 8192.</p>
<p>In a Perl built for debugging, some buckets may have negative usable
size.  This means that these buckets cannot (and will not) be used.
For larger buckets, the memory footprint may be one page greater
than a power of 2.  If so, the corresponding power of two is
printed in the <code class="inline"><span class="w">APPROX</span></code>
 field above.</p>
</li>
<li><a name="Free%2fUsed"></a><b>Free/Used</b>
<p>The 1 or 2 rows of numbers following that correspond to the number
of buckets of each size between <code class="inline"><span class="w">SMALLEST</span></code>
 and <code class="inline"><span class="w">GREATEST</span></code>
.  In
the first row, the sizes (memory footprints) of buckets are powers
of two--or possibly one page greater.  In the second row, if present,
the memory footprints of the buckets are between the memory footprints
of two buckets "above".</p>
<p>For example, suppose under the previous example, the memory footprints
were</p>
<pre class="verbatim"><ol><li>     free:    8     16    32    64    128  256 512 1024 2048 4096 8192</li><li>	   4     12    24    48    80</li></ol></pre><p>With a non-<code class="inline"><span class="w">DEBUGGING</span></code>
 perl, the buckets starting from <code class="inline"><span class="n">128</span></code>
 have
a 4-byte overhead, and thus an 8192-long bucket may take up to
8188-byte allocations.</p>
</li>
<li><a name="Total-sbrk()%3a-SBRKed%2fSBRKs%3aCONTINUOUS"></a><b><code class="inline">Total sbrk(): SBRKed/SBRKs:CONTINUOUS</code></b>
<p>The first two fields give the total amount of memory perl sbrk(2)ed
(ess-broken? :-) and number of sbrk(2)s used.  The third number is
what perl thinks about continuity of returned chunks.  So long as
this number is positive, malloc() will assume that it is probable
that sbrk(2) will provide continuous memory.</p>
<p>Memory allocated by external libraries is not counted.</p>
</li>
<li><a name="pad%3a-0"></a><b><code class="inline"><span class="j">pad:</span> <span class="n">0</span></code>
</b>
<p>The amount of sbrk(2)ed memory needed to keep buckets aligned.</p>
</li>
<li><a name="heads%3a-2192"></a><b><code class="inline"><span class="j">heads:</span> <span class="n">2192</span></code>
</b>
<p>Although memory overhead of bigger buckets is kept inside the bucket, for
smaller buckets, it is kept in separate areas.  This field gives the
total size of these areas.</p>
</li>
<li><a name="chain%3a-0"></a><b><code class="inline"><span class="j">chain:</span> <span class="n">0</span></code>
</b>
<p>malloc() may want to subdivide a bigger bucket into smaller buckets.
If only a part of the deceased bucket is left unsubdivided, the rest
is kept as an element of a linked list.  This field gives the total
size of these chunks.</p>
</li>
<li><a name="tail%3a-6144"></a><b><code class="inline"><span class="j">tail:</span> <span class="n">6144</span></code>
</b>
<p>To minimize the number of sbrk(2)s, malloc() asks for more memory.  This
field gives the size of the yet unused part, which is sbrk(2)ed, but
never touched.</p>
</li>
</ul>
<a name="SEE-ALSO"></a><h1>SEE ALSO</h1>
<p><a href="perldebug.html">perldebug</a>,
<a href="perlguts.html">perlguts</a>,
<a href="perlrun.html">perlrun</a>
<a href="re.html">re</a>,
and
<a href="Devel/DProf.html">Devel::DProf</a>.</p>




  <div id="page_index" class="hud_container">
    <div id="page_index_header" class="hud_header">
      <div id="page_index_close" class="hud_close"><a href="#" onClick="pageIndex.hide();return false;"></a></div>
      <div id="page_index_title" class="hud_title"><span class="hud_span_top">Page index</span></div>
      <div id="page_index_topright" class="hud_topright"></div>
    </div>
    <div id="page_index_content" class="hud_content">
      <ul><li><a href="#NAME">NAME</a><li><a href="#DESCRIPTION">DESCRIPTION</a><li><a href="#Debugger-Internals">Debugger Internals</a><ul><li><a href="#Writing-Your-Own-Debugger">Writing Your Own Debugger</a></ul><li><a href="#Frame-Listing-Output-Examples">Frame Listing Output Examples</a><li><a href="#Debugging-Regular-Expressions">Debugging Regular Expressions</a><ul><li><a href="#Compile-time-Output">Compile-time Output</a><li><a href="#Types-of-Nodes">Types of Nodes</a><li><a href="#Run-time-Output">Run-time Output</a></ul><li><a href="#Debugging-Perl-Memory-Usage">Debugging Perl Memory Usage</a><ul><li><a href="#Using-%24ENV%7bPERL_DEBUG_MSTATS%7d">Using $ENV{PERL_DEBUG_MSTATS}</a></ul><li><a href="#SEE-ALSO">SEE ALSO</a></ul>
    </div>
    <div id="page_index_footer" class="hud_footer">
      <div id="page_index_bottomleft" class="hud_bottomleft"></div>
      <div id="page_index_bottom" class="hud_bottom"><span class="hud_span_bottom"></span></div>
      <div id="page_index_resize" class="hud_resize"></div>
    </div>
  </div>


	    &nbsp;
          </div>
          <div id="content_footer">
          </div>
        </div>
        <div class="clear"></div>
      </div>
      
    <div id="footer" style="display: none">
      <div id="footer_content">
        <div id="footer_strapline">
          perldoc.perl.org - Official documentation for the Perl programming language
        </div>
        <div id="footer_links">
          <div id="address">
            <p class="name">Contact details</p>
            <p class="address">
	      Site maintained by <a href="http://perl.jonallen.info">Jon Allen (JJ)</a><br>
	      See the <a href="http://perl.jonallen.info/projects/perldoc">project page</a> for more details
	    </p>
            <p class="contact">
              Documentation maintained by the <a href="http://lists.cpan.org/showlist.cgi?name=perl5-porters">Perl 5 Porters</a>
            </p>
          </div>
          <ul class="f1">
            <li>Manual
              <ul class="f2">
                <li><a href="index-overview.html">Overview</a>
                <li><a href="index-tutorials.html">Tutorials</a>
                <li><a href="index-faq.html">FAQs</a>
                <li><a href="index-history.html">Changes</a>
              </ul>
            <li>Reference
              <ul class="f2">
                <li><a href="index-language.html">Language</a>
                <li><a href="index-functions.html">Functions</a>
                <li><a href="perlop.html">Operators</a>
                <li><a href="perlvar.html">Variables</a>
              </ul>
            <li>Modules
              <ul class="f2">
                <li><a href="index-modules-A.html">Modules</a>
                <li><a href="index-pragmas.html">Pragmas</a>
                <li><a href="index-utilities.html">Utilities</a>
              </ul>
            <li>Misc
              <ul class="f2">
                <li><a href="index-licence.html">License</a>
                <li><a href="index-internals.html">Internals</a>
                <li><a href="index-platforms.html">Platforms</a>
              </ul>          </ul>
          <div class="clear"></div>
        </div>
      </div>
      <div id="footer_end">
      </div>
    </div>
      
    </div>
      <script language="JavaScript" type="text/javascript" src="static/exploreperl.js"></script>
      <script language="JavaScript" src="static/combined-20100403.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
  perldoc.setPath(0);
  perldoc.pageName    = 'perldebguts';
  perldoc.pageAddress = 'perldebguts.html';
  perldoc.contentPage = 1;
  explorePerl.render();
  explorePerl.addEvents('explore_anchor');
</script>
    
  </body>
</html>
