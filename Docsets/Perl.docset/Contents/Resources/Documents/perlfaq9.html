<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <title>perlfaq9 - perldoc.perl.org</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta http-equiv="Content-Language" content="en-gb">
  <link rel="search" type="application/opensearchdescription+xml" title="Search perldoc.perl.org" href="/static/search.xml"/>
  <link href="static/css-20100830.css" rel="stylesheet" rev="stylesheet" type="text/css" media="screen">
  <link href="static/exploreperl.css" rel="stylesheet" rev="stylesheet" type="text/css">
</head>

<body onLoad="perldoc.startup();" onPageShow="if (event.persisted) perldoc.startup();">
    <div id="page" style="width:  731px">
      
      <div id="header" style="display: none">
	<div id="homepage_link">
	  <a href="index.html"></a>
	</div>
	<div id="strapline">
	  Perl Programming Documentation
	</div>
	<div id="download_link" class="download">
	  <a href="http://www.perl.org/get.html">Download Perl</a>
	</div>
	<div id="explore_link" class="download">
	  <a id="explore_anchor" href="#">Explore</a>
	</div>
      </div>
      
      <div id="body">
        <div id="left_column" style="display: none">
          <div class="side_group">
            
	    <div class="side_panel doc_panel">
              <p>Manual</p>
              <ul>
                <li><a href="index-overview.html">Overview</a>
                <li><a href="index-tutorials.html">Tutorials</a>
                <li><a href="index-faq.html">FAQs</a>
                <li><a href="index-history.html">History / Changes</a>
                <li><a href="index-licence.html">License</a>
              </ul>
            </div>
            <div class="side_panel doc_panel">
              <p>Reference</p>
              <ul>
                <li><a href="index-language.html">Language</a>
                <li><a href="index-functions.html">Functions</a>
                <li><a href="perlop.html">Operators</a>
                <li><a href="perlvar.html">Special Variables</a>
                <li><a href="index-pragmas.html">Pragmas</a>
                <li><a href="index-utilities.html">Utilities</a>
                <li><a href="index-internals.html">Internals</a>
                <li><a href="index-platforms.html">Platform Specific</a>
              </ul>
            </div>
            <div class="side_panel doc_panel">
              <p>Modules</p>
              <ul>
		<li>
		
                
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		
                  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		
                  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		
                  
		
                  
		    
		  
		
                  
		
                  
		
		
                    <a href="index-modules-A.html">A</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-B.html">B</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-C.html">C</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-D.html">D</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-E.html">E</a>
                    
                      
                        <li>
                      
                    
                
                    <a href="index-modules-F.html">F</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-G.html">G</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-H.html">H</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-I.html">I</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-L.html">L</a>
                    
                      
                        <li>
                      
                    
                
                    <a href="index-modules-M.html">M</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-N.html">N</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-O.html">O</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-P.html">P</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-S.html">S</a>
                    
                      
                        <li>
                      
                    
                
                    <a href="index-modules-T.html">T</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-U.html">U</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-X.html">X</a>
                    
                
              </ul>
            </div>
            
	      <div class="side_panel doc_panel">
		<p>Tools</p>
		<ul>
		  <li><a href="preferences.html">Preferences</a>
		</ul>
	      </div>
            
          </div>
        </div>
        <div id="centre_column" style="margin-left: 0px; margin-right: 0px">
          <div id="content_header" style="display: none">
            <div id="title_bar">
              <div id="page_name">
                <h1>perlfaq9</h1>
              </div>
              <div id="perl_version">
                Perl 5 version 14.0 documentation
              </div>
              <div class="page_links" id="page_links_top">
                <a href="#" onClick="toolbar.goToTop();return false;">Go to top</a>
		
              </div>
	      <div class="page_links" id="page_links_bottom">
		
                  <a href="#" id="page_index_toggle">Show page index</a> &bull;
		
                <a href="#" id="recent_pages_toggle">Show recent pages</a>		
	      </div>
	      <div id="search_form">
		<form action="search.html" method="GET" id="search">
		  <input type="text" name="q" id="search_box" alt="Search">
		</form>
	      </div>
            </div>
            <div id="breadcrumbs">
                
    <a href="index.html">Home</a> &gt;
    
      
        <a href="index-faq.html">FAQs</a> &gt;
      
    
    perlfaq9
  

            </div>
          </div>
          <div id="content_body" style="font-size:100%">
	    <!--[if lt IE 7]>
 <div class="noscript">
   <p>
     <strong>It looks like you're using Internet Explorer 6. This is a very old
     browser which does not offer full support for modern websites.</strong>
   </p>
   <p>
     Unfortunately this means that this website will not work on
     your computer.
   </p>
   <p>
     Don't miss out though! To view the site (and get a better experience from
     many other websites), simply upgrade to
     <a href="http://www.microsoft.com/windows/Internet-explorer/default.aspx">Internet
Explorer 8</a>
     or download an alternative browser such as
     <a href="http://www.mozilla.com/en-US/firefox/firefox.html">Firefox</a>,
     <a href="http://www.apple.com/safari/download/">Safari</a>, or
     <a href="http://www.google.co.uk/chrome">Google Chrome</a>.
   </p>
   <p>
     All of these browsers are free. If you're using a PC at work, you may
     need to contact your IT administrator.
   </p>
 </div>
<![endif]-->
	    <noscript>
	      <div class="noscript">
	      <p>
                <strong>Please note: Many features of this site require JavaScript. You appear to have JavaScript disabled,
	        or are running a non-JavaScript capable web browser.</strong>
	      </p>
	      <p>
		To get the best experience, please enable JavaScript or download a modern web browser such as <a href="http://www.microsoft.com/windows/Internet-explorer/default.aspx">Internet Explorer 8</a>, <a href="http://www.mozilla.com/en-US/firefox/firefox.html">Firefox</a>, <a href="http://www.apple.com/safari/download/">Safari</a>, or <a href="http://www.google.co.uk/chrome">Google Chrome</a>.
              </p>
	      </div>
	    </noscript>

	    <div id="recent_pages" class="hud_container">
	      <div id="recent_pages_header" class="hud_header">
		<div id="recent_pages_close" class="hud_close"><a href="#" onClick="recentPages.hide();return false;"></a></div>
		<div id="recent_pages_title" class="hud_title"><span class="hud_span_top">Recently read</span></div>
		<div id="recent_pages_topright" class="hud_topright"></div>
	      </div>
	      <div id="recent_pages_content" class="hud_content">
	      </div>
	      <div id="recent_pages_footer" class="hud_footer">
		<div id="recent_pages_bottomleft" class="hud_bottomleft"></div>
		<div id="recent_pages_bottom" class="hud_bottom"><span class="hud_span_bottom"></span></div>
		<div id="recent_pages_resize" class="hud_resize"></div>
	      </div>
	    </div>
  
	    <div id="from_search"></div>
            <h1>perlfaq9</h1>


  <!--    -->
<ul><li><a href="#NAME">NAME</a><li><a href="#DESCRIPTION">DESCRIPTION</a><ul><li><a href="#What-is-the-correct-form-of-response-from-a-CGI-script%3f">What is the correct form of response from a CGI script?</a><li><a href="#My-CGI-script-runs-from-the-command-line-but-not-the-browser.-(500-Server-Error)">My CGI script runs from the command line but not the browser. (500 Server Error)</a><li><a href="#How-can-I-get-better-error-messages-from-a-CGI-program%3f">How can I get better error messages from a CGI program?</a><li><a href="#How-do-I-remove-HTML-from-a-string%3f">How do I remove HTML from a string?</a><li><a href="#How-do-I-extract-URLs%3f">How do I extract URLs?</a><li><a href="#How-do-I-download-a-file-from-the-user's-machine%3f--How-do-I-open-a-file-on-another-machine%3f">How do I download a file from the user's machine?  How do I open a file on another machine?</a><li><a href="#How-do-I-make-an-HTML-pop-up-menu-with-Perl%3f">How do I make an HTML pop-up menu with Perl?</a><li><a href="#How-do-I-fetch-an-HTML-file%3f">How do I fetch an HTML file?</a><li><a href="#How-do-I-automate-an-HTML-form-submission%3f">How do I automate an HTML form submission?</a><li><a href="#How-do-I-decode-or-create-those-%25-encodings-on-the-web%3f">How do I decode or create those %-encodings on the web?
    </a><li><a href="#How-do-I-redirect-to-another-page%3f">How do I redirect to another page?</a><li><a href="#How-do-I-put-a-password-on-my-web-pages%3f">How do I put a password on my web pages?</a><li><a href="#How-do-I-edit-my-.htpasswd-and-.htgroup-files-with-Perl%3f">How do I edit my .htpasswd and .htgroup files with Perl?</a><li><a href="#How-do-I-make-sure-users-can't-enter-values-into-a-form-that-cause-my-CGI-script-to-do-bad-things%3f">How do I make sure users can't enter values into a form that cause my CGI script to do bad things?</a><li><a href="#How-do-I-parse-a-mail-header%3f">How do I parse a mail header?</a><li><a href="#How-do-I-decode-a-CGI-form%3f">How do I decode a CGI form?</a><li><a href="#How-do-I-check-a-valid-mail-address%3f">How do I check a valid mail address?</a><li><a href="#How-do-I-decode-a-MIME%2fBASE64-string%3f">How do I decode a MIME/BASE64 string?</a><li><a href="#How-do-I-return-the-user's-mail-address%3f">How do I return the user's mail address?</a><li><a href="#How-do-I-send-mail%3f">How do I send mail?</a><li><a href="#How-do-I-use-MIME-to-make-an-attachment-to-a-mail-message%3f">How do I use MIME to make an attachment to a mail message?</a><li><a href="#How-do-I-read-mail%3f">How do I read mail?</a><li><a href="#How-do-I-find-out-my-hostname%2c-domainname%2c-or-IP-address%3f">How do I find out my hostname, domainname, or IP address?
</a><li><a href="#How-do-I-fetch-a-news-article-or-the-active-newsgroups%3f">How do I fetch a news article or the active newsgroups?</a><li><a href="#How-do-I-fetch%2fput-an-FTP-file%3f">How do I fetch/put an FTP file?</a><li><a href="#How-can-I-do-RPC-in-Perl%3f">How can I do RPC in Perl?</a></ul><li><a href="#AUTHOR-AND-COPYRIGHT">AUTHOR AND COPYRIGHT</a></ul><a name="NAME"></a><h1>NAME</h1>
<p>perlfaq9 - Networking</p>
<a name="DESCRIPTION"></a><h1>DESCRIPTION</h1>
<p>This section deals with questions related to networking, the internet,
and a few on the web.</p>
<a name="What-is-the-correct-form-of-response-from-a-CGI-script%3f"></a><h2>What is the correct form of response from a CGI script?</h2>
<p>(Alan Flavell &lt;flavell+www@a5.ph.gla.ac.uk&gt; answers...)</p>
<p>The Common Gateway Interface (CGI) specifies a software interface between
a program ("CGI script") and a web server (HTTPD). It is not specific
to Perl, and has its own FAQs and tutorials, and usenet group,
comp.infosystems.www.authoring.cgi</p>
<p>The CGI specification is outlined in an informational RFC:
<a href="http://www.ietf.org/rfc/rfc3875">http://www.ietf.org/rfc/rfc3875</a></p>
<p>These Perl FAQs very selectively cover some CGI issues. However, Perl
programmers are strongly advised to use the <code class="inline"><span class="w">CGI</span>.<span class="w">pm</span></code>
 module, to take care
of the details for them.</p>
<p>The similarity between CGI response headers (defined in the CGI
specification) and HTTP response headers (defined in the HTTP
specification, RFC2616) is intentional, but can sometimes be confusing.</p>
<p>The CGI specification defines two kinds of script: the "Parsed Header"
script, and the "Non Parsed Header" (NPH) script. Check your server
documentation to see what it supports. "Parsed Header" scripts are
simpler in various respects. The CGI specification allows any of the
usual newline representations in the CGI response (it's the server's
job to create an accurate HTTP response based on it). So "\n" written in
text mode is technically correct, and recommended. NPH scripts are more
tricky: they must put out a complete and accurate set of HTTP
transaction response headers; the HTTP specification calls for records
to be terminated with carriage-return and line-feed; i.e., ASCII \015\012
written in binary mode.</p>
<p>Using <code class="inline"><span class="w">CGI</span>.<span class="w">pm</span></code>
 gives excellent platform independence, including EBCDIC
systems. <code class="inline"><span class="w">CGI</span>.<span class="w">pm</span></code>
 selects an appropriate newline representation
(<code class="inline"><span class="i">$CGI::CRLF</span></code>
) and sets binmode as appropriate.</p>
<a name="My-CGI-script-runs-from-the-command-line-but-not-the-browser.-(500-Server-Error)"></a><h2>My CGI script runs from the command line but not the browser. (500 Server Error)</h2>
<p>(contributed by brian d foy)</p>
<p>There are many things that might be wrong with your CGI program, and only
some of them might be related to Perl. Try going through the troubleshooting
guide on Perlmonks:</p>
<pre class="verbatim"><ol><li>	<span class="j">http:</span><span class="q">//</span><span class="w">www</span>.<span class="w">perlmonks</span>.<span class="w">org</span><span class="q">/?node_id=380424</span></li></ol></pre><a name="How-can-I-get-better-error-messages-from-a-CGI-program%3f"></a><h2>How can I get better error messages from a CGI program?</h2>
<p>Use the <code class="inline"><span class="w">CGI::Carp</span></code>
 module.  It replaces <code class="inline"><a class="l_k" href="functions/warn.html">warn</a></code> and <code class="inline"><a class="l_k" href="functions/die.html">die</a></code>, plus the
normal <code class="inline"><span class="w">Carp</span></code>
 module's <code class="inline"><span class="w">carp</span></code>
, <code class="inline"><span class="w">croak</span></code>
, and <code class="inline"><span class="w">confess</span></code>
 functions with
more verbose and safer versions.  It still sends them to the normal
server error log.</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/use.html">use</a> <span class="w">CGI::Carp</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/warn.html">warn</a> <span class="q">&quot;This is a complaint&quot;</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;But this one is serious&quot;</span><span class="sc">;</span></li></ol></pre><p>The following use of <code class="inline"><span class="w">CGI::Carp</span></code>
 also redirects errors to a file of your choice,
placed in a <code class="inline">BEGIN</code>
 block to catch compile-time warnings as well:</p>
<pre class="verbatim"><ol><li>	BEGIN <span class="s">{</span></li><li>		<a class="l_k" href="functions/use.html">use</a> <span class="w">CGI::Carp</span> <span class="q">qw(carpout)</span><span class="sc">;</span></li><li>		<a class="l_k" href="functions/open.html">open</a><span class="s">(</span><span class="w">LOG</span><span class="cm">,</span> <span class="q">&quot;&gt;&gt;/var/local/cgi-logs/mycgi-log&quot;</span><span class="s">)</span></li><li>			or <a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;Unable to append to mycgi-log: $!\n&quot;</span><span class="sc">;</span></li><li>		<span class="i">carpout</span><span class="s">(</span><span class="i">*LOG</span><span class="s">)</span><span class="sc">;</span></li><li>	<span class="s">}</span></li></ol></pre><p>You can even arrange for fatal errors to go back to the client browser,
which is nice for your own debugging, but might confuse the end user.</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/use.html">use</a> <span class="w">CGI::Carp</span> <span class="q">qw(fatalsToBrowser)</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;Bad error here&quot;</span><span class="sc">;</span></li></ol></pre><p>Even if the error happens before you get the HTTP header out, the module
will try to take care of this to avoid the dreaded server 500 errors.
Normal warnings still go out to the server error log (or wherever
you've sent them with <code class="inline"><span class="w">carpout</span></code>
) with the application name and date
stamp prepended.</p>
<a name="How-do-I-remove-HTML-from-a-string%3f"></a><h2>How do I remove HTML from a string?</h2>
<p>The most correct way (albeit not the fastest) is to use <code class="inline"><span class="w">HTML::Parser</span></code>

from CPAN.  Another mostly correct
way is to use <code class="inline"><span class="w">HTML::FormatText</span></code>
 which not only removes HTML but also
attempts to do a little simple formatting of the resulting plain text.</p>
<p>Many folks attempt a simple-minded regular expression approach, like
<code class="inline"><a class="l_k" href="functions/s.html">s/<.*?>//g</a></code>, but that fails in many cases because the tags
may continue over line breaks, they may contain quoted angle-brackets,
or HTML comments may be present.  Plus, folks forget to convert
entities--like <code class="inline"><span class="i">&amp;lt</span><span class="sc">;</span></code>
 for example.</p>
<p>Here's one "simple-minded" approach, that works for most files:</p>
<pre class="verbatim"><ol><li>	<span class="c">#!/usr/bin/perl -p0777</span></li><li>	<span class="q">s/&lt;(?:[^&gt;&#39;&quot;]*|([&#39;&quot;]).*?\g1)*&gt;//gs</span></li></ol></pre><p>If you want a more complete solution, see the 3-stage striphtml
program in
<a href="http://www.cpan.org/authors/Tom_Christiansen/scripts/striphtml.gz">http://www.cpan.org/authors/Tom_Christiansen/scripts/striphtml.gz</a>
.</p>
<p>Here are some tricky cases that you should think about when picking
a solution:</p>
<pre class="verbatim"><ol><li>	&lt;IMG SRC = "foo.gif" ALT = "A &gt; B"&gt;</li><li></li><li>	&lt;IMG SRC = "foo.gif"</li><li>	 ALT = "A &gt; B"&gt;</li><li></li><li>	&lt;!-- &lt;A comment&gt; --&gt;</li><li></li><li>	&lt;script&gt;if (a&lt;b &amp;&amp; a&gt;c)&lt;/script&gt;</li><li></li><li>	&lt;# Just data #&gt;</li><li></li><li>	&lt;![INCLUDE CDATA [ &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; ]]&gt;</li></ol></pre><p>If HTML comments include other tags, those solutions would also break
on text like this:</p>
<pre class="verbatim"><ol><li>	&lt;!-- This section commented out.</li><li>		&lt;B&gt;You can't see me!&lt;/B&gt;</li><li>	--&gt;</li></ol></pre><a name="How-do-I-extract-URLs%3f"></a><h2>How do I extract URLs?</h2>
<p>You can easily extract all sorts of URLs from HTML with
<code class="inline"><span class="w">HTML::SimpleLinkExtor</span></code>
 which handles anchors, images, objects,
frames, and many other tags that can contain a URL.  If you need
anything more complex, you can create your own subclass of
<code class="inline"><span class="w">HTML::LinkExtor</span></code>
 or <code class="inline"><span class="w">HTML::Parser</span></code>
.  You might even use
<code class="inline"><span class="w">HTML::SimpleLinkExtor</span></code>
 as an example for something specifically
suited to your needs.</p>
<p>You can use <code class="inline"><span class="w">URI::Find</span></code>
 to extract URLs from an arbitrary text document.</p>
<p>Less complete solutions involving regular expressions can save
you a lot of processing time if you know that the input is simple.  One
solution from Tom Christiansen runs 100 times faster than most
module-based approaches but only extracts URLs from anchors where the first
attribute is HREF and there are no other attributes.</p>
<pre class="verbatim"><ol><li>	<span class="c">#!/usr/bin/perl -n00</span></li><li>	<span class="c"># qxurl - tchrist@perl.com</span></li><li>	<a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;$2\n&quot;</span> while <span class="q">m{</span></li><li>		<span class="q">		&lt; \s*</span></li><li>		  <span class="q">		  A \s+ HREF \s* = \s* ([&quot;&#39;]) (.*?) \g1</span></li><li>		<span class="q">		\s* &gt;</span></li><li>	<span class="q">	}gsix</span><span class="sc">;</span></li></ol></pre><a name="How-do-I-download-a-file-from-the-user's-machine%3f--How-do-I-open-a-file-on-another-machine%3f"></a><h2>How do I download a file from the user's machine?  How do I open a file on another machine?</h2>
<p>In this case, download means to use the file upload feature of HTML
forms.  You allow the web surfer to specify a file to send to your web
server.  To you it looks like a download, and to the user it looks
like an upload.  No matter what you call it, you do it with what's
known as <b>multipart/form-data</b> encoding.  The <code class="inline"><span class="w">CGI</span>.<span class="w">pm</span></code>
 module (which
comes with Perl as part of the Standard Library) supports this in the
<code class="inline"><span class="i">start_multipart_form</span><span class="s">(</span><span class="s">)</span></code>
 method, which isn't the same as the <code class="inline"><span class="i">startform</span><span class="s">(</span><span class="s">)</span></code>

method.</p>
<p>See the section in the <code class="inline"><span class="w">CGI</span>.<span class="w">pm</span></code>
 documentation on file uploads for code
examples and details.</p>
<a name="How-do-I-make-an-HTML-pop-up-menu-with-Perl%3f"></a><h2>How do I make an HTML pop-up menu with Perl?</h2>
<p>(contributed by brian d foy)</p>
<p>The <code class="inline"><span class="w">CGI</span>.<span class="w">pm</span></code>
 module (which comes with Perl) has functions to create
the HTML form widgets. See the <code class="inline"><span class="w">CGI</span>.<span class="w">pm</span></code>
 documentation for more
examples.</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/use.html">use</a> <span class="w">CGI</span> <span class="q">qw/:standard/</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/print.html">print</a> <span class="i">header</span><span class="cm">,</span></li><li>		<span class="i">start_html</span><span class="s">(</span><span class="q">&#39;Favorite Animals&#39;</span><span class="s">)</span><span class="cm">,</span></li><li></li><li>		<span class="w">start_form</span><span class="cm">,</span></li><li>			<span class="q">&quot;What&#39;s your favorite animal? &quot;</span><span class="cm">,</span></li><li>		<span class="i">popup_menu</span><span class="s">(</span></li><li>			-<span class="w">name</span>   <span class="cm">=&gt;</span> <span class="q">&#39;animal&#39;</span><span class="cm">,</span></li><li>			-<span class="w">values</span> <span class="cm">=&gt;</span> <span class="s">[</span> <span class="q">qw( Llama Alpaca Camel Ram )</span> <span class="s">]</span></li><li>			<span class="s">)</span><span class="cm">,</span></li><li>		<span class="w">submit</span><span class="cm">,</span></li><li></li><li>		<span class="w">end_form</span><span class="cm">,</span></li><li>		<span class="w">end_html</span><span class="sc">;</span></li></ol></pre><a name="How-do-I-fetch-an-HTML-file%3f"></a><h2>How do I fetch an HTML file?</h2>
<p>(contributed by brian d foy)</p>
<p>Use the libwww-perl distribution. The <code class="inline"><span class="w">LWP::Simple</span></code>
 module can fetch web
resources and give their content back to you as a string:</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/use.html">use</a> <span class="w">LWP::Simple</span> <span class="q">qw(get)</span><span class="sc">;</span></li><li></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$html</span> = <span class="i">get</span><span class="s">(</span> <span class="q">&quot;<a href="http://www.example.com/index.html">http://www.example.com/index.html</a>&quot;</span> <span class="s">)</span><span class="sc">;</span></li></ol></pre><p>It can also store the resource directly in a file:</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/use.html">use</a> <span class="w">LWP::Simple</span> <span class="q">qw(getstore)</span><span class="sc">;</span></li><li></li><li>	<span class="i">getstore</span><span class="s">(</span> <span class="q">&quot;<a href="http://www.example.com/index.html">http://www.example.com/index.html</a>&quot;</span><span class="cm">,</span> <span class="q">&quot;foo.html&quot;</span> <span class="s">)</span><span class="sc">;</span></li></ol></pre><p>If you need to do something more complicated, you can use
<code class="inline"><span class="w">LWP::UserAgent</span></code>
 module to create your own user-agent (e.g. browser)
to get the job done. If you want to simulate an interactive web
browser, you can use the <code class="inline"><span class="w">WWW::Mechanize</span></code>
 module.</p>
<a name="How-do-I-automate-an-HTML-form-submission%3f"></a><h2>How do I automate an HTML form submission?</h2>
<p>If you are doing something complex, such as moving through many pages
and forms or a web site, you can use <code class="inline"><span class="w">WWW::Mechanize</span></code>
.  See its
documentation for all the details.</p>
<p>If you're submitting values using the GET method, create a URL and encode
the form using the <code class="inline"><span class="w">query_form</span></code>
 method:</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/use.html">use</a> <span class="w">LWP::Simple</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/use.html">use</a> <span class="w">URI::URL</span><span class="sc">;</span></li><li></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$url</span> = <span class="i">url</span><span class="s">(</span><span class="q">&#39;<a href="http://www.perl.com/cgi-bin/cpan_mod">http://www.perl.com/cgi-bin/cpan_mod</a>&#39;</span><span class="s">)</span><span class="sc">;</span></li><li>	<span class="i">$url</span><span class="i">-&gt;query_form</span><span class="s">(</span><span class="w">module</span> <span class="cm">=&gt;</span> <span class="q">&#39;DB_File&#39;</span><span class="cm">,</span> <span class="w">readme</span> <span class="cm">=&gt;</span> <span class="n">1</span><span class="s">)</span><span class="sc">;</span></li><li>	<span class="i">$content</span> = <span class="i">get</span><span class="s">(</span><span class="i">$url</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>If you're using the POST method, create your own user agent and encode
the content appropriately.</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/use.html">use</a> <span class="w">HTTP::Request::Common</span> <span class="q">qw(POST)</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/use.html">use</a> <span class="w">LWP::UserAgent</span><span class="sc">;</span></li><li></li><li>	<span class="i">$ua</span> = <span class="w">LWP::UserAgent</span><span class="w">-&gt;new</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$req</span> = <span class="w">POST</span> <span class="q">&#39;<a href="http://www.perl.com/cgi-bin/cpan_mod">http://www.perl.com/cgi-bin/cpan_mod</a>&#39;</span><span class="cm">,</span></li><li>				   <span class="s">[</span> <span class="w">module</span> <span class="cm">=&gt;</span> <span class="q">&#39;DB_File&#39;</span><span class="cm">,</span> <span class="w">readme</span> <span class="cm">=&gt;</span> <span class="n">1</span> <span class="s">]</span><span class="sc">;</span></li><li>	<span class="i">$content</span> = <span class="i">$ua</span><span class="i">-&gt;request</span><span class="s">(</span><span class="i">$req</span><span class="s">)</span><span class="i">-&gt;as_string</span><span class="sc">;</span></li></ol></pre><a name="How-do-I-decode-or-create-those-%25-encodings-on-the-web%3f"></a><h2>How do I decode or create those %-encodings on the web?
    </h2>
<p>(contributed by brian d foy)</p>
<p>Those <code class="inline"><span class="i">%</span></code>
 encodings handle reserved characters in URIs, as described
in RFC 2396, Section 2. This encoding replaces the reserved character
with the hexadecimal representation of the character's number from
the US-ASCII table. For instance, a colon, <code class="inline"><span class="j">:</span></code>
, becomes <code class="inline"><span class="i">%3A</span></code>
.</p>
<p>In CGI scripts, you don't have to worry about decoding URIs if you are
using <code class="inline"><span class="w">CGI</span>.<span class="w">pm</span></code>
. You shouldn't have to process the URI yourself,
either on the way in or the way out.</p>
<p>If you have to encode a string yourself, remember that you should
never try to encode an already-composed URI. You need to escape the
components separately then put them together. To encode a string, you
can use the <code class="inline"><span class="w">URI::Escape</span></code>
 module. The <code class="inline"><span class="w">uri_escape</span></code>
 function
returns the escaped string:</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$original</span> = <span class="q">&quot;Colon : Hash # Percent %&quot;</span><span class="sc">;</span></li><li></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$escaped</span> = <span class="i">uri_escape</span><span class="s">(</span> <span class="i">$original</span> <span class="s">)</span><span class="sc">;</span></li><li></li><li>	<a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;$escaped\n&quot;</span><span class="sc">;</span> <span class="c"># &#39;Colon%20%3A%20Hash%20%23%20Percent%20%25&#39;</span></li></ol></pre><p>To decode the string, use the <code class="inline"><span class="w">uri_unescape</span></code>
 function:</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$unescaped</span> = <span class="i">uri_unescape</span><span class="s">(</span> <span class="i">$escaped</span> <span class="s">)</span><span class="sc">;</span></li><li></li><li>	<a class="l_k" href="functions/print.html">print</a> <span class="i">$unescaped</span><span class="sc">;</span> <span class="c"># back to original</span></li></ol></pre><p>If you wanted to do it yourself, you simply need to replace the
reserved characters with their encodings. A global substitution
is one way to do it:</p>
<pre class="verbatim"><ol><li>	<span class="c"># encode</span></li><li>	<span class="i">$string</span> =~ <span class="q">s/([^^A-Za-z0-9\-_.!~*&#39;()])/ sprintf &quot;%%%0x&quot;, ord $1 /eg</span><span class="sc">;</span></li><li></li><li>	<span class="c">#decode</span></li><li>	<span class="i">$string</span> =~ <span class="q">s/%([A-Fa-f\d]{2})/chr hex $1/eg</span><span class="sc">;</span></li></ol></pre><a name="How-do-I-redirect-to-another-page%3f"></a><h2>How do I redirect to another page?</h2>
<p>Specify the complete URL of the destination (even if it is on the same
server). This is one of the two different kinds of CGI "Location:"
responses which are defined in the CGI specification for a Parsed Headers
script. The other kind (an absolute URLpath) is resolved internally to
the server without any HTTP redirection. The CGI specifications do not
allow relative URLs in either case.</p>
<p>Use of <code class="inline"><span class="w">CGI</span>.<span class="w">pm</span></code>
 is strongly recommended.  This example shows redirection
with a complete URL. This redirection is handled by the web browser.</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/use.html">use</a> <span class="w">CGI</span> <span class="q">qw/:standard/</span><span class="sc">;</span></li><li></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$url</span> = <span class="q">&#39;<a href="http://www.cpan.org/">http://www.cpan.org/</a>&#39;</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/print.html">print</a> <span class="i">redirect</span><span class="s">(</span><span class="i">$url</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>This example shows a redirection with an absolute URLpath.  This
redirection is handled by the local web server.</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$url</span> = <span class="q">&#39;/CPAN/index.html&#39;</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/print.html">print</a> <span class="i">redirect</span><span class="s">(</span><span class="i">$url</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>But if coded directly, it could be as follows (the final "\n" is
shown separately, for clarity), using either a complete URL or
an absolute URLpath.</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;Location: $url\n&quot;</span><span class="sc">;</span>   <span class="c"># CGI response header</span></li><li>	<a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;\n&quot;</span><span class="sc">;</span>                 <span class="c"># end of headers</span></li></ol></pre><a name="How-do-I-put-a-password-on-my-web-pages%3f"></a><h2>How do I put a password on my web pages?</h2>
<p>To enable authentication for your web server, you need to configure
your web server.  The configuration is different for different sorts
of web servers--apache does it differently from iPlanet which does
it differently from IIS.  Check your web server documentation for
the details for your particular server.</p>
<a name="How-do-I-edit-my-.htpasswd-and-.htgroup-files-with-Perl%3f"></a><h2>How do I edit my .htpasswd and .htgroup files with Perl?</h2>
<p>The <code class="inline"><span class="w">HTTPD::UserAdmin</span></code>
 and <code class="inline"><span class="w">HTTPD::GroupAdmin</span></code>
 modules provide a
consistent OO interface to these files, regardless of how they're
stored.  Databases may be text, dbm, Berkeley DB or any database with
a DBI compatible driver.  <code class="inline"><span class="w">HTTPD::UserAdmin</span></code>
 supports files used by the
"Basic" and "Digest" authentication schemes.  Here's an example:</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/use.html">use</a> <span class="w">HTTPD::UserAdmin</span> <span class="s">(</span><span class="s">)</span><span class="sc">;</span></li><li>	<span class="w">HTTPD::UserAdmin</span></li><li>	  <span class="w">-&gt;new</span><span class="s">(</span><span class="w">DB</span> <span class="cm">=&gt;</span> <span class="q">&quot;/foo/.htpasswd&quot;</span><span class="s">)</span></li><li>	  <span class="i">-&gt;add</span><span class="s">(</span><span class="i">$username</span> <span class="cm">=&gt;</span> <span class="i">$password</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><a name="How-do-I-make-sure-users-can't-enter-values-into-a-form-that-cause-my-CGI-script-to-do-bad-things%3f"></a><h2>How do I make sure users can't enter values into a form that cause my CGI script to do bad things?</h2>
<p>(contributed by brian d foy)</p>
<p>You can't prevent people from sending your script bad data. Even if
you add some client-side checks, people may disable them or bypass
them completely. For instance, someone might use a module such as
<code class="inline"><span class="w">LWP</span></code>
 to access your CGI program. If you want to prevent data that
try to use SQL injection or other sorts of attacks (and you should
want to), you have to not trust any data that enter your program.</p>
<p>The <a href="perlsec.html">perlsec</a> documentation has general advice about data security.
If you are using the <code class="inline"><span class="w">DBI</span></code>
 module, use placeholder to fill in data.
If you are running external programs with <code class="inline"><a class="l_k" href="functions/system.html">system</a></code> or <code class="inline"><a class="l_k" href="functions/exec.html">exec</a></code>, use
the list forms. There are many other precautions that you should take,
too many to list here, and most of them fall under the category of not
using any data that you don't intend to use. Trust no one.</p>
<a name="How-do-I-parse-a-mail-header%3f"></a><h2>How do I parse a mail header?</h2>
<p>For a quick-and-dirty solution, try this solution derived
from <a href="functions/split.html">split</a>:</p>
<pre class="verbatim"><ol><li>	<span class="i">$/</span> = <span class="q">&#39;&#39;</span><span class="sc">;</span></li><li>	<span class="i">$header</span> = <span class="q">&lt;MSG&gt;</span><span class="sc">;</span></li><li>	<span class="i">$header</span> =~ <span class="q">s/\n\s+/ /g</span><span class="sc">;</span>	 <span class="c"># merge continuation lines</span></li><li>	<span class="i">%head</span> = <span class="s">(</span> <span class="w">UNIX_FROM_LINE</span><span class="cm">,</span> <a class="l_k" href="functions/split.html">split</a> <span class="q">/^([-\w]+):\s*/m</span><span class="cm">,</span> <span class="i">$header</span> <span class="s">)</span><span class="sc">;</span></li></ol></pre><p>That solution doesn't do well if, for example, you're trying to
maintain all the Received lines.  A more complete approach is to use
the <code class="inline"><span class="w">Mail::Header</span></code>
 module from CPAN (part of the <code class="inline"><span class="w">MailTools</span></code>
 package).</p>
<a name="How-do-I-decode-a-CGI-form%3f"></a><h2>How do I decode a CGI form?</h2>
<p>(contributed by brian d foy)</p>
<p>Use the <code class="inline"><span class="w">CGI</span>.<span class="w">pm</span></code>
 module that comes with Perl.  It's quick,
it's easy, and it actually does quite a bit of work to
ensure things happen correctly.  It handles GET, POST, and
HEAD requests, multipart forms, multivalued fields, query
string and message body combinations, and many other things
you probably don't want to think about.</p>
<p>It doesn't get much easier: the <code class="inline"><span class="w">CGI</span>.<span class="w">pm</span></code>
 module automatically
parses the input and makes each value available through the
<code class="inline"><span class="i">param</span><span class="s">(</span><span class="s">)</span></code>
 function.</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/use.html">use</a> <span class="w">CGI</span> <span class="q">qw(:standard)</span><span class="sc">;</span></li><li></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$total</span> = <span class="i">param</span><span class="s">(</span> <span class="q">&#39;price&#39;</span> <span class="s">)</span> + <span class="i">param</span><span class="s">(</span> <span class="q">&#39;shipping&#39;</span> <span class="s">)</span><span class="sc">;</span></li><li></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">@items</span> = <span class="i">param</span><span class="s">(</span> <span class="q">&#39;item&#39;</span> <span class="s">)</span><span class="sc">;</span> <span class="c"># multiple values, same field name</span></li></ol></pre><p>If you want an object-oriented approach, <code class="inline"><span class="w">CGI</span>.<span class="w">pm</span></code>
 can do that too.</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/use.html">use</a> <span class="w">CGI</span><span class="sc">;</span></li><li></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$cgi</span> = <span class="w">CGI</span><span class="w">-&gt;new</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li><li></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$total</span> = <span class="i">$cgi</span><span class="i">-&gt;param</span><span class="s">(</span> <span class="q">&#39;price&#39;</span> <span class="s">)</span> + <span class="i">$cgi</span><span class="i">-&gt;param</span><span class="s">(</span> <span class="q">&#39;shipping&#39;</span> <span class="s">)</span><span class="sc">;</span></li><li></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">@items</span> = <span class="i">$cgi</span><span class="i">-&gt;param</span><span class="s">(</span> <span class="q">&#39;item&#39;</span> <span class="s">)</span><span class="sc">;</span></li></ol></pre><p>You might also try <code class="inline"><span class="w">CGI::Minimal</span></code>
 which is a lightweight version
of the same thing.  Other CGI::* modules on CPAN might work better
for you, too.</p>
<p>Many people try to write their own decoder (or copy one from
another program) and then run into one of the many "gotchas"
of the task.  It's much easier and less hassle to use <code class="inline"><span class="w">CGI</span>.<span class="w">pm</span></code>
.</p>
<a name="How-do-I-check-a-valid-mail-address%3f"></a><h2>How do I check a valid mail address?</h2>
<p>(partly contributed by Aaron Sherman)</p>
<p>This isn't as simple a question as it sounds.  There are two parts:</p>
<p>a) How do I verify that an email address is correctly formatted?</p>
<p>b) How do I verify that an email address targets a valid recipient?</p>
<p>Without sending mail to the address and seeing whether there's a human
on the other end to answer you, you cannot fully answer part <i>b</i>, but
either the <code class="inline"><span class="w">Email::Valid</span></code>
 or the <code class="inline"><span class="w">RFC::RFC822::Address</span></code>
 module will do
both part <i>a</i> and part <i>b</i> as far as you can in real-time.</p>
<p>If you want to just check part <i>a</i> to see that the address is valid
according to the mail header standard with a simple regular expression,
you can have problems, because there are deliverable addresses that
aren't RFC-2822 (the latest mail header standard) compliant, and
addresses that aren't deliverable which, are compliant.  However,  the
following will match valid RFC-2822 addresses that do not have comments,
folding whitespace, or any other obsolete or non-essential elements.
This <i>just</i> matches the address itself:</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$atom</span>       = <span class="q">qr{[a-zA-Z0-9_!#\$\%&amp;&#39;*+/=?\^`{}~|\-]+}</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$dot_atom</span>   = <span class="q">qr{$atom(?:\.$atom)*}</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$quoted</span>     = <span class="q">qr{&quot;(?:\\[^\r\n]|[^\\&quot;])*&quot;}</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$local</span>      = <span class="q">qr{(?:$dot_atom|$quoted)}</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$quotedpair</span> = <span class="q">qr{\\[\x00-\x09\x0B-\x0c\x0e-\x7e]}</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$domain_lit</span> = <span class="q">qr{\[(?:$quotedpair|[\x21-\x5a\x5e-\x7e])*\]}</span><span class="sc">;</span></li><li> 	<a class="l_k" href="functions/my.html">my</a> <span class="i">$domain</span>     = <span class="q">qr{(?:$dot_atom|$domain_lit)}</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$addr_spec</span>  = <span class="q">qr{$local\@$domain}</span><span class="sc">;</span></li></ol></pre><p>Just match an address against <code class="inline"><span class="q">/^${addr_spec}$/</span></code>
 to see if it follows
the RFC2822 specification.  However, because it is impossible to be
sure that such a correctly formed address is actually the correct way
to reach a particular person or even has a mailbox associated with it,
you must be very careful about how you use this.</p>
<p>Our best advice for verifying a person's mail address is to have them
enter their address twice, just as you normally do to change a
password. This usually weeds out typos. If both versions match, send
mail to that address with a personal message. If you get the message
back and they've followed your directions, you can be reasonably
assured that it's real.</p>
<p>A related strategy that's less open to forgery is to give them a PIN
(personal ID number).  Record the address and PIN (best that it be a
random one) for later processing. In the mail you send, ask them to
include the PIN in their reply.  But if it bounces, or the message is
included via a "vacation" script, it'll be there anyway.  So it's
best to ask them to mail back a slight alteration of the PIN, such as
with the characters reversed, one added or subtracted to each digit, etc.</p>
<a name="How-do-I-decode-a-MIME%2fBASE64-string%3f"></a><h2>How do I decode a MIME/BASE64 string?</h2>
<p>The <code class="inline"><span class="w">MIME</span>-<span class="w">Base64</span></code>
 package (available from CPAN) handles this as well as
the MIME/QP encoding.  Decoding BASE64 becomes as simple as:</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/use.html">use</a> <span class="w">MIME::Base64</span><span class="sc">;</span></li><li>	<span class="i">$decoded</span> = <span class="i">decode_base64</span><span class="s">(</span><span class="i">$encoded</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>The <code class="inline"><span class="w">MIME</span>-<span class="w">Tools</span></code>
 package (available from CPAN) supports extraction with
decoding of BASE64 encoded attachments and content directly from email
messages.</p>
<p>If the string to decode is short (less than 84 bytes long)
a more direct approach is to use the <code class="inline"><a class="l_k" href="functions/unpack.html">unpack()</a></code> function's "u"
format after minor transliterations:</p>
<pre class="verbatim"><ol><li>	<span class="q">tr#A-Za-z0-9+/##cd</span><span class="sc">;</span>                   <span class="c"># remove non-base64 chars</span></li><li>	<span class="q">tr#A-Za-z0-9+/# -_#</span><span class="sc">;</span>                  <span class="c"># convert to uuencoded format</span></li><li>	<span class="i">$len</span> = <a class="l_k" href="functions/pack.html">pack</a><span class="s">(</span><span class="q">&quot;c&quot;</span><span class="cm">,</span> <span class="n">32</span> + <span class="n">0.75</span>*<a class="l_k" href="functions/length.html">length</a><span class="s">)</span><span class="sc">;</span>   <span class="c"># compute length byte</span></li><li>	<a class="l_k" href="functions/print.html">print</a> <a class="l_k" href="functions/unpack.html">unpack</a><span class="s">(</span><span class="q">&quot;u&quot;</span><span class="cm">,</span> <span class="i">$len</span> . <span class="i">$_</span><span class="s">)</span><span class="sc">;</span>         <span class="c"># uudecode and print</span></li></ol></pre><a name="How-do-I-return-the-user's-mail-address%3f"></a><h2>How do I return the user's mail address?</h2>
<p>On systems that support getpwuid, the <code class="inline"><span class="i">$&lt;</span></code>
 variable, and the
<code class="inline"><span class="w">Sys::Hostname</span></code>
 module (which is part of the standard perl distribution),
you can probably try using something like this:</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/use.html">use</a> <span class="w">Sys::Hostname</span><span class="sc">;</span></li><li>	<span class="i">$address</span> = <a class="l_k" href="functions/sprintf.html">sprintf</a><span class="s">(</span><span class="q">&#39;%s@%s&#39;</span><span class="cm">,</span> <a class="l_k" href="functions/scalar.html">scalar</a> <a class="l_k" href="functions/getpwuid.html">getpwuid</a><span class="s">(</span><span class="i">$&lt;</span><span class="s">)</span><span class="cm">,</span> <span class="w">hostname</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Company policies on mail address can mean that this generates addresses
that the company's mail system will not accept, so you should ask for
users' mail addresses when this matters.  Furthermore, not all systems
on which Perl runs are so forthcoming with this information as is Unix.</p>
<p>The <code class="inline"><span class="w">Mail::Util</span></code>
 module from CPAN (part of the <code class="inline"><span class="w">MailTools</span></code>
 package) provides a
<code class="inline"><span class="i">mailaddress</span><span class="s">(</span><span class="s">)</span></code>
 function that tries to guess the mail address of the user.
It makes a more intelligent guess than the code above, using information
given when the module was installed, but it could still be incorrect.
Again, the best way is often just to ask the user.</p>
<a name="How-do-I-send-mail%3f"></a><h2>How do I send mail?</h2>
<p>Use the <code class="inline"><span class="w">sendmail</span></code>
 program directly:</p>
<pre class="verbatim"><ol><li>	open(SENDMAIL, "|/usr/lib/sendmail -oi -t -odq")</li><li>		or die "Can't fork for sendmail: $!\n";</li><li>	print SENDMAIL &lt;&lt;"EOF";</li><li>	From: User Originating Mail &lt;me\@host&gt;</li><li>	To: Final Destination &lt;you\@otherhost&gt;</li><li>	Subject: A relevant subject line</li><li></li><li>	Body of the message goes here after the blank line</li><li>	in as many lines as you like.</li><li>	EOF</li><li>	close(SENDMAIL)     or warn "sendmail didn't close nicely";</li></ol></pre><p>The <b>-oi</b> option prevents <code class="inline"><span class="w">sendmail</span></code>
 from interpreting a line consisting
of a single dot as "end of message".  The <b>-t</b> option says to use the
headers to decide who to send the message to, and <b>-odq</b> says to put
the message into the queue.  This last option means your message won't
be immediately delivered, so leave it out if you want immediate
delivery.</p>
<p>Alternate, less convenient approaches include calling <code class="inline"><span class="w">mail</span></code>
 (sometimes
called <code class="inline"><span class="w">mailx</span></code>
) directly or simply opening up port 25 have having an
intimate conversation between just you and the remote SMTP daemon,
probably <code class="inline"><span class="w">sendmail</span></code>
.</p>
<p>Or you might be able use the CPAN module <code class="inline"><span class="w">Mail::Mailer</span></code>
:</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/use.html">use</a> <span class="w">Mail::Mailer</span><span class="sc">;</span></li><li></li><li>	<span class="i">$mailer</span> = <span class="w">Mail::Mailer</span><span class="w">-&gt;new</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li><li>	<span class="i">$mailer</span><span class="i">-&gt;open</span><span class="s">(</span><span class="s">{</span> <span class="w">From</span>    <span class="cm">=&gt;</span> <span class="i">$from_address</span><span class="cm">,</span></li><li>					<span class="w">To</span>      <span class="cm">=&gt;</span> <span class="i">$to_address</span><span class="cm">,</span></li><li>					<span class="w">Subject</span> <span class="cm">=&gt;</span> <span class="i">$subject</span><span class="cm">,</span></li><li>				  <span class="s">}</span><span class="s">)</span></li><li>		or <a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;Can&#39;t open: $!\n&quot;</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/print.html">print</a> <span class="i">$mailer</span> <span class="i">$body</span><span class="sc">;</span></li><li>	<span class="i">$mailer</span><span class="i">-&gt;close</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>The <code class="inline"><span class="w">Mail::Internet</span></code>
 module uses <code class="inline"><span class="w">Net::SMTP</span></code>
 which is less Unix-centric than
<code class="inline"><span class="w">Mail::Mailer</span></code>
, but less reliable.  Avoid raw SMTP commands.  There
are many reasons to use a mail transport agent like <code class="inline"><span class="w">sendmail</span></code>
.  These
include queuing, MX records, and security.</p>
<a name="How-do-I-use-MIME-to-make-an-attachment-to-a-mail-message%3f"></a><h2>How do I use MIME to make an attachment to a mail message?</h2>
<p>This answer is extracted directly from the <code class="inline"><span class="w">MIME::Lite</span></code>
 documentation.
Create a multipart message (i.e., one with attachments).</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/use.html">use</a> <span class="w">MIME::Lite</span><span class="sc">;</span></li><li></li><li>	<span class="c">### Create a new multipart message:</span></li><li>	<span class="i">$msg</span> = <span class="w">MIME::Lite</span><span class="w">-&gt;new</span><span class="s">(</span></li><li>				 <span class="w">From</span>    <span class="cm">=&gt;</span><span class="q">&#39;me@myhost.com&#39;</span><span class="cm">,</span></li><li>				 <span class="w">To</span>      <span class="cm">=&gt;</span><span class="q">&#39;you@yourhost.com&#39;</span><span class="cm">,</span></li><li>				 <span class="w">Cc</span>      <span class="cm">=&gt;</span><span class="q">&#39;some@other.com, some@more.com&#39;</span><span class="cm">,</span></li><li>				 <span class="w">Subject</span> <span class="cm">=&gt;</span><span class="q">&#39;A message with 2 parts...&#39;</span><span class="cm">,</span></li><li>				 <span class="w">Type</span>    <span class="cm">=&gt;</span><span class="q">&#39;multipart/mixed&#39;</span></li><li>				 <span class="s">)</span><span class="sc">;</span></li><li></li><li>	<span class="c">### Add parts (each &quot;attach&quot; has same arguments as &quot;new&quot;):</span></li><li>	<span class="i">$msg</span><span class="i">-&gt;attach</span><span class="s">(</span><span class="w">Type</span>     <span class="cm">=&gt;</span><span class="q">&#39;TEXT&#39;</span><span class="cm">,</span></li><li>				 <span class="w">Data</span>     <span class="cm">=&gt;</span><span class="q">&quot;Here&#39;s the GIF file you wanted&quot;</span></li><li>				 <span class="s">)</span><span class="sc">;</span></li><li>	<span class="i">$msg</span><span class="i">-&gt;attach</span><span class="s">(</span><span class="w">Type</span>     <span class="cm">=&gt;</span><span class="q">&#39;image/gif&#39;</span><span class="cm">,</span></li><li>				 <span class="w">Path</span>     <span class="cm">=&gt;</span><span class="q">&#39;aaa000123.gif&#39;</span><span class="cm">,</span></li><li>				 <span class="w">Filename</span> <span class="cm">=&gt;</span><span class="q">&#39;logo.gif&#39;</span></li><li>				 <span class="s">)</span><span class="sc">;</span></li><li></li><li>	<span class="i">$text</span> = <span class="i">$msg</span><span class="i">-&gt;as_string</span><span class="sc">;</span></li></ol></pre><p><code class="inline"><span class="w">MIME::Lite</span></code>
 also includes a method for sending these things.</p>
<pre class="verbatim"><ol><li>	<span class="i">$msg</span><span class="i">-&gt;send</span><span class="sc">;</span></li></ol></pre><p>This defaults to using <a href="http://search.cpan.org/perldoc/sendmail">sendmail</a> but can be customized to use
SMTP via <a href="Net/SMTP.html">Net::SMTP</a>.</p>
<a name="How-do-I-read-mail%3f"></a><h2>How do I read mail?</h2>
<p>While you could use the <code class="inline"><span class="w">Mail::Folder</span></code>
 module from CPAN (part of the
<code class="inline"><span class="w">MailFolder</span></code>
 package) or the <code class="inline"><span class="w">Mail::Internet</span></code>
 module from CPAN (part
of the <code class="inline"><span class="w">MailTools</span></code>
 package), often a module is overkill.  Here's a
mail sorter.</p>
<pre class="verbatim"><ol><li>	<span class="c">#!/usr/bin/perl</span></li><li></li><li>	<a class="l_k" href="functions/my.html">my</a><span class="s">(</span><span class="i">@msgs</span><span class="cm">,</span> <span class="i">@sub</span><span class="s">)</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$msgno</span> = <span class="n">-1</span><span class="sc">;</span></li><li>	<span class="i">$/</span> = <span class="q">&#39;&#39;</span><span class="sc">;</span>                    <span class="c"># paragraph reads</span></li><li>	while <span class="s">(</span>&lt;&gt;<span class="s">)</span> <span class="s">{</span></li><li>		if <span class="s">(</span><span class="q">/^From /m</span><span class="s">)</span> <span class="s">{</span></li><li>			<span class="q">/^Subject:\s*(?:Re:\s*)*(.*)/mi</span><span class="sc">;</span></li><li>			<span class="i">$sub</span>[++<span class="i">$msgno</span>] = <a class="l_k" href="functions/lc.html">lc</a><span class="s">(</span><span class="i">$1</span><span class="s">)</span> || <span class="q">&#39;&#39;</span><span class="sc">;</span></li><li>		<span class="s">}</span></li><li>		<span class="i">$msgs</span>[<span class="i">$msgno</span>] .= <span class="i">$_</span><span class="sc">;</span></li><li>	<span class="s">}</span></li><li>	for <a class="l_k" href="functions/my.html">my</a> <span class="i">$i</span> <span class="s">(</span><a class="l_k" href="functions/sort.html">sort</a> <span class="s">{</span> <span class="i">$sub</span>[<span class="i">$a</span>] cmp <span class="i">$sub</span>[<span class="i">$b</span>] || <span class="i">$a</span> &lt;=&gt; <span class="i">$b</span> <span class="s">}</span> <span class="s">(</span><span class="n">0</span> .. <span class="i">$#msgs</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span></li><li>		<a class="l_k" href="functions/print.html">print</a> <span class="i">$msgs</span>[<span class="i">$i</span>]<span class="sc">;</span></li><li>	<span class="s">}</span></li></ol></pre><p>Or more succinctly,</p>
<pre class="verbatim"><ol><li>	<span class="c">#!/usr/bin/perl -n00</span></li><li>	<span class="c"># bysub2 - awkish sort-by-subject</span></li><li>	BEGIN <span class="s">{</span> <span class="i">$msgno</span> = <span class="n">-1</span> <span class="s">}</span></li><li>	<span class="i">$sub</span>[++<span class="i">$msgno</span>] = <span class="s">(</span><span class="q">/^Subject:\s*(?:Re:\s*)*(.*)/mi</span><span class="s">)</span>[<span class="n">0</span>] if <span class="q">/^From/m</span><span class="sc">;</span></li><li>	<span class="i">$msg</span>[<span class="i">$msgno</span>] .= <span class="i">$_</span><span class="sc">;</span></li><li>	END <span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="i">@msg</span>[ <a class="l_k" href="functions/sort.html">sort</a> <span class="s">{</span> <span class="i">$sub</span>[<span class="i">$a</span>] cmp <span class="i">$sub</span>[<span class="i">$b</span>] || <span class="i">$a</span> &lt;=&gt; <span class="i">$b</span> <span class="s">}</span> <span class="s">(</span><span class="n">0</span> .. <span class="i">$#msg</span><span class="s">)</span> ] <span class="s">}</span></li></ol></pre><a name="How-do-I-find-out-my-hostname%2c-domainname%2c-or-IP-address%3f"></a><h2>How do I find out my hostname, domainname, or IP address?
</h2>
<p>(contributed by brian d foy)</p>
<p>The <code class="inline"><span class="w">Net::Domain</span></code>
 module, which is part of the standard distribution starting
in perl5.7.3, can get you the fully qualified domain name (FQDN), the host
name, or the domain name.</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/use.html">use</a> <span class="w">Net::Domain</span> <span class="q">qw(hostname hostfqdn hostdomain)</span><span class="sc">;</span></li><li></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$host</span> = <span class="i">hostfqdn</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>The <code class="inline"><span class="w">Sys::Hostname</span></code>
 module, included in the standard distribution since
perl5.6, can also get the hostname.</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/use.html">use</a> <span class="w">Sys::Hostname</span><span class="sc">;</span></li><li></li><li>	<span class="i">$host</span> = <span class="i">hostname</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>To get the IP address, you can use the <code class="inline"><a class="l_k" href="functions/gethostbyname.html">gethostbyname</a></code> built-in function
to turn the name into a number. To turn that number into the dotted octet
form (a.b.c.d) that most people expect, use the <code class="inline"><span class="w">inet_ntoa</span></code>
 function
from the <code class="inline"><span class="w">Socket</span></code>
 module, which also comes with perl.</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/use.html">use</a> <span class="w">Socket</span><span class="sc">;</span></li><li></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$address</span> = <span class="i">inet_ntoa</span><span class="s">(</span></li><li>		<a class="l_k" href="functions/scalar.html">scalar</a> <a class="l_k" href="functions/gethostbyname.html">gethostbyname</a><span class="s">(</span> <span class="i">$host</span> || <span class="q">&#39;localhost&#39;</span> <span class="s">)</span></li><li>		<span class="s">)</span><span class="sc">;</span></li></ol></pre><a name="How-do-I-fetch-a-news-article-or-the-active-newsgroups%3f"></a><h2>How do I fetch a news article or the active newsgroups?</h2>
<p>Use the <code class="inline"><span class="w">Net::NNTP</span></code>
 or <code class="inline"><span class="w">News::NNTPClient</span></code>
 modules, both available from CPAN.
This can make tasks like fetching the newsgroup list as simple as</p>
<pre class="verbatim"><ol><li>	<span class="w">perl</span> -<span class="w">MNews::NNTPClient</span></li><li>	  -e <span class="q">&#39;print News::NNTPClient-&gt;new-&gt;list(&quot;newsgroups&quot;)&#39;</span></li></ol></pre><a name="How-do-I-fetch%2fput-an-FTP-file%3f"></a><h2>How do I fetch/put an FTP file?</h2>
<p>(contributed by brian d foy)</p>
<p>The <code class="inline"><span class="w">LWP</span></code>
 family of modules (available on CPAN as the libwww-perl distribution)
can work with FTP just like it can with many other protocols. <code class="inline"><span class="w">LWP::Simple</span></code>

makes it quite easy to fetch a file:</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/use.html">use</a> <span class="w">LWP::Simple</span><span class="sc">;</span></li><li></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$data</span> = <span class="i">get</span><span class="s">(</span> <span class="q">&#39;ftp://some.ftp.site/some/file.txt&#39;</span> <span class="s">)</span><span class="sc">;</span></li></ol></pre><p>If you want more direct or low-level control of the FTP process, you can use
the <code class="inline"><span class="w">Net::FTP</span></code>
 module (in the Standard Library since Perl 5.8). It's
documentation has examples showing you just how to do that.</p>
<a name="How-can-I-do-RPC-in-Perl%3f"></a><h2>How can I do RPC in Perl?</h2>
<p>(contributed by brian d foy)</p>
<p>Use one of the RPC modules you can find on CPAN (
<a href="http://search.cpan.org/search?query=RPC&amp;mode=all">http://search.cpan.org/search?query=RPC&amp;mode=all</a> ).</p>
<a name="AUTHOR-AND-COPYRIGHT"></a><h1>AUTHOR AND COPYRIGHT</h1>
<p>Copyright (c) 1997-2010 Tom Christiansen, Nathan Torkington, and
other authors as noted. All rights reserved.</p>
<p>This documentation is free; you can redistribute it and/or modify it
under the same terms as Perl itself.</p>
<p>Irrespective of its distribution, all code examples in this file
are hereby placed into the public domain.  You are permitted and
encouraged to use this code in your own programs for fun
or for profit as you see fit.  A simple comment in the code giving
credit would be courteous but is not required.</p>




  <div id="page_index" class="hud_container">
    <div id="page_index_header" class="hud_header">
      <div id="page_index_close" class="hud_close"><a href="#" onClick="pageIndex.hide();return false;"></a></div>
      <div id="page_index_title" class="hud_title"><span class="hud_span_top">Page index</span></div>
      <div id="page_index_topright" class="hud_topright"></div>
    </div>
    <div id="page_index_content" class="hud_content">
      <ul><li><a href="#NAME">NAME</a><li><a href="#DESCRIPTION">DESCRIPTION</a><ul><li><a href="#What-is-the-correct-form-of-response-from-a-CGI-script%3f">What is the correct form of response from a CGI script?</a><li><a href="#My-CGI-script-runs-from-the-command-line-but-not-the-browser.-(500-Server-Error)">My CGI script runs from the command line but not the browser. (500 Server Error)</a><li><a href="#How-can-I-get-better-error-messages-from-a-CGI-program%3f">How can I get better error messages from a CGI program?</a><li><a href="#How-do-I-remove-HTML-from-a-string%3f">How do I remove HTML from a string?</a><li><a href="#How-do-I-extract-URLs%3f">How do I extract URLs?</a><li><a href="#How-do-I-download-a-file-from-the-user's-machine%3f--How-do-I-open-a-file-on-another-machine%3f">How do I download a file from the user's machine?  How do I open a file on another machine?</a><li><a href="#How-do-I-make-an-HTML-pop-up-menu-with-Perl%3f">How do I make an HTML pop-up menu with Perl?</a><li><a href="#How-do-I-fetch-an-HTML-file%3f">How do I fetch an HTML file?</a><li><a href="#How-do-I-automate-an-HTML-form-submission%3f">How do I automate an HTML form submission?</a><li><a href="#How-do-I-decode-or-create-those-%25-encodings-on-the-web%3f">How do I decode or create those %-encodings on the web?
    </a><li><a href="#How-do-I-redirect-to-another-page%3f">How do I redirect to another page?</a><li><a href="#How-do-I-put-a-password-on-my-web-pages%3f">How do I put a password on my web pages?</a><li><a href="#How-do-I-edit-my-.htpasswd-and-.htgroup-files-with-Perl%3f">How do I edit my .htpasswd and .htgroup files with Perl?</a><li><a href="#How-do-I-make-sure-users-can't-enter-values-into-a-form-that-cause-my-CGI-script-to-do-bad-things%3f">How do I make sure users can't enter values into a form that cause my CGI script to do bad things?</a><li><a href="#How-do-I-parse-a-mail-header%3f">How do I parse a mail header?</a><li><a href="#How-do-I-decode-a-CGI-form%3f">How do I decode a CGI form?</a><li><a href="#How-do-I-check-a-valid-mail-address%3f">How do I check a valid mail address?</a><li><a href="#How-do-I-decode-a-MIME%2fBASE64-string%3f">How do I decode a MIME/BASE64 string?</a><li><a href="#How-do-I-return-the-user's-mail-address%3f">How do I return the user's mail address?</a><li><a href="#How-do-I-send-mail%3f">How do I send mail?</a><li><a href="#How-do-I-use-MIME-to-make-an-attachment-to-a-mail-message%3f">How do I use MIME to make an attachment to a mail message?</a><li><a href="#How-do-I-read-mail%3f">How do I read mail?</a><li><a href="#How-do-I-find-out-my-hostname%2c-domainname%2c-or-IP-address%3f">How do I find out my hostname, domainname, or IP address?
</a><li><a href="#How-do-I-fetch-a-news-article-or-the-active-newsgroups%3f">How do I fetch a news article or the active newsgroups?</a><li><a href="#How-do-I-fetch%2fput-an-FTP-file%3f">How do I fetch/put an FTP file?</a><li><a href="#How-can-I-do-RPC-in-Perl%3f">How can I do RPC in Perl?</a></ul><li><a href="#AUTHOR-AND-COPYRIGHT">AUTHOR AND COPYRIGHT</a></ul>
    </div>
    <div id="page_index_footer" class="hud_footer">
      <div id="page_index_bottomleft" class="hud_bottomleft"></div>
      <div id="page_index_bottom" class="hud_bottom"><span class="hud_span_bottom"></span></div>
      <div id="page_index_resize" class="hud_resize"></div>
    </div>
  </div>


	    &nbsp;
          </div>
          <div id="content_footer">
          </div>
        </div>
        <div class="clear"></div>
      </div>
      
    <div id="footer" style="display: none">
      <div id="footer_content">
        <div id="footer_strapline">
          perldoc.perl.org - Official documentation for the Perl programming language
        </div>
        <div id="footer_links">
          <div id="address">
            <p class="name">Contact details</p>
            <p class="address">
	      Site maintained by <a href="http://perl.jonallen.info">Jon Allen (JJ)</a><br>
	      See the <a href="http://perl.jonallen.info/projects/perldoc">project page</a> for more details
	    </p>
            <p class="contact">
              Documentation maintained by the <a href="http://lists.cpan.org/showlist.cgi?name=perl5-porters">Perl 5 Porters</a>
            </p>
          </div>
          <ul class="f1">
            <li>Manual
              <ul class="f2">
                <li><a href="index-overview.html">Overview</a>
                <li><a href="index-tutorials.html">Tutorials</a>
                <li><a href="index-faq.html">FAQs</a>
                <li><a href="index-history.html">Changes</a>
              </ul>
            <li>Reference
              <ul class="f2">
                <li><a href="index-language.html">Language</a>
                <li><a href="index-functions.html">Functions</a>
                <li><a href="perlop.html">Operators</a>
                <li><a href="perlvar.html">Variables</a>
              </ul>
            <li>Modules
              <ul class="f2">
                <li><a href="index-modules-A.html">Modules</a>
                <li><a href="index-pragmas.html">Pragmas</a>
                <li><a href="index-utilities.html">Utilities</a>
              </ul>
            <li>Misc
              <ul class="f2">
                <li><a href="index-licence.html">License</a>
                <li><a href="index-internals.html">Internals</a>
                <li><a href="index-platforms.html">Platforms</a>
              </ul>          </ul>
          <div class="clear"></div>
        </div>
      </div>
      <div id="footer_end">
      </div>
    </div>
      
    </div>
      <script language="JavaScript" type="text/javascript" src="static/exploreperl.js"></script>
      <script language="JavaScript" src="static/combined-20100403.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
  perldoc.setPath(0);
  perldoc.pageName    = 'perlfaq9';
  perldoc.pageAddress = 'perlfaq9.html';
  perldoc.contentPage = 1;
  explorePerl.render();
  explorePerl.addEvents('explore_anchor');
</script>
    
  </body>
</html>
