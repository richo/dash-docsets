<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <title>perl5135delta - perldoc.perl.org</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta http-equiv="Content-Language" content="en-gb">
  <link rel="search" type="application/opensearchdescription+xml" title="Search perldoc.perl.org" href="/static/search.xml"/>
  <link href="static/css-20100830.css" rel="stylesheet" rev="stylesheet" type="text/css" media="screen">
  <link href="static/exploreperl.css" rel="stylesheet" rev="stylesheet" type="text/css">
</head>

<body onLoad="perldoc.startup();" onPageShow="if (event.persisted) perldoc.startup();">
    <div id="page" style="width:  731px">
      
      <div id="header" style="display: none">
	<div id="homepage_link">
	  <a href="index.html"></a>
	</div>
	<div id="strapline">
	  Perl Programming Documentation
	</div>
	<div id="download_link" class="download">
	  <a href="http://www.perl.org/get.html">Download Perl</a>
	</div>
	<div id="explore_link" class="download">
	  <a id="explore_anchor" href="#">Explore</a>
	</div>
      </div>
      
      <div id="body">
        <div id="left_column" style="display: none">
          <div class="side_group">
            
	    <div class="side_panel doc_panel">
              <p>Manual</p>
              <ul>
                <li><a href="index-overview.html">Overview</a>
                <li><a href="index-tutorials.html">Tutorials</a>
                <li><a href="index-faq.html">FAQs</a>
                <li><a href="index-history.html">History / Changes</a>
                <li><a href="index-licence.html">License</a>
              </ul>
            </div>
            <div class="side_panel doc_panel">
              <p>Reference</p>
              <ul>
                <li><a href="index-language.html">Language</a>
                <li><a href="index-functions.html">Functions</a>
                <li><a href="perlop.html">Operators</a>
                <li><a href="perlvar.html">Special Variables</a>
                <li><a href="index-pragmas.html">Pragmas</a>
                <li><a href="index-utilities.html">Utilities</a>
                <li><a href="index-internals.html">Internals</a>
                <li><a href="index-platforms.html">Platform Specific</a>
              </ul>
            </div>
            <div class="side_panel doc_panel">
              <p>Modules</p>
              <ul>
		<li>
		
                
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		
                  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		
                  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		
                  
		
                  
		    
		  
		
                  
		
                  
		
		
                    <a href="index-modules-A.html">A</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-B.html">B</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-C.html">C</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-D.html">D</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-E.html">E</a>
                    
                      
                        <li>
                      
                    
                
                    <a href="index-modules-F.html">F</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-G.html">G</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-H.html">H</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-I.html">I</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-L.html">L</a>
                    
                      
                        <li>
                      
                    
                
                    <a href="index-modules-M.html">M</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-N.html">N</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-O.html">O</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-P.html">P</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-S.html">S</a>
                    
                      
                        <li>
                      
                    
                
                    <a href="index-modules-T.html">T</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-U.html">U</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="index-modules-X.html">X</a>
                    
                
              </ul>
            </div>
            
	      <div class="side_panel doc_panel">
		<p>Tools</p>
		<ul>
		  <li><a href="preferences.html">Preferences</a>
		</ul>
	      </div>
            
          </div>
        </div>
        <div id="centre_column" style="margin-left: 0px; margin-right: 0px">
          <div id="content_header" style="display: none">
            <div id="title_bar">
              <div id="page_name">
                <h1>perl5135delta</h1>
              </div>
              <div id="perl_version">
                Perl 5 version 14.0 documentation
              </div>
              <div class="page_links" id="page_links_top">
                <a href="#" onClick="toolbar.goToTop();return false;">Go to top</a>
		
              </div>
	      <div class="page_links" id="page_links_bottom">
		
                  <a href="#" id="page_index_toggle">Show page index</a> &bull;
		
                <a href="#" id="recent_pages_toggle">Show recent pages</a>		
	      </div>
	      <div id="search_form">
		<form action="search.html" method="GET" id="search">
		  <input type="text" name="q" id="search_box" alt="Search">
		</form>
	      </div>
            </div>
            <div id="breadcrumbs">
                
    <a href="index.html">Home</a> &gt;
    
      
        <a href="index-history.html">History / Changes</a> &gt;
      
    
    perl5135delta
  

            </div>
          </div>
          <div id="content_body" style="font-size:100%">
	    <!--[if lt IE 7]>
 <div class="noscript">
   <p>
     <strong>It looks like you're using Internet Explorer 6. This is a very old
     browser which does not offer full support for modern websites.</strong>
   </p>
   <p>
     Unfortunately this means that this website will not work on
     your computer.
   </p>
   <p>
     Don't miss out though! To view the site (and get a better experience from
     many other websites), simply upgrade to
     <a href="http://www.microsoft.com/windows/Internet-explorer/default.aspx">Internet
Explorer 8</a>
     or download an alternative browser such as
     <a href="http://www.mozilla.com/en-US/firefox/firefox.html">Firefox</a>,
     <a href="http://www.apple.com/safari/download/">Safari</a>, or
     <a href="http://www.google.co.uk/chrome">Google Chrome</a>.
   </p>
   <p>
     All of these browsers are free. If you're using a PC at work, you may
     need to contact your IT administrator.
   </p>
 </div>
<![endif]-->
	    <noscript>
	      <div class="noscript">
	      <p>
                <strong>Please note: Many features of this site require JavaScript. You appear to have JavaScript disabled,
	        or are running a non-JavaScript capable web browser.</strong>
	      </p>
	      <p>
		To get the best experience, please enable JavaScript or download a modern web browser such as <a href="http://www.microsoft.com/windows/Internet-explorer/default.aspx">Internet Explorer 8</a>, <a href="http://www.mozilla.com/en-US/firefox/firefox.html">Firefox</a>, <a href="http://www.apple.com/safari/download/">Safari</a>, or <a href="http://www.google.co.uk/chrome">Google Chrome</a>.
              </p>
	      </div>
	    </noscript>

	    <div id="recent_pages" class="hud_container">
	      <div id="recent_pages_header" class="hud_header">
		<div id="recent_pages_close" class="hud_close"><a href="#" onClick="recentPages.hide();return false;"></a></div>
		<div id="recent_pages_title" class="hud_title"><span class="hud_span_top">Recently read</span></div>
		<div id="recent_pages_topright" class="hud_topright"></div>
	      </div>
	      <div id="recent_pages_content" class="hud_content">
	      </div>
	      <div id="recent_pages_footer" class="hud_footer">
		<div id="recent_pages_bottomleft" class="hud_bottomleft"></div>
		<div id="recent_pages_bottom" class="hud_bottom"><span class="hud_span_bottom"></span></div>
		<div id="recent_pages_resize" class="hud_resize"></div>
	      </div>
	    </div>
  
	    <div id="from_search"></div>
            <h1>perl5135delta</h1>


  <!--    -->
<ul><li><a href="#NAME">NAME</a><li><a href="#DESCRIPTION">DESCRIPTION</a><li><a href="#Core-Enhancements">Core Enhancements</a><ul><li><a href="#Adjacent-pairs-of-nextstate-opcodes-are-now-optimized-away">Adjacent pairs of nextstate opcodes are now optimized away</a><li><a href="#API-function-to-parse-statements">API function to parse statements</a><li><a href="#API-functions-for-accessing-the-runtime-hinthash">API functions for accessing the runtime hinthash</a><li><a href="#C-interface-to-caller()">C interface to caller()</a></ul><li><a href="#Incompatible-Changes">Incompatible Changes</a><ul><li><a href="#Magic-variables-outside-the-main-package">Magic variables outside the main package</a><li><a href="#Smart-matching-against-array-slices">Smart-matching against array slices</a><li><a href="#C-API-changes">C API changes</a></ul><li><a href="#Deprecations">Deprecations</a><ul><li><a href="#Use-of-qw(...)-as-parentheses">Use of qw(...) as parentheses</a></ul><li><a href="#Performance-Enhancements">Performance Enhancements</a><li><a href="#Modules-and-Pragmata">Modules and Pragmata</a><ul><li><a href="#Updated-Modules-and-Pragmata">Updated Modules and Pragmata</a></ul><li><a href="#Documentation">Documentation</a><ul><li><a href="#Changes-to-Existing-Documentation">Changes to Existing Documentation</a></ul><li><a href="#Diagnostics">Diagnostics</a><ul><li><a href="#New-Diagnostics">New Diagnostics</a><li><a href="#Changes-to-Existing-Diagnostics">Changes to Existing Diagnostics</a></ul><li><a href="#Utility-Changes">Utility Changes</a><li><a href="#Testing">Testing</a><li><a href="#Platform-Support">Platform Support</a><ul><li><a href="#Platform-Specific-Notes">Platform-Specific Notes</a></ul><li><a href="#Internal-Changes">Internal Changes</a><li><a href="#Selected-Bug-Fixes">Selected Bug Fixes</a><li><a href="#Known-Problems">Known Problems</a><li><a href="#Acknowledgements">Acknowledgements</a><li><a href="#Reporting-Bugs">Reporting Bugs</a><li><a href="#SEE-ALSO">SEE ALSO</a></ul><a name="NAME"></a><h1>NAME</h1>
<p>perl5135delta - what is new for perl v5.13.5</p>
<a name="DESCRIPTION"></a><h1>DESCRIPTION</h1>
<p>This document describes differences between the 5.13.4 release and
the 5.13.5 release.</p>
<p>If you are upgrading from an earlier release such as 5.13.3, first read
<a href="perl5134delta.html">perl5134delta</a>, which describes differences between 5.13.3 and
5.13.4.</p>
<a name="Core-Enhancements"></a><h1>Core Enhancements</h1>
<a name="Adjacent-pairs-of-nextstate-opcodes-are-now-optimized-away"></a><h2>Adjacent pairs of nextstate opcodes are now optimized away</h2>
<p>Previously, in code such as</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">constant</span> <span class="i">DEBUG</span> <span class="cm">=&gt;</span> <span class="n">0</span><span class="sc">;</span></li><li></li><li><a name="GAK"></a>    sub <span class="m">GAK</span> <span class="s">{</span></li><li>        <a class="l_k" href="functions/warn.html">warn</a> if <span class="i">DEBUG</span><span class="sc">;</span></li><li>        <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;stuff\n&quot;</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><p>the ops for <code class="inline"><a class="l_k" href="functions/warn.html">warn</a> if <span class="w">DEBUG</span><span class="sc">;</span></code>
 would be folded to a <code class="inline"><span class="w">null</span></code>
 op (<code class="inline"><span class="w">ex</span>-<span class="w">const</span></code>
), but
the <code class="inline"><span class="w">nextstate</span></code>
 op would remain, resulting in a runtime op dispatch of
<code class="inline"><span class="w">nextstate</span></code>
, <code class="inline"><span class="w">nextstate</span></code>
, ...</p>
<p>The execution of a sequence of <code class="inline"><span class="w">nextstate</span></code>
 ops is indistinguishable from just
the last <code class="inline"><span class="w">nextstate</span></code>
 op so the peephole optimizer now eliminates the first of
a pair of <code class="inline"><span class="w">nextstate</span></code>
 ops, except where the first carries a label, since labels
must not be eliminated by the optimizer and label usage isn't conclusively known
at compile time.</p>
<a name="API-function-to-parse-statements"></a><h2>API function to parse statements</h2>
<p>The <code class="inline"><span class="w">parse_fullstmt</span></code>
 function has been added to allow parsing of a single
complete Perl statement.  See <a href="perlapi.html">perlapi</a> for details.</p>
<a name="API-functions-for-accessing-the-runtime-hinthash"></a><h2>API functions for accessing the runtime hinthash</h2>
<p>A new C API for introspecting the hinthash <code class="inline"><span class="i">%^H</span></code>
 at runtime has been added.
See <code class="inline"><span class="w">cop_hints_2hv</span></code>
, <code class="inline"><span class="w">cop_hints_fetchpvn</span></code>
, <code class="inline"><span class="w">cop_hints_fetchpvs</span></code>
,
<code class="inline"><span class="w">cop_hints_fetchsv</span></code>
, and <code class="inline"><span class="w">hv_copy_hints_hv</span></code>
 in <a href="perlapi.html">perlapi</a> for details.</p>
<a name="C-interface-to-caller()"></a><h2>C interface to <code class="inline"><a class="l_k" href="functions/caller.html">caller()</a></code></h2>
<p>The <code class="inline"><span class="w">caller_cx</span></code>
 function has been added as an XSUB-writer's equivalent of
<code class="inline"><a class="l_k" href="functions/caller.html">caller()</a></code>.  See <a href="perlapi.html">perlapi</a> for details.</p>
<a name="Incompatible-Changes"></a><h1>Incompatible Changes</h1>
<a name="Magic-variables-outside-the-main-package"></a><h2>Magic variables outside the main package</h2>
<p>In previous versions of Perl, magic variables like <code class="inline"><span class="i">$!</span></code>
, <code class="inline"><span class="i">%SIG</span></code>
, etc. would
'leak' into other packages.  So <code class="inline"><span class="i">%foo::SIG</span></code>
 could be used to access signals,
<code class="inline"><span class="i">$</span>{<span class="q">&quot;foo::!&quot;</span>}</code>
 (with strict mode off) to access C's <code class="inline"><span class="w">errno</span></code>
, etc.</p>
<p>This was a bug, or an 'unintentional' feature, which caused various ill effects,
such as signal handlers being wiped when modules were loaded, etc.</p>
<p>This has been fixed (or the feature has been removed, depending on how you see
it).</p>
<a name="Smart-matching-against-array-slices"></a><h2>Smart-matching against array slices</h2>
<p>Previously, the following code resulted in a successful match:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/my.html">my</a> <span class="i">@a</span> = <span class="q">qw(a y0 z)</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/my.html">my</a> <span class="i">@b</span> = <span class="q">qw(a x0 z)</span><span class="sc">;</span></li><li>    <span class="i">@a</span>[<span class="n">0</span> .. <span class="i">$#b</span>] ~~ <span class="i">@b</span><span class="sc">;</span></li></ol></pre><p>This odd behaviour has now been fixed
<a href="http://search.cpan.org/perldoc/http:#%2frt.perl.org%2frt3%2f%2fPublic%2fBug%2fDisplay.html%3fid%3d77468">[perl #77468]</a>.</p>
<a name="C-API-changes"></a><h2>C API changes</h2>
<p>The first argument of the C API function <code class="inline"><span class="w">Perl_fetch_cop_label</span></code>
 has changed
from <code class="inline"><span class="w">struct</span> <span class="w">refcounted</span> <span class="w">he</span> *</code>
 to <code class="inline"><span class="w">COP</span> *</code>
, to better insulate the user from
implementation details.</p>
<p>This API function was marked as "may change", and likely isn't in use outside
the core.  (Neither an unpacked CPAN, nor Google's codesearch, finds any other
references to it.)</p>
<a name="Deprecations"></a><h1>Deprecations</h1>
<a name="Use-of-qw(...)-as-parentheses"></a><h2>Use of qw(...) as parentheses</h2>
<p>Historically the parser fooled itself into thinking that <code class="inline"><a class="l_k" href="functions/qw.html">qw(...)</a></code> literals
were always enclosed in parentheses, and as a result you could sometimes omit
parentheses around them:</p>
<pre class="verbatim"><ol><li>    for <span class="i">$x</span> <span class="q">qw(a b c)</span> <span class="s">{</span> ... <span class="s">}</span></li></ol></pre><p>The parser no longer lies to itself in this way.  Wrap the list literal in
parentheses, like:</p>
<pre class="verbatim"><ol><li>    for <span class="i">$x</span> <span class="s">(</span><span class="q">qw(a b c)</span><span class="s">)</span> <span class="s">{</span> ... <span class="s">}</span></li></ol></pre><a name="Performance-Enhancements"></a><h1>Performance Enhancements</h1>
<ul>
<li>
<p>Scalars containing regular expressions now only allocate the part of the <code class="inline"><span class="w">SV</span></code>

body they actually use, saving some space.</p>
</li>
<li>
<p>Compiling regular expressions has been made faster for the case where upgrading
the regex to utf8 is necessary but that isn't known when the compilation begins.</p>
</li>
</ul>
<a name="Modules-and-Pragmata"></a><h1>Modules and Pragmata</h1>
<a name="Updated-Modules-and-Pragmata"></a><h2>Updated Modules and Pragmata</h2>
<ul>
<li><a name="bignum"></a><b><code class="inline"><span class="w">bignum</span></code>
</b>
<p>Upgraded from version 0.23 to 0.25.</p>
</li>
<li><a name="blib"></a><b><code class="inline"><span class="w">blib</span></code>
</b>
<p>Upgraded from version 1.05 to 1.06.</p>
</li>
<li><a name="open"></a><b><code class="inline"><a class="l_k" href="functions/open.html">open</a></code></b>
<p>Upgraded from version 1.07 to 1.08.</p>
</li>
<li><a name="threads-shared"></a><b><code class="inline"><span class="w">threads</span>-<span class="w">shared</span></code>
</b>
<p>Upgraded from version 1.33_02 to 1.33_03.</p>
</li>
<li><a name="warnings-and-warnings%3a%3aregister"></a><b><code class="inline"><span class="w">warnings</span></code>
 and <code class="inline"><span class="w">warnings::register</span></code>
</b>
<p>Upgraded from version 1.10 to 1.11 and from version 1.01 to 1.02 respectively.</p>
<p>It is now possible to register warning categories other than the names of
packages using <code class="inline"><span class="w">warnings::register</span></code>
.  See <a href="perllexwarn.html">perllexwarn</a> for more information.</p>
</li>
<li><a name="B%3a%3aDebug"></a><b><code class="inline"><span class="w">B::Debug</span></code>
</b>
<p>Upgraded from version 1.12 to 1.16.</p>
</li>
<li><a name="CPANPLUS%3a%3aDist%3a%3aBuild"></a><b><code class="inline"><span class="w">CPANPLUS::Dist::Build</span></code>
</b>
<p>Upgraded from version 0.46 to 0.48.</p>
</li>
<li><a name="Data%3a%3aDumper"></a><b><code class="inline"><span class="w">Data::Dumper</span></code>
</b>
<p>Upgraded from version 2.126 to 2.128.</p>
<p>This fixes a crash when using custom sort functions that might cause the stack
to change.</p>
</li>
<li><a name="Encode"></a><b><code class="inline"><span class="w">Encode</span></code>
</b>
<p>Upgraded from version 2.39 to 2.40.</p>
</li>
<li><a name="Errno"></a><b><code class="inline"><span class="w">Errno</span></code>
</b>
<p>Upgraded from version 1.12 to 1.13.</p>
<p>On some platforms with unusual header files, like Win32/gcc using mingw64
headers, some constants which weren't actually error numbers have been exposed
by <code class="inline"><span class="w">Errno</span></code>
.  This has been fixed
<a href="http://search.cpan.org/perldoc/http:#%2frt.perl.org%2frt3%2f%2fPublic%2fBug%2fDisplay.html%3fid%3d77416">[perl #77416]</a>.</p>
</li>
<li><a name="ExtUtils%3a%3aMakeMaker"></a><b><code class="inline"><span class="w">ExtUtils::MakeMaker</span></code>
</b>
<p>Upgraded from version 6.5601 to 6.57_05.</p>
</li>
<li><a name="Filter%3a%3aSimple"></a><b><code class="inline"><span class="w">Filter::Simple</span></code>
</b>
<p>Upgraded from version 0.84 to 0.85.</p>
</li>
<li><a name="Hash%3a%3aUtil"></a><b><code class="inline"><span class="w">Hash::Util</span></code>
</b>
<p>Upgraded from version 0.08 to 0.09.</p>
</li>
<li><a name="Math%3a%3aBigInt"></a><b><code class="inline"><span class="w">Math::BigInt</span></code>
</b>
<p>Upgraded from version 1.89_01 to 1.95.</p>
<p>This fixes, among other things, incorrect results when computing binomial
coefficients
<a href="http://search.cpan.org/perldoc/http:#%2frt.perl.org%2frt3%2fPublic%2fBug%2fDisplay.html%3fid%3d77640">[perl #77640]</a>.</p>
</li>
<li><a name="Math%3a%3aBigInt%3a%3aFastCalc"></a><b><code class="inline"><span class="w">Math::BigInt::FastCalc</span></code>
</b>
<p>Upgraded from version 0.19 to 0.22.</p>
</li>
<li><a name="Math%3a%3aBigRat"></a><b><code class="inline"><span class="w">Math::BigRat</span></code>
</b>
<p>Upgraded from version 0.24 to 0.26.</p>
</li>
<li><a name="Module%3a%3aCoreList"></a><b><code class="inline"><span class="w">Module::CoreList</span></code>
</b>
<p>Upgraded from version 2.37 to 2.38.</p>
</li>
<li><a name="PerlIO%3a%3ascalar"></a><b><code class="inline"><span class="w">PerlIO::scalar</span></code>
</b>
<p>Upgraded from version 0.08 to 0.09.</p>
</li>
<li><a name="POSIX"></a><b><code class="inline"><span class="w">POSIX</span></code>
</b>
<p>Upgraded from version 1.19 to 1.20.</p>
<p>It now includes constants for POSIX signal constants.</p>
</li>
<li><a name="Safe"></a><b><code class="inline"><span class="w">Safe</span></code>
</b>
<p>Upgraded from version 2.27 to 2.28.</p>
<p>This fixes a possible infinite loop when looking for coderefs.</p>
</li>
<li><a name="Test%3a%3aSimple"></a><b><code class="inline"><span class="w">Test::Simple</span></code>
</b>
<p>Upgraded from version 0.96 to 0.97_01.</p>
</li>
<li><a name="Tie%3a%3aHash"></a><b><code class="inline"><span class="w">Tie::Hash</span></code>
</b>
<p>Upgraded from version 1.03 to 1.04.</p>
<p>Calling <code class="inline"><span class="w">Tie::Hash</span><span class="w">-&gt;TIEHASH</span><span class="s">(</span><span class="s">)</span></code>
 used to loop forever.  Now it <code class="inline"><span class="w">croak</span></code>
s.</p>
</li>
<li><a name="Unicode%3a%3aCollate"></a><b><code class="inline"><span class="w">Unicode::Collate</span></code>
</b>
<p>Upgraded from version 0.56 to 0.59.</p>
</li>
<li><a name="XSLoader"></a><b><code class="inline"><span class="w">XSLoader</span></code>
</b>
<p>Upgraded from version 0.10 to 0.11.</p>
</li>
</ul>
<a name="Documentation"></a><h1>Documentation</h1>
<a name="Changes-to-Existing-Documentation"></a><h2>Changes to Existing Documentation</h2>
<a name="the-perlapi-manpage"></a><h3><a href="perlapi.html">perlapi</a></h3>
<ul>
<li>
<p>Many of the optree construction functions are now documented.</p>
</li>
</ul>
<a name="the-perlbook-manpage"></a><h3><a href="perlbook.html">perlbook</a></h3>
<ul>
<li>
<p>Expanded to cover many more popular books.</p>
</li>
</ul>
<a name="the-perlfaq-manpage"></a><h3><a href="perlfaq.html">perlfaq</a></h3>
<ul>
<li>
<p><a href="perlfaq.html">perlfaq</a>, <a href="perlfaq2.html">perlfaq2</a>, <a href="perlfaq4.html">perlfaq4</a>, <a href="perlfaq5.html">perlfaq5</a>, <a href="perlfaq6.html">perlfaq6</a>, <a href="perlfaq8.html">perlfaq8</a>, and
<a href="perlfaq9.html">perlfaq9</a> have seen various updates and modernizations.</p>
</li>
</ul>
<a name="Diagnostics"></a><h1>Diagnostics</h1>
<p>The following additions or changes have been made to diagnostic output,
including warnings and fatal error messages.  For the complete list of
diagnostic messages, see <a href="perldiag.html">perldiag</a>.</p>
<a name="New-Diagnostics"></a><h2>New Diagnostics</h2>
<ul>
<li>
<p>Parsing code internal error (%s)</p>
<p>New fatal error produced when parsing code supplied by an extension violated the
parser's API in a detectable way.</p>
</li>
<li>
<p>Use of qw(...) as parentheses is deprecated</p>
<p>See <a href="#Use-of-qw(...)-as-parentheses">Use of qw(...) as parentheses</a> for details.</p>
</li>
</ul>
<a name="Changes-to-Existing-Diagnostics"></a><h2>Changes to Existing Diagnostics</h2>
<ul>
<li>
<p><code class="inline"><a class="l_k" href="functions/warn.html">warn</a></code> and <code class="inline"><a class="l_k" href="functions/die.html">die</a></code> now produce 'Wide character' warnings when fed a
character outside the byte range if STDERR is a byte-sized handle.</p>
</li>
</ul>
<a name="Utility-Changes"></a><h1>Utility Changes</h1>
<a name="the-h2ph-manpage"></a><h3><a href="h2ph.html">h2ph</a></h3>
<ul>
<li>
<p>The use of a deprecated <code class="inline"><a class="l_k" href="functions/goto.html">goto</a></code> construct has been removed
<a href="http://search.cpan.org/perldoc/http:#%2frt.perl.org%2frt3%2fPublic%2fBug%2fDisplay.html%3fid%3d74404">[perl #74404]</a>.</p>
</li>
</ul>
<a name="Testing"></a><h1>Testing</h1>
<ul>
<li>
<p>The new <i>t/lib/universal.t</i> script tests the Internal::* functions and other
things in <i>universal.c</i>.</p>
</li>
<li>
<p>A rare race condition in <i>t/op/while_readdir.t</i> has been fixed, stopping it
from failing randomly when running tests in parallel.</p>
</li>
<li>
<p>The new <i>t/op/leaky-magic.t</i> script tests that magic applied to variables in
the main packages does not affect other packages.</p>
</li>
</ul>
<a name="Platform-Support"></a><h1>Platform Support</h1>
<a name="Platform-Specific-Notes"></a><h2>Platform-Specific Notes</h2>
<ul>
<li><a name="VMS"></a><b>VMS</b>
<ul>
<li>
<p>Make <code class="inline"><span class="w">PerlIOUnix_open</span></code>
 honour default permissions on VMS.</p>
<p>When <code class="inline"><span class="w">perlio</span></code>
 became the default and <code class="inline"><span class="w">unixio</span></code>
 became the default bottom layer,
the most common path for creating files from Perl became <code class="inline"><span class="w">PerlIOUnix_open</span></code>
,
which has always explicitly used <code class="inline"><span class="n">0666</span></code>
 as the permission mask.</p>
<p>To avoid this, <code class="inline"><span class="n">0777</span></code>
 is now passed as the permissions to <code class="inline"><a class="l_k" href="functions/open.html">open()</a></code>.  In the
VMS CRTL, <code class="inline"><span class="n">0777</span></code>
 has a special meaning over and above intersecting with the
current umask; specifically, it allows Unix syscalls to preserve native default
permissions.</p>
</li>
</ul>
</li>
</ul>
<a name="Internal-Changes"></a><h1>Internal Changes</h1>
<ul>
<li>
<p><code class="inline"><span class="w">CALL_FPTR</span></code>
 and <code class="inline"><span class="w">CPERLscope</span></code>
 have been deprecated.</p>
<p>Those are left from an old implementation of <code class="inline"><span class="w">MULTIPLICITY</span></code>
 using C++ objects,
which was removed in Perl 5.8.  Nowadays these macros do exactly nothing, so
they shouldn't be used anymore.</p>
<p>For compatibility, they are still defined for external <code class="inline"><span class="w">XS</span></code>
 code.  Only
extensions defining <code class="inline"><span class="w">PERL_CORE</span></code>
 must be updated now.</p>
</li>
<li>
<p><code class="inline"><span class="i">lex_stuff_pvs</span><span class="s">(</span><span class="s">)</span></code>
 has been added as a convenience macro wrapping
<code class="inline"><span class="i">lex_stuff_pvn</span><span class="s">(</span><span class="s">)</span></code>
 for literal strings.</p>
</li>
<li>
<p>The recursive part of the peephole optimizer is now hookable.</p>
<p>In addition to <code class="inline"><span class="w">PL_peepp</span></code>
, for hooking into the toplevel peephole optimizer, a
<code class="inline"><span class="w">PL_rpeepp</span></code>
 is now available to hook into the optimizer recursing into
side-chains of the optree.</p>
</li>
</ul>
<a name="Selected-Bug-Fixes"></a><h1>Selected Bug Fixes</h1>
<ul>
<li>
<p>A regression introduced in Perl 5.12.0, making
<code class="inline"><a class="l_k" href="functions/my.html">my</a> <span class="i">$x</span> = <span class="n">3</span><span class="sc">;</span> <span class="i">$x</span> = <a class="l_k" href="functions/length.html">length</a><span class="s">(</span><a class="l_k" href="functions/undef.html">undef</a><span class="s">)</span></code>
 result in <code class="inline"><span class="i">$x</span></code>
 set to <code class="inline"><span class="n">3</span></code>
 has been
fixed.  <code class="inline"><span class="i">$x</span></code>
 will now be <code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code>.</p>
</li>
<li>
<p>A fatal error in regular expressions when processing UTF-8 data has been fixed
<a href="http://search.cpan.org/perldoc/http:#%2frt.perl.org%2frt3%2fPublic%2fBug%2fDisplay.html%3fid%3d75680">[perl #75680]</a>.</p>
</li>
<li>
<p>An erroneous regular expression engine optimization that caused regex verbs like
<code class="inline"><span class="i">*COMMIT</span></code>
 to sometimes be ignored has been removed.</p>
</li>
<li>
<p>The Perl debugger now also works in taint mode
<a href="http://search.cpan.org/perldoc/http:#%2frt.perl.org%2frt3%2fPublic%2fBug%2fDisplay.html%3fid%3d76872">[perl #76872]</a>.</p>
</li>
<li>
<p>Several memory leaks in cloning and freeing threaded Perl interpreters have been
fixed <a href="http://search.cpan.org/perldoc/http:#%2frt.perl.org%2frt3%2fPublic%2fBug%2fDisplay.html%3fid%3d77352">[perl #77352]</a>.</p>
</li>
<li>
<p>A possible string corruption when doing regular expression matches on overloaded
objects has been fixed
<a href="http://search.cpan.org/perldoc/http:#%2frt.perl.org%2frt3%2fPublic%2fBug%2fDisplay.html%3fid%3d77084">[perl #77084]</a>.</p>
</li>
<li>
<p>Magic applied to variables in the main package no longer affects other packages.
See <a href="#Magic-variables-outside-the-main-package">Magic variables outside the main package</a> above
<a href="http://search.cpan.org/perldoc/http:#%2frt.perl.org%2frt3%2fPublic%2fBug%2fDisplay.html%3fid%3d76138">[perl #76138]</a>.</p>
</li>
<li>
<p>Opening a glob reference via <code class="inline"><a class="l_k" href="functions/open.html">open</a> <span class="i">$fh</span><span class="cm">,</span> <span class="q">&quot;&gt;&quot;</span><span class="cm">,</span> \<span class="i">*glob</span></code>
 will no longer
cause the glob to be corrupted when the filehandle is printed to.  This would
cause perl to crash whenever the glob's contents were accessed
<a href="http://search.cpan.org/perldoc/http:#%2frt.perl.org%2frt3%2fPublic%2fBug%2fDisplay.html%3fid%3d77492">[perl #77492]</a>.</p>
</li>
<li>
<p>The postincrement and postdecrement operators, <code class="inline">++</code>
 and <code class="inline">--</code>
, used to cause
leaks when being used on references.  This has now been fixed.</p>
</li>
<li>
<p>A bug when replacing the glob of a loop variable within the loop has been fixed
<a href="http://search.cpan.org/perldoc/http:#%2frt.perl.org%2frt3%2fPublic%2fBug%2fDisplay.html%3fid%3d21469">[perl #21469]</a>.  This
means the following code will no longer crash:</p>
<pre class="verbatim"><ol><li>    for <span class="i">$x</span> <span class="s">(</span>...<span class="s">)</span> <span class="s">{</span></li><li>        <span class="i">*x</span> = <span class="i">*y</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre></li>
<li>
<p>Perl would segfault if the undocumented <code class="inline"><span class="w">Internals</span></code>
 functions that used
reference prototypes were called with the <code class="inline"><span class="i">&amp;foo</span><span class="s">(</span><span class="s">)</span></code>
 syntax, e.g.
<code class="inline"><span class="i">&amp;Internals::SvREADONLY</span><span class="s">(</span><a class="l_k" href="functions/undef.html">undef</a><span class="s">)</span></code>

<a href="http://search.cpan.org/perldoc/http:#%2frt.perl.org%2frt3%2fPublic%2fBug%2fDisplay.html%3fid%3d77776">[perl #77776]</a>.</p>
<p>These functions now call <code class="inline"><span class="w">SvROK</span></code>
 on their arguments before dereferencing them
with <code class="inline"><span class="w">SvRV</span></code>
, and we test for this case in <i>t/lib/universal.t</i>.</p>
</li>
<li>
<p>When assigning a list with duplicated keys to a hash, the assignment used to
return garbage and/or freed values:</p>
<pre class="verbatim"><ol><li>    <span class="i">@a</span> = <span class="i">%h</span> = <span class="s">(</span><span class="w">list</span> <span class="w">with</span> <span class="w">some</span> <span class="w">duplicate</span> <a class="l_k" href="functions/keys.html">keys</a><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>This has now been fixed
<a href="http://search.cpan.org/perldoc/http:#%2frt.perl.org%2frt3%2fPublic%2fBug%2fDisplay.html%3fid%3d31865">[perl #31865]</a>.</p>
</li>
<li>
<p>An earlier release of the 5.13 series of Perl changed the semantics of opening a
reference to a copy of a glob:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/my.html">my</a> <span class="i">$var</span> = <span class="i">*STDOUT</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/open.html">open</a> <a class="l_k" href="functions/my.html">my</a> <span class="i">$fh</span><span class="cm">,</span> <span class="q">&#39;&gt;&#39;</span><span class="cm">,</span> \<span class="i">$var</span><span class="sc">;</span></li></ol></pre><p>This was a mistake, and the previous behaviour from Perl 5.10 and 5.12, which is
to treat \$var as a scalar reference, has now been restored.</p>
</li>
<li>
<p>The regular expression bracketed character class <code class="inline"><span class="s">[</span>\<span class="n">8</span>\<span class="n">9</span><span class="s">]</span></code>
 was effectively the
same as <code class="inline"><span class="s">[</span><span class="n">89</span>\<span class="n">000</span><span class="s">]</span></code>
, incorrectly matching a NULL character.  It also gave
incorrect warnings that the <code class="inline"><span class="n">8</span></code>
 and <code class="inline"><span class="n">9</span></code>
 were ignored.  Now <code class="inline"><span class="s">[</span>\<span class="n">8</span>\<span class="n">9</span><span class="s">]</span></code>
 is the
same as <code class="inline"><span class="s">[</span><span class="n">89</span><span class="s">]</span></code>
 and gives legitimate warnings that <code class="inline">\<span class="n">8</span></code>
 and <code class="inline">\<span class="n">9</span></code>
 are
unrecognized escape sequences, passed-through.</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/warn.html">warn()</a></code> and <code class="inline"><a class="l_k" href="functions/die.html">die()</a></code> now respect utf8-encoded scalars
<a href="http://search.cpan.org/perldoc/http:#%2frt.perl.org%2frt3%2fPublic%2fBug%2fDisplay.html%3fid%3d45549">[perl #45549]</a>.</p>
</li>
</ul>
<a name="Known-Problems"></a><h1>Known Problems</h1>
<ul>
<li>
<p>The upgrade to Encode-2.40 has caused some tests in the libwww-perl distribution
on CPAN to fail. (Specifically, <i>base/message-charset.t</i> tests 33-36 in version
5.836 of that distribution now fail.)</p>
</li>
<li>
<p>The upgrade to ExtUtils-MakeMaker-6.57_05 has caused some tests in the
Module-Install distribution on CPAN to fail. (Specifically, <i>02_mymeta.t</i> tests
5 and 21, <i>18_all_from.t</i> tests 6 and 15, <i>19_authors.t</i> tests 5, 13, 21 and
29, and <i>20_authors_with_special_characters.t</i> tests 6, 15 and 23 in version
1.00 of that distribution now fail.)</p>
</li>
</ul>
<a name="Acknowledgements"></a><h1>Acknowledgements</h1>
<p>Perl 5.13.5 represents approximately one month of development since
Perl 5.13.4 and contains 74558 lines of changes across 549 files
from 45 authors and committers:</p>
<p>Abigail, Alexander Alekseev, Aristotle Pagaltzis, Ben Morrow, Bram, brian d foy,
Chas. Owens, Chris 'BinGOs' Williams, Craig A. Berry, Curtis Jewell, Dagfinn
Ilmari Manns&#xe5;ker, David Golden, David Leadbeater, David Mitchell, Eric Brine,
Father Chrysostomos, Florian Ragwitz, Gisle Aas, Jan Dubois, Jerry D. Hedden,
Jesse Vincent, Jim Cromie, Jirka Hru&#x161;ka, Karl Williamson, Michael G. Schwern,
Nicholas Clark, Paul Johnson, Philippe Bruhat (BooK), Piotr Fusik, Rafael
Garcia-Suarez, Rainer Tammer, Reini Urban, Ricardo Signes, Rob Hoelz, Robin
Barker, Steffen Mueller, Steve Hay, Steve Peters, Todd Rinaldo, Tony Cook,
Vincent Pit, Yves Orton, Zefram, Zsb&#xe1;n Ambrus, &#xc6;var Arnfj&#xf6;r&#xf0; Bjarmason.</p>
<p>Many of the changes included in this version originated in the CPAN
modules included in Perl's core. We're grateful to the entire CPAN
community for helping Perl to flourish.</p>
<a name="Reporting-Bugs"></a><h1>Reporting Bugs</h1>
<p>If you find what you think is a bug, you might check the articles
recently posted to the comp.lang.perl.misc newsgroup and the perl
bug database at <a href="http://rt.perl.org/perlbug/">http://rt.perl.org/perlbug/</a> .  There may also be
information at <a href="http://www.perl.org/">http://www.perl.org/</a> , the Perl Home Page.</p>
<p>If you believe you have an unreported bug, please run the <b>perlbug</b>
program included with your release.  Be sure to trim your bug down
to a tiny but sufficient test case.  Your bug report, along with the
output of <code class="inline"><span class="w">perl</span> -<span class="w">V</span></code>
, will be sent off to perlbug@perl.org to be
analysed by the Perl porting team.</p>
<p>If the bug you are reporting has security implications, which make it
inappropriate to send to a publicly archived mailing list, then please send
it to perl5-security-report@perl.org.  This points to a closed subscription
unarchived mailing list, which includes all the core committers, who be able
to help assess the impact of issues, figure out a resolution, and help
co-ordinate the release of patches to mitigate or fix the problem across all
platforms on which Perl is supported.  Please only use this address for
security issues in the Perl core, not for modules independently
distributed on CPAN.</p>
<a name="SEE-ALSO"></a><h1>SEE ALSO</h1>
<p>The <i>Changes</i> file for an explanation of how to view exhaustive details
on what changed.</p>
<p>The <i>INSTALL</i> file for how to build Perl.</p>
<p>The <i>README</i> file for general stuff.</p>
<p>The <i>Artistic</i> and <i>Copying</i> files for copyright information.</p>




  <div id="page_index" class="hud_container">
    <div id="page_index_header" class="hud_header">
      <div id="page_index_close" class="hud_close"><a href="#" onClick="pageIndex.hide();return false;"></a></div>
      <div id="page_index_title" class="hud_title"><span class="hud_span_top">Page index</span></div>
      <div id="page_index_topright" class="hud_topright"></div>
    </div>
    <div id="page_index_content" class="hud_content">
      <ul><li><a href="#NAME">NAME</a><li><a href="#DESCRIPTION">DESCRIPTION</a><li><a href="#Core-Enhancements">Core Enhancements</a><ul><li><a href="#Adjacent-pairs-of-nextstate-opcodes-are-now-optimized-away">Adjacent pairs of nextstate opcodes are now optimized away</a><li><a href="#API-function-to-parse-statements">API function to parse statements</a><li><a href="#API-functions-for-accessing-the-runtime-hinthash">API functions for accessing the runtime hinthash</a><li><a href="#C-interface-to-caller()">C interface to caller()</a></ul><li><a href="#Incompatible-Changes">Incompatible Changes</a><ul><li><a href="#Magic-variables-outside-the-main-package">Magic variables outside the main package</a><li><a href="#Smart-matching-against-array-slices">Smart-matching against array slices</a><li><a href="#C-API-changes">C API changes</a></ul><li><a href="#Deprecations">Deprecations</a><ul><li><a href="#Use-of-qw(...)-as-parentheses">Use of qw(...) as parentheses</a></ul><li><a href="#Performance-Enhancements">Performance Enhancements</a><li><a href="#Modules-and-Pragmata">Modules and Pragmata</a><ul><li><a href="#Updated-Modules-and-Pragmata">Updated Modules and Pragmata</a></ul><li><a href="#Documentation">Documentation</a><ul><li><a href="#Changes-to-Existing-Documentation">Changes to Existing Documentation</a></ul><li><a href="#Diagnostics">Diagnostics</a><ul><li><a href="#New-Diagnostics">New Diagnostics</a><li><a href="#Changes-to-Existing-Diagnostics">Changes to Existing Diagnostics</a></ul><li><a href="#Utility-Changes">Utility Changes</a><li><a href="#Testing">Testing</a><li><a href="#Platform-Support">Platform Support</a><ul><li><a href="#Platform-Specific-Notes">Platform-Specific Notes</a></ul><li><a href="#Internal-Changes">Internal Changes</a><li><a href="#Selected-Bug-Fixes">Selected Bug Fixes</a><li><a href="#Known-Problems">Known Problems</a><li><a href="#Acknowledgements">Acknowledgements</a><li><a href="#Reporting-Bugs">Reporting Bugs</a><li><a href="#SEE-ALSO">SEE ALSO</a></ul>
    </div>
    <div id="page_index_footer" class="hud_footer">
      <div id="page_index_bottomleft" class="hud_bottomleft"></div>
      <div id="page_index_bottom" class="hud_bottom"><span class="hud_span_bottom"></span></div>
      <div id="page_index_resize" class="hud_resize"></div>
    </div>
  </div>


	    &nbsp;
          </div>
          <div id="content_footer">
          </div>
        </div>
        <div class="clear"></div>
      </div>
      
    <div id="footer" style="display: none">
      <div id="footer_content">
        <div id="footer_strapline">
          perldoc.perl.org - Official documentation for the Perl programming language
        </div>
        <div id="footer_links">
          <div id="address">
            <p class="name">Contact details</p>
            <p class="address">
	      Site maintained by <a href="http://perl.jonallen.info">Jon Allen (JJ)</a><br>
	      See the <a href="http://perl.jonallen.info/projects/perldoc">project page</a> for more details
	    </p>
            <p class="contact">
              Documentation maintained by the <a href="http://lists.cpan.org/showlist.cgi?name=perl5-porters">Perl 5 Porters</a>
            </p>
          </div>
          <ul class="f1">
            <li>Manual
              <ul class="f2">
                <li><a href="index-overview.html">Overview</a>
                <li><a href="index-tutorials.html">Tutorials</a>
                <li><a href="index-faq.html">FAQs</a>
                <li><a href="index-history.html">Changes</a>
              </ul>
            <li>Reference
              <ul class="f2">
                <li><a href="index-language.html">Language</a>
                <li><a href="index-functions.html">Functions</a>
                <li><a href="perlop.html">Operators</a>
                <li><a href="perlvar.html">Variables</a>
              </ul>
            <li>Modules
              <ul class="f2">
                <li><a href="index-modules-A.html">Modules</a>
                <li><a href="index-pragmas.html">Pragmas</a>
                <li><a href="index-utilities.html">Utilities</a>
              </ul>
            <li>Misc
              <ul class="f2">
                <li><a href="index-licence.html">License</a>
                <li><a href="index-internals.html">Internals</a>
                <li><a href="index-platforms.html">Platforms</a>
              </ul>          </ul>
          <div class="clear"></div>
        </div>
      </div>
      <div id="footer_end">
      </div>
    </div>
      
    </div>
      <script language="JavaScript" type="text/javascript" src="static/exploreperl.js"></script>
      <script language="JavaScript" src="static/combined-20100403.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
  perldoc.setPath(0);
  perldoc.pageName    = 'perl5135delta';
  perldoc.pageAddress = 'perl5135delta.html';
  perldoc.contentPage = 1;
  explorePerl.render();
  explorePerl.addEvents('explore_anchor');
</script>
    
  </body>
</html>
