<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <!-- RD version: 0.9.4  -->
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
  <title>Class: Win32::SSPI::NegotiateAuth (Ruby 1.9.2) </title>
  <!-- raw_prefix  = '../..'   -->
  <link rel="stylesheet" href="../../css/obf.css" >

  <script src="../../js/jquery.js" type="text/javascript" charset="utf-8"></script>
  <script src="../../js/thickbox-compressed.js" type="text/javascript" charset="utf-8"></script>
  <script src="../../js/quicksearch.js" type="text/javascript" charset="utf-8"></script>
  <script src="../../js/rubydoc.js" type="text/javascript" charset="utf-8"></script> 

 
<script src="../../js/highlight.min.js"></script>
<script> 
  hljs.tabReplace = '  ';
  hljs.initHighlightingOnLoad();
  </script> 
</head>

<body id="top" class="class">
<div id="actionbar" style='display:none' >
<div class='wrapper'>
<ul class='grids g0'>
  <li class='grid-2' ><a href='/' target='_top' >Home</a></li>
  <li class='grid-2' ><a href='/core' target='_top' >Core</a></li>
  <li class='grid-2' ><a href='/stdlib' target='_top' >Std-lib</a></li>
  <li class='grid-2' ><a href='/downloads' target='_top' >Downloads</a></li>
  <li class='grid-7 right' id='rd-action-search'><form id="searchbox_011815814100681837392:wnccv6st5qk" action="/search.html"><input type="hidden" name="cx" value="011815814100681837392:wnccv6st5qk" ><input name="q" type="text" size="20" >&#160;&#160;<input type="submit" name="sa" value="Search" ><input type="hidden" name="cof" value="FORID:9" ></form>
</li>
</ul>
</div>
</div> <!-- end action bar -->
          <div class='wrapper'>
  <div id="metadata" style='display:none'>
    <div id="home-metadata">
      <div id="home-section" class="section">
        <h3 class="section-header">
          <a href="../../index.html">Home</a>
          <a href="../../index.html#classes">Classes</a>
          <a href="../../index.html#methods">Methods</a>
        </h3>
      </div>
    </div>

    <div id="file-metadata">
      <div id="file-list-section" class="section">
        <h3 class="section-header">In Files</h3>
        <div class="section-body">
          <ul>
          
            <li><a href="../../dl/win32/lib/win32/sspi_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="dl/win32/lib/win32/sspi.rb">dl/win32/lib/win32/sspi.rb</a></li>
          
          </ul>
        </div>
      </div>

      
    </div>

    <div id="class-metadata">
      
      <!-- Parent Class -->
      <div id="parent-class-section" class="section">
        <h3 class="section-header">Parent</h3>
        
        <p class="link"><a href="../../Object.html">Object</a></p>
        
      </div>
      

      

      

      
      <!-- Method Quickref -->
      <div id="method-list-section" class="section">
        <h3 class="section-header">Methods</h3>
        <ul class="link-list">
          
          <li><a href="#method-c-new">::new</a></li>
          
          <li><a href="#method-c-proxy_auth_get">::proxy_auth_get</a></li>
          
          <li><a href="#method-i-complete_authentication">#complete_authentication</a></li>
          
          <li><a href="#method-i-get_initial_token">#get_initial_token</a></li>
          
        </ul>
      </div>
      

      
    </div>

    <div id="project-metadata">
      
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class/Module Index
          <span class="search-toggle"><img src="../../images/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <ul class="link-list">
        
          <li><a href="../../DL.html">DL</a></li>
        
          <li><a href="../../DL/BasicTypes.html">DL::BasicTypes</a></li>
        
          <li><a href="../../DL/CFunc.html">DL::CFunc</a></li>
        
          <li><a href="../../DL/CParser.html">DL::CParser</a></li>
        
          <li><a href="../../DL/CPtr.html">DL::CPtr</a></li>
        
          <li><a href="../../DL/CStruct.html">DL::CStruct</a></li>
        
          <li><a href="../../DL/CStructBuilder.html">DL::CStructBuilder</a></li>
        
          <li><a href="../../DL/CStructEntity.html">DL::CStructEntity</a></li>
        
          <li><a href="../../DL/CUnion.html">DL::CUnion</a></li>
        
          <li><a href="../../DL/CUnionEntity.html">DL::CUnionEntity</a></li>
        
          <li><a href="../../DL/CarriedFunction.html">DL::CarriedFunction</a></li>
        
          <li><a href="../../DL/CompositeHandler.html">DL::CompositeHandler</a></li>
        
          <li><a href="../../DL/DLError.html">DL::DLError</a></li>
        
          <li><a href="../../DL/DLTypeError.html">DL::DLTypeError</a></li>
        
          <li><a href="../../DL/Function.html">DL::Function</a></li>
        
          <li><a href="../../DL/Handle.html">DL::Handle</a></li>
        
          <li><a href="../../DL/Importer.html">DL::Importer</a></li>
        
          <li><a href="../../DL/PackInfo.html">DL::PackInfo</a></li>
        
          <li><a href="../../DL/Packer.html">DL::Packer</a></li>
        
          <li><a href="../../DL/Stack.html">DL::Stack</a></li>
        
          <li><a href="../../DL/TempFunction.html">DL::TempFunction</a></li>
        
          <li><a href="../../DL/ValueUtil.html">DL::ValueUtil</a></li>
        
          <li><a href="../../DL/Win32Types.html">DL::Win32Types</a></li>
        
          <li><a href="../../Win32.html">Win32</a></li>
        
          <li><a href="../../Win32/Registry.html">Win32::Registry</a></li>
        
          <li><a href="../../Win32/Registry/API.html">Win32::Registry::API</a></li>
        
          <li><a href="../../Win32/Registry/Constants.html">Win32::Registry::Constants</a></li>
        
          <li><a href="../../Win32/Registry/Error.html">Win32::Registry::Error</a></li>
        
          <li><a href="../../Win32/Registry/Error/Kernel32.html">Win32::Registry::Error::Kernel32</a></li>
        
          <li><a href="../../Win32/Registry/PredefinedKey.html">Win32::Registry::PredefinedKey</a></li>
        
          <li><a href="../../Win32/Resolv.html">Win32::Resolv</a></li>
        
          <li><a href="../../Win32/Resolv/Kernel32.html">Win32::Resolv::Kernel32</a></li>
        
          <li><a href="../../Win32/SSPI.html">Win32::SSPI</a></li>
        
          <li><a href="../../Win32/SSPI/API.html">Win32::SSPI::API</a></li>
        
          <li><a href="../../Win32/SSPI/Identity.html">Win32::SSPI::Identity</a></li>
        
          <li><a href="../../Win32/SSPI/NegotiateAuth.html">Win32::SSPI::NegotiateAuth</a></li>
        
          <li><a href="../../Win32/SSPI/SSPIResult.html">Win32::SSPI::SSPIResult</a></li>
        
          <li><a href="../../Win32/SSPI/SecurityBuffer.html">Win32::SSPI::SecurityBuffer</a></li>
        
          <li><a href="../../Win32/SSPI/SecurityHandle.html">Win32::SSPI::SecurityHandle</a></li>
        
          <li><a href="../../Win32/SSPI/TimeStamp.html">Win32::SSPI::TimeStamp</a></li>
        
          <li><a href="../../Object.html">Object</a></li>
        
          <li><a href="../../Win32API.html">Win32API</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>

      
    </div>
  </div>

  <div id="documentation" style='margin: 10px 10px 10px 10px'>
    <h1 class="class">Win32::SSPI::NegotiateAuth</h1>

    <div id="description" class="description">
      
<p>Handles “Negotiate” type authentication. Geared towards authenticating with
a proxy server over HTTP</p>

    </div><!-- description -->

    
    
    
    <div id="5Buntitled-5D" class="documentation-section">
      

      

      
      <!-- Constants -->
      <div id="constants-list" class="section">
        <h3 class="section-header">Constants</h3>
        <dl>
        
          <dt><a name="B64_TOKEN_PREFIX">B64_TOKEN_PREFIX</a></dt>
          
          <dd class="description"><p>NTLM tokens start with this header always. Encoding alone adds “==” and
newline, so remove those</p></dd>
          
        
          <dt><a name="REQUEST_FLAGS">REQUEST_FLAGS</a></dt>
          
          <dd class="description"><p>Default request flags for <a href="../SSPI.html">SSPI</a> functions</p></dd>
          
        
        </dl>
      </div>
      

      
      <!-- Attributes -->
      <div id="attribute-method-details" class="method-section section">
        <h3 class="section-header">Attributes</h3>

        
        <div id="context-attribute-method" class="method-detail">
          <a name="context"></a>
          
          <a name="context="></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">context</span><span
              class="attribute-access-type">[RW]</span>
          </div>

          <div class="method-description">
          
          
          
          </div>
        </div>
        
        <div id="contextAttributes-attribute-method" class="method-detail">
          <a name="contextAttributes"></a>
          
          <a name="contextAttributes="></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">contextAttributes</span><span
              class="attribute-access-type">[RW]</span>
          </div>

          <div class="method-description">
          
          
          
          </div>
        </div>
        
        <div id="credentials-attribute-method" class="method-detail">
          <a name="credentials"></a>
          
          <a name="credentials="></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">credentials</span><span
              class="attribute-access-type">[RW]</span>
          </div>

          <div class="method-description">
          
          
          
          </div>
        </div>
        
        <div id="domain-attribute-method" class="method-detail">
          <a name="domain"></a>
          
          <a name="domain="></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">domain</span><span
              class="attribute-access-type">[RW]</span>
          </div>

          <div class="method-description">
          
          
          
          </div>
        </div>
        
        <div id="user-attribute-method" class="method-detail">
          <a name="user"></a>
          
          <a name="user="></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">user</span><span
              class="attribute-access-type">[RW]</span>
          </div>

          <div class="method-description">
          
          
          
          </div>
        </div>
        
      </div><!-- attribute-method-details -->
      

      <!-- Methods -->
      
      <div id="public-class-method-details" class="method-section section">
        <h3 class="section-header">Public Class Methods</h3>

      
        <div id="new-method" class="method-detail ">
          <a name="method-c-new"></a>

          
          <div class="method-heading">
            <span class="method-name">new</span><span
              class="method-args">(user = nil, domain = nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Creates a new instance ready for authentication as the given user in the
given domain. Defaults to current user and domain as defined by <a
href="http://"USERDOMAIN"">ENV</a> and <a href="http://"USERNAME"">ENV</a>
if no arguments are supplied.</p>
            

            
            <div class="method-source-code" id="new-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
<span class="ruby-comment"># File dl/win32/lib/win32/sspi.rb, line 237</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">user</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">domain</span> = <span class="ruby-keyword">nil</span>)
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">user</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">domain</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;USERNAME&quot;</span>].<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;USERDOMAIN&quot;</span>].<span class="ruby-identifier">nil?</span>
                <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;A username or domain must be supplied since they cannot be retrieved from the environment&quot;</span>
        <span class="ruby-keyword">end</span>

        <span class="ruby-ivar">@user</span> = <span class="ruby-identifier">user</span> <span class="ruby-operator">||</span> <span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;USERNAME&quot;</span>]
        <span class="ruby-ivar">@domain</span> = <span class="ruby-identifier">domain</span> <span class="ruby-operator">||</span> <span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;USERDOMAIN&quot;</span>]
<span class="ruby-keyword">end</span></code>
</pre> 
            </div><!-- new-source -->
            
          </div>

          

          
        </div><!-- new-method -->

      
        <div id="proxy_auth_get-method" class="method-detail ">
          <a name="method-c-proxy_auth_get"></a>

          
          <div class="method-heading">
            <span class="method-name">proxy_auth_get</span><span
              class="method-args">(http, path, user = nil, domain = nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Given a connection and a request path, performs authentication as the
current user and returns the response from a GET request. The connnection
should be a Net::HTTP object, and it should have been constructed using the
Net::HTTP.Proxy method, but anything that responds to “get” will work. If a
user and domain are given, will authenticate as the given user. Returns the
response received from the get method (usually Net::HTTPResponse)</p>
            

            
            <div class="method-source-code" id="proxy_auth_get-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
<span class="ruby-comment"># File dl/win32/lib/win32/sspi.rb, line 222</span>
<span class="ruby-keyword">def</span> <span class="ruby-constant">NegotiateAuth</span>.<span class="ruby-identifier">proxy_auth_get</span>(<span class="ruby-identifier">http</span>, <span class="ruby-identifier">path</span>, <span class="ruby-identifier">user</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">domain</span> = <span class="ruby-keyword">nil</span>)
        <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;http must respond to :get&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">http</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:get</span>)
        <span class="ruby-identifier">nego_auth</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">user</span>, <span class="ruby-identifier">domain</span>

        <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">http</span>.<span class="ruby-identifier">get</span> <span class="ruby-identifier">path</span>, { <span class="ruby-string">&quot;Proxy-Authorization&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Negotiate &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">nego_auth</span>.<span class="ruby-identifier">get_initial_token</span> }
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">resp</span>[<span class="ruby-string">&quot;Proxy-Authenticate&quot;</span>]
                <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">http</span>.<span class="ruby-identifier">get</span> <span class="ruby-identifier">path</span>, { <span class="ruby-string">&quot;Proxy-Authorization&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Negotiate &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">nego_auth</span>.<span class="ruby-identifier">complete_authentication</span>(<span class="ruby-identifier">resp</span>[<span class="ruby-string">&quot;Proxy-Authenticate&quot;</span>].<span class="ruby-identifier">split</span>(<span class="ruby-string">&quot; &quot;</span>).<span class="ruby-identifier">last</span>.<span class="ruby-identifier">strip</span>) }
        <span class="ruby-keyword">end</span>

        <span class="ruby-identifier">resp</span>
<span class="ruby-keyword">end</span></code>
</pre> 
            </div><!-- proxy_auth_get-source -->
            
          </div>

          

          
        </div><!-- proxy_auth_get-method -->

      
      </div><!-- public-class-method-details -->
    
      <div id="public-instance-method-details" class="method-section section">
        <h3 class="section-header">Public Instance Methods</h3>

      
        <div id="complete_authentication-method" class="method-detail ">
          <a name="method-i-complete_authentication"></a>

          
          <div class="method-heading">
            <span class="method-name">complete_authentication</span><span
              class="method-args">(token)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Takes a token and gets the next token in the Negotiate authentication
chain. Token can be Base64 encoded or not. The token can include the
“Negotiate” header and it will be stripped. Does not indicate if
SEC_I_CONTINUE or SEC_E_OK was returned. Token returned is Base64 encoded
w/ all new lines removed.</p>
            

            
            <div class="method-source-code" id="complete_authentication-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
<span class="ruby-comment"># File dl/win32/lib/win32/sspi.rb, line 270</span>
              <span class="ruby-keyword">def</span> <span class="ruby-identifier">complete_authentication</span>(<span class="ruby-identifier">token</span>)
                      <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;This object is no longer usable because its resources have been freed.&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@cleaned_up</span>

                      <span class="ruby-comment"># Nil token OK, just set it to empty string</span>
                      <span class="ruby-identifier">token</span> = <span class="ruby-string">&quot;&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">token</span>.<span class="ruby-identifier">nil?</span>

                      <span class="ruby-keyword">if</span> <span class="ruby-identifier">token</span>.<span class="ruby-identifier">include?</span> <span class="ruby-string">&quot;Negotiate&quot;</span>
                              <span class="ruby-comment"># If the Negotiate prefix is passed in, assume we are seeing &quot;Negotiate &lt;token&gt;&quot; and get the token.</span>
                              <span class="ruby-identifier">token</span> = <span class="ruby-identifier">token</span>.<span class="ruby-identifier">split</span>(<span class="ruby-string">&quot; &quot;</span>).<span class="ruby-identifier">last</span>
                      <span class="ruby-keyword">end</span>

                      <span class="ruby-keyword">if</span> <span class="ruby-identifier">token</span>.<span class="ruby-identifier">include?</span> <span class="ruby-constant">B64_TOKEN_PREFIX</span>
                              <span class="ruby-comment"># indicates base64 encoded token</span>
<span class="ruby-identifier">token</span> = <span class="ruby-identifier">token</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">unpack</span>(<span class="ruby-string">&quot;m&quot;</span>)[<span class="ruby-value">0</span>]
                      <span class="ruby-keyword">end</span>

                      <span class="ruby-identifier">outputBuffer</span> = <span class="ruby-constant">SecurityBuffer</span>.<span class="ruby-identifier">new</span>
                      <span class="ruby-identifier">result</span> = <span class="ruby-constant">SSPIResult</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">API</span><span class="ruby-operator">::</span><span class="ruby-constant">InitializeSecurityContext</span>.<span class="ruby-identifier">call</span>(<span class="ruby-ivar">@credentials</span>.<span class="ruby-identifier">to_p</span>, <span class="ruby-ivar">@context</span>.<span class="ruby-identifier">to_p</span>, <span class="ruby-keyword">nil</span>,
                              <span class="ruby-constant">REQUEST_FLAGS</span>, <span class="ruby-value">0</span>, <span class="ruby-constant">SECURITY_NETWORK_DREP</span>, <span class="ruby-constant">SecurityBuffer</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">token</span>).<span class="ruby-identifier">to_p</span>, <span class="ruby-value">0</span>,
                              <span class="ruby-ivar">@context</span>.<span class="ruby-identifier">to_p</span>,
                              <span class="ruby-identifier">outputBuffer</span>.<span class="ruby-identifier">to_p</span>, <span class="ruby-ivar">@contextAttributes</span>, <span class="ruby-constant">TimeStamp</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">to_p</span>))

                      <span class="ruby-keyword">if</span> <span class="ruby-identifier">result</span>.<span class="ruby-identifier">ok?</span> <span class="ruby-keyword">then</span>
                              <span class="ruby-keyword">return</span> <span class="ruby-identifier">encode_token</span>(<span class="ruby-identifier">outputBuffer</span>.<span class="ruby-identifier">token</span>)
                      <span class="ruby-keyword">else</span>
                              <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;Error: #{result.to_s}&quot;</span>
                      <span class="ruby-keyword">end</span>
              <span class="ruby-keyword">ensure</span>
                      <span class="ruby-comment"># need to make sure we don't clean up if we've already cleaned up.</span>
                      <span class="ruby-identifier">clean_up</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@cleaned_up</span>
              <span class="ruby-keyword">end</span></code>
</pre> 
            </div><!-- complete_authentication-source -->
            
          </div>

          

          
        </div><!-- complete_authentication-method -->

      
        <div id="get_initial_token-method" class="method-detail ">
          <a name="method-i-get_initial_token"></a>

          
          <div class="method-heading">
            <span class="method-name">get_initial_token</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Gets the initial Negotiate token. Returns it as a base64 encoded string
suitable for use in HTTP. Can be easily decoded, however.</p>
            

            
            <div class="method-source-code" id="get_initial_token-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
<span class="ruby-comment"># File dl/win32/lib/win32/sspi.rb, line 248</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_initial_token</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;This object is no longer usable because its resources have been freed.&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@cleaned_up</span>
        <span class="ruby-identifier">get_credentials</span>

        <span class="ruby-identifier">outputBuffer</span> = <span class="ruby-constant">SecurityBuffer</span>.<span class="ruby-identifier">new</span>
        <span class="ruby-ivar">@context</span> = <span class="ruby-constant">CtxtHandle</span>.<span class="ruby-identifier">new</span>
        <span class="ruby-ivar">@contextAttributes</span> = <span class="ruby-string">&quot;\00&quot;&quot;</span> * <span class="ruby-value">4</span>

        <span class="ruby-identifier">result</span> = <span class="ruby-constant">SSPIResult</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">API</span><span class="ruby-operator">::</span><span class="ruby-constant">InitializeSecurityContext</span>.<span class="ruby-identifier">call</span>(<span class="ruby-ivar">@credentials</span>.<span class="ruby-identifier">to_p</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-keyword">nil</span>,
                <span class="ruby-constant">REQUEST_FLAGS</span>,<span class="ruby-value">0</span>, <span class="ruby-constant">SECURITY_NETWORK_DREP</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-value">0</span>, <span class="ruby-ivar">@context</span>.<span class="ruby-identifier">to_p</span>, <span class="ruby-identifier">outputBuffer</span>.<span class="ruby-identifier">to_p</span>, <span class="ruby-ivar">@contextAttributes</span>, <span class="ruby-constant">TimeStamp</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">to_p</span>))

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">result</span>.<span class="ruby-identifier">ok?</span> <span class="ruby-keyword">then</span>
                <span class="ruby-keyword">return</span> <span class="ruby-identifier">encode_token</span>(<span class="ruby-identifier">outputBuffer</span>.<span class="ruby-identifier">token</span>)
        <span class="ruby-keyword">else</span>
                <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;Error: #{result.to_s}&quot;</span>
        <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code>
</pre> 
            </div><!-- get_initial_token-source -->
            
          </div>

          

          
        </div><!-- get_initial_token-method -->

      
      </div><!-- public-instance-method-details -->
    
    </div><!-- 5Buntitled-5D -->
  

  </div><!-- documentation -->
<div id="disqus_thread" style='display:none'></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    // var disqus_shortname = 'rubydocbeta'; // required 
    var disqus_shortname = 'ruby-doc'; // required 
    
    var disqus_developer = true; // DEBUGGERY
    


    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink" style='display:none'>blog comments powered by <span class="logo-disqus">Disqus</span></a>

<div class='grids wrapper' id="footer">
  <p><small>This page was generated for Ruby 1.9.2</small></p> 
  
   <p> <a href="http://www.ruby-doc.org">Ruby-doc.org</a> is provided by <a href="http://www.jamesbritt.com">James Britt</a> and <a href="http://www.neurogami.com">Neurogami</a>. <a href="http://www.neurogami.com">Maximum R+D</a>.  </p>
 
    <p><small>Generated with the <a href="http://neurogami.com/code/">Rubydoc Rdoc Generator</a> 0.9.4</small>.</p>
  </div>

</div>

<script type="text/javascript">
var _uacct = "UA-335317-2";
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try{ 
var pageTracker = _gat._getTracker(_uacct);
pageTracker._trackPageview();
} catch(err) {} 
</script>
</body>
</html>

