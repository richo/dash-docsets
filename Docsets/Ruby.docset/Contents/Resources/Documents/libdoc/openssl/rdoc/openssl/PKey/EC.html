<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <!-- RD version: 0.9.4  -->
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
  <title>Class: OpenSSL::PKey::EC (Ruby 1.9.2) </title>
  <!-- raw_prefix  = '../..'   -->
  <link rel="stylesheet" href="../../css/obf.css" >

  <script src="../../js/jquery.js" type="text/javascript" charset="utf-8"></script>
  <script src="../../js/thickbox-compressed.js" type="text/javascript" charset="utf-8"></script>
  <script src="../../js/quicksearch.js" type="text/javascript" charset="utf-8"></script>
  <script src="../../js/rubydoc.js" type="text/javascript" charset="utf-8"></script> 

 
<script src="../../js/highlight.min.js"></script>
<script> 
  hljs.tabReplace = '  ';
  hljs.initHighlightingOnLoad();
  </script> 
</head>

<body id="top" class="class">
<div id="actionbar" style='display:none' >
<div class='wrapper'>
<ul class='grids g0'>
  <li class='grid-2' ><a href='/' target='_top' >Home</a></li>
  <li class='grid-2' ><a href='/core' target='_top' >Core</a></li>
  <li class='grid-2' ><a href='/stdlib' target='_top' >Std-lib</a></li>
  <li class='grid-2' ><a href='/downloads' target='_top' >Downloads</a></li>
  <li class='grid-7 right' id='rd-action-search'><form id="searchbox_011815814100681837392:wnccv6st5qk" action="/search.html"><input type="hidden" name="cx" value="011815814100681837392:wnccv6st5qk" ><input name="q" type="text" size="20" >&#160;&#160;<input type="submit" name="sa" value="Search" ><input type="hidden" name="cof" value="FORID:9" ></form>
</li>
</ul>
</div>
</div> <!-- end action bar -->
          <div class='wrapper'>
  <div id="metadata" style='display:none'>
    <div id="home-metadata">
      <div id="home-section" class="section">
        <h3 class="section-header">
          <a href="../../index.html">Home</a>
          <a href="../../index.html#classes">Classes</a>
          <a href="../../index.html#methods">Methods</a>
        </h3>
      </div>
    </div>

    <div id="file-metadata">
      <div id="file-list-section" class="section">
        <h3 class="section-header">In Files</h3>
        <div class="section-body">
          <ul>
          
            <li><a href="../../openssl/ossl_pkey_c.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="openssl/ossl_pkey.c">openssl/ossl_pkey.c</a></li>
          
          </ul>
        </div>
      </div>

      
    </div>

    <div id="class-metadata">
      
      <!-- Parent Class -->
      <div id="parent-class-section" class="section">
        <h3 class="section-header">Parent</h3>
        
        <p class="link">cPKey</p>
        
      </div>
      

      

      
      <!-- Namespace Contents -->
      <div id="namespace-list-section" class="section">
        <h3 class="section-header">Namespace</h3>
        <ul class="link-list">
          
          <li><span class="type">CLASS</span> <a href="EC/Group.html">OpenSSL::PKey::EC::Group</a></li>
          
          <li><span class="type">CLASS</span> <a href="EC/Point.html">OpenSSL::PKey::EC::Point</a></li>
          
        </ul>
      </div>
      

      
      <!-- Method Quickref -->
      <div id="method-list-section" class="section">
        <h3 class="section-header">Methods</h3>
        <ul class="link-list">
          
          <li><a href="#method-c-builtin_curves">::builtin_curves</a></li>
          
          <li><a href="#method-c-new">::new</a></li>
          
          <li><a href="#method-i-check_key">#check_key</a></li>
          
          <li><a href="#method-i-dh_compute_key">#dh_compute_key</a></li>
          
          <li><a href="#method-i-dsa_sign_asn1">#dsa_sign_asn1</a></li>
          
          <li><a href="#method-i-dsa_verify_asn1">#dsa_verify_asn1</a></li>
          
          <li><a href="#method-i-generate_key">#generate_key</a></li>
          
          <li><a href="#method-i-group">#group</a></li>
          
          <li><a href="#method-i-group-3D">#group=</a></li>
          
          <li><a href="#method-i-private_key">#private_key</a></li>
          
          <li><a href="#method-i-private_key-3D">#private_key=</a></li>
          
          <li><a href="#method-i-private_key-3F">#private_key?</a></li>
          
          <li><a href="#method-i-public_key">#public_key</a></li>
          
          <li><a href="#method-i-public_key-3D">#public_key=</a></li>
          
          <li><a href="#method-i-public_key-3F">#public_key?</a></li>
          
          <li><a href="#method-i-to_der">#to_der</a></li>
          
          <li><a href="#method-i-to_pem">#to_pem</a></li>
          
          <li><a href="#method-i-to_text">#to_text</a></li>
          
        </ul>
      </div>
      

      
    </div>

    <div id="project-metadata">
      
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class/Module Index
          <span class="search-toggle"><img src="../../images/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <ul class="link-list">
        
          <li><a href="../../OpenSSL.html">OpenSSL</a></li>
        
          <li><a href="../../OpenSSL/ASN1.html">OpenSSL::ASN1</a></li>
        
          <li><a href="../../OpenSSL/ASN1/ASN1Data.html">OpenSSL::ASN1::ASN1Data</a></li>
        
          <li><a href="../../OpenSSL/ASN1/ASN1Error.html">OpenSSL::ASN1::ASN1Error</a></li>
        
          <li><a href="../../OpenSSL/ASN1/Constructive.html">OpenSSL::ASN1::Constructive</a></li>
        
          <li><a href="../../OpenSSL/ASN1/Primitive.html">OpenSSL::ASN1::Primitive</a></li>
        
          <li><a href="../../OpenSSL/BN.html">OpenSSL::BN</a></li>
        
          <li><a href="../../OpenSSL/BNError.html">OpenSSL::BNError</a></li>
        
          <li><a href="../../OpenSSL/Buffering.html">OpenSSL::Buffering</a></li>
        
          <li><a href="../../OpenSSL/Cipher.html">OpenSSL::Cipher</a></li>
        
          <li><a href="../../OpenSSL/Cipher/Cipher.html">OpenSSL::Cipher::Cipher</a></li>
        
          <li><a href="../../OpenSSL/Cipher/CipherError.html">OpenSSL::Cipher::CipherError</a></li>
        
          <li><a href="../../OpenSSL/Config.html">OpenSSL::Config</a></li>
        
          <li><a href="../../OpenSSL/ConfigError.html">OpenSSL::ConfigError</a></li>
        
          <li><a href="../../OpenSSL/Digest.html">OpenSSL::Digest</a></li>
        
          <li><a href="../../OpenSSL/Digest/Digest.html">OpenSSL::Digest::Digest</a></li>
        
          <li><a href="../../OpenSSL/Digest/DigestError.html">OpenSSL::Digest::DigestError</a></li>
        
          <li><a href="../../OpenSSL/Engine.html">OpenSSL::Engine</a></li>
        
          <li><a href="../../OpenSSL/Engine/EngineError.html">OpenSSL::Engine::EngineError</a></li>
        
          <li><a href="../../OpenSSL/HMAC.html">OpenSSL::HMAC</a></li>
        
          <li><a href="../../OpenSSL/HMACError.html">OpenSSL::HMACError</a></li>
        
          <li><a href="../../OpenSSL/Netscape.html">OpenSSL::Netscape</a></li>
        
          <li><a href="../../OpenSSL/Netscape/SPKI.html">OpenSSL::Netscape::SPKI</a></li>
        
          <li><a href="../../OpenSSL/Netscape/SPKIError.html">OpenSSL::Netscape::SPKIError</a></li>
        
          <li><a href="../../OpenSSL/OCSP.html">OpenSSL::OCSP</a></li>
        
          <li><a href="../../OpenSSL/OCSP/BasicResponse.html">OpenSSL::OCSP::BasicResponse</a></li>
        
          <li><a href="../../OpenSSL/OCSP/CertificateId.html">OpenSSL::OCSP::CertificateId</a></li>
        
          <li><a href="../../OpenSSL/OCSP/OCSPError.html">OpenSSL::OCSP::OCSPError</a></li>
        
          <li><a href="../../OpenSSL/OCSP/Request.html">OpenSSL::OCSP::Request</a></li>
        
          <li><a href="../../OpenSSL/OCSP/Response.html">OpenSSL::OCSP::Response</a></li>
        
          <li><a href="../../OpenSSL/OpenSSLError.html">OpenSSL::OpenSSLError</a></li>
        
          <li><a href="../../OpenSSL/PKCS12.html">OpenSSL::PKCS12</a></li>
        
          <li><a href="../../OpenSSL/PKCS12/PKCS12Error.html">OpenSSL::PKCS12::PKCS12Error</a></li>
        
          <li><a href="../../OpenSSL/PKCS5.html">OpenSSL::PKCS5</a></li>
        
          <li><a href="../../OpenSSL/PKCS5/PKCS5Error.html">OpenSSL::PKCS5::PKCS5Error</a></li>
        
          <li><a href="../../OpenSSL/PKCS7.html">OpenSSL::PKCS7</a></li>
        
          <li><a href="../../OpenSSL/PKCS7/PKCS7Error.html">OpenSSL::PKCS7::PKCS7Error</a></li>
        
          <li><a href="../../OpenSSL/PKCS7/RecipientInfo.html">OpenSSL::PKCS7::RecipientInfo</a></li>
        
          <li><a href="../../OpenSSL/PKCS7/SignerInfo.html">OpenSSL::PKCS7::SignerInfo</a></li>
        
          <li><a href="../../OpenSSL/PKey.html">OpenSSL::PKey</a></li>
        
          <li><a href="../../OpenSSL/PKey/DH.html">OpenSSL::PKey::DH</a></li>
        
          <li><a href="../../OpenSSL/PKey/DHError.html">OpenSSL::PKey::DHError</a></li>
        
          <li><a href="../../OpenSSL/PKey/DSA.html">OpenSSL::PKey::DSA</a></li>
        
          <li><a href="../../OpenSSL/PKey/DSAError.html">OpenSSL::PKey::DSAError</a></li>
        
          <li><a href="../../OpenSSL/PKey/EC.html">OpenSSL::PKey::EC</a></li>
        
          <li><a href="../../OpenSSL/PKey/EC/Group.html">OpenSSL::PKey::EC::Group</a></li>
        
          <li><a href="../../OpenSSL/PKey/EC/Group/Error.html">OpenSSL::PKey::EC::Group::Error</a></li>
        
          <li><a href="../../OpenSSL/PKey/EC/Point.html">OpenSSL::PKey::EC::Point</a></li>
        
          <li><a href="../../OpenSSL/PKey/EC/Point/Error.html">OpenSSL::PKey::EC::Point::Error</a></li>
        
          <li><a href="../../OpenSSL/PKey/ECError.html">OpenSSL::PKey::ECError</a></li>
        
          <li><a href="../../OpenSSL/PKey/PKey.html">OpenSSL::PKey::PKey</a></li>
        
          <li><a href="../../OpenSSL/PKey/PKeyError.html">OpenSSL::PKey::PKeyError</a></li>
        
          <li><a href="../../OpenSSL/PKey/RSA.html">OpenSSL::PKey::RSA</a></li>
        
          <li><a href="../../OpenSSL/PKey/RSAError.html">OpenSSL::PKey::RSAError</a></li>
        
          <li><a href="../../OpenSSL/Random.html">OpenSSL::Random</a></li>
        
          <li><a href="../../OpenSSL/Random/RandomError.html">OpenSSL::Random::RandomError</a></li>
        
          <li><a href="../../OpenSSL/SSL.html">OpenSSL::SSL</a></li>
        
          <li><a href="../../OpenSSL/SSL/Nonblock.html">OpenSSL::SSL::Nonblock</a></li>
        
          <li><a href="../../OpenSSL/SSL/SSLContext.html">OpenSSL::SSL::SSLContext</a></li>
        
          <li><a href="../../OpenSSL/SSL/SSLError.html">OpenSSL::SSL::SSLError</a></li>
        
          <li><a href="../../OpenSSL/SSL/SSLServer.html">OpenSSL::SSL::SSLServer</a></li>
        
          <li><a href="../../OpenSSL/SSL/SSLSocket.html">OpenSSL::SSL::SSLSocket</a></li>
        
          <li><a href="../../OpenSSL/SSL/Session.html">OpenSSL::SSL::Session</a></li>
        
          <li><a href="../../OpenSSL/SSL/Session/SessionError.html">OpenSSL::SSL::Session::SessionError</a></li>
        
          <li><a href="../../OpenSSL/SSL/SocketForwarder.html">OpenSSL::SSL::SocketForwarder</a></li>
        
          <li><a href="../../OpenSSL/X509.html">OpenSSL::X509</a></li>
        
          <li><a href="../../OpenSSL/X509/Attribute.html">OpenSSL::X509::Attribute</a></li>
        
          <li><a href="../../OpenSSL/X509/AttributeError.html">OpenSSL::X509::AttributeError</a></li>
        
          <li><a href="../../OpenSSL/X509/CRL.html">OpenSSL::X509::CRL</a></li>
        
          <li><a href="../../OpenSSL/X509/CRLError.html">OpenSSL::X509::CRLError</a></li>
        
          <li><a href="../../OpenSSL/X509/Certificate.html">OpenSSL::X509::Certificate</a></li>
        
          <li><a href="../../OpenSSL/X509/CertificateError.html">OpenSSL::X509::CertificateError</a></li>
        
          <li><a href="../../OpenSSL/X509/Extension.html">OpenSSL::X509::Extension</a></li>
        
          <li><a href="../../OpenSSL/X509/ExtensionError.html">OpenSSL::X509::ExtensionError</a></li>
        
          <li><a href="../../OpenSSL/X509/ExtensionFactory.html">OpenSSL::X509::ExtensionFactory</a></li>
        
          <li><a href="../../OpenSSL/X509/Name.html">OpenSSL::X509::Name</a></li>
        
          <li><a href="../../OpenSSL/X509/Name/RFC2253DN.html">OpenSSL::X509::Name::RFC2253DN</a></li>
        
          <li><a href="../../OpenSSL/X509/NameError.html">OpenSSL::X509::NameError</a></li>
        
          <li><a href="../../OpenSSL/X509/Request.html">OpenSSL::X509::Request</a></li>
        
          <li><a href="../../OpenSSL/X509/RequestError.html">OpenSSL::X509::RequestError</a></li>
        
          <li><a href="../../OpenSSL/X509/Revoked.html">OpenSSL::X509::Revoked</a></li>
        
          <li><a href="../../OpenSSL/X509/RevokedError.html">OpenSSL::X509::RevokedError</a></li>
        
          <li><a href="../../OpenSSL/X509/Store.html">OpenSSL::X509::Store</a></li>
        
          <li><a href="../../OpenSSL/X509/StoreContext.html">OpenSSL::X509::StoreContext</a></li>
        
          <li><a href="../../OpenSSL/X509/StoreError.html">OpenSSL::X509::StoreError</a></li>
        
          <li><a href="../../Integer.html">Integer</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>

      
    </div>
  </div>

  <div id="documentation" style='margin: 10px 10px 10px 10px'>
    <h1 class="class">OpenSSL::PKey::EC</h1>

    <div id="description" class="description">
      
    </div><!-- description -->

    
    
    
    <div id="5Buntitled-5D" class="documentation-section">
      

      

      
      <!-- Constants -->
      <div id="constants-list" class="section">
        <h3 class="section-header">Constants</h3>
        <dl>
        
          <dt><a name="NAMED_CURVE">NAMED_CURVE</a></dt>
          
          <dd class="description"></dd>
          
        
        </dl>
      </div>
      

      

      <!-- Methods -->
      
      <div id="public-class-method-details" class="method-section section">
        <h3 class="section-header">Public Class Methods</h3>

      
        <div id="builtin_curves-method" class="method-detail ">
          <a name="method-c-builtin_curves"></a>

          
          
          <div class="method-heading">
            <span class="method-callseq">builtin_curves => [[name, comment], ...]</span>
            
            <span class="method-click-advice">click to toggle source</span>
            
          </div>
          
          

          <div class="method-description">
            
            <p>See the <a href="../../OpenSSL.html">OpenSSL</a> documentation for
EC_builtin_curves()</p>
            

            
            <div class="method-source-code" id="builtin_curves-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
static VALUE ossl_s_builtin_curves(VALUE self)
{
    EC_builtin_curve *curves = NULL;
    int n;
    int crv_len = EC_get_builtin_curves(NULL, 0);
    VALUE ary, ret;

    curves = ALLOCA_N(EC_builtin_curve, crv_len);
    if (curves == NULL)
        return Qnil;
    if (!EC_get_builtin_curves(curves, crv_len))
        ossl_raise(rb_eRuntimeError, &quot;EC_get_builtin_curves&quot;);

    ret = rb_ary_new2(crv_len);

    for (n = 0; n &lt; crv_len; n++) {
        const char *sname = OBJ_nid2sn(curves[n].nid);
        const char *comment = curves[n].comment;

        ary = rb_ary_new2(2);
        rb_ary_push(ary, rb_str_new2(sname));
        rb_ary_push(ary, comment ? rb_str_new2(comment) : Qnil);
        rb_ary_push(ret, ary);
    }

    return ret;
}</code>
</pre> 
            </div><!-- builtin_curves-source -->
            
          </div>

          

          
        </div><!-- builtin_curves-method -->

      
        <div id="new-method" class="method-detail ">
          <a name="method-c-new"></a>

          
          
          <div class="method-heading">
            <span class="method-callseq">OpenSSL::PKey::EC.new()</span>
            
            <span class="method-click-advice">click to toggle source</span>
            
          </div>
          
          <div class="method-heading">
            <span class="method-callseq">OpenSSL::PKey::EC.new(ec_key)</span>
            
          </div>
          
          <div class="method-heading">
            <span class="method-callseq">OpenSSL::PKey::EC.new(ec_group)</span>
            
          </div>
          
          <div class="method-heading">
            <span class="method-callseq">OpenSSL::PKey::EC.new("secp112r1")</span>
            
          </div>
          
          <div class="method-heading">
            <span class="method-callseq">OpenSSL::PKey::EC.new(pem_string)</span>
            
          </div>
          
          <div class="method-heading">
            <span class="method-callseq">OpenSSL::PKey::EC.new(der_string)</span>
            
          </div>
          
          

          <div class="method-description">
            
            <p>See the <a href="../../OpenSSL.html">OpenSSL</a> documentation for:</p>

<pre>EC_KEY_*</pre>
            

            
            <div class="method-source-code" id="new-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
static VALUE ossl_ec_key_initialize(int argc, VALUE *argv, VALUE self)
{
    EVP_PKEY *pkey;
    EC_KEY *ec = NULL;
    VALUE arg, pass;
    VALUE group = Qnil;

    GetPKey(self, pkey);
    if (pkey-&gt;pkey.ec)
        rb_raise(eECError, &quot;EC_KEY already initialized&quot;);

    rb_scan_args(argc, argv, &quot;02&quot;, &amp;arg, &amp;pass);

    if (NIL_P(arg)) {
        ec = EC_KEY_new();
    } else {
        if (rb_obj_is_kind_of(arg, cEC)) {
            EC_KEY *other_ec = NULL;

            SafeRequire_EC_KEY(arg, other_ec);
            ec = EC_KEY_dup(other_ec);
        } else if (rb_obj_is_kind_of(arg, cEC_GROUP)) {
                ec = EC_KEY_new();
                group = arg;
        } else {
            BIO *in = ossl_obj2bio(arg);

            ec = PEM_read_bio_ECPrivateKey(in, NULL, NULL, NULL);
            if (!ec) {
                (void)BIO_reset(in);
                (void)ERR_get_error();
                ec = PEM_read_bio_EC_PUBKEY(in, NULL, NULL, NULL);
            }
            if (!ec) {
                (void)BIO_reset(in);
                (void)ERR_get_error();
                ec = d2i_ECPrivateKey_bio(in, NULL);
            }
            if (!ec) {
                (void)BIO_reset(in);
                (void)ERR_get_error();
                ec = d2i_EC_PUBKEY_bio(in, NULL);
            }

            BIO_free(in);

            if (ec == NULL) {
                const char *name = StringValueCStr(arg);
                int nid = OBJ_sn2nid(name);

                (void)ERR_get_error();
                if (nid == NID_undef)
                    ossl_raise(eECError, &quot;unknown curve name (%s)\n&quot;, name);

                if ((ec = EC_KEY_new_by_curve_name(nid)) == NULL)
                    ossl_raise(eECError, &quot;unable to create curve (%s)\n&quot;, name);

                EC_KEY_set_asn1_flag(ec, OPENSSL_EC_NAMED_CURVE);
                EC_KEY_set_conv_form(ec, POINT_CONVERSION_UNCOMPRESSED);
            }
        }
    }

    if (ec == NULL)
        ossl_raise(eECError, NULL);

    if (!EVP_PKEY_assign_EC_KEY(pkey, ec)) {
        EC_KEY_free(ec);
        ossl_raise(eECError, &quot;EVP_PKEY_assign_EC_KEY&quot;);
    }

    rb_iv_set(self, &quot;@group&quot;, Qnil);

    if (!NIL_P(group))
        rb_funcall(self, rb_intern(&quot;group=&quot;), 1, arg);

    return self;
}</code>
</pre> 
            </div><!-- new-source -->
            
          </div>

          

          
        </div><!-- new-method -->

      
      </div><!-- public-class-method-details -->
    
      <div id="public-instance-method-details" class="method-section section">
        <h3 class="section-header">Public Instance Methods</h3>

      
        <div id="check_key-method" class="method-detail ">
          <a name="method-i-check_key"></a>

          
          
          <div class="method-heading">
            <span class="method-callseq">check_key   => true</span>
            
            <span class="method-click-advice">click to toggle source</span>
            
          </div>
          
          

          <div class="method-description">
            
            <p>Raises an exception if the key is invalid.</p>

<p>See the <a href="../../OpenSSL.html">OpenSSL</a> documentation for
EC_KEY_check_key()</p>
            

            
            <div class="method-source-code" id="check_key-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
static VALUE ossl_ec_key_check_key(VALUE self)
{
    EC_KEY *ec;

    Require_EC_KEY(self, ec);

    if (EC_KEY_check_key(ec) != 1)
        ossl_raise(eECError, &quot;EC_KEY_check_key&quot;);

    return Qtrue;
}</code>
</pre> 
            </div><!-- check_key-source -->
            
          </div>

          

          
        </div><!-- check_key-method -->

      
        <div id="dh_compute_key-method" class="method-detail ">
          <a name="method-i-dh_compute_key"></a>

          
          
          <div class="method-heading">
            <span class="method-callseq">dh_compute_key(pubkey)   => String</span>
            
            <span class="method-click-advice">click to toggle source</span>
            
          </div>
          
          

          <div class="method-description">
            
            <p>See the <a href="../../OpenSSL.html">OpenSSL</a> documentation for
ECDH_compute_key()</p>
            

            
            <div class="method-source-code" id="dh_compute_key-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
static VALUE ossl_ec_key_dh_compute_key(VALUE self, VALUE pubkey)
{
    EC_KEY *ec;
    EC_POINT *point;
    int buf_len;
    VALUE str;

    Require_EC_KEY(self, ec);
    SafeRequire_EC_POINT(pubkey, point);

/* BUG: need a way to figure out the maximum string size */
    buf_len = 1024;
    str = rb_str_new(0, buf_len);
/* BUG: take KDF as a block */
    buf_len = ECDH_compute_key(RSTRING_PTR(str), buf_len, point, ec, NULL);
    if (buf_len &lt; 0)
         ossl_raise(eECError, &quot;ECDH_compute_key&quot;);

    rb_str_resize(str, buf_len);

    return str;
}</code>
</pre> 
            </div><!-- dh_compute_key-source -->
            
          </div>

          

          
        </div><!-- dh_compute_key-method -->

      
        <div id="dsa_sign_asn1-method" class="method-detail ">
          <a name="method-i-dsa_sign_asn1"></a>

          
          
          <div class="method-heading">
            <span class="method-callseq">dsa_sign_asn1(data)   => String</span>
            
            <span class="method-click-advice">click to toggle source</span>
            
          </div>
          
          

          <div class="method-description">
            
            <p>See the <a href="../../OpenSSL.html">OpenSSL</a> documentation for
ECDSA_sign()</p>
            

            
            <div class="method-source-code" id="dsa_sign_asn1-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
static VALUE ossl_ec_key_dsa_sign_asn1(VALUE self, VALUE data)
{
    EC_KEY *ec;
    unsigned int buf_len;
    VALUE str;

    Require_EC_KEY(self, ec);
    StringValue(data);

    if (EC_KEY_get0_private_key(ec) == NULL)
        ossl_raise(eECError, &quot;Private EC key needed!&quot;);

    str = rb_str_new(0, ECDSA_size(ec) + 16);
    if (ECDSA_sign(0, (unsigned char *) RSTRING_PTR(data), RSTRING_LEN(data), (unsigned char *) RSTRING_PTR(str), &amp;buf_len, ec) != 1)
         ossl_raise(eECError, &quot;ECDSA_sign&quot;);

    rb_str_resize(str, buf_len);

    return str;
}</code>
</pre> 
            </div><!-- dsa_sign_asn1-source -->
            
          </div>

          

          
        </div><!-- dsa_sign_asn1-method -->

      
        <div id="dsa_verify_asn1-method" class="method-detail ">
          <a name="method-i-dsa_verify_asn1"></a>

          
          
          <div class="method-heading">
            <span class="method-callseq">dsa_verify_asn1(data, sig)   => true or false</span>
            
            <span class="method-click-advice">click to toggle source</span>
            
          </div>
          
          

          <div class="method-description">
            
            <p>See the <a href="../../OpenSSL.html">OpenSSL</a> documentation for
ECDSA_verify()</p>
            

            
            <div class="method-source-code" id="dsa_verify_asn1-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
static VALUE ossl_ec_key_dsa_verify_asn1(VALUE self, VALUE data, VALUE sig)
{
    EC_KEY *ec;

    Require_EC_KEY(self, ec);
    StringValue(data);
    StringValue(sig);

    switch (ECDSA_verify(0, (unsigned char *) RSTRING_PTR(data), RSTRING_LEN(data), (unsigned char *) RSTRING_PTR(sig), RSTRING_LEN(sig), ec)) {
    case 1:     return Qtrue;
    case 0:     return Qfalse;
    default:    break;
    }

    ossl_raise(eECError, &quot;ECDSA_verify&quot;);
}</code>
</pre> 
            </div><!-- dsa_verify_asn1-source -->
            
          </div>

          

          
        </div><!-- dsa_verify_asn1-method -->

      
        <div id="generate_key-method" class="method-detail ">
          <a name="method-i-generate_key"></a>

          
          
          <div class="method-heading">
            <span class="method-callseq">generate_key   => self</span>
            
            <span class="method-click-advice">click to toggle source</span>
            
          </div>
          
          

          <div class="method-description">
            
            <p>See the <a href="../../OpenSSL.html">OpenSSL</a> documentation for
EC_KEY_generate_key()</p>
            

            
            <div class="method-source-code" id="generate_key-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
static VALUE ossl_ec_key_generate_key(VALUE self)
{
    EC_KEY *ec;

    Require_EC_KEY(self, ec);

    if (EC_KEY_generate_key(ec) != 1)
        ossl_raise(eECError, &quot;EC_KEY_generate_key&quot;);

    return self;
}</code>
</pre> 
            </div><!-- generate_key-source -->
            
          </div>

          

          
        </div><!-- generate_key-method -->

      
        <div id="group-method" class="method-detail ">
          <a name="method-i-group"></a>

          
          
          <div class="method-heading">
            <span class="method-callseq">group   => group</span>
            
            <span class="method-click-advice">click to toggle source</span>
            
          </div>
          
          

          <div class="method-description">
            
            <p>Returns a constant <tt>OpenSSL::EC::Group</tt> that is tied to the key.
Modifying the returned group can make the key invalid.</p>
            

            
            <div class="method-source-code" id="group-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
static VALUE ossl_ec_key_get_group(VALUE self)
{
    VALUE group_v;
    EC_KEY *ec;
    ossl_ec_group *ec_group;
    EC_GROUP *group;

    Require_EC_KEY(self, ec);

    group_v = rb_iv_get(self, &quot;@group&quot;);
    if (!NIL_P(group_v))
        return group_v;

    if ((group = (EC_GROUP *)EC_KEY_get0_group(ec)) != NULL) {
        group_v = rb_obj_alloc(cEC_GROUP);
        SafeGet_ec_group(group_v, ec_group);
        ec_group-&gt;group = group;
        ec_group-&gt;dont_free = 1;
        rb_iv_set(group_v, &quot;@key&quot;, self);
        rb_iv_set(self, &quot;@group&quot;, group_v);
        return group_v;
    }

    return Qnil;
}</code>
</pre> 
            </div><!-- group-source -->
            
          </div>

          

          
        </div><!-- group-method -->

      
        <div id="group-3D-method" class="method-detail ">
          <a name="method-i-group-3D"></a>

          
          
          <div class="method-heading">
            <span class="method-callseq">group = group   => group</span>
            
            <span class="method-click-advice">click to toggle source</span>
            
          </div>
          
          

          <div class="method-description">
            
            <p>Returns the same object passed, not the group object associated with the
key. If you wish to access the group object tied to the key call key.group
after setting the group.</p>

<p>Setting the group will immediately destroy any previously assigned group
object. The group is internally copied by <a
href="../../OpenSSL.html">OpenSSL</a>.  Modifying the original group after
assignment will not effect the internal key structure. (your changes may be
lost).  BE CAREFUL.</p>

<p>EC_KEY_set_group calls EC_GROUP_free(key-&gt;group) then EC_GROUP_dup(),
not EC_GROUP_copy. This documentation is accurate for <a
href="../../OpenSSL.html">OpenSSL</a> 0.9.8b.</p>
            

            
            <div class="method-source-code" id="group-3D-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
static VALUE ossl_ec_key_set_group(VALUE self, VALUE group_v)
{
    VALUE old_group_v;
    EC_KEY *ec;
    EC_GROUP *group;

    Require_EC_KEY(self, ec);
    SafeRequire_EC_GROUP(group_v, group);

    old_group_v = rb_iv_get(self, &quot;@group&quot;);
    if (!NIL_P(old_group_v)) {
        ossl_ec_group *old_ec_group;
        SafeGet_ec_group(old_group_v, old_ec_group);

        old_ec_group-&gt;group = NULL;
        old_ec_group-&gt;dont_free = 0;
        rb_iv_set(old_group_v, &quot;@key&quot;, Qnil);
    }

    rb_iv_set(self, &quot;@group&quot;, Qnil);

    if (EC_KEY_set_group(ec, group) != 1)
        ossl_raise(eECError, &quot;EC_KEY_set_group&quot;);

    return group_v;
}</code>
</pre> 
            </div><!-- group-3D-source -->
            
          </div>

          

          
        </div><!-- group-3D-method -->

      
        <div id="private_key-method" class="method-detail ">
          <a name="method-i-private_key"></a>

          
          
          <div class="method-heading">
            <span class="method-callseq">private_key   => OpenSSL::BN</span>
            
            <span class="method-click-advice">click to toggle source</span>
            
          </div>
          
          

          <div class="method-description">
            
            <p>See the <a href="../../OpenSSL.html">OpenSSL</a> documentation for
EC_KEY_get0_private_key()</p>
            

            
            <div class="method-source-code" id="private_key-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
static VALUE ossl_ec_key_get_private_key(VALUE self)
{
    EC_KEY *ec;
    const BIGNUM *bn;

    Require_EC_KEY(self, ec);

    if ((bn = EC_KEY_get0_private_key(ec)) == NULL)
        return Qnil;

    return ossl_bn_new(bn);
}</code>
</pre> 
            </div><!-- private_key-source -->
            
          </div>

          

          
        </div><!-- private_key-method -->

      
        <div id="private_key-3D-method" class="method-detail ">
          <a name="method-i-private_key-3D"></a>

          
          
          <div class="method-heading">
            <span class="method-callseq">private_key = openssl_bn</span>
            
            <span class="method-click-advice">click to toggle source</span>
            
          </div>
          
          

          <div class="method-description">
            
            <p>See the <a href="../../OpenSSL.html">OpenSSL</a> documentation for
EC_KEY_set_private_key()</p>
            

            
            <div class="method-source-code" id="private_key-3D-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
static VALUE ossl_ec_key_set_private_key(VALUE self, VALUE private_key)
{
    EC_KEY *ec;
    BIGNUM *bn = NULL;

    Require_EC_KEY(self, ec);
    if (!NIL_P(private_key))
        bn = GetBNPtr(private_key);

    switch (EC_KEY_set_private_key(ec, bn)) {
    case 1:
        break;
    case 0:
        if (bn == NULL)
            break;
    default:
        ossl_raise(eECError, &quot;EC_KEY_set_private_key&quot;);
    }

    return private_key;
}</code>
</pre> 
            </div><!-- private_key-3D-source -->
            
          </div>

          

          
        </div><!-- private_key-3D-method -->

      
        <div id="private_key-3F-method" class="method-detail ">
          <a name="method-i-private_key-3F"></a>

          
          
          <div class="method-heading">
            <span class="method-callseq">private_key? => true or false</span>
            
            <span class="method-click-advice">click to toggle source</span>
            
          </div>
          
          

          <div class="method-description">
            
            <p>Both <a href="EC.html#method-i-public_key">public_key</a>? and <a
href="EC.html#method-i-private_key">private_key</a>? may return false at
the same time unlike other <a href="PKey.html">PKey</a> classes.</p>
            

            
            <div class="method-source-code" id="private_key-3F-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
static VALUE ossl_ec_key_is_private_key(VALUE self)
{
    EC_KEY *ec;

    Require_EC_KEY(self, ec);

    return (EC_KEY_get0_private_key(ec) ? Qtrue : Qfalse);
}</code>
</pre> 
            </div><!-- private_key-3F-source -->
            
          </div>

          

          
        </div><!-- private_key-3F-method -->

      
        <div id="public_key-method" class="method-detail ">
          <a name="method-i-public_key"></a>

          
          
          <div class="method-heading">
            <span class="method-callseq">public_key   => OpenSSL::PKey::EC::Point</span>
            
            <span class="method-click-advice">click to toggle source</span>
            
          </div>
          
          

          <div class="method-description">
            
            <p>See the <a href="../../OpenSSL.html">OpenSSL</a> documentation for
EC_KEY_get0_public_key()</p>
            

            
            <div class="method-source-code" id="public_key-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
static VALUE ossl_ec_key_get_public_key(VALUE self)
{
    EC_KEY *ec;
    const EC_POINT *point;
    VALUE group;

    Require_EC_KEY(self, ec);

    if ((point = EC_KEY_get0_public_key(ec)) == NULL)
        return Qnil;

    group = rb_funcall(self, rb_intern(&quot;group&quot;), 0);
    if (NIL_P(group))
        ossl_raise(eECError, &quot;EC_KEY_get0_get0_group (has public_key but no group???&quot;);

    return ossl_ec_point_dup(point, group);
}</code>
</pre> 
            </div><!-- public_key-source -->
            
          </div>

          

          
        </div><!-- public_key-method -->

      
        <div id="public_key-3D-method" class="method-detail ">
          <a name="method-i-public_key-3D"></a>

          
          
          <div class="method-heading">
            <span class="method-callseq">public_key = ec_point</span>
            
            <span class="method-click-advice">click to toggle source</span>
            
          </div>
          
          

          <div class="method-description">
            
            <p>See the <a href="../../OpenSSL.html">OpenSSL</a> documentation for
EC_KEY_set_public_key()</p>
            

            
            <div class="method-source-code" id="public_key-3D-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
static VALUE ossl_ec_key_set_public_key(VALUE self, VALUE public_key)
{
    EC_KEY *ec;
    EC_POINT *point = NULL;

    Require_EC_KEY(self, ec);
    if (!NIL_P(public_key))
        SafeRequire_EC_POINT(public_key, point);

    switch (EC_KEY_set_public_key(ec, point)) {
    case 1:
        break;
    case 0:
        if (point == NULL)
            break;
    default:
        ossl_raise(eECError, &quot;EC_KEY_set_public_key&quot;);
    }

    return public_key;
}</code>
</pre> 
            </div><!-- public_key-3D-source -->
            
          </div>

          

          
        </div><!-- public_key-3D-method -->

      
        <div id="public_key-3F-method" class="method-detail ">
          <a name="method-i-public_key-3F"></a>

          
          
          <div class="method-heading">
            <span class="method-callseq">public_key? => true or false</span>
            
            <span class="method-click-advice">click to toggle source</span>
            
          </div>
          
          

          <div class="method-description">
            
            <p>Both <a href="EC.html#method-i-public_key">public_key</a>? and <a
href="EC.html#method-i-private_key">private_key</a>? may return false at
the same time unlike other <a href="PKey.html">PKey</a> classes.</p>
            

            
            <div class="method-source-code" id="public_key-3F-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
static VALUE ossl_ec_key_is_public_key(VALUE self)
{
    EC_KEY *ec;

    Require_EC_KEY(self, ec);

    return (EC_KEY_get0_public_key(ec) ? Qtrue : Qfalse);
}</code>
</pre> 
            </div><!-- public_key-3F-source -->
            
          </div>

          

          
        </div><!-- public_key-3F-method -->

      
        <div id="to_der-method" class="method-detail ">
          <a name="method-i-to_der"></a>

          
          
          <div class="method-heading">
            <span class="method-callseq">to_der   => String</span>
            
            <span class="method-click-advice">click to toggle source</span>
            
          </div>
          
          

          <div class="method-description">
            
            <p>See the <a href="../../OpenSSL.html">OpenSSL</a> documentation for
i2d_ECPrivateKey_bio()</p>
            

            
            <div class="method-source-code" id="to_der-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
static VALUE ossl_ec_key_to_der(VALUE self)
{
    return ossl_ec_key_to_string(self, EXPORT_DER);
}</code>
</pre> 
            </div><!-- to_der-source -->
            
          </div>

          

          
        </div><!-- to_der-method -->

      
        <div id="to_pem-method" class="method-detail ">
          <a name="method-i-to_pem"></a>

          
          
          <div class="method-heading">
            <span class="method-callseq">to_pem   => String</span>
            
            <span class="method-click-advice">click to toggle source</span>
            
          </div>
          
          

          <div class="method-description">
            
            <p>See the <a href="../../OpenSSL.html">OpenSSL</a> documentation for
PEM_write_bio_ECPrivateKey()</p>
            

            
            <div class="method-source-code" id="to_pem-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
static VALUE ossl_ec_key_to_pem(VALUE self)
{
    return ossl_ec_key_to_string(self, EXPORT_PEM);
}</code>
</pre> 
            </div><!-- to_pem-source -->
            
          </div>

          

          
        </div><!-- to_pem-method -->

      
        <div id="to_text-method" class="method-detail ">
          <a name="method-i-to_text"></a>

          
          
          <div class="method-heading">
            <span class="method-callseq">to_text   => String</span>
            
            <span class="method-click-advice">click to toggle source</span>
            
          </div>
          
          

          <div class="method-description">
            
            <p>See the <a href="../../OpenSSL.html">OpenSSL</a> documentation for
EC_KEY_print()</p>
            

            
            <div class="method-source-code" id="to_text-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
static VALUE ossl_ec_key_to_text(VALUE self)
{
    EC_KEY *ec;
    BIO *out;
    VALUE str;

    Require_EC_KEY(self, ec);
    if (!(out = BIO_new(BIO_s_mem()))) {
        ossl_raise(eECError, &quot;BIO_new(BIO_s_mem())&quot;);
    }
    if (!EC_KEY_print(out, ec, 0)) {
        BIO_free(out);
        ossl_raise(eECError, &quot;EC_KEY_print&quot;);
    }
    str = ossl_membio2str(out);

    return str;
}</code>
</pre> 
            </div><!-- to_text-source -->
            
          </div>

          

          
        </div><!-- to_text-method -->

      
      </div><!-- public-instance-method-details -->
    
    </div><!-- 5Buntitled-5D -->
  

  </div><!-- documentation -->
<div id="disqus_thread" style='display:none'></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    // var disqus_shortname = 'rubydocbeta'; // required 
    var disqus_shortname = 'ruby-doc'; // required 
    
    var disqus_developer = true; // DEBUGGERY
    


    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink" style='display:none'>blog comments powered by <span class="logo-disqus">Disqus</span></a>

<div class='grids wrapper' id="footer">
  <p><small>This page was generated for Ruby 1.9.2</small></p> 
  
   <p> <a href="http://www.ruby-doc.org">Ruby-doc.org</a> is hosted by <a href="http://www.jamesbritt.com">James Britt</a> and <a href="http://www.neurogami.com">Neurogami</a>, an <a href="http://www.neurogami.com"> avant garage research + development in Scottsdale, AZ</a>.  </p>
 
    <p><small>Generated with the <a href="http://neurogami.com/code/">Rubydoc Rdoc Generator</a> 0.9.4</small>.</p>
  </div>

</div>

<script type="text/javascript">
var _uacct = "UA-335317-2";
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try{ 
var pageTracker = _gat._getTracker(_uacct);
pageTracker._trackPageview();
} catch(err) {} 
</script>
</body>
</html>

