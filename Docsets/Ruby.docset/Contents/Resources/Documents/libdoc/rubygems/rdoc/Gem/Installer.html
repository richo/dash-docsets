<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <!-- RD version: 0.9.4  -->
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
  <title>Class: Gem::Installer (Ruby 1.9.2) </title>
  <!-- raw_prefix  = '..'   -->
  <link rel="stylesheet" href="../css/obf.css" >

  <script src="../js/jquery.js" type="text/javascript" charset="utf-8"></script>
  <script src="../js/thickbox-compressed.js" type="text/javascript" charset="utf-8"></script>
  <script src="../js/quicksearch.js" type="text/javascript" charset="utf-8"></script>
  <script src="../js/rubydoc.js" type="text/javascript" charset="utf-8"></script> 

 
<script src="../js/highlight.min.js"></script>
<script> 
  hljs.tabReplace = '  ';
  hljs.initHighlightingOnLoad();
  </script> 
</head>

<body id="top" class="class">
<div id="actionbar" style='display:none' >
<div class='wrapper'>
<ul class='grids g0'>
  <li class='grid-2' ><a href='/' target='_top' >Home</a></li>
  <li class='grid-2' ><a href='/core' target='_top' >Core</a></li>
  <li class='grid-2' ><a href='/stdlib' target='_top' >Std-lib</a></li>
  <li class='grid-2' ><a href='/downloads' target='_top' >Downloads</a></li>
  <li class='grid-7 right' id='rd-action-search'><form id="searchbox_011815814100681837392:wnccv6st5qk" action="/search.html"><input type="hidden" name="cx" value="011815814100681837392:wnccv6st5qk" ><input name="q" type="text" size="20" >&#160;&#160;<input type="submit" name="sa" value="Search" ><input type="hidden" name="cof" value="FORID:9" ></form>
</li>
</ul>
</div>
</div> <!-- end action bar -->
          <div class='wrapper'>
  <div id="metadata" style='display:none'>
    <div id="home-metadata">
      <div id="home-section" class="section">
        <h3 class="section-header">
          <a href="../index.html">Home</a>
          <a href="../index.html#classes">Classes</a>
          <a href="../index.html#methods">Methods</a>
        </h3>
      </div>
    </div>

    <div id="file-metadata">
      <div id="file-list-section" class="section">
        <h3 class="section-header">In Files</h3>
        <div class="section-body">
          <ul>
          
            <li><a href="../rubygems/installer_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="rubygems/installer.rb">rubygems/installer.rb</a></li>
          
          </ul>
        </div>
      </div>

      
    </div>

    <div id="class-metadata">
      
      <!-- Parent Class -->
      <div id="parent-class-section" class="section">
        <h3 class="section-header">Parent</h3>
        
        <p class="link"><a href="../Object.html">Object</a></p>
        
      </div>
      

      

      
      <!-- Namespace Contents -->
      <div id="namespace-list-section" class="section">
        <h3 class="section-header">Namespace</h3>
        <ul class="link-list">
          
          <li><span class="type">CLASS</span> <a href="Installer/ExtensionBuildError.html">Gem::Installer::ExtensionBuildError</a></li>
          
        </ul>
      </div>
      

      
      <!-- Method Quickref -->
      <div id="method-list-section" class="section">
        <h3 class="section-header">Methods</h3>
        <ul class="link-list">
          
          <li><a href="#method-c-exec_format">::exec_format</a></li>
          
          <li><a href="#method-c-new">::new</a></li>
          
          <li><a href="#method-i-app_script_text">#app_script_text</a></li>
          
          <li><a href="#method-i-build_extensions">#build_extensions</a></li>
          
          <li><a href="#method-i-ensure_dependency">#ensure_dependency</a></li>
          
          <li><a href="#method-i-extract_files">#extract_files</a></li>
          
          <li><a href="#method-i-formatted_program_filename">#formatted_program_filename</a></li>
          
          <li><a href="#method-i-generate_bin">#generate_bin</a></li>
          
          <li><a href="#method-i-generate_bin_script">#generate_bin_script</a></li>
          
          <li><a href="#method-i-generate_bin_symlink">#generate_bin_symlink</a></li>
          
          <li><a href="#method-i-generate_windows_script">#generate_windows_script</a></li>
          
          <li><a href="#method-i-install">#install</a></li>
          
          <li><a href="#method-i-installation_satisfies_dependency-3F">#installation_satisfies_dependency?</a></li>
          
          <li><a href="#method-i-shebang">#shebang</a></li>
          
          <li><a href="#method-i-unpack">#unpack</a></li>
          
          <li><a href="#method-i-windows_stub_script">#windows_stub_script</a></li>
          
          <li><a href="#method-i-write_spec">#write_spec</a></li>
          
        </ul>
      </div>
      

      
      <!-- Included Modules -->
      <div id="includes-section" class="section">
        <h3 class="section-header">Included Modules</h3>
        <ul class="link-list">
        
        
          <li><a class="include" href="UserInteraction.html">Gem::UserInteraction</a></li>
        
        
        
          <li><a class="include" href="RequirePathsBuilder.html">Gem::RequirePathsBuilder</a></li>
        
        
        </ul>
      </div>
      
    </div>

    <div id="project-metadata">
      
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class/Module Index
          <span class="search-toggle"><img src="../images/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <ul class="link-list">
        
          <li><a href="../Gem.html">Gem</a></li>
        
          <li><a href="../Gem/Builder.html">Gem::Builder</a></li>
        
          <li><a href="../Gem/Command.html">Gem::Command</a></li>
        
          <li><a href="../Gem/CommandLineError.html">Gem::CommandLineError</a></li>
        
          <li><a href="../Gem/CommandManager.html">Gem::CommandManager</a></li>
        
          <li><a href="../Gem/Commands.html">Gem::Commands</a></li>
        
          <li><a href="../Gem/Commands/BuildCommand.html">Gem::Commands::BuildCommand</a></li>
        
          <li><a href="../Gem/Commands/CertCommand.html">Gem::Commands::CertCommand</a></li>
        
          <li><a href="../Gem/Commands/CheckCommand.html">Gem::Commands::CheckCommand</a></li>
        
          <li><a href="../Gem/Commands/CleanupCommand.html">Gem::Commands::CleanupCommand</a></li>
        
          <li><a href="../Gem/Commands/ContentsCommand.html">Gem::Commands::ContentsCommand</a></li>
        
          <li><a href="../Gem/Commands/DependencyCommand.html">Gem::Commands::DependencyCommand</a></li>
        
          <li><a href="../Gem/Commands/EnvironmentCommand.html">Gem::Commands::EnvironmentCommand</a></li>
        
          <li><a href="../Gem/Commands/FetchCommand.html">Gem::Commands::FetchCommand</a></li>
        
          <li><a href="../Gem/Commands/GenerateIndexCommand.html">Gem::Commands::GenerateIndexCommand</a></li>
        
          <li><a href="../Gem/Commands/HelpCommand.html">Gem::Commands::HelpCommand</a></li>
        
          <li><a href="../Gem/Commands/InstallCommand.html">Gem::Commands::InstallCommand</a></li>
        
          <li><a href="../Gem/Commands/ListCommand.html">Gem::Commands::ListCommand</a></li>
        
          <li><a href="../Gem/Commands/LockCommand.html">Gem::Commands::LockCommand</a></li>
        
          <li><a href="../Gem/Commands/MirrorCommand.html">Gem::Commands::MirrorCommand</a></li>
        
          <li><a href="../Gem/Commands/OutdatedCommand.html">Gem::Commands::OutdatedCommand</a></li>
        
          <li><a href="../Gem/Commands/OwnerCommand.html">Gem::Commands::OwnerCommand</a></li>
        
          <li><a href="../Gem/Commands/PristineCommand.html">Gem::Commands::PristineCommand</a></li>
        
          <li><a href="../Gem/Commands/PushCommand.html">Gem::Commands::PushCommand</a></li>
        
          <li><a href="../Gem/Commands/QueryCommand.html">Gem::Commands::QueryCommand</a></li>
        
          <li><a href="../Gem/Commands/RdocCommand.html">Gem::Commands::RdocCommand</a></li>
        
          <li><a href="../Gem/Commands/SearchCommand.html">Gem::Commands::SearchCommand</a></li>
        
          <li><a href="../Gem/Commands/ServerCommand.html">Gem::Commands::ServerCommand</a></li>
        
          <li><a href="../Gem/Commands/SetupCommand.html">Gem::Commands::SetupCommand</a></li>
        
          <li><a href="../Gem/Commands/SourcesCommand.html">Gem::Commands::SourcesCommand</a></li>
        
          <li><a href="../Gem/Commands/SpecificationCommand.html">Gem::Commands::SpecificationCommand</a></li>
        
          <li><a href="../Gem/Commands/StaleCommand.html">Gem::Commands::StaleCommand</a></li>
        
          <li><a href="../Gem/Commands/UninstallCommand.html">Gem::Commands::UninstallCommand</a></li>
        
          <li><a href="../Gem/Commands/UnpackCommand.html">Gem::Commands::UnpackCommand</a></li>
        
          <li><a href="../Gem/Commands/UpdateCommand.html">Gem::Commands::UpdateCommand</a></li>
        
          <li><a href="../Gem/Commands/WhichCommand.html">Gem::Commands::WhichCommand</a></li>
        
          <li><a href="../Gem/ConfigFile.html">Gem::ConfigFile</a></li>
        
          <li><a href="../Gem/ConsoleUI.html">Gem::ConsoleUI</a></li>
        
          <li><a href="../Gem/DefaultUserInteraction.html">Gem::DefaultUserInteraction</a></li>
        
          <li><a href="../Gem/Dependency.html">Gem::Dependency</a></li>
        
          <li><a href="../Gem/DependencyError.html">Gem::DependencyError</a></li>
        
          <li><a href="../Gem/DependencyInstaller.html">Gem::DependencyInstaller</a></li>
        
          <li><a href="../Gem/DependencyList.html">Gem::DependencyList</a></li>
        
          <li><a href="../Gem/DependencyRemovalException.html">Gem::DependencyRemovalException</a></li>
        
          <li><a href="../Gem/DocManager.html">Gem::DocManager</a></li>
        
          <li><a href="../Gem/DocumentError.html">Gem::DocumentError</a></li>
        
          <li><a href="../Gem/EndOfYAMLException.html">Gem::EndOfYAMLException</a></li>
        
          <li><a href="../Gem/ErrorReason.html">Gem::ErrorReason</a></li>
        
          <li><a href="../Gem/Exception.html">Gem::Exception</a></li>
        
          <li><a href="../Gem/Ext.html">Gem::Ext</a></li>
        
          <li><a href="../Gem/Ext/Builder.html">Gem::Ext::Builder</a></li>
        
          <li><a href="../Gem/Ext/ConfigureBuilder.html">Gem::Ext::ConfigureBuilder</a></li>
        
          <li><a href="../Gem/Ext/ExtConfBuilder.html">Gem::Ext::ExtConfBuilder</a></li>
        
          <li><a href="../Gem/Ext/RakeBuilder.html">Gem::Ext::RakeBuilder</a></li>
        
          <li><a href="../Gem/FakeFetcher.html">Gem::FakeFetcher</a></li>
        
          <li><a href="../Gem/FileOperations.html">Gem::FileOperations</a></li>
        
          <li><a href="../Gem/FilePermissionError.html">Gem::FilePermissionError</a></li>
        
          <li><a href="../Gem/Format.html">Gem::Format</a></li>
        
          <li><a href="../Gem/FormatException.html">Gem::FormatException</a></li>
        
          <li><a href="../Gem/GemNotFoundException.html">Gem::GemNotFoundException</a></li>
        
          <li><a href="../Gem/GemNotInHomeException.html">Gem::GemNotInHomeException</a></li>
        
          <li><a href="../Gem/GemPathSearcher.html">Gem::GemPathSearcher</a></li>
        
          <li><a href="../Gem/GemRunner.html">Gem::GemRunner</a></li>
        
          <li><a href="../Gem/GemcutterUtilities.html">Gem::GemcutterUtilities</a></li>
        
          <li><a href="../Gem/Indexer.html">Gem::Indexer</a></li>
        
          <li><a href="../Gem/InstallError.html">Gem::InstallError</a></li>
        
          <li><a href="../Gem/InstallUpdateOptions.html">Gem::InstallUpdateOptions</a></li>
        
          <li><a href="../Gem/Installer.html">Gem::Installer</a></li>
        
          <li><a href="../Gem/Installer/ExtensionBuildError.html">Gem::Installer::ExtensionBuildError</a></li>
        
          <li><a href="../Gem/InvalidSpecificationException.html">Gem::InvalidSpecificationException</a></li>
        
          <li><a href="../Gem/LoadError.html">Gem::LoadError</a></li>
        
          <li><a href="../Gem/LocalRemoteOptions.html">Gem::LocalRemoteOptions</a></li>
        
          <li><a href="../Gem/OldFormat.html">Gem::OldFormat</a></li>
        
          <li><a href="../Gem/OperationNotSupportedError.html">Gem::OperationNotSupportedError</a></li>
        
          <li><a href="../Gem/Package.html">Gem::Package</a></li>
        
          <li><a href="../Gem/Package/BadCheckSum.html">Gem::Package::BadCheckSum</a></li>
        
          <li><a href="../Gem/Package/ClosedIO.html">Gem::Package::ClosedIO</a></li>
        
          <li><a href="../Gem/Package/Error.html">Gem::Package::Error</a></li>
        
          <li><a href="../Gem/Package/FSyncDir.html">Gem::Package::FSyncDir</a></li>
        
          <li><a href="../Gem/Package/FormatError.html">Gem::Package::FormatError</a></li>
        
          <li><a href="../Gem/Package/NonSeekableIO.html">Gem::Package::NonSeekableIO</a></li>
        
          <li><a href="../Gem/Package/TarHeader.html">Gem::Package::TarHeader</a></li>
        
          <li><a href="../Gem/Package/TarOutput.html">Gem::Package::TarOutput</a></li>
        
          <li><a href="../Gem/Package/TarReader.html">Gem::Package::TarReader</a></li>
        
          <li><a href="../Gem/Package/TarReader/UnexpectedEOF.html">Gem::Package::TarReader::UnexpectedEOF</a></li>
        
          <li><a href="../Gem/Package/TarWriter.html">Gem::Package::TarWriter</a></li>
        
          <li><a href="../Gem/Package/TarWriter/BoundedStream.html">Gem::Package::TarWriter::BoundedStream</a></li>
        
          <li><a href="../Gem/Package/TarWriter/FileOverflow.html">Gem::Package::TarWriter::FileOverflow</a></li>
        
          <li><a href="../Gem/Package/TarWriter/RestrictedStream.html">Gem::Package::TarWriter::RestrictedStream</a></li>
        
          <li><a href="../Gem/Package/TooLongFileName.html">Gem::Package::TooLongFileName</a></li>
        
          <li><a href="../Gem/PackageTask.html">Gem::PackageTask</a></li>
        
          <li><a href="../Gem/Platform.html">Gem::Platform</a></li>
        
          <li><a href="../Gem/PlatformMismatch.html">Gem::PlatformMismatch</a></li>
        
          <li><a href="../Gem/RemoteError.html">Gem::RemoteError</a></li>
        
          <li><a href="../Gem/RemoteFetcher.html">Gem::RemoteFetcher</a></li>
        
          <li><a href="../Gem/RemoteFetcher/FetchError.html">Gem::RemoteFetcher::FetchError</a></li>
        
          <li><a href="../Gem/RemoteInstallationCancelled.html">Gem::RemoteInstallationCancelled</a></li>
        
          <li><a href="../Gem/RemoteInstallationSkipped.html">Gem::RemoteInstallationSkipped</a></li>
        
          <li><a href="../Gem/RemoteSourceException.html">Gem::RemoteSourceException</a></li>
        
          <li><a href="../Gem/RequirePathsBuilder.html">Gem::RequirePathsBuilder</a></li>
        
          <li><a href="../Gem/Requirement.html">Gem::Requirement</a></li>
        
          <li><a href="../Gem/Requirement.html">Gem::Requirement</a></li>
        
          <li><a href="../Gem/Security.html">Gem::Security</a></li>
        
          <li><a href="../Gem/Security/Exception.html">Gem::Security::Exception</a></li>
        
          <li><a href="../Gem/Security/Policy.html">Gem::Security::Policy</a></li>
        
          <li><a href="../Gem/Security/Signer.html">Gem::Security::Signer</a></li>
        
          <li><a href="../Gem/Server.html">Gem::Server</a></li>
        
          <li><a href="../Gem/SilentUI.html">Gem::SilentUI</a></li>
        
          <li><a href="../Gem/SourceIndex.html">Gem::SourceIndex</a></li>
        
          <li><a href="../Gem/SourceInfoCache.html">Gem::SourceInfoCache</a></li>
        
          <li><a href="../Gem/SourceInfoCacheEntry.html">Gem::SourceInfoCacheEntry</a></li>
        
          <li><a href="../Gem/SpecFetcher.html">Gem::SpecFetcher</a></li>
        
          <li><a href="../Gem/Specification.html">Gem::Specification</a></li>
        
          <li><a href="../Gem/StreamUI.html">Gem::StreamUI</a></li>
        
          <li><a href="../Gem/StreamUI/SilentProgressReporter.html">Gem::StreamUI::SilentProgressReporter</a></li>
        
          <li><a href="../Gem/StreamUI/SimpleProgressReporter.html">Gem::StreamUI::SimpleProgressReporter</a></li>
        
          <li><a href="../Gem/StreamUI/VerboseProgressReporter.html">Gem::StreamUI::VerboseProgressReporter</a></li>
        
          <li><a href="../Gem/SystemExitException.html">Gem::SystemExitException</a></li>
        
          <li><a href="../Gem/Text.html">Gem::Text</a></li>
        
          <li><a href="../Gem/Uninstaller.html">Gem::Uninstaller</a></li>
        
          <li><a href="../Gem/UserInteraction.html">Gem::UserInteraction</a></li>
        
          <li><a href="../Gem/Validator.html">Gem::Validator</a></li>
        
          <li><a href="../Gem/VerificationError.html">Gem::VerificationError</a></li>
        
          <li><a href="../Gem/Version.html">Gem::Version</a></li>
        
          <li><a href="../Gem/VersionOption.html">Gem::VersionOption</a></li>
        
          <li><a href="../OpenSSL.html">OpenSSL</a></li>
        
          <li><a href="../OpenSSL/X509.html">OpenSSL::X509</a></li>
        
          <li><a href="../Date.html">Date</a></li>
        
          <li><a href="../Kernel.html">Kernel</a></li>
        
          <li><a href="../Object.html">Object</a></li>
        
          <li><a href="../RbConfig.html">RbConfig</a></li>
        
          <li><a href="../TempIO.html">TempIO</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>

      
    </div>
  </div>

  <div id="documentation" style='margin: 10px 10px 10px 10px'>
    <h1 class="class">Gem::Installer</h1>

    <div id="description" class="description">
      
<p>The installer class processes RubyGem .gem files and installs the files
contained in the .gem into the <a
href="../Gem.html#method-c-path">Gem.path</a>.</p>

<p><a href="Installer.html">Gem::Installer</a> does the work of putting files
in all the right places on the filesystem including unpacking the gem into
its gem dir, installing the gemspec in the specifications dir, storing the
cached gem in the cache dir, and installing either wrappers or symlinks for
executables.</p>

<p>The installer fires pre and post install hooks.  Hooks can be added either
through a rubygems_plugin.rb file in an installed gem or via a
rubygems/defaults/#{RUBY_ENGINE}.rb or
rubygems/defaults/operating_system.rb file.  See <a
href="../Gem.html#method-c-pre_install">Gem.pre_install</a> and <a
href="../Gem.html#method-c-post_install">Gem.post_install</a> for details.</p>

    </div><!-- description -->

    
    
    
    <div id="5Buntitled-5D" class="documentation-section">
      

      

      
      <!-- Constants -->
      <div id="constants-list" class="section">
        <h3 class="section-header">Constants</h3>
        <dl>
        
          <dt><a name="ENV_PATHS">ENV_PATHS</a></dt>
          
          <dd class="description"><p>Paths where env(1) might live.  Some systems are broken and have it in /bin</p></dd>
          
        
        </dl>
      </div>
      

      
      <!-- Attributes -->
      <div id="attribute-method-details" class="method-section section">
        <h3 class="section-header">Attributes</h3>

        
        <div id="exec_format-attribute-method" class="method-detail">
          <a name="exec_format"></a>
          
          <a name="exec_format="></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">exec_format</span><span
              class="attribute-access-type">[W]</span>
          </div>

          <div class="method-description">
          
          
          
          </div>
        </div>
        
        <div id="path_warning-attribute-method" class="method-detail">
          <a name="path_warning"></a>
          
          <a name="path_warning="></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">path_warning</span><span
              class="attribute-access-type">[RW]</span>
          </div>

          <div class="method-description">
          
          <p>True if we’ve warned about PATH not including <a
href="../Gem.html#method-c-bindir">Gem.bindir</a></p>
          
          </div>
        </div>
        
        <div id="bin_dir-attribute-method" class="method-detail">
          <a name="bin_dir"></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">bin_dir</span><span
              class="attribute-access-type">[R]</span>
          </div>

          <div class="method-description">
          
          <p>The directory a gem’s executables will be installed into</p>
          
          </div>
        </div>
        
        <div id="gem_home-attribute-method" class="method-detail">
          <a name="gem_home"></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">gem_home</span><span
              class="attribute-access-type">[R]</span>
          </div>

          <div class="method-description">
          
          <p>The gem repository the gem will be installed into</p>
          
          </div>
        </div>
        
        <div id="spec-attribute-method" class="method-detail">
          <a name="spec"></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">spec</span><span
              class="attribute-access-type">[R]</span>
          </div>

          <div class="method-description">
          
          <p>The <a href="Specification.html">Gem::Specification</a> for the gem being
installed</p>
          
          </div>
        </div>
        
      </div><!-- attribute-method-details -->
      

      <!-- Methods -->
      
      <div id="public-class-method-details" class="method-section section">
        <h3 class="section-header">Public Class Methods</h3>

      
        <div id="exec_format-method" class="method-detail ">
          <a name="method-c-exec_format"></a>

          
          <div class="method-heading">
            <span class="method-name">exec_format</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Defaults to use Ruby’s program prefix and suffix.</p>
            

            
            <div class="method-source-code" id="exec_format-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
<span class="ruby-comment"># File rubygems/installer.rb, line 72</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">exec_format</span>
  <span class="ruby-ivar">@exec_format</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">default_exec_format</span>
<span class="ruby-keyword">end</span></code>
</pre> 
            </div><!-- exec_format-source -->
            
          </div>

          

          
        </div><!-- exec_format-method -->

      
        <div id="new-method" class="method-detail ">
          <a name="method-c-new"></a>

          
          <div class="method-heading">
            <span class="method-name">new</span><span
              class="method-args">(gem, options={})</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Constructs an <a href="Installer.html">Installer</a> instance that will
install the gem located at <tt>gem</tt>.  <tt>options</tt> is a Hash with
the following keys:</p>
<table class="rdoc-list"><tr><td class="rdoc-term"><p>:env_shebang</p></td>
<td>
<p>Use /usr/bin/env in bin wrappers.</p>
</td></tr><tr><td class="rdoc-term"><p>:force</p></td>
<td>
<p>Overrides all version checks and security policy checks, except for a
signed-gems-only policy.</p>
</td></tr><tr><td class="rdoc-term"><p>:ignore_dependencies</p></td>
<td>
<p>Don’t raise if a dependency is missing.</p>
</td></tr><tr><td class="rdoc-term"><p>:install_dir</p></td>
<td>
<p>The directory to install the gem into.</p>
</td></tr><tr><td class="rdoc-term"><p>:format_executable</p></td>
<td>
<p><a href="Format.html">Format</a> the executable the same as the ruby
executable. If your ruby is ruby18, foo_exec will be installed as
foo_exec18.</p>
</td></tr><tr><td class="rdoc-term"><p>:security_policy</p></td>
<td>
<p>Use the specified security policy.  See <a
href="Security.html">Gem::Security</a></p>
</td></tr><tr><td class="rdoc-term"><p>:wrappers</p></td>
<td>
<p>Install wrappers if true, symlinks if false.</p>
</td></tr></table>
            

            
            <div class="method-source-code" id="new-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
<span class="ruby-comment"># File rubygems/installer.rb, line 93</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">gem</span>, <span class="ruby-identifier">options</span>={})
  <span class="ruby-ivar">@gem</span> = <span class="ruby-identifier">gem</span>

  <span class="ruby-identifier">options</span> = {
    <span class="ruby-value">:bin_dir</span>      =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span>,
    <span class="ruby-value">:env_shebang</span>  =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">false</span>,
    <span class="ruby-value">:exec_format</span>  =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">false</span>,
    <span class="ruby-value">:force</span>        =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">false</span>,
    <span class="ruby-value">:install_dir</span>  =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">dir</span>,
    <span class="ruby-value">:source_index</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">source_index</span>,
  }.<span class="ruby-identifier">merge</span> <span class="ruby-identifier">options</span>

  <span class="ruby-ivar">@env_shebang</span>         = <span class="ruby-identifier">options</span>[<span class="ruby-value">:env_shebang</span>]
  <span class="ruby-ivar">@force</span>               = <span class="ruby-identifier">options</span>[<span class="ruby-value">:force</span>]
  <span class="ruby-identifier">gem_home</span>             = <span class="ruby-identifier">options</span>[<span class="ruby-value">:install_dir</span>]
  <span class="ruby-ivar">@gem_home</span>            = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">gem_home</span>)
  <span class="ruby-ivar">@ignore_dependencies</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:ignore_dependencies</span>]
  <span class="ruby-ivar">@format_executable</span>   = <span class="ruby-identifier">options</span>[<span class="ruby-value">:format_executable</span>]
  <span class="ruby-ivar">@security_policy</span>     = <span class="ruby-identifier">options</span>[<span class="ruby-value">:security_policy</span>]
  <span class="ruby-ivar">@wrappers</span>            = <span class="ruby-identifier">options</span>[<span class="ruby-value">:wrappers</span>]
  <span class="ruby-ivar">@bin_dir</span>             = <span class="ruby-identifier">options</span>[<span class="ruby-value">:bin_dir</span>]
  <span class="ruby-ivar">@development</span>         = <span class="ruby-identifier">options</span>[<span class="ruby-value">:development</span>]
  <span class="ruby-ivar">@source_index</span>        = <span class="ruby-identifier">options</span>[<span class="ruby-value">:source_index</span>]

  <span class="ruby-keyword">begin</span>
    <span class="ruby-ivar">@format</span> = <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Format</span>.<span class="ruby-identifier">from_file_by_path</span> <span class="ruby-ivar">@gem</span>, <span class="ruby-ivar">@security_policy</span>
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Package</span><span class="ruby-operator">::</span><span class="ruby-constant">FormatError</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">InstallError</span>, <span class="ruby-node">&quot;invalid gem format for #{@gem}&quot;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:user_install</span>] <span class="ruby-keyword">and</span> <span class="ruby-keyword">not</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:unpack</span>] <span class="ruby-keyword">then</span>
    <span class="ruby-ivar">@gem_home</span> = <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">user_dir</span>

    <span class="ruby-identifier">user_bin_dir</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-ivar">@gem_home</span>, <span class="ruby-string">'bin'</span>)
    <span class="ruby-keyword">unless</span> <span class="ruby-constant">ENV</span>[<span class="ruby-string">'PATH'</span>].<span class="ruby-identifier">split</span>(<span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">PATH_SEPARATOR</span>).<span class="ruby-identifier">include?</span> <span class="ruby-identifier">user_bin_dir</span> <span class="ruby-keyword">then</span>
      <span class="ruby-keyword">unless</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">path_warning</span> <span class="ruby-keyword">then</span>
        <span class="ruby-identifier">alert_warning</span> <span class="ruby-node">&quot;You don't have #{user_bin_dir} in your PATH,\n\t  gem executables will not run.&quot;</span>
        <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">path_warning</span> = <span class="ruby-keyword">true</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir_p</span> <span class="ruby-ivar">@gem_home</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">FilePermissionError</span>, <span class="ruby-ivar">@gem_home</span> <span class="ruby-keyword">unless</span>
    <span class="ruby-identifier">options</span>[<span class="ruby-value">:unpack</span>] <span class="ruby-keyword">or</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">writable?</span> <span class="ruby-ivar">@gem_home</span>

  <span class="ruby-ivar">@spec</span> = <span class="ruby-ivar">@format</span>.<span class="ruby-identifier">spec</span>

  <span class="ruby-ivar">@gem_dir</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-ivar">@gem_home</span>, <span class="ruby-string">&quot;gems&quot;</span>, <span class="ruby-ivar">@spec</span>.<span class="ruby-identifier">full_name</span>).<span class="ruby-identifier">untaint</span>
<span class="ruby-keyword">end</span></code>
</pre> 
            </div><!-- new-source -->
            
          </div>

          

          
        </div><!-- new-method -->

      
      </div><!-- public-class-method-details -->
    
      <div id="public-instance-method-details" class="method-section section">
        <h3 class="section-header">Public Instance Methods</h3>

      
        <div id="app_script_text-method" class="method-detail ">
          <a name="method-i-app_script_text"></a>

          
          <div class="method-heading">
            <span class="method-name">app_script_text</span><span
              class="method-args">(bin_file_name)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Return the text for an application file.</p>
            

            
            <div class="method-source-code" id="app_script_text-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
<span class="ruby-comment"># File rubygems/installer.rb, line 397</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">app_script_text</span>(<span class="ruby-identifier">bin_file_name</span>)
  <span class="ruby-string">#{shebang bin_file_name}## This file was generated by RubyGems.## The application '#{@spec.name}' is installed as part of a gem, and# this file is here to facilitate running it.#require 'rubygems'version = &quot;#{Gem::Requirement.default}&quot;if ARGV.first =~ /^_(.*)_$/ and Gem::Version.correct? $1 then  version = $1  ARGV.shiftendgem '#{@spec.name}', versionload Gem.bin_path('#{@spec.name}', '#{bin_file_name}', version)</span>
<span class="ruby-keyword">end</span></code>
</pre> 
            </div><!-- app_script_text-source -->
            
          </div>

          

          
        </div><!-- app_script_text-method -->

      
        <div id="build_extensions-method" class="method-detail ">
          <a name="method-i-build_extensions"></a>

          
          <div class="method-heading">
            <span class="method-name">build_extensions</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Builds extensions.  Valid types of extensions are extconf.rb files,
configure scripts and rakefiles or mkrf_conf files.</p>
            

            
            <div class="method-source-code" id="build_extensions-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
<span class="ruby-comment"># File rubygems/installer.rb, line 439</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">build_extensions</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@spec</span>.<span class="ruby-identifier">extensions</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-identifier">say</span> <span class="ruby-string">&quot;Building native extensions.  This could take a while...&quot;</span>
  <span class="ruby-identifier">start_dir</span> = <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">pwd</span>
  <span class="ruby-identifier">dest_path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span> <span class="ruby-ivar">@gem_dir</span>, <span class="ruby-ivar">@spec</span>.<span class="ruby-identifier">require_paths</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">ran_rake</span> = <span class="ruby-keyword">false</span> <span class="ruby-comment"># only run rake once</span>

  <span class="ruby-ivar">@spec</span>.<span class="ruby-identifier">extensions</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">extension</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">break</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">ran_rake</span>
    <span class="ruby-identifier">results</span> = []

    <span class="ruby-identifier">builder</span> = <span class="ruby-keyword">case</span> <span class="ruby-identifier">extension</span>
              <span class="ruby-keyword">when</span> <span class="ruby-regexp">/extconf/</span> <span class="ruby-keyword">then</span>
                <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Ext</span><span class="ruby-operator">::</span><span class="ruby-constant">ExtConfBuilder</span>
              <span class="ruby-keyword">when</span> <span class="ruby-regexp">/configure/</span> <span class="ruby-keyword">then</span>
                <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Ext</span><span class="ruby-operator">::</span><span class="ruby-constant">ConfigureBuilder</span>
              <span class="ruby-keyword">when</span> <span class="ruby-regexp">/rakefile/</span>, <span class="ruby-regexp">/mkrf_conf/</span> <span class="ruby-keyword">then</span>
                <span class="ruby-identifier">ran_rake</span> = <span class="ruby-keyword">true</span>
                <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Ext</span><span class="ruby-operator">::</span><span class="ruby-constant">RakeBuilder</span>
              <span class="ruby-keyword">else</span>
                <span class="ruby-identifier">results</span> = [<span class="ruby-node">&quot;No builder for extension '#{extension}'&quot;</span>]
                <span class="ruby-keyword">nil</span>
              <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">begin</span>
      <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-ivar">@gem_dir</span>, <span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-identifier">extension</span>))
      <span class="ruby-identifier">results</span> = <span class="ruby-identifier">builder</span>.<span class="ruby-identifier">build</span>(<span class="ruby-identifier">extension</span>, <span class="ruby-ivar">@gem_dir</span>, <span class="ruby-identifier">dest_path</span>, <span class="ruby-identifier">results</span>)

      <span class="ruby-identifier">say</span> <span class="ruby-identifier">results</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;\n&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">configuration</span>.<span class="ruby-identifier">really_verbose</span>

    <span class="ruby-keyword">rescue</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ex</span>
      <span class="ruby-identifier">results</span> = <span class="ruby-identifier">results</span>.<span class="ruby-identifier">join</span> <span class="ruby-string">&quot;\n&quot;</span>

      <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-string">'gem_make.out'</span>, <span class="ruby-string">'wb'</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">results</span> }

      <span class="ruby-identifier">message</span> = <span class="ruby-string">ERROR: Failed to build gem native extension.#{results}Gem files will remain installed in #{@gem_dir} for inspection.Results logged to #{File.join(Dir.pwd, 'gem_make.out')}</span>

      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ExtensionBuildError</span>, <span class="ruby-identifier">message</span>
    <span class="ruby-keyword">ensure</span>
      <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span> <span class="ruby-identifier">start_dir</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code>
</pre> 
            </div><!-- build_extensions-source -->
            
          </div>

          

          
        </div><!-- build_extensions-method -->

      
        <div id="ensure_dependency-method" class="method-detail ">
          <a name="method-i-ensure_dependency"></a>

          
          <div class="method-heading">
            <span class="method-name">ensure_dependency</span><span
              class="method-args">(spec, dependency)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Ensure that the dependency is satisfied by the current installation of gem.
If it is not an exception is raised.</p>
<table class="rdoc-list"><tr><td class="rdoc-term"><p>spec       </p></td>
<td>
<p><a href="Specification.html">Gem::Specification</a></p>
</td></tr><tr><td class="rdoc-term"><p>dependency </p></td>
<td>
<p><a href="Dependency.html">Gem::Dependency</a></p>
</td></tr></table>
            

            
            <div class="method-source-code" id="ensure_dependency-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
<span class="ruby-comment"># File rubygems/installer.rb, line 231</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">ensure_dependency</span>(<span class="ruby-identifier">spec</span>, <span class="ruby-identifier">dependency</span>)
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">installation_satisfies_dependency?</span> <span class="ruby-identifier">dependency</span> <span class="ruby-keyword">then</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">InstallError</span>, <span class="ruby-node">&quot;#{spec.name} requires #{dependency}&quot;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></code>
</pre> 
            </div><!-- ensure_dependency-source -->
            
          </div>

          

          
        </div><!-- ensure_dependency-method -->

      
        <div id="extract_files-method" class="method-detail ">
          <a name="method-i-extract_files"></a>

          
          <div class="method-heading">
            <span class="method-name">extract_files</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Reads the file index and extracts each file into the gem directory.</p>

<p>Ensures that files can’t be installed outside the gem directory.</p>
            

            
            <div class="method-source-code" id="extract_files-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
<span class="ruby-comment"># File rubygems/installer.rb, line 495</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">extract_files</span>
  <span class="ruby-ivar">@gem_dir</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span> <span class="ruby-ivar">@gem_dir</span>

  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;format required to extract from&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@format</span>.<span class="ruby-identifier">nil?</span>

  <span class="ruby-ivar">@format</span>.<span class="ruby-identifier">file_entries</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">entry</span>, <span class="ruby-identifier">file_data</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">path</span> = <span class="ruby-identifier">entry</span>[<span class="ruby-string">'path'</span>].<span class="ruby-identifier">untaint</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">path</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/\A\//</span> <span class="ruby-keyword">then</span> <span class="ruby-comment"># for extra sanity</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">InstallError</span>,
            <span class="ruby-node">&quot;attempt to install file into #{entry['path'].inspect}&quot;</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-ivar">@gem_dir</span>, <span class="ruby-identifier">path</span>)

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">path</span> <span class="ruby-operator">!~</span> <span class="ruby-node">/\A#{Regexp.escape @gem_dir}/</span> <span class="ruby-keyword">then</span>
      <span class="ruby-identifier">msg</span> = <span class="ruby-string">&quot;attempt to install file into %p under %p&quot;</span> <span class="ruby-operator">%</span>
              [<span class="ruby-identifier">entry</span>[<span class="ruby-string">'path'</span>], <span class="ruby-ivar">@gem_dir</span>]
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">InstallError</span>, <span class="ruby-identifier">msg</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rm_rf</span>(<span class="ruby-identifier">path</span>) <span class="ruby-keyword">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-identifier">path</span>)
    <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir_p</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-identifier">path</span>)

    <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">path</span>, <span class="ruby-string">&quot;wb&quot;</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">out</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">out</span>.<span class="ruby-identifier">write</span> <span class="ruby-identifier">file_data</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">chmod</span> <span class="ruby-identifier">entry</span>[<span class="ruby-string">'mode'</span>], <span class="ruby-identifier">path</span>

    <span class="ruby-identifier">say</span> <span class="ruby-identifier">path</span> <span class="ruby-keyword">if</span> <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">configuration</span>.<span class="ruby-identifier">really_verbose</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code>
</pre> 
            </div><!-- extract_files-source -->
            
          </div>

          

          
        </div><!-- extract_files-method -->

      
        <div id="formatted_program_filename-method" class="method-detail ">
          <a name="method-i-formatted_program_filename"></a>

          
          <div class="method-heading">
            <span class="method-name">formatted_program_filename</span><span
              class="method-args">(filename)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Prefix and suffix the program filename the same as ruby.</p>
            

            
            <div class="method-source-code" id="formatted_program_filename-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
<span class="ruby-comment"># File rubygems/installer.rb, line 532</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">formatted_program_filename</span>(<span class="ruby-identifier">filename</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@format_executable</span> <span class="ruby-keyword">then</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">exec_format</span> <span class="ruby-operator">%</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">filename</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">filename</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code>
</pre> 
            </div><!-- formatted_program_filename-source -->
            
          </div>

          

          
        </div><!-- formatted_program_filename-method -->

      
        <div id="generate_bin-method" class="method-detail ">
          <a name="method-i-generate_bin"></a>

          
          <div class="method-heading">
            <span class="method-name">generate_bin</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="generate_bin-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
<span class="ruby-comment"># File rubygems/installer.rb, line 286</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">generate_bin</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@spec</span>.<span class="ruby-identifier">executables</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-keyword">or</span> <span class="ruby-ivar">@spec</span>.<span class="ruby-identifier">executables</span>.<span class="ruby-identifier">empty?</span>

  <span class="ruby-comment"># If the user has asked for the gem to be installed in a directory that is</span>
  <span class="ruby-comment"># the system gem directory, then use the system bin directory, else create</span>
  <span class="ruby-comment"># (or use) a new bin dir under the gem_home.</span>
  <span class="ruby-identifier">bindir</span> = <span class="ruby-ivar">@bin_dir</span> <span class="ruby-operator">?</span> <span class="ruby-ivar">@bin_dir</span> <span class="ruby-operator">:</span> <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">bindir</span>(<span class="ruby-ivar">@gem_home</span>)

  <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">mkdir</span> <span class="ruby-identifier">bindir</span> <span class="ruby-keyword">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span> <span class="ruby-identifier">bindir</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">FilePermissionError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">bindir</span>) <span class="ruby-keyword">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">writable?</span> <span class="ruby-identifier">bindir</span>

  <span class="ruby-ivar">@spec</span>.<span class="ruby-identifier">executables</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">filename</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">filename</span>.<span class="ruby-identifier">untaint</span>
    <span class="ruby-identifier">bin_path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span> <span class="ruby-node">&quot;#{@spec.bindir}/#{filename}&quot;</span>, <span class="ruby-ivar">@gem_dir</span>
    <span class="ruby-identifier">mode</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">stat</span>(<span class="ruby-identifier">bin_path</span>).<span class="ruby-identifier">mode</span> <span class="ruby-operator">|</span> <span class="ruby-value">0111</span>
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">chmod</span> <span class="ruby-identifier">mode</span>, <span class="ruby-identifier">bin_path</span>

    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@wrappers</span> <span class="ruby-keyword">then</span>
      <span class="ruby-identifier">generate_bin_script</span> <span class="ruby-identifier">filename</span>, <span class="ruby-identifier">bindir</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">generate_bin_symlink</span> <span class="ruby-identifier">filename</span>, <span class="ruby-identifier">bindir</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code>
</pre> 
            </div><!-- generate_bin-source -->
            
          </div>

          

          
        </div><!-- generate_bin-method -->

      
        <div id="generate_bin_script-method" class="method-detail ">
          <a name="method-i-generate_bin_script"></a>

          
          <div class="method-heading">
            <span class="method-name">generate_bin_script</span><span
              class="method-args">(filename, bindir)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Creates the scripts to run the applications in the gem.</p>
            

            
            <div class="method-source-code" id="generate_bin_script-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
<span class="ruby-comment"># File rubygems/installer.rb, line 318</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">generate_bin_script</span>(<span class="ruby-identifier">filename</span>, <span class="ruby-identifier">bindir</span>)
  <span class="ruby-identifier">bin_script_path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span> <span class="ruby-identifier">bindir</span>, <span class="ruby-identifier">formatted_program_filename</span>(<span class="ruby-identifier">filename</span>)

  <span class="ruby-identifier">exec_path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span> <span class="ruby-ivar">@gem_dir</span>, <span class="ruby-ivar">@spec</span>.<span class="ruby-identifier">bindir</span>, <span class="ruby-identifier">filename</span>

  <span class="ruby-comment"># HACK some gems don't have #! in their executables, restore 2008/06</span>
  <span class="ruby-comment">#if File.read(exec_path, 2) == '#!' then</span>
    <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rm_f</span> <span class="ruby-identifier">bin_script_path</span> <span class="ruby-comment"># prior install may have been --no-wrappers</span>

    <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span> <span class="ruby-identifier">bin_script_path</span>, <span class="ruby-string">'w'</span>, <span class="ruby-value">0755</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">file</span>.<span class="ruby-identifier">print</span> <span class="ruby-identifier">app_script_text</span>(<span class="ruby-identifier">filename</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">say</span> <span class="ruby-identifier">bin_script_path</span> <span class="ruby-keyword">if</span> <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">configuration</span>.<span class="ruby-identifier">really_verbose</span>

    <span class="ruby-identifier">generate_windows_script</span> <span class="ruby-identifier">filename</span>, <span class="ruby-identifier">bindir</span>
  <span class="ruby-comment">#else</span>
  <span class="ruby-comment">#  FileUtils.rm_f bin_script_path</span>
  <span class="ruby-comment">#  FileUtils.cp exec_path, bin_script_path,</span>
  <span class="ruby-comment">#               :verbose =&gt; Gem.configuration.really_verbose</span>
  <span class="ruby-comment">#end</span>
<span class="ruby-keyword">end</span></code>
</pre> 
            </div><!-- generate_bin_script-source -->
            
          </div>

          

          
        </div><!-- generate_bin_script-method -->

      
        <div id="generate_bin_symlink-method" class="method-detail ">
          <a name="method-i-generate_bin_symlink"></a>

          
          <div class="method-heading">
            <span class="method-name">generate_bin_symlink</span><span
              class="method-args">(filename, bindir)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Creates the symlinks to run the applications in the gem.  Moves the symlink
if the gem being installed has a newer version.</p>
            

            
            <div class="method-source-code" id="generate_bin_symlink-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
<span class="ruby-comment"># File rubygems/installer.rb, line 345</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">generate_bin_symlink</span>(<span class="ruby-identifier">filename</span>, <span class="ruby-identifier">bindir</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">win_platform?</span> <span class="ruby-keyword">then</span>
    <span class="ruby-identifier">alert_warning</span> <span class="ruby-string">&quot;Unable to use symlinks on Windows, installing wrapper&quot;</span>
    <span class="ruby-identifier">generate_bin_script</span> <span class="ruby-identifier">filename</span>, <span class="ruby-identifier">bindir</span>
    <span class="ruby-keyword">return</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">src</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span> <span class="ruby-ivar">@gem_dir</span>, <span class="ruby-string">'bin'</span>, <span class="ruby-identifier">filename</span>
  <span class="ruby-identifier">dst</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span> <span class="ruby-identifier">bindir</span>, <span class="ruby-identifier">formatted_program_filename</span>(<span class="ruby-identifier">filename</span>)

  <span class="ruby-keyword">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span> <span class="ruby-identifier">dst</span> <span class="ruby-keyword">then</span>
    <span class="ruby-keyword">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">symlink?</span> <span class="ruby-identifier">dst</span> <span class="ruby-keyword">then</span>
      <span class="ruby-identifier">link</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">readlink</span>(<span class="ruby-identifier">dst</span>).<span class="ruby-identifier">split</span> <span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">SEPARATOR</span>
      <span class="ruby-identifier">cur_version</span> = <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Version</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">link</span>[<span class="ruby-value">-3</span>].<span class="ruby-identifier">sub</span>(<span class="ruby-regexp">/^.*-/</span>, <span class="ruby-string">''</span>))
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@spec</span>.<span class="ruby-identifier">version</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">cur_version</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">unlink</span> <span class="ruby-identifier">dst</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">symlink</span> <span class="ruby-identifier">src</span>, <span class="ruby-identifier">dst</span>, <span class="ruby-value">:verbose</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">configuration</span>.<span class="ruby-identifier">really_verbose</span>
<span class="ruby-keyword">end</span></code>
</pre> 
            </div><!-- generate_bin_symlink-source -->
            
          </div>

          

          
        </div><!-- generate_bin_symlink-method -->

      
        <div id="generate_windows_script-method" class="method-detail ">
          <a name="method-i-generate_windows_script"></a>

          
          <div class="method-heading">
            <span class="method-name">generate_windows_script</span><span
              class="method-args">(filename, bindir)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Creates windows .bat files for easy running of commands</p>
            

            
            <div class="method-source-code" id="generate_windows_script-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
<span class="ruby-comment"># File rubygems/installer.rb, line 274</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">generate_windows_script</span>(<span class="ruby-identifier">filename</span>, <span class="ruby-identifier">bindir</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">win_platform?</span> <span class="ruby-keyword">then</span>
    <span class="ruby-identifier">script_name</span> = <span class="ruby-identifier">filename</span> <span class="ruby-operator">+</span> <span class="ruby-string">&quot;.bat&quot;</span>
    <span class="ruby-identifier">script_path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span> <span class="ruby-identifier">bindir</span>, <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">script_name</span>)
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span> <span class="ruby-identifier">script_path</span>, <span class="ruby-string">'w'</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">file</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">windows_stub_script</span>(<span class="ruby-identifier">bindir</span>, <span class="ruby-identifier">filename</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">say</span> <span class="ruby-identifier">script_path</span> <span class="ruby-keyword">if</span> <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">configuration</span>.<span class="ruby-identifier">really_verbose</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code>
</pre> 
            </div><!-- generate_windows_script-source -->
            
          </div>

          

          
        </div><!-- generate_windows_script-method -->

      
        <div id="install-method" class="method-detail ">
          <a name="method-i-install"></a>

          
          <div class="method-heading">
            <span class="method-name">install</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Installs the gem and returns a loaded <a
href="Specification.html">Gem::Specification</a> for the installed gem.</p>

<p>The gem will be installed with the following structure:</p>

<pre>@gem_home/
  cache/&lt;gem-version&gt;.gem #=&gt; a cached copy of the installed gem
  gems/&lt;gem-version&gt;/... #=&gt; extracted files
  specifications/&lt;gem-version&gt;.gemspec #=&gt; the Gem::Specification</pre>
            

            
            <div class="method-source-code" id="install-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
<span class="ruby-comment"># File rubygems/installer.rb, line 155</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">install</span>
  <span class="ruby-comment"># If we're forcing the install then disable security unless the security</span>
  <span class="ruby-comment"># policy says that we only install singed gems.</span>
  <span class="ruby-ivar">@security_policy</span> = <span class="ruby-keyword">nil</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@force</span> <span class="ruby-keyword">and</span> <span class="ruby-ivar">@security_policy</span> <span class="ruby-keyword">and</span>
                            <span class="ruby-keyword">not</span> <span class="ruby-ivar">@security_policy</span>.<span class="ruby-identifier">only_signed</span>

  <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@force</span> <span class="ruby-keyword">then</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">rrv</span> = <span class="ruby-ivar">@spec</span>.<span class="ruby-identifier">required_ruby_version</span> <span class="ruby-keyword">then</span>
      <span class="ruby-keyword">unless</span> <span class="ruby-identifier">rrv</span>.<span class="ruby-identifier">satisfied_by?</span> <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">ruby_version</span> <span class="ruby-keyword">then</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">InstallError</span>, <span class="ruby-node">&quot;#{@spec.name} requires Ruby version #{rrv}.&quot;</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">rrgv</span> = <span class="ruby-ivar">@spec</span>.<span class="ruby-identifier">required_rubygems_version</span> <span class="ruby-keyword">then</span>
      <span class="ruby-keyword">unless</span> <span class="ruby-identifier">rrgv</span>.<span class="ruby-identifier">satisfied_by?</span> <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Version</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">VERSION</span>) <span class="ruby-keyword">then</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">InstallError</span>,
          <span class="ruby-node">&quot;#{@spec.name} requires RubyGems version #{rrgv}. &quot;</span> <span class="ruby-operator">+</span>
          <span class="ruby-string">&quot;Try 'gem update --system' to update RubyGems itself.&quot;</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@ignore_dependencies</span> <span class="ruby-keyword">then</span>
      <span class="ruby-identifier">deps</span> = <span class="ruby-ivar">@spec</span>.<span class="ruby-identifier">runtime_dependencies</span>
      <span class="ruby-identifier">deps</span> <span class="ruby-operator">|=</span> <span class="ruby-ivar">@spec</span>.<span class="ruby-identifier">development_dependencies</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@development</span>

      <span class="ruby-identifier">deps</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dep_gem</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">ensure_dependency</span> <span class="ruby-ivar">@spec</span>, <span class="ruby-identifier">dep_gem</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">pre_install_hooks</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">hook</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">hook</span>.<span class="ruby-identifier">call</span> <span class="ruby-keyword">self</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir_p</span> <span class="ruby-ivar">@gem_home</span> <span class="ruby-keyword">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span> <span class="ruby-ivar">@gem_home</span>

  <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">ensure_gem_subdirectories</span> <span class="ruby-ivar">@gem_home</span>

  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir_p</span> <span class="ruby-ivar">@gem_dir</span>

  <span class="ruby-identifier">extract_files</span>
  <span class="ruby-identifier">generate_bin</span>
  <span class="ruby-identifier">build_extensions</span>
  <span class="ruby-identifier">write_spec</span>

  <span class="ruby-identifier">write_require_paths_file_if_needed</span>

  <span class="ruby-comment"># HACK remove?  Isn't this done in multiple places?</span>
  <span class="ruby-identifier">cached_gem</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span> <span class="ruby-ivar">@gem_home</span>, <span class="ruby-string">&quot;cache&quot;</span>, <span class="ruby-ivar">@gem</span>.<span class="ruby-identifier">split</span>(<span class="ruby-regexp">/\//</span>).<span class="ruby-identifier">pop</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span> <span class="ruby-identifier">cached_gem</span> <span class="ruby-keyword">then</span>
    <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp</span> <span class="ruby-ivar">@gem</span>, <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-ivar">@gem_home</span>, <span class="ruby-string">&quot;cache&quot;</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">say</span> <span class="ruby-ivar">@spec</span>.<span class="ruby-identifier">post_install_message</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@spec</span>.<span class="ruby-identifier">post_install_message</span>.<span class="ruby-identifier">nil?</span>

  <span class="ruby-ivar">@spec</span>.<span class="ruby-identifier">loaded_from</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-ivar">@gem_home</span>, <span class="ruby-string">'specifications'</span>, <span class="ruby-ivar">@spec</span>.<span class="ruby-identifier">spec_name</span>)

  <span class="ruby-ivar">@source_index</span>.<span class="ruby-identifier">add_spec</span> <span class="ruby-ivar">@spec</span>

  <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">post_install_hooks</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">hook</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">hook</span>.<span class="ruby-identifier">call</span> <span class="ruby-keyword">self</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@spec</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">Zlib</span><span class="ruby-operator">::</span><span class="ruby-constant">GzipFile</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">InstallError</span>, <span class="ruby-node">&quot;gzip error installing #{@gem}&quot;</span>
<span class="ruby-keyword">end</span></code>
</pre> 
            </div><!-- install-source -->
            
          </div>

          

          
        </div><!-- install-method -->

      
        <div id="installation_satisfies_dependency-3F-method" class="method-detail ">
          <a name="method-i-installation_satisfies_dependency-3F"></a>

          
          <div class="method-heading">
            <span class="method-name">installation_satisfies_dependency?</span><span
              class="method-args">(dependency)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>True if the gems in the source_index satisfy <tt>dependency</tt>.</p>
            

            
            <div class="method-source-code" id="installation_satisfies_dependency-3F-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
<span class="ruby-comment"># File rubygems/installer.rb, line 242</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">installation_satisfies_dependency?</span>(<span class="ruby-identifier">dependency</span>)
  <span class="ruby-ivar">@source_index</span>.<span class="ruby-identifier">find_name</span>(<span class="ruby-identifier">dependency</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">dependency</span>.<span class="ruby-identifier">requirement</span>).<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
<span class="ruby-keyword">end</span></code>
</pre> 
            </div><!-- installation_satisfies_dependency-3F-source -->
            
          </div>

          

          
        </div><!-- installation_satisfies_dependency-3F-method -->

      
        <div id="shebang-method" class="method-detail ">
          <a name="method-i-shebang"></a>

          
          <div class="method-heading">
            <span class="method-name">shebang</span><span
              class="method-args">(bin_file_name)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Generates a #! line for <tt>bin_file_name</tt>‘s wrapper copying arguments
if necessary.</p>
            

            
            <div class="method-source-code" id="shebang-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
<span class="ruby-comment"># File rubygems/installer.rb, line 371</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">shebang</span>(<span class="ruby-identifier">bin_file_name</span>)
  <span class="ruby-identifier">ruby_name</span> = <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">ConfigMap</span>[<span class="ruby-value">:ruby_install_name</span>] <span class="ruby-keyword">if</span> <span class="ruby-ivar">@env_shebang</span>
  <span class="ruby-identifier">path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span> <span class="ruby-ivar">@gem_dir</span>, <span class="ruby-ivar">@spec</span>.<span class="ruby-identifier">bindir</span>, <span class="ruby-identifier">bin_file_name</span>
  <span class="ruby-identifier">first_line</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">path</span>, <span class="ruby-string">&quot;rb&quot;</span>) {<span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span> <span class="ruby-identifier">file</span>.<span class="ruby-identifier">gets</span>}

  <span class="ruby-keyword">if</span> <span class="ruby-node">/\A#!/</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">first_line</span> <span class="ruby-keyword">then</span>
    <span class="ruby-comment"># Preserve extra words on shebang line, like &quot;-w&quot;.  Thanks RPA.</span>
    <span class="ruby-identifier">shebang</span> = <span class="ruby-identifier">first_line</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp">/\A\#!.*?ruby\S*(?=(\s+\S+))/</span>, <span class="ruby-node">&quot;#!#{Gem.ruby}&quot;</span>)
    <span class="ruby-identifier">opts</span> = <span class="ruby-node">$1</span>
    <span class="ruby-identifier">shebang</span>.<span class="ruby-identifier">strip!</span> <span class="ruby-comment"># Avoid nasty ^M issues.</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-keyword">not</span> <span class="ruby-identifier">ruby_name</span> <span class="ruby-keyword">then</span>
    <span class="ruby-node">&quot;#!#{Gem.ruby}#{opts}&quot;</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">opts</span> <span class="ruby-keyword">then</span>
    <span class="ruby-node">&quot;#!/bin/sh\n'exec' #{ruby_name.dump} '-x' \&quot;$0\&quot; \&quot;$@\&quot;\n#{shebang}&quot;</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-comment"># Create a plain shebang line.</span>
    <span class="ruby-ivar">@env_path</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">ENV_PATHS</span>.<span class="ruby-identifier">find</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">env_path</span><span class="ruby-operator">|</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">executable?</span> <span class="ruby-identifier">env_path</span> }
    <span class="ruby-node">&quot;#!#{@env_path} #{ruby_name}&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code>
</pre> 
            </div><!-- shebang-source -->
            
          </div>

          

          
        </div><!-- shebang-method -->

      
        <div id="unpack-method" class="method-detail ">
          <a name="method-i-unpack"></a>

          
          <div class="method-heading">
            <span class="method-name">unpack</span><span
              class="method-args">(directory)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Unpacks the gem into the given directory.</p>
            

            
            <div class="method-source-code" id="unpack-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
<span class="ruby-comment"># File rubygems/installer.rb, line 249</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">unpack</span>(<span class="ruby-identifier">directory</span>)
  <span class="ruby-ivar">@gem_dir</span> = <span class="ruby-identifier">directory</span>
  <span class="ruby-ivar">@format</span> = <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Format</span>.<span class="ruby-identifier">from_file_by_path</span> <span class="ruby-ivar">@gem</span>, <span class="ruby-ivar">@security_policy</span>
  <span class="ruby-identifier">extract_files</span>
<span class="ruby-keyword">end</span></code>
</pre> 
            </div><!-- unpack-source -->
            
          </div>

          

          
        </div><!-- unpack-method -->

      
        <div id="windows_stub_script-method" class="method-detail ">
          <a name="method-i-windows_stub_script"></a>

          
          <div class="method-heading">
            <span class="method-name">windows_stub_script</span><span
              class="method-args">(bindir, bin_file_name)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>return the stub script text used to launch the true ruby script</p>
            

            
            <div class="method-source-code" id="windows_stub_script-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
<span class="ruby-comment"># File rubygems/installer.rb, line 424</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">windows_stub_script</span>(<span class="ruby-identifier">bindir</span>, <span class="ruby-identifier">bin_file_name</span>)
  <span class="ruby-string">@ECHO OFFIF NOT &quot;%~f0&quot; == &quot;~f0&quot; GOTO :WinNT@&quot;#{File.basename(Gem.ruby).chomp('&quot;')}&quot; &quot;#{File.join(bindir, bin_file_name)}&quot; %1 %2 %3 %4 %5 %6 %7 %8 %9GOTO :EOF:WinNT@&quot;#{File.basename(Gem.ruby).chomp('&quot;')}&quot; &quot;%~dpn0&quot; %*</span>
<span class="ruby-keyword">end</span></code>
</pre> 
            </div><!-- windows_stub_script-source -->
            
          </div>

          

          
        </div><!-- windows_stub_script-method -->

      
        <div id="write_spec-method" class="method-detail ">
          <a name="method-i-write_spec"></a>

          
          <div class="method-heading">
            <span class="method-name">write_spec</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Writes the .gemspec specification (in Ruby) to the gem home’s
specifications directory.</p>
            

            
            <div class="method-source-code" id="write_spec-source">
              <pre>
              <code class='cpp'> <!-- How can we tell the language? Can we grab the file extension of the parsed source file? --> 
<span class="ruby-comment"># File rubygems/installer.rb, line 259</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">write_spec</span>
  <span class="ruby-identifier">rubycode</span> = <span class="ruby-ivar">@spec</span>.<span class="ruby-identifier">to_ruby</span>

  <span class="ruby-identifier">file_name</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span> <span class="ruby-ivar">@gem_home</span>, <span class="ruby-string">'specifications'</span>, <span class="ruby-ivar">@spec</span>.<span class="ruby-identifier">spec_name</span>

  <span class="ruby-identifier">file_name</span>.<span class="ruby-identifier">untaint</span>

  <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">file_name</span>, <span class="ruby-string">&quot;w&quot;</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">file</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">rubycode</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code>
</pre> 
            </div><!-- write_spec-source -->
            
          </div>

          

          
        </div><!-- write_spec-method -->

      
      </div><!-- public-instance-method-details -->
    
    </div><!-- 5Buntitled-5D -->
  

  </div><!-- documentation -->
<div id="disqus_thread" style='display:none'></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    // var disqus_shortname = 'rubydocbeta'; // required 
    var disqus_shortname = 'ruby-doc'; // required 
    
    var disqus_developer = true; // DEBUGGERY
    


    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink" style='display:none'>blog comments powered by <span class="logo-disqus">Disqus</span></a>

<div class='grids wrapper' id="footer">
  <p><small>This page was generated for Ruby 1.9.2</small></p> 
  
   <p> <a href="http://www.ruby-doc.org">Ruby-doc.org</a> is a service of <a href="http://www.jamesbritt.com">James Britt</a> and <a href="http://www.neurogami.com">Neurogami</a>, an <a href="http://www.neurogami.com"> avant garage application development company in Scottsdale, AZ</a>.  </p>
 
    <p><small>Generated with the <a href="http://neurogami.com/code/">Rubydoc Rdoc Generator</a> 0.9.4</small>.</p>
  </div>

</div>

<script type="text/javascript">
var _uacct = "UA-335317-2";
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try{ 
var pageTracker = _gat._getTracker(_uacct);
pageTracker._trackPageview();
} catch(err) {} 
</script>
</body>
</html>

