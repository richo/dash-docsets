<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Return hash id for given object</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.spl-classes.html">spl_classes</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="spl.files.html">File Handling</a></div>
 <div class="up"><a href="ref.spl.html">SPL Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.spl-object-hash" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">spl_object_hash</h1>
  <p class="verinfo">(PHP 5 &gt;= 5.2.0)</p><p class="refpurpose"><span class="refname">spl_object_hash</span> &mdash; <span class="dc-title">
   Return hash id for given object
  </span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.spl-object-hash-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">string</span> <span class="methodname"><b>spl_object_hash</b></span>
    ( <span class="methodparam"><span class="type">object</span> <tt class="parameter">$obj</tt></span>
   )</div>

  <p class="para rdfs-comment">
   This function returns a unique identifier for the object. This id can be
   used as a hash key for storing objects or for identifying an object.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.spl-object-hash-parameters">
   <h3 class="title">Parameters</h3>
   <p class="para">
    <dl>

     <dt>

      <span class="term"><i><tt class="parameter">object</tt></i></span>
      <dd>

       <p class="para">
        Any object. 
       </p>
      </dd>

     </dt>

    </dl>

   </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.spl-object-hash-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   A string that is unique for each currently existing object and is always
   the same for each object.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.spl-object-hash-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   <div class="example" id="example-3561">
    <p><b>Example #1 A <span class="function"><b>spl_object_hash()</b></span> example</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$id&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">spl_object_hash</span><span style="color: #007700">(</span><span style="color: #0000BB">$object</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$storage</span><span style="color: #007700">[</span><span style="color: #0000BB">$id</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">$object</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.spl-object-hash-notes">
  <h3 class="title">Notes</h3>
  <blockquote class="note"><p><b class="note">Note</b>: 
   <p class="para">
    When an object is destroyed, its hash may be reused for other objects.
   </p>
  </p></blockquote>
 </div>
 
</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="95666""></a>
  <div class="note">
   <strong class="user">daan dot timmer at gmail dot com</strong>
   <a href="#95666" class="date">14-Jan-2010 07:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To add to markus dot albe at mailinator dot com comment.<br />
<br />
The unique identifiers of destroyed objects can and will be reused.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">Foo</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; private static </span><span class="default">$test </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__construct</span><span class="keyword">(){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">$test</span><span class="keyword">++;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">$foo1 </span><span class="keyword">= new </span><span class="default">Foo</span><span class="keyword">();<br />
</span><span class="default">$foo2 </span><span class="keyword">= new </span><span class="default">Foo</span><span class="keyword">();<br />
</span><span class="default">$foo3 </span><span class="keyword">= new </span><span class="default">Foo</span><span class="keyword">();<br />
<br />
</span><span class="comment">//new unique identifier<br />
</span><span class="keyword">echo </span><span class="default">spl_object_hash</span><span class="keyword">(</span><span class="default">$foo1</span><span class="keyword">).</span><span class="string">"&lt;br /&gt;\n"</span><span class="keyword">;<br />
</span><span class="comment">//new unique identifier<br />
</span><span class="keyword">echo </span><span class="default">spl_object_hash</span><span class="keyword">(</span><span class="default">$foo2</span><span class="keyword">).</span><span class="string">"&lt;br /&gt;\n"</span><span class="keyword">;<br />
</span><span class="comment">//new unique identifier<br />
</span><span class="keyword">echo </span><span class="default">spl_object_hash</span><span class="keyword">(</span><span class="default">$foo3</span><span class="keyword">).</span><span class="string">"&lt;br /&gt;\n"</span><span class="keyword">;<br />
<br />
</span><span class="default">$foo1 </span><span class="keyword">= new </span><span class="default">Foo</span><span class="keyword">();<br />
</span><span class="comment">//new unique identifier because, when we created Foo, foo1 still existed<br />
</span><span class="keyword">echo </span><span class="default">spl_object_hash</span><span class="keyword">(</span><span class="default">$foo1</span><span class="keyword">).</span><span class="string">"&lt;br /&gt;\n"</span><span class="keyword">;<br />
<br />
</span><span class="default">$foo1 </span><span class="keyword">= new </span><span class="default">Foo</span><span class="keyword">();<br />
</span><span class="comment">//same identifier as the first $foo1 because it was destroyed,<br />
//thus released the identifier<br />
</span><span class="keyword">echo </span><span class="default">spl_object_hash</span><span class="keyword">(</span><span class="default">$foo1</span><span class="keyword">).</span><span class="string">"&lt;br /&gt;\n"</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
This will output something like:<br />
000000007ec3fcb5000000003f984510<br />
000000007ec3fcb6000000003f984510<br />
000000007ec3fcb7000000003f984510<br />
000000007ec3fcb0000000003f984510<br />
000000007ec3fcb5000000003f984510</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94647""></a>
  <div class="note">
   <strong class="user">markus dot albe at mailinator dot com</strong>
   <a href="#94647" class="date">16-Nov-2009 11:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It seems that when switching scopes, the last one is repeated... Not necessarily a bug, but could create some problems/unexpected behavior<br />
<br />
<span class="default">&lt;?php<br />
<br />
$var </span><span class="keyword">= new </span><span class="default">stdClass</span><span class="keyword">();<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">spl_object_hash</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">), </span><span class="default">spl_object_hash</span><span class="keyword">(new </span><span class="default">stdClass</span><span class="keyword">()));<br />
<br />
</span><span class="default">hola</span><span class="keyword">();<br />
<br />
function </span><span class="default">hola</span><span class="keyword">() {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$var </span><span class="keyword">= new </span><span class="default">stdClass</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">spl_object_hash</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">), </span><span class="default">spl_object_hash</span><span class="keyword">(new </span><span class="default">stdClass</span><span class="keyword">()));<br />
}<br />
<br />
</span><span class="comment">/* will output something like<br />
string(32) "f4c9a9e4c63bb94a344b09fa90b57d5c"<br />
string(32) "7b6e43337944619e217ded14a7a78d35"<br />
string(32) "7b6e43337944619e217ded14a7a78d35"<br />
string(32) "ebd1bf725146297194bb011ef5e9c4d5"<br />
*/<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94060""></a>
  <div class="note">
   <strong class="user">test user</strong>
   <a href="#94060" class="date">14-Oct-2009 05:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It is possible to mark objects with unique identity to establish required functionality:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">if (!</span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">'spl_object_hash'</span><span class="keyword">)) {<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">spl_object_hash</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="default">__FUNCTION__ </span><span class="keyword">. </span><span class="string">"() expects parameter 1 to be object"</span><span class="keyword">, </span><span class="default">E_USER_WARNING</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">null</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!isset(</span><span class="default">$object</span><span class="keyword">-&gt;</span><span class="default">__oid__</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$object</span><span class="keyword">-&gt;</span><span class="default">__oid__ </span><span class="keyword">= </span><span class="default">uniqid</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$object</span><span class="keyword">-&gt;</span><span class="default">__oid__</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91164""></a>
  <div class="note">
   <strong class="user">SlappyTheFish</strong>
   <a href="#91164" class="date">28-May-2009 03:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
With regards to the previous post, I'm not entirely sure that easy does do it.&nbsp;&nbsp; Consider the following code:<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">class </span><span class="default">Testy<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public </span><span class="default">$something</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public function </span><span class="default">__toString</span><span class="keyword">()<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">serialize</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$objOne </span><span class="keyword">= new </span><span class="default">Testy</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$objOne</span><span class="keyword">-&gt;</span><span class="default">something </span><span class="keyword">= </span><span class="string">"hello"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$objTwo </span><span class="keyword">= new </span><span class="default">Testy</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$objTwo</span><span class="keyword">-&gt;</span><span class="default">something </span><span class="keyword">= </span><span class="string">"hello"</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">printf</span><span class="keyword">(</span><span class="string">"objOne:\n"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">printf</span><span class="keyword">(</span><span class="string">"Bad way: %s\n"</span><span class="keyword">, </span><span class="default">md5</span><span class="keyword">((string)</span><span class="default">$objOne</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">printf</span><span class="keyword">(</span><span class="string">"SPL Way: %s\n"</span><span class="keyword">, </span><span class="default">spl_object_hash</span><span class="keyword">(</span><span class="default">$objOne</span><span class="keyword">));&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">printf</span><span class="keyword">(</span><span class="string">"objTwo:\n"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">printf</span><span class="keyword">(</span><span class="string">"Bad way: %s\n"</span><span class="keyword">, </span><span class="default">md5</span><span class="keyword">((string)</span><span class="default">$objTwo</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">printf</span><span class="keyword">(</span><span class="string">"SPL Way: %s\n"</span><span class="keyword">, </span><span class="default">spl_object_hash</span><span class="keyword">(</span><span class="default">$objTwo</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
The spl_object_hash function returns a hash based on the particular object, not the content.&nbsp;&nbsp; The spl hash will always be the same for a given object, regardless of content.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90296""></a>
  <div class="note">
   <strong class="user">andi.rein(AT)gmx de</strong>
   <a href="#90296" class="date">15-Apr-2009 04:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Easy does it<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">if (!</span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">'spl_object_hash'</span><span class="keyword">)) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * Returns the hash of the unique identifier for the object.<br />
&nbsp;&nbsp; &nbsp; *<br />
&nbsp;&nbsp; &nbsp; * @param object $object<br />
&nbsp;&nbsp; &nbsp; * @author Andreas Rein<br />
&nbsp;&nbsp; &nbsp; * @return string<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">spl_object_hash</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">md5</span><span class="keyword">((string)</span><span class="default">$object</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="default">__FUNCTION__ </span><span class="keyword">. </span><span class="string">"() expects parameter 1 to be object"</span><span class="keyword">, </span><span class="default">E_USER_WARNING</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">null</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87422""></a>
  <div class="note">
   <strong class="user">Rafael M. Salvioni</strong>
   <a href="#87422" class="date">04-Dec-2008 11:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The follow function is a implementation of the PHPå«s function spl_object_hash(), unavailable in versions less 5.2.0.<br />
<br />
But, the algorithm of this function is different of the original PHPå«s function.<br />
<br />
(Sorry... my english is very bad...)<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">if (!</span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">'spl_object_hash'</span><span class="keyword">)) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * Returns the hash of the unique identifier for the object.<br />
&nbsp;&nbsp; &nbsp; *<br />
&nbsp;&nbsp; &nbsp; * @param object $object Object<br />
&nbsp;&nbsp; &nbsp; * @author Rafael M. Salvioni<br />
&nbsp;&nbsp; &nbsp; * @return string<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">spl_object_hash</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ob_start</span><span class="keyword">(); </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">); </span><span class="default">$dump </span><span class="keyword">= </span><span class="default">ob_get_contents</span><span class="keyword">(); </span><span class="default">ob_end_clean</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/^object\(([a-z0-9_]+)\)\#(\d)+/i'</span><span class="keyword">, </span><span class="default">$dump</span><span class="keyword">, </span><span class="default">$match</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">md5</span><span class="keyword">(</span><span class="default">$match</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] . </span><span class="default">$match</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="default">__FUNCTION__ </span><span class="keyword">. </span><span class="string">"() expects parameter 1 to be object"</span><span class="keyword">, </span><span class="default">E_USER_WARNING</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">null</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76220""></a>
  <div class="note">
   <strong class="user">planetbeing</strong>
   <a href="#76220" class="date">05-Jul-2007 04:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that the contents (properties) of the object are NOT hashed by the function, merely its internal handle and handler table pointer. This is sufficient to guarantee that any two objects simultaneously co-residing in memory will have different hashes. Uniqueness is not guaranteed between objects that did not reside in memory simultaneously, for example:<br />
<br />
var_dump(spl_object_hash(new stdClass()), spl_object_hash(new stdClass()));<br />
<br />
Running this alone will usually generate the same hashes, since PHP reuses the internal handle for the first stdClass after it has been dereferenced and destroyed when it creates the second stdClass.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.spl-classes.html">spl_classes</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="spl.files.html">File Handling</a></div>
 <div class="up"><a href="ref.spl.html">SPL Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
