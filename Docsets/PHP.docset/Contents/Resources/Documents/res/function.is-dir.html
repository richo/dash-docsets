<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Tells whether the filename is a directory</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.glob.html">glob</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.is-executable.html">is_executable</a></div>
 <div class="up"><a href="ref.filesystem.html">Filesystem Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.is-dir" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">is_dir</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">is_dir</span> &mdash; <span class="dc-title">Tells whether the filename is a directory</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.is-dir-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><b>is_dir</b></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$filename</tt></span>
   )</div>

  <p class="para rdfs-comment">
   Tells whether the given filename is a directory.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.is-dir-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><i><tt class="parameter">filename</tt></i></span>
     <dd>

      <p class="para">
       Path to the file. If <i><tt class="parameter">filename</tt></i> is a relative
       filename, it will be checked relative to the current working
       directory. If <i><tt class="parameter">filename</tt></i> is a symbolic or hard link 
       then the link will be resolved and checked. If you have enabled <a href="ini.sect.safe-mode.html#ini.safe-mode" class="link">safe mode</a>,
       or <a href="ini.core.html#ini.open-basedir" class="link">open_basedir</a> further
       restrictions may apply.
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.is-dir-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns <b><tt>TRUE</tt></b> if the filename exists and is a directory, <b><tt>FALSE</tt></b>
   otherwise.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.is-dir-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   <div class="example" id="example-2195">
    <p><b>Example #1 <span class="function"><b>is_dir()</b></span> example</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">is_dir</span><span style="color: #007700">(</span><span style="color: #DD0000">'a_file.txt'</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">is_dir</span><span style="color: #007700">(</span><span style="color: #DD0000">'bogus_dir/abc'</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">is_dir</span><span style="color: #007700">(</span><span style="color: #DD0000">'..'</span><span style="color: #007700">));&nbsp;</span><span style="color: #FF8000">//one&nbsp;dir&nbsp;up<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
bool(false)
bool(false)
bool(true)
</pre></div>
    </div>
   </div>
  </p>
 </div>


 <div class="refsect1 errors" id="refsect1-function.is-dir-errors">
  <h3 class="title">Errors/Exceptions</h3>
  <p class="para">
Upon failure, an <b><tt>E_WARNING</tt></b> is emitted.
</p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.is-dir-notes">
  <h3 class="title">Notes</h3>
  <blockquote class="note"><p><b class="note">Note</b>: <span class="simpara">The results of this
function are cached. See <span class="function"><a href="function.clearstatcache.html" class="function">clearstatcache()</a></span> for
more details.</span></p></blockquote>
  <div class="tip"><b class="tip">Tip</b><p class="simpara">As of PHP 5.0.0, this function
can also be used with <em class="emphasis">some</em> URL wrappers.  Refer to
<a href="wrappers.html" class="xref">Supported Protocols and Wrappers</a> to determine which wrappers support
<span class="function"><a href="function.stat.html" class="function">stat()</a></span> family of functionality.</p></div>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.is-dir-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.chdir.html" class="function" rel="rdfs-seeAlso">chdir()</a> - Change directory</span></li>
    <li class="member"><span class="function"><a href="function.dir.html" class="function" rel="rdfs-seeAlso">dir()</a> - Return an instance of the Directory class</span></li>
    <li class="member"><span class="function"><a href="function.opendir.html" class="function" rel="rdfs-seeAlso">opendir()</a> - Open directory handle</span></li>
    <li class="member"><span class="function"><a href="function.is-file.html" class="function" rel="rdfs-seeAlso">is_file()</a> - Tells whether the filename is a regular file</span></li>
    <li class="member"><span class="function"><a href="function.is-link.html" class="function" rel="rdfs-seeAlso">is_link()</a> - Tells whether the filename is a symbolic link</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="100597""></a>
  <div class="note">
   <strong class="user">h_guillaume at hotmail dot com</strong>
   <a href="#100597" class="date">25-Oct-2010 04:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I encoutered an error returning false on a directory, my problem was not a bug, but a bad relative path error inside the script function is_dir(), maybe it can help someone having the same problem.<br />
<br />
I am using Linux with the folowing structure:<br />
/var/www/vhosts/example.com/httpdocs/images/items_images/file1.jpg<br />
/var/www/vhosts/example.com/httpdocs/images/items_images/temp<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/* The folder "temp" will show as directory with the following script: */<br />
</span><span class="default">$full_path </span><span class="keyword">= </span><span class="string">"/var/www/vhosts/example.com/httpdocs/images/items_images"</span><span class="keyword">;<br />
if (</span><span class="default">$handle </span><span class="keyword">= </span><span class="default">opendir</span><span class="keyword">(</span><span class="string">"</span><span class="default">$full_path</span><span class="string">"</span><span class="keyword">)) {<br />
&nbsp;&nbsp;&nbsp; while (</span><span class="default">false </span><span class="keyword">!== (</span><span class="default">$file </span><span class="keyword">= </span><span class="default">readdir</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">))) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$full_path</span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">.</span><span class="default">$file</span><span class="keyword">)) continue;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else echo </span><span class="default">$file</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
<span class="default">&lt;?php<br />
</span><span class="comment">/* The folder "temp" will show as a file with the following script: */<br />
</span><span class="default">$full_path </span><span class="keyword">= </span><span class="string">"/var/www/vhosts/example.com/httpdocs/images/items_images"</span><span class="keyword">;<br />
if (</span><span class="default">$handle </span><span class="keyword">= </span><span class="default">opendir</span><span class="keyword">(</span><span class="string">"</span><span class="default">$full_path</span><span class="string">"</span><span class="keyword">)) {<br />
&nbsp;&nbsp;&nbsp; while (</span><span class="default">false </span><span class="keyword">!== (</span><span class="default">$file </span><span class="keyword">= </span><span class="default">readdir</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">))) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">)) continue;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else echo </span><span class="default">$file</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="98338""></a>
  <div class="note">
   <strong class="user">digitalaudiorock at gmail dot com</strong>
   <a href="#98338" class="date">09-Jun-2010 12:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just a note for anyone who encounters is_dir() returning false on CIFS mount points or directories within those mount points on 2.6.31 and newer kernels: Apparently in new kernels they've started using the CIFS serverino option by default.&nbsp; With Windows shares this causes huge inode numbers and which apparently can cause is_dir() to return false.&nbsp; Adding the noserverino option to the CIFS mount will prevent this.&nbsp; This may only occur on 32 systems but I don't have a 64 bit install to test against.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90457""></a>
  <div class="note">
   <strong class="user">vstoykov at consultant dot bg</strong>
   <a href="#90457" class="date">23-Apr-2009 03:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When trying (no 'pear') to enumerate mounted drives on a win32&nbsp; platform (Win XP SP3, Apache/2.2.11, PHP/5.2.9), I used:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">echo_win_drives</span><span class="keyword">() {<br />
<br />
&nbsp; for(</span><span class="default">$c</span><span class="keyword">=</span><span class="string">'A'</span><span class="keyword">; </span><span class="default">$c</span><span class="keyword">&lt;=</span><span class="string">'Z'</span><span class="keyword">; </span><span class="default">$c</span><span class="keyword">++) <br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$c </span><span class="keyword">. </span><span class="string">':'</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp;&nbsp; echo </span><span class="default">$c </span><span class="keyword">. </span><span class="string">': '</span><span class="keyword">; <br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
which yielded:<br />
A: C: D: E: F: G: H: I:</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88542""></a>
  <div class="note">
   <strong class="user">alanguir at detroitchamber dot com</strong>
   <a href="#88542" class="date">28-Jan-2009 09:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When I run a scandir I always run a simple filter to account for file system artifacts (especially from a simple ftp folder drop) and the "." ".." that shows up in every directory: <br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$folder</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$contents </span><span class="keyword">= </span><span class="default">scandir</span><span class="keyword">(</span><span class="default">$folder</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$bad </span><span class="keyword">= array(</span><span class="string">"."</span><span class="keyword">, </span><span class="string">".."</span><span class="keyword">, </span><span class="string">".DS_Store"</span><span class="keyword">, </span><span class="string">"_notes"</span><span class="keyword">, </span><span class="string">"Thumbs.db"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$files </span><span class="keyword">= </span><span class="default">array_diff</span><span class="keyword">(</span><span class="default">$contents</span><span class="keyword">, </span><span class="default">$bad</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85961""></a>
  <div class="note">
   <strong class="user">Btx</strong>
   <a href="#85961" class="date">26-Sep-2008 03:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="keyword">public static function </span><span class="default">isEmptyDir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; return ((</span><span class="default">$files </span><span class="keyword">= @</span><span class="default">scandir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">)) &amp;&amp; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$files</span><span class="keyword">) &lt;= </span><span class="default">2</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
better ;)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85428""></a>
  <div class="note">
   <strong class="user">jasoneisen at gee mail</strong>
   <a href="#85428" class="date">29-Aug-2008 08:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
An even better (PHP 5 only) alternative to "Davy Defaud's function": <br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">is_empty_dir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; if ((</span><span class="default">$files </span><span class="keyword">= @</span><span class="default">scandir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">)) &amp;&amp; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$files</span><span class="keyword">) &lt;= </span><span class="default">2</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
NOTE: you should obviously be checking beforehand if $dir is actually a directory, and that it is readable, as only relying on this you would assume that in both cases you have a non-empty readable directory.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83967""></a>
  <div class="note">
   <strong class="user">nielius at gmail dot com</strong>
   <a href="#83967" class="date">20-Jun-2008 02:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
@Anonymous:<br />
<br />
If on Linux the suggested code does not work because '.' and '..' will allways be returned, it may be possible to subtract 2 from the amount of files found.<br />
&gt;&gt;echo (count(glob("$dir/*") - 2) === 0) ? 'Empty' : 'Not <br />
In that way, I think, you have solved the problem of two extra files that are counted.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83307""></a>
  <div class="note">
   <strong class="user">Davy Defaud</strong>
   <a href="#83307" class="date">20-May-2008 03:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Well, "John Doe's function" doesn't return the good value when $file != '.' &amp;&amp; $file != '..' it must return false and not true !<br />
Moreover, as the latest contributor told us, the directory have to be closed before returning.<br />
This one is far safer ;-) :<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">is_empty_dir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$dh </span><span class="keyword">= @</span><span class="default">opendir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while (</span><span class="default">$file </span><span class="keyword">= </span><span class="default">readdir</span><span class="keyword">(</span><span class="default">$dh</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$file </span><span class="keyword">!= </span><span class="string">'.' </span><span class="keyword">&amp;&amp; </span><span class="default">$file </span><span class="keyword">!= </span><span class="string">'..'</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">closedir</span><span class="keyword">(</span><span class="default">$dh</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">closedir</span><span class="keyword">(</span><span class="default">$dh</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else return </span><span class="default">false</span><span class="keyword">; </span><span class="comment">// whatever the reason is : no such dir, not a dir, not readable<br />
</span><span class="keyword">}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82749""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#82749" class="date">24-Apr-2008 01:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
On the previous example you may want to closedir() before returning, I tried the function and ran into some locking issues on windows when trying to delete the directory after I ran this function.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82719""></a>
  <div class="note">
   <strong class="user">John Doe</strong>
   <a href="#82719" class="date">23-Apr-2008 06:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I altered the function below a bit. This implementation is simpler, faster and safer:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">is_empty_folder</span><span class="keyword">(</span><span class="default">$folder</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if (! </span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$folder</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">; </span><span class="comment">// not a dir<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$files </span><span class="keyword">= </span><span class="default">opendir</span><span class="keyword">(</span><span class="default">$folder</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; while (</span><span class="default">$file </span><span class="keyword">= </span><span class="default">readdir</span><span class="keyword">(</span><span class="default">$files</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$file </span><span class="keyword">!= </span><span class="string">'.' </span><span class="keyword">&amp;&amp; </span><span class="default">$file </span><span class="keyword">!= </span><span class="string">'..'</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">; </span><span class="comment">// not empty<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">}<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81992""></a>
  <div class="note">
   <strong class="user">vlasec at gmailcom</strong>
   <a href="#81992" class="date">22-Mar-2008 04:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
zombix:<br />
I don't know much about implementation, however I think that passing through all the files is useless. This code returns false also in case that it's not even a folder plus it stops in three steps at most.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">is_empty_folder</span><span class="keyword">(</span><span class="default">$folder</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$c</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$folder</span><span class="keyword">) ){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$files </span><span class="keyword">= </span><span class="default">opendir</span><span class="keyword">(</span><span class="default">$folder</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while (</span><span class="default">$file</span><span class="keyword">=</span><span class="default">readdir</span><span class="keyword">(</span><span class="default">$files</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$c</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$c</span><span class="keyword">&gt;</span><span class="default">2</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">; </span><span class="comment">// dir contains something<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">true</span><span class="keyword">; </span><span class="comment">// empty dir<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp;&nbsp; else return </span><span class="default">false</span><span class="keyword">; </span><span class="comment">// not a dir<br />
</span><span class="keyword">}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81880""></a>
  <div class="note">
   <strong class="user">zombix at metrohive dot net</strong>
   <a href="#81880" class="date">17-Mar-2008 11:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
to check if folder is empty<br />
<br />
function is_empty_folder($folder){<br />
&nbsp;&nbsp;&nbsp; $c=0;<br />
&nbsp;&nbsp;&nbsp; if(is_dir($folder) ){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $files = opendir($folder);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while ($file=readdir($files)){$c++;}<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ($c&gt;2){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return false;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return true;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }&nbsp; &nbsp; &nbsp; &nbsp; <br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="79889""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#79889" class="date">17-Dec-2007 11:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
One note regarding checking for empty directories :<br />
&gt;&gt;echo (count(glob("$dir/*")) === 0) ? 'Empty' : 'Not empty';<br />
This does not work correctly on Linux.<br />
The '.' and '..' will always be returned even if no files are present in the directory.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="79622""></a>
  <div class="note">
   <strong class="user">sgoldbroch at DONTSPAMMEcmcplacce dot com</strong>
   <a href="#79622" class="date">05-Dec-2007 02:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Took a while to figure this out, but - DONT USE THIS IN A LOOP WITH READDIR()!&nbsp; readdir() only gives the file/dir name and not the full path which is_dir apparently needs to be able to accurately evaluate the argument.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76756""></a>
  <div class="note">
   <strong class="user">e dot loiseau at meteo-ondemand dot com</strong>
   <a href="#76756" class="date">29-Jul-2007 11:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I had the same problem as others with not using the complete path to a folder when usin is_dir.<br />
<br />
It's really important to use complete path.<br />
<br />
$folder = "../pictures";<br />
$dossier = opendir($folder);<br />
while ($Fichier = readdir($dossier)) {<br />
&nbsp; if ($Fichier != "." &amp;&amp; $Fichier != ".." &amp;&amp; $Fichier != "Thumbs.db") {<br />
//&nbsp; &nbsp; if(is_dir($Fichier)) { // Do not always works<br />
&nbsp;&nbsp;&nbsp; if(is_dir($folder."/".$Fichier)) { // Works always<br />
echo "$Fichier";<br />
&nbsp;&nbsp;&nbsp; } // fin if is file<br />
&nbsp; } // fin if restriction des fichiers Ã  ne pas afficher<br />
} // fin while<br />
closedir($dossier);<br />
<br />
Edouard</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76513""></a>
  <div class="note">
   <strong class="user">danr at cvisual dot com dot com</strong>
   <a href="#76513" class="date">18-Jul-2007 02:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Running PHP 5.2.0 on Apache Windows, I had a problem (likely the same one as described by others) where is_dir returned a False for directories with certain permissions even though they were accessible.<br />
<br />
Strangely, I was able to overcome the problem with a more complete path. For example, this only displays "Works" on subdirectories with particular permissions (in this directory about 1 out of 3):<br />
<br />
$d = opendir("./albums/mydir");<br />
while(false !== ($f = readdir($d))) {<br />
&nbsp;&nbsp;&nbsp; echo "&lt;hr /&gt;";<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(is_dir($f)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo "&lt;b&gt;Works:" . $f . "&lt;/b&gt;";<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
}<br />
<br />
However, this works properly for all directories:<br />
<br />
$d = opendir("./albums/mydir");<br />
while(false !== ($f = readdir($d))) {<br />
&nbsp;&nbsp;&nbsp; echo "&lt;hr /&gt;";<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $dName = "./albums/mydir/" . $f;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(is_dir($dName)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo "&lt;b&gt;Works:" . $dName . "&lt;/b&gt;";<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
}<br />
<br />
I don't understand the hit-and-miss of the first code, but maybe the second code can help others having this problem.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75248""></a>
  <div class="note">
   <strong class="user">legolas558 d0t users dot sf dot net</strong>
   <a href="#75248" class="date">20-May-2007 06:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I had troubles at checking for the existance of a directory under the windows temporary path (usually c:\windows\temp\). I am using PHP 5.2.0<br />
<br />
See also the bug tracker item: <a href="http://bugs.php.net/bug.php?id=39198" rel="nofollow" target="_blank">http://bugs.php.net/bug.php?id=39198</a><br />
<br />
Here below the replacement function which works under the Windows temporary directory. It is a bad hack, since it creates and then removes the directory to verify its existance! But I could not find an alternative solution, that bug should be fixed.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">temp_is_dir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// check directory existance under temp folder (tested on Windows)<br />
&nbsp;&nbsp;&nbsp; // see bug #31918 <a href="http://bugs.php.net/bug.php?id=39198" rel="nofollow" target="_blank">http://bugs.php.net/bug.php?id=39198</a><br />
&nbsp;&nbsp;&nbsp; // by legolas558<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (!@</span><span class="default">mkdir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">rmdir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75084""></a>
  <div class="note">
   <strong class="user">lordalderaan at gmail dot com</strong>
   <a href="#75084" class="date">11-May-2007 06:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As was said earlier by locataweb at hotmail dot com is_dir returns false on windows shares even if they exist and are accessible. <br />
<br />
I found that is_readable provides about the same functionality and does return true. It might provide a sufficient replacement in most cases.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73478""></a>
  <div class="note">
   <strong class="user">gecko4 at gmail dot com</strong>
   <a href="#73478" class="date">24-Feb-2007 09:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is another way to test if a directory is empty, which I think is much simpler than those posted below:<br />
<br />
<span class="default">&lt;?php<br />
$dir </span><span class="keyword">= </span><span class="string">'directory'</span><span class="keyword">;<br />
echo (</span><span class="default">count</span><span class="keyword">(</span><span class="default">glob</span><span class="keyword">(</span><span class="string">"</span><span class="default">$dir</span><span class="string">/*"</span><span class="keyword">)) === </span><span class="default">0</span><span class="keyword">) ? </span><span class="string">'Empty' </span><span class="keyword">: </span><span class="string">'Not empty'</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="72427""></a>
  <div class="note">
   
   <a href="#72427" class="date">18-Jan-2007 05:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be aware that is_dir() and is_file() will not work on very large (for me &gt;2gb) files (also see <a href="http://de3.php.net/manual/en/function.is-file.php#56334" rel="nofollow" target="_blank">http://de3.php.net/manual/en/function.is-file.php#56334</a>).<br />
<br />
You might try this approach - it works for me:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">isDir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">$cwd </span><span class="keyword">= </span><span class="default">getcwd</span><span class="keyword">();<br />
&nbsp; </span><span class="default">$returnValue </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
&nbsp; if (@</span><span class="default">chdir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">)) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">chdir</span><span class="keyword">(</span><span class="default">$cwd</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$returnValue </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />
&nbsp; }<br />
&nbsp; return </span><span class="default">$returnValue</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Please keep in mind that isDir() will fail on directories which cannot be chdired due to permission settings for example.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="70712""></a>
  <div class="note">
   <strong class="user">Eric</strong>
   <a href="#70712" class="date">24-Oct-2006 01:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Ah ha!&nbsp; Maybe this is a bug, or limitation to be more precise, of php. See <a href="http://bugs.php.net/bug.php?id=27792" rel="nofollow" target="_blank">http://bugs.php.net/bug.php?id=27792</a><br />
<br />
A workaround is posted on the page (above) and seems to work for me:<br />
<br />
function is_dir_LFS($path){<br />
&nbsp; return (('d'==substr(exec("ls -dl '$path'"),0,1))?(true):(false));<br />
}<br />
<br />
PS: I'm using PHP 4.3.10-16, posts report this problem up to 5.0</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="70687""></a>
  <div class="note">
   <strong class="user">Eric Peterson</strong>
   <a href="#70687" class="date">23-Oct-2006 05:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I'm not sure what is going on here... I have a function to return a listing of (sub)directories within a directory.&nbsp; Works great until I ran into the directory given in the warning below... 87 characters seems too short to be running into a file/directory name length issue?<br />
<br />
This is what I'm getting (though broken into a couple lines so this forum will accept it):<br />
<br />
Warning: is_dir(): Stat failed for <br />
/home/office/public_html/Library/1_NNHP-produced/4_Maps<br />
/Peterson2003/BRTEreport_DVD.zip <br />
(errno=75 - Value too large for defined data type) in /home/office/public_html/index.php on line 104<br />
<br />
Here is line 104: <br />
<br />
&nbsp;if (is_dir($dir . "/" . $listing)) {</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="70005""></a>
  <div class="note">
   <strong class="user">alan dot rezende at light dot com dot br</strong>
   <a href="#70005" class="date">29-Sep-2006 06:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The function is_dir will always return false if the handle acquired with opendir is not from the current working directory (getcwd); exception applies to "." and "..". Thus, if you need a consistent dir listing from any directory other than the current one, you must change dir first. Example follows:<br />
<span class="default">&lt;?php<br />
chdir</span><span class="keyword">( </span><span class="string">'..' </span><span class="keyword">);<br />
</span><span class="default">$rep</span><span class="keyword">=</span><span class="default">opendir</span><span class="keyword">(</span><span class="string">'.'</span><span class="keyword">);<br />
while (</span><span class="default">false </span><span class="keyword">!= (</span><span class="default">$file </span><span class="keyword">= </span><span class="default">readdir</span><span class="keyword">(</span><span class="default">$rep</span><span class="keyword">))){<br />
&nbsp; if (</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">)){<br />
&nbsp;&nbsp;&nbsp; print(</span><span class="string">"&lt;a href='</span><span class="default">$file</span><span class="string">/' class='text1'&gt;</span><span class="default">$file</span><span class="string">&lt;/a&gt;"</span><span class="keyword">);<br />
&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span>The above code will list all directories (with links) for the ".." directory, relative to the current working dir.<br />
<br />
THE WRONG WAY TO DO IT FOLLOWS:<br />
<span class="default">&lt;?php<br />
$rep</span><span class="keyword">=</span><span class="default">opendir</span><span class="keyword">(</span><span class="string">'..'</span><span class="keyword">);<br />
while (</span><span class="default">false </span><span class="keyword">!= (</span><span class="default">$file </span><span class="keyword">= </span><span class="default">readdir</span><span class="keyword">(</span><span class="default">$rep</span><span class="keyword">))){<br />
&nbsp; </span><span class="comment">//print "$file is here (may be a dir or not)&lt;br&gt;";<br />
&nbsp; </span><span class="keyword">if (</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">)){<br />
&nbsp;&nbsp;&nbsp; print </span><span class="string">"&lt;a href='</span><span class="default">$file</span><span class="string">/' class='text1'&gt;</span><span class="default">$file</span><span class="string">&lt;/a&gt;&lt;br&gt;"</span><span class="keyword">;<br />
&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span>This code will turn into an empty list. If you want to make sure, uncomment the commented line...<br />
Regards...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68679""></a>
  <div class="note">
   <strong class="user">locataweb at hotmail dot com</strong>
   <a href="#68679" class="date">06-Aug-2006 03:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
NOTE on Windows Shares (based on tests using PHP 5.1.1):<br />
<br />
After many hours of head scratching and wondering why a script worked sometimes but not others, I discovered this revelation.<br />
<br />
Be aware that base Windows shares are not recognised as dirs, so the following test will return false even if \\COMPUTER_NAME\SHARENAME exists.<br />
<br />
<span class="default">&lt;?php <br />
<br />
</span><span class="keyword">if (</span><span class="default">is_dir</span><span class="keyword">(</span><span class="string">'\\\\COMPUTER_NAME\\SHARENAME'</span><span class="keyword">)) {<br />
echo </span><span class="string">"TRUE\n"</span><span class="keyword">;<br />
}<br />
else {<br />
echo </span><span class="string">"FALSE\n"</span><span class="keyword">;<br />
}<br />
</span><span class="comment">//will return FALSE;<br />
<br />
// However testing a subdir of the same base share <br />
// using test below will return TRUE,<br />
// despite the fact the parent base Windows share&nbsp; <br />
// returns false when tested by is_dir()<br />
<br />
</span><span class="default">is_dir</span><span class="keyword">(</span><span class="string">'\\\\COMPUTER_NAME\\SHARENAME\\SUBDIR'</span><span class="keyword">) {<br />
echo </span><span class="string">"TRUE\n"</span><span class="keyword">;<br />
} else {<br />
echo </span><span class="string">"FALSE\n"</span><span class="keyword">;<br />
}<br />
</span><span class="comment">//will return TRUE.<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
As a work round I replaced is_dir with is_readable() instead, which identifies if the share is readable and so must exist, but this is clearly dependent on whether the share is readable.<br />
<br />
I hope this helps someone.&nbsp; If there is a better work round or other purpose built solution to this problem with base windows shares, please post them so I'll know the next time.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68146""></a>
  <div class="note">
   <strong class="user">derek at nospam dot pmachine dot com</strong>
   <a href="#68146" class="date">14-Jul-2006 04:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
regarding dmertens-php-note at zyprexia dot com's statement on 24-Sep-2005 09:53<br />
<br />
Actually, is_dir is not affected by UID checks in safe_mode.&nbsp; is_dir will even return true if you lack sufficient privileges to read said directory.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="57125""></a>
  <div class="note">
   <strong class="user">dmertens-php-note at zyprexia dot com</strong>
   <a href="#57125" class="date">24-Sep-2005 08:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Remember that the owner of the directory has to be the same of the script user, otherwise this function will always return false when PHP is running in safe_mode..</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54388""></a>
  <div class="note">
   <strong class="user">fanfatal at fanfatal dot pl</strong>
   <a href="#54388" class="date">02-Jul-2005 09:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hi<br />
I wrote an usefull function to check is directory exists in directory's tree ;)<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/*<br />
&nbsp;*&nbsp; &nbsp; Function to check recursively if dirname is exists in directory's tree<br />
&nbsp;*<br />
&nbsp;*&nbsp; &nbsp; @param string $dir_name<br />
&nbsp;*&nbsp; &nbsp; @param string [$path]<br />
&nbsp;*&nbsp; &nbsp; @return bool<br />
&nbsp;*&nbsp; &nbsp; @author FanFataL<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">dir_exists</span><span class="keyword">(</span><span class="default">$dir_name </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">, </span><span class="default">$path </span><span class="keyword">= </span><span class="string">'./'</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if(!</span><span class="default">$dir_name</span><span class="keyword">) return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">.</span><span class="default">$dir_name</span><span class="keyword">)) return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$tree </span><span class="keyword">= </span><span class="default">glob</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">.</span><span class="string">'*'</span><span class="keyword">, </span><span class="default">GLOB_ONLYDIR</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$tree </span><span class="keyword">&amp;&amp; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$tree</span><span class="keyword">)&gt;</span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$tree </span><span class="keyword">as </span><span class="default">$dir</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">dir_exists</span><span class="keyword">(</span><span class="default">$dir_name</span><span class="keyword">, </span><span class="default">$dir</span><span class="keyword">.</span><span class="string">'/'</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Greatings ;)<br />
...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="53583""></a>
  <div class="note">
   
   <a href="#53583" class="date">06-Jun-2005 11:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
With error reporting set to all, and you attempt to do:<br />
echo var_dump(is_dir('bogus_dir/abc'));<br />
<br />
as output you will get:<br />
Warning: stat failed for bogus_dir/abc (errno=2 - No such file or directory) in test.php on line 12<br />
bool(false)<br />
<br />
If you want to use this with an error reporting level set to all, you will need to use @ to supress the generated error</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="53495""></a>
  <div class="note">
   <strong class="user">akashif at freezone dot co dot uk</strong>
   <a href="#53495" class="date">03-Jun-2005 04:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
just a simple script to for those who dont have the IIS or Apache Dirlisting available , this will make onr for you<br />
<br />
<span class="default">&lt;?php <br />
$DirPath</span><span class="keyword">=</span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'DirPath'</span><span class="keyword">];<br />
if(</span><span class="default">$DirPath</span><span class="keyword">==</span><span class="string">""</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$DirPath</span><span class="keyword">=</span><span class="string">'./'</span><span class="keyword">;<br />
}<br />
if ((</span><span class="default">$handle</span><span class="keyword">=</span><span class="default">opendir</span><span class="keyword">(</span><span class="default">$DirPath</span><span class="keyword">)))<br />
{<br />
&nbsp;&nbsp;&nbsp; while (</span><span class="default">$node </span><span class="keyword">= </span><span class="default">readdir</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$nodebase </span><span class="keyword">= </span><span class="default">basename</span><span class="keyword">(</span><span class="default">$node</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$nodebase</span><span class="keyword">!=</span><span class="string">"." </span><span class="keyword">&amp;&amp; </span><span class="default">$nodebase</span><span class="keyword">!=</span><span class="string">".."</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$DirPath</span><span class="keyword">.</span><span class="default">$node</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$nPath</span><span class="keyword">=</span><span class="default">$DirPath</span><span class="keyword">.</span><span class="default">$node</span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"-&gt; -&gt; -&gt; &lt;a href='dir.php?DirPath=</span><span class="default">$nPath</span><span class="string">'&gt;</span><span class="default">$node</span><span class="string">&lt;/a&gt;&lt;br&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"&lt;a href='</span><span class="default">$node</span><span class="string">'&gt;</span><span class="default">$node</span><span class="string">&lt;/a&gt;&lt;br&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="52129""></a>
  <div class="note">
   <strong class="user">renich at woralelandia dot com</strong>
   <a href="#52129" class="date">21-Apr-2005 11:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here goes a PHP5.0 link-to-directory listing function and examples<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">//List directories only<br />
</span><span class="keyword">function </span><span class="default">list_dirs</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">, </span><span class="default">$target</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$list </span><span class="keyword">= </span><span class="default">scandir</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$list </span><span class="keyword">as </span><span class="default">$number </span><span class="keyword">=&gt; </span><span class="default">$filename</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">$filename </span><span class="keyword">!== </span><span class="string">'.' </span><span class="keyword">&amp;&amp; </span><span class="default">$filename </span><span class="keyword">!== </span><span class="string">'..' </span><span class="keyword">&amp;&amp; </span><span class="default">is_dir</span><span class="keyword">(</span><span class="string">"</span><span class="default">$path</span><span class="string">/</span><span class="default">$filename</span><span class="string">"</span><span class="keyword">) )<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Asign more readable and logic variables<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$dir </span><span class="keyword">= </span><span class="default">$filename</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$url </span><span class="keyword">= </span><span class="default">apache_request_headers</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$target </span><span class="keyword">== </span><span class="string">''</span><span class="keyword">) <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Print Dirs with link<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">print (</span><span class="string">"&lt;a href=\"<a href="http://" rel="nofollow" target="_blank">http://</a></span><span class="default">$url</span><span class="keyword">[</span><span class="default">Host</span><span class="keyword">]</span><span class="string">/</span><span class="default">$path</span><span class="string">/</span><span class="default">$dir</span><span class="string">\"&gt;</span><span class="default">$dir</span><span class="string">&lt;/a&gt; &lt;br&gt;\n"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Print Dirs with link<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">print (</span><span class="string">"&lt;a href=\"<a href="http://" rel="nofollow" target="_blank">http://</a></span><span class="default">$url</span><span class="keyword">[</span><span class="default">Host</span><span class="keyword">]</span><span class="default">$dir</span><span class="string">\" target=\"</span><span class="default">$target</span><span class="string">\"&gt;</span><span class="default">$dir</span><span class="string">&lt;/a&gt; &lt;br&gt;\n"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
&nbsp;&nbsp;&nbsp; <br />
</span><span class="default">?&gt;<br />
</span><br />
1.- List current directory's directories with no target property.<br />
<br />
<span class="default">&lt;?php<br />
<br />
list_dirs</span><span class="keyword">(</span><span class="string">'.'</span><span class="keyword">,</span><span class="string">''</span><span class="keyword">)<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
2.- List "libraries" in "pma2" located at my dir with a "_blank" target set<br />
<br />
<span class="default">&lt;?php<br />
<br />
list_dirs</span><span class="keyword">(</span><span class="string">'pma2/libraries'</span><span class="keyword">,</span><span class="string">'_blank'</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
or<br />
<br />
<span class="default">&lt;?php<br />
<br />
list_dirs</span><span class="keyword">(</span><span class="string">'/var/www/html/pma2/libraries'</span><span class="keyword">,</span><span class="string">'_blank'</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
3.- List all the directories located at the "/Home" dir with "_me" as target.<br />
<br />
<span class="default">&lt;?php<br />
<br />
list_dirs</span><span class="keyword">(</span><span class="string">'/home'</span><span class="keyword">, </span><span class="string">''</span><span class="default">_me</span><span class="string">');<br />
<br />
?&gt;<br />
<br />
I hope you all like it!<br />
<br />
Note:<br />
Obviously, the links will now work if the'</span><span class="default">re not in the apache dir</span><span class="keyword">... (</span><span class="string">"htdocs"</span><span class="keyword">, </span><span class="string">"html"</span><span class="keyword">, </span><span class="string">"www"</span><span class="keyword">, </span><span class="default">whatever</span><span class="keyword">)</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="51102""></a>
  <div class="note">
   <strong class="user">dusted19 at hotmail dot com</strong>
   <a href="#51102" class="date">19-Mar-2005 02:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
While working on a php project (my first one =( ).&nbsp; I ran into a bug using is_dir() on my winxp w/ servicepack 2 system.&nbsp; I'm using php 4.3.10.. the problem is whenever i pass is_dir() a pathname that is longer then 256 characters long it will ALWAYS return true.<br />
<br />
CODE:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">// Path to multimedia files<br />
</span><span class="default">$mpath </span><span class="keyword">= </span><span class="string">"E:\\armoury\\"</span><span class="keyword">;<br />
</span><span class="default">ls</span><span class="keyword">(</span><span class="default">$mpath</span><span class="keyword">);<br />
<br />
</span><span class="comment">//echo "MP3 Listing:&lt;br/&gt;&lt;br/&gt;";<br />
<br />
</span><span class="keyword">function </span><span class="default">ls </span><span class="keyword">(</span><span class="default">$curpath</span><span class="keyword">) {<br />
&nbsp;&nbsp; </span><span class="default">$dir </span><span class="keyword">= </span><span class="default">dir</span><span class="keyword">(</span><span class="default">$curpath</span><span class="keyword">);<br />
&nbsp;&nbsp; echo(</span><span class="string">"&lt;b&gt;</span><span class="default">$curpath</span><span class="string">&lt;/b&gt;"</span><span class="keyword">);<br />
&nbsp;&nbsp; echo </span><span class="string">"&lt;blockquote&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp; while (</span><span class="default">$file </span><span class="keyword">= </span><span class="default">$dir</span><span class="keyword">-&gt;</span><span class="default">read</span><span class="keyword">()) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo(</span><span class="string">" &lt;b&gt;"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo(</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$curpath</span><span class="keyword">.</span><span class="default">$file</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo(</span><span class="string">"&lt;/b&gt; "</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$file </span><span class="keyword">!= </span><span class="string">"." </span><span class="keyword">&amp;&amp; </span><span class="default">$file </span><span class="keyword">!= </span><span class="string">".."</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$curpath</span><span class="keyword">.</span><span class="default">$file</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ls</span><span class="keyword">(</span><span class="default">$curpath</span><span class="keyword">.</span><span class="default">$file</span><span class="keyword">.</span><span class="string">"\\"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo(</span><span class="string">" </span><span class="default">$file</span><span class="string">&lt;br&gt;"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
</span><span class="comment">//&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp; </span><span class="default">$dir</span><span class="keyword">-&gt;</span><span class="default">close</span><span class="keyword">();<br />
&nbsp;&nbsp; echo </span><span class="string">"&lt;/blockquote&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp; return;<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
This is the output.. the number preceding the file/directory is the number of characters in it's full path name.&nbsp; You can see where it trips up at:<br />
<br />
&nbsp;257 E:\armoury\[ hiphop - dub - reggae - soul ]\A Tribe Called Quest - 1990 - People's Instinctive Travels And The Paths Of Rhythm\A Tribe Called Quest - People's Instinctive Travels And The Paths Of Rhythm - 10 - Rhythm (Devoted To The Art Of Moving Butts).mp3<br />
<br />
The pathname is greater then 256 characters.<br />
<br />
229 A Tribe Called Quest - People's Instinctive Travels And The Paths Of Rhythm - 07 - Bonita Applebum.mp3<br />
227 A Tribe Called Quest - People's Instinctive Travels And The Paths Of Rhythm - 08 - Can I Kick It.mp3<br />
233 A Tribe Called Quest - People's Instinctive Travels And The Paths Of Rhythm - 09 - Youthful Expression.mp3<br />
257 E:\armoury\[ hiphop - dub - reggae - soul ]\A Tribe Called Quest - 1990 - People's Instinctive Travels And The Paths Of Rhythm\A Tribe Called Quest - People's Instinctive Travels And The Paths Of Rhythm - 10 - Rhythm (Devoted To The Art Of Moving Butts).mp3\<br />
259 260 267 E:\armoury\[ hiphop - dub - reggae - soul ]\A Tribe Called Quest - 1990 - People's Instinctive Travels And The Paths Of Rhythm\A Tribe Called Quest - People's Instinctive Travels And The Paths Of Rhythm - 10 - Rhythm (Devoted To The Art Of Moving Butts).mp3\index.php\<br />
269 270 277 E:\armoury\[ hiphop - dub - reggae - soul ]\A Tribe Called Quest - 1990 - People's Instinctive Travels And The Paths Of Rhythm\A Tribe Called Quest - People's Instinctive Travels And The Paths Of Rhythm - 10 - Rhythm (Devoted To The Art Of Moving Butts).mp3\index.php\index.php\<br />
<br />
Try it yourself on a large directory structure.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="50910""></a>
  <div class="note">
   <strong class="user">flobee</strong>
   <a href="#50910" class="date">13-Mar-2005 06:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
note: like the main example already shows. tooks me houres to understand und using chdir() to get a full dir scann (especilly on windows and "mounted" network drives)<br />
<br />
never forget the tailing slash to find out if you have a directory or not.<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">parse_dir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$dh </span><span class="keyword">= @</span><span class="default">opendir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while((</span><span class="default">$file </span><span class="keyword">= </span><span class="default">readdir</span><span class="keyword">(</span><span class="default">$dh</span><span class="keyword">)) !== </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( !</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/^\./s'</span><span class="keyword">, </span><span class="default">$file</span><span class="keyword">) )&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">.</span><span class="default">$file</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$newdir </span><span class="keyword">= </span><span class="default">$dir</span><span class="keyword">.</span><span class="default">$file</span><span class="keyword">.</span><span class="string">'/'</span><span class="keyword">; </span><span class="comment">// &lt;- tailing slash<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">chdir</span><span class="keyword">(</span><span class="default">$newdir</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"IS DIR: </span><span class="default">$newdir</span><span class="string">\n"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="default">parse_dir</span><span class="keyword">(</span><span class="default">$newdir</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="default">$dir</span><span class="keyword">.</span><span class="default">$file</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">chdir</span><span class="keyword">(</span><span class="string">'..'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">parse_dir</span><span class="keyword">(</span><span class="string">'z:/myfolder/mysubfolder/'</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="49788""></a>
  <div class="note">
   <strong class="user">puremango dot co dot uk at gmail dot com</strong>
   <a href="#49788" class="date">08-Feb-2005 11:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
this function bypasses open_basedir restrictions.<br />
&lt;?<br />
function my_is_dir($dir)<br />
{<br />
&nbsp;&nbsp;&nbsp; // bypasses open_basedir restrictions of is_dir and fileperms<br />
&nbsp;&nbsp;&nbsp; $tmp_cmd = `ls -dl $dir`;<br />
&nbsp;&nbsp;&nbsp; $dir_flag = $tmp_cmd[0];<br />
&nbsp;&nbsp;&nbsp; if($dir_flag!="d")<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // not d; use next char (first char might be 's' and is still directory)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $dir_flag = $tmp_cmd[1];<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return ($dir_flag=="d");<br />
}<br />
?&gt;<br />
<br />
example:<br />
&lt;?<br />
....<br />
echo is_dir("/somewhere/i/dont/have/access/to");<br />
?&gt;<br />
output:<br />
Warning: open_basedir restriction in effect<br />
<br />
&lt;?<br />
....<br />
echo my_is_dir("/somewhere/i/dont/have/access/to");<br />
?&gt;<br />
output:<br />
true (or false, depending whether it is or not...)<br />
<br />
---<br />
visit puremango.co.uk for other such wonders</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="49611""></a>
  <div class="note">
   
   <a href="#49611" class="date">02-Feb-2005 04:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Unfortunately, the function posted by p dot marzec at bold-sg dot pl does not work.<br />
The corrected version is:<br />
<br />
// returns true if folder is empty or not existing<br />
// false if folde is full<br />
<br />
function is_empty_folder($dir) {<br />
if (is_dir($dir)) {<br />
&nbsp;&nbsp; $dl=opendir($dir);<br />
&nbsp;&nbsp; if ($dl) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; while($name = readdir($dl)) {<br />
&nbsp;&nbsp; if (!is_dir("$dir/$name")) { //&lt;--- corrected here<br />
&nbsp;&nbsp; &nbsp; &nbsp; return false;<br />
&nbsp;&nbsp; &nbsp; &nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; closedir($dl);<br />
&nbsp;&nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; return true;<br />
&nbsp;&nbsp; } else return true;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="49570""></a>
  <div class="note">
   <strong class="user">tibard at gmail dot com</strong>
   <a href="#49570" class="date">01-Feb-2005 12:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
use this function to get all files inside a directory (including subdirectories)<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">scan_Dir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$arrfiles </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$handle </span><span class="keyword">= </span><span class="default">opendir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">chdir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while (</span><span class="default">false </span><span class="keyword">!== (</span><span class="default">$file </span><span class="keyword">= </span><span class="default">readdir</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">))) { <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$file </span><span class="keyword">!= </span><span class="string">"." </span><span class="keyword">&amp;&amp; </span><span class="default">$file </span><span class="keyword">!= </span><span class="string">".."</span><span class="keyword">) { <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">)) { <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arr </span><span class="keyword">= </span><span class="default">scan_Dir</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$arr </span><span class="keyword">as </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arrfiles</span><span class="keyword">[] = </span><span class="default">$dir</span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">.</span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arrfiles</span><span class="keyword">[] = </span><span class="default">$dir</span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">.</span><span class="default">$file</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">chdir</span><span class="keyword">(</span><span class="string">"../"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">closedir</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$arrfiles</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="48116""></a>
  <div class="note">
   <strong class="user">rchavezc at ameritech dot net</strong>
   <a href="#48116" class="date">12-Dec-2004 08:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is the function that I use to test for an empty directory:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">is_emtpy_dir</span><span class="keyword">(</span><span class="default">$dirname</span><span class="keyword">){<br />
<br />
</span><span class="comment">// Returns true if&nbsp; $dirname is a directory and it is empty<br />
<br />
&nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Assume it is not a directory<br />
&nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$dirname</span><span class="keyword">) ){<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$result</span><span class="keyword">=</span><span class="default">true</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// It is a directory <br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$handle </span><span class="keyword">= </span><span class="default">opendir</span><span class="keyword">(</span><span class="default">$dirname</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; while( ( </span><span class="default">$name </span><span class="keyword">= </span><span class="default">readdir</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">)) !== </span><span class="default">false</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$name</span><span class="keyword">!= </span><span class="string">"." </span><span class="keyword">&amp;&amp; </span><span class="default">$name </span><span class="keyword">!=</span><span class="string">".."</span><span class="keyword">){ <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$result</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// directory not empty<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">break;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// no need to test more<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">closedir</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">);<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">; <br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="44681""></a>
  <div class="note">
   <strong class="user">bhuskins at nospam dot christian-horizons dot org</strong>
   <a href="#44681" class="date">12-Aug-2004 01:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
'Is_empty_folder' posted by andreas at rueping dot net is a nice function. It did give me some grief, though. I don't beleive that it actually closes the directory when it's done (closedir in the wrong spot). I changed it slightly to be the following:<br />
<br />
// returns true if folder is empty or not existing<br />
// false if folde is full<br />
<br />
&lt;?<br />
function is_emtpy_folder($folder){<br />
&nbsp;&nbsp; if(is_dir($folder) ){<br />
&nbsp;&nbsp; &nbsp; &nbsp; $handle = opendir($folder);<br />
&nbsp;&nbsp; &nbsp; &nbsp; while( (gettype( $name = readdir($handle)) != "boolean")){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $name_array[] = $name;<br />
&nbsp;&nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; foreach($name_array as $temp)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $folder_content .= $temp;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; closedir($handle);//&lt;--------moved this<br />
&nbsp;&nbsp; &nbsp; &nbsp; if($folder_content == "...") {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return true;<br />
&nbsp;&nbsp; &nbsp; &nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return false;<br />
&nbsp;&nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; return true; // folder doesnt exist<br />
}<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="42770""></a>
  <div class="note">
   <strong class="user">sly at noiretblanc dot org</strong>
   <a href="#42770" class="date">28-May-2004 10:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is the "is_dir" function I use to solve the problems :<br />
<br />
function Another_is_dir ($file)<br />
{<br />
&nbsp;&nbsp;&nbsp; if ((fileperms("$file") &amp; 0x4000) == 0x4000)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return TRUE;<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return FALSE;<br />
}<br />
<br />
or, more simple :<br />
<br />
function Another_is_dir ($file)<br />
{ <br />
return ((fileperms("$file") &amp; 0x4000) == 0x4000);<br />
}<br />
<br />
I can't remember where it comes from, but it works fine.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="40774""></a>
  <div class="note">
   <strong class="user">p dot marzec at bold-sg dot pl</strong>
   <a href="#40774" class="date">14-Mar-2004 07:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Simplest version 'is_empty_folder' posted by andreas at rueping dot net<br />
<br />
// returns true if folder is empty or not existing<br />
// false if folde is full<br />
<br />
function is_empty_folder($dir) {<br />
if (is_dir($dir)) {<br />
&nbsp;&nbsp;&nbsp; $dl=opendir($dir);<br />
&nbsp;&nbsp;&nbsp; if ($dl) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while($name = readdir($dl)) {<br />
&nbsp;&nbsp;&nbsp; if (!is_dir($name)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return false;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; } <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; closedir($dl);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return true;<br />
&nbsp;&nbsp;&nbsp; } else return true;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="36044""></a>
  <div class="note">
   <strong class="user">andreas at rueping dot net</strong>
   <a href="#36044" class="date">23-Sep-2003 05:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
function checks if a folder is empty or not. Retruns "true" if it is empty and "false" if it is full with data. Also if the folder doesnt even exist, function returns "true".<br />
<br />
--------------------------------------------------<br />
--------------------------------------------------<br />
<br />
// returns true if folder is empty or not existing<br />
// false if folde is full<br />
<br />
&lt;?<br />
function is_emtpy_folder($folder){<br />
&nbsp;&nbsp;&nbsp; if(is_dir($folder) ){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $handle = opendir($folder);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while( (gettype( $name = readdir($handle)) != "boolean")){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $name_array[] = $name;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach($name_array as $temp)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $folder_content .= $temp;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if($folder_content == "...")<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return true;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return false;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; closedir($handle);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return true; // folder doesnt exist<br />
}<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.glob.html">glob</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.is-executable.html">is_executable</a></div>
 <div class="up"><a href="ref.filesystem.html">Filesystem Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
