<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>The Mongo class</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="mongo.core.html">Core Classes</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="mongo.close.html">Mongo::close</a></div>
 <div class="up"><a href="mongo.core.html">Core Classes</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="class.mongo" class="reference">

 <h1 class="title">The Mongo class</h1>
 

 <div class="partintro"><p class="verinfo">(No version information available, might only be in SVN)</p>
  
  <div class="section" id="mongo.intro">
   <h2 class="title">Introduction</h2>
   <p class="para">
    A connection between PHP and MongoDB.
   </p>
   <p class="para">
    This class is used to create and manage connections. A typical use is:
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Mongo</span><span style="color: #007700">();&nbsp;</span><span style="color: #FF8000">//&nbsp;connect<br /></span><span style="color: #0000BB">$db&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">foo</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;get&nbsp;the&nbsp;database&nbsp;named&nbsp;"foo"<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </p>
   <p class="para">
    See <span class="function"><a href="mongo.construct.html" class="function">Mongo::__construct()</a></span> and the section on
    <a href="mongo.connecting.html" class="link">connecting</a> for more information 
    about creating connections.
   </p>
  </div>
  

  <div class="section" id="mongo.synopsis">
   <h2 class="title">Class synopsis</h2>

   
   <div class="classsynopsis">
    <div class="ooclass"></div>

    
    <div class="classsynopsisinfo">
     <span class="ooclass">
      <b class="classname">Mongo</b>
     </span>
     {</div>
    

    <div class="classsynopsisinfo classsynopsisinfo_comment">/* Constants */</div>
    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">string</span>
      <var class="fieldsynopsis_varname"><a href="class.mongo.html#mongo.constants.version"><var class="varname">VERSION</var></a></var>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">string</span>
      <var class="fieldsynopsis_varname"><a href="class.mongo.html#mongo.constants.defaulthost"><var class="varname">DEFAULT_HOST</var></a></var>
     <span class="initializer"> = &quot;localhost&quot;</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="class.mongo.html#mongo.constants.defaultport"><var class="varname">DEFAULT_PORT</var></a></var>
     <span class="initializer"> = 27017</span>
    ;</div>


    <div class="classsynopsisinfo classsynopsisinfo_comment">/* Fields */</div>
    <div class="fieldsynopsis">
     <span class="modifier">public</span>
     <span class="type">boolean</span>
      <var class="varname">$<var class="varname">connected</var></var>
     <span class="initializer"> = <b><tt>FALSE</tt></b></span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">public</span>
     <span class="type">string</span>
      <var class="varname"><a href="class.mongo.html#mongo.props.status">$<var class="varname">status</var></a></var>
     <span class="initializer"> = <b><tt>NULL</tt></b></span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">protected</span>
     <span class="type">string</span>
      <var class="varname">$<var class="varname">server</var></var>
     <span class="initializer"> = <b><tt>NULL</tt></b></span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">protected</span>
     <span class="type">boolean</span>
      <var class="varname">$<var class="varname">persistent</var></var>
     <span class="initializer"> = <b><tt>NULL</tt></b></span>
    ;</div>


    
    <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
    <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool</span> <span class="methodname"><a href="mongo.close.html" class="methodname">close</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool</span> <span class="methodname"><a href="mongo.connect.html" class="methodname">connect</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">protected</span> <span class="type">bool</span> <span class="methodname"><a href="mongo.connectutil.html" class="methodname">connectUtil</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span>  <span class="methodname"><a href="mongo.construct.html" class="methodname">__construct</a></span>
    ([ <span class="methodparam"><span class="type">string</span> <tt class="parameter">$server</tt><span class="initializer"> = &quot;mongodb://localhost:27017&quot;</span></span>
   [, <span class="methodparam"><span class="type">array</span> <tt class="parameter">$options</tt><span class="initializer"> = array(&quot;connect&quot; =&gt; <b><tt>TRUE</tt></b>)</span></span>
  ]] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname"><a href="mongo.dropdb.html" class="methodname">dropDB</a></span>
    ( <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <tt class="parameter">$db</tt></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">MongoDB</span> <span class="methodname"><a href="mongo.get.html" class="methodname">__get</a></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$dbname</tt></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname"><a href="mongo.gethosts.html" class="methodname">getHosts</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="modifier">static</span> <span class="type">int</span> <span class="methodname"><a href="mongo.getpoolsize.html" class="methodname">getPoolSize</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">string</span> <span class="methodname"><a href="mongo.getslave.html" class="methodname">getSlave</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool</span> <span class="methodname"><a href="mongo.getslaveokay.html" class="methodname">getSlaveOkay</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname"><a href="mongo.listdbs.html" class="methodname">listDBs</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname"><a href="mongo.pooldebug.html" class="methodname">poolDebug</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">MongoCollection</span> <span class="methodname"><a href="mongo.selectcollection.html" class="methodname">selectCollection</a></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$db</tt></span>
   , <span class="methodparam"><span class="type">string</span> <tt class="parameter">$collection</tt></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">MongoDB</span> <span class="methodname"><a href="mongo.selectdb.html" class="methodname">selectDB</a></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$name</tt></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="modifier">static</span> <span class="type">bool</span> <span class="methodname"><a href="mongo.setpoolsize.html" class="methodname">setPoolSize</a></span>
    ( <span class="methodparam"><span class="type">int</span> <tt class="parameter">$size</tt></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool</span> <span class="methodname"><a href="mongo.setslaveokay.html" class="methodname">setSlaveOkay</a></span>
    ([ <span class="methodparam"><span class="type">bool</span> <tt class="parameter">$ok</tt><span class="initializer"> = true</span></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">string</span> <span class="methodname"><a href="mongo.switchslave.html" class="methodname">switchSlave</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">string</span> <span class="methodname"><a href="mongo.tostring.html" class="methodname">__toString</a></span>
    ( <span class="methodparam">void</span>
   )</div>

   }</div>
   

  </div>


  <div class="section">
   <h2 class="title">Predefined Constants</h2>
   <div class="section" id="mongo.constants.types">
    <h2 class="title">Mongo Constants</h2>
    <dl>

     <dt id="mongo.constants.version">
      <span class="term"><b><tt>Mongo::VERSION</tt></b></span>
      <dd>

       <span class="simpara">
        PHP driver version.  May be suffixed with &quot;+&quot; or &quot;-&quot; if it is in-between 
        versions.
       </span>
      </dd>

     </dt>

     <dt id="mongo.constants.defaulthost">
      <span class="term"><b><tt>Mongo::DEFAULT_HOST</tt></b></span>
      <br /><span class="term"><b><tt>&quot;localhost&quot;</tt></b></span>
      <dd>

       <span class="simpara">
        Host to connect to if no host is given.
       </span>
      </dd>

     </dt>

     <dt id="mongo.constants.defaultport">
      <span class="term"><b><tt>Mongo::DEFAULT_PORT</tt></b></span>
      <br /><span class="term"><b><tt>27017</tt></b></span>
      <dd>

       <span class="simpara">
        Port to connect to if no port is given.
       </span>
      </dd>

     </dt>

    </dl>

   </div>
  </div>

  <div class="section">
   <h2 class="title">Fields</h2>
   <dl>

    <dt id="mongo.props.status">
     <span class="term"><var class="varname"><var class="varname">status</var></var></span>
     <dd>

      <span class="simpara">
       If this is a persistent connection, if the connection was created for 
       this object or is being reused.  If this is not a persistent connection,
       this field should be <b><tt>NULL</tt></b>.
      </span>
     </dd>

    </dt>

   </dl>

  </div>

  <div class="section">
   <h2 class="title">See Also</h2>
   <p class="para">
    MongoDB core docs on <a href="http://dochub.mongodb.org/core/connections" class="link external" title="Link : http://dochub.mongodb.org/core/connections">&raquo;&nbsp;connecting</a>.
   </p>
  </div>


 </div>

 



 





 





 











 





 























 





 











 





 











 





 





 



<h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="mongo.close.html">Mongo::close</a> â€” Closes this connection</li><li><a href="mongo.connect.html">Mongo::connect</a> â€” Connects to a database server</li><li><a href="mongo.connectutil.html">Mongo::connectUtil</a> â€” Connects with a database server</li><li><a href="mongo.construct.html">Mongo::__construct</a> â€” Creates a new database connection object</li><li><a href="mongo.dropdb.html">Mongo::dropDB</a> â€” Drops a database [deprecated]</li><li><a href="mongo.get.html">Mongo::__get</a> â€” Gets a database</li><li><a href="mongo.gethosts.html">Mongo::getHosts</a> â€” Updates status for all hosts associated with this</li><li><a href="mongo.getpoolsize.html">Mongo::getPoolSize</a> â€” Get pool size for connection pools</li><li><a href="mongo.getslave.html">Mongo::getSlave</a> â€” Returns the address being used by this for slaveOkay reads</li><li><a href="mongo.getslaveokay.html">Mongo::getSlaveOkay</a> â€” Get slaveOkay setting for this connection</li><li><a href="mongo.listdbs.html">Mongo::listDBs</a> â€” Lists all of the databases available.</li><li><a href="mongo.pooldebug.html">Mongo::poolDebug</a> â€” Returns information about all connection pools.</li><li><a href="mongo.selectcollection.html">Mongo::selectCollection</a> â€” Gets a database collection</li><li><a href="mongo.selectdb.html">Mongo::selectDB</a> â€” Gets a database</li><li><a href="mongo.setpoolsize.html">Mongo::setPoolSize</a> â€” Set the size for future connection pools.</li><li><a href="mongo.setslaveokay.html">Mongo::setSlaveOkay</a> â€” Change slaveOkay setting for this connection</li><li><a href="mongo.switchslave.html">Mongo::switchSlave</a> â€” Choose a new slave for slaveOkay reads</li><li><a href="mongo.tostring.html">Mongo::__toString</a> â€” String representation of this connection</li></ul>
</div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="102349""></a>
  <div class="note">
   <strong class="user">Fausto Vanin @faustovanin</strong>
   <a href="#102349" class="date">09-Feb-2011 07:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For those who are concerned on parsing JSON associative arrays from queries, this class could be useful. You just have to extend it and call parent constructor and it gets the job done.<br />
It automatically initializes all your object attributes getting values from the array.<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">#doc<br />
&nbsp;&nbsp;&nbsp; #&nbsp; &nbsp; classname:&nbsp; &nbsp; MongoClass<br />
&nbsp;&nbsp;&nbsp; #&nbsp; &nbsp; scope:&nbsp; &nbsp; &nbsp; &nbsp; PUBLIC<br />
&nbsp;&nbsp;&nbsp; #<br />
&nbsp;&nbsp;&nbsp; #/doc<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">class </span><span class="default">MongoClass<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">#&nbsp; &nbsp; internal variables<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">protected </span><span class="default">$id</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">#&nbsp; &nbsp; Constructor<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">__construct </span><span class="keyword">(</span><span class="default">$attList </span><span class="keyword">= array())<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$reflection </span><span class="keyword">= new </span><span class="default">ReflectionObject</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$attList </span><span class="keyword">as </span><span class="default">$attName </span><span class="keyword">=&gt; </span><span class="default">$attValue</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$attObj </span><span class="keyword">= </span><span class="default">$reflection</span><span class="keyword">-&gt;</span><span class="default">getProperty</span><span class="keyword">(</span><span class="default">$attName</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$attObj</span><span class="keyword">-&gt;</span><span class="default">setAccessible</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$attObj</span><span class="keyword">-&gt;</span><span class="default">setValue</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">, </span><span class="default">$attValue</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">###&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">###<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">class </span><span class="default">A </span><span class="keyword">extends </span><span class="default">MongoClass </span><span class="keyword">{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; private </span><span class="default">$name</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; private </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; private </span><span class="default">$weight</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$attList</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">parent</span><span class="keyword">::</span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$attList</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$attList </span><span class="keyword">= array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"name" </span><span class="keyword">=&gt; </span><span class="string">"Beer"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"value" </span><span class="keyword">=&gt; </span><span class="string">"Delicious"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"weight" </span><span class="keyword">=&gt; </span><span class="default">15.2<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">); </span><span class="comment">//This is your JSON object associative aray<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$a </span><span class="keyword">= new </span><span class="default">A</span><span class="keyword">(</span><span class="default">$attList</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101736""></a>
  <div class="note">
   <strong class="user">markh789 at gmail dot com</strong>
   <a href="#101736" class="date">07-Jan-2011 05:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a simple connection function :)<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">MongoConnect</span><span class="keyword">(</span><span class="default">$username</span><span class="keyword">, </span><span class="default">$password</span><span class="keyword">, </span><span class="default">$database</span><span class="keyword">, </span><span class="default">$host</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$con </span><span class="keyword">= new </span><span class="default">Mongo</span><span class="keyword">(</span><span class="string">"mongodb://</span><span class="keyword">{</span><span class="default">$username</span><span class="keyword">}</span><span class="string">:</span><span class="keyword">{</span><span class="default">$password</span><span class="keyword">}</span><span class="string">@</span><span class="keyword">{</span><span class="default">$host</span><span class="keyword">}</span><span class="string">"</span><span class="keyword">); </span><span class="comment">// Connect to Mongo Server<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$db </span><span class="keyword">= </span><span class="default">$con</span><span class="keyword">-&gt;</span><span class="default">selectDB</span><span class="keyword">(</span><span class="default">$database</span><span class="keyword">); </span><span class="comment">// Connect to Database<br />
</span><span class="keyword">}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="mongo.core.html">Core Classes</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="mongo.close.html">Mongo::close</a></div>
 <div class="up"><a href="mongo.core.html">Core Classes</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
