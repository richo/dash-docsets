<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Calculates the crc32 polynomial of a string</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.count-chars.html">count_chars</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.crypt.html">crypt</a></div>
 <div class="up"><a href="ref.strings.html">String Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.crc32" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">crc32</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.0.1, PHP 5)</p><p class="refpurpose"><span class="refname">crc32</span> &mdash; <span class="dc-title">Calculates the crc32 polynomial of a string</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.crc32-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">int</span> <span class="methodname"><b>crc32</b></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$str</tt></span>
   )</div>

  <p class="para rdfs-comment">
   Generates the cyclic redundancy checksum polynomial of 32-bit
   lengths of the <i><tt class="parameter">str</tt></i>. This is usually used
   to validate the integrity of data being transmitted.
  </p>
  <p class="para">
   Because PHP&#039;s integer type is signed, and many crc32 checksums will
   result in negative integers, you need to use the &quot;%u&quot; formatter of
   <span class="function"><a href="function.sprintf.html" class="function">sprintf()</a></span> or <span class="function"><a href="function.printf.html" class="function">printf()</a></span> to get
   the string representation of the unsigned crc32 checksum.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.crc32-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><i><tt class="parameter">str</tt></i></span>
     <dd>

      <p class="para">
       The data.
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.crc32-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns the crc32 checksum of <i><tt class="parameter">str</tt></i> as an integer.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.crc32-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   <div class="example" id="example-4371">
    <p><b>Example #1 Displaying a crc32 checksum</b></p>
    <div class="example-contents"><p>
     This example shows how to print a converted checksum with the
     <span class="function"><a href="function.printf.html" class="function">printf()</a></span> function:
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$checksum&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">crc32</span><span style="color: #007700">(</span><span style="color: #DD0000">"The&nbsp;quick&nbsp;brown&nbsp;fox&nbsp;jumped&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog."</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"%u\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$checksum</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.crc32-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.md5.html" class="function" rel="rdfs-seeAlso">md5()</a> - Calculate the md5 hash of a string</span></li>
    <li class="member"><span class="function"><a href="function.sha1.html" class="function" rel="rdfs-seeAlso">sha1()</a> - Calculate the sha1 hash of a string</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="106672""></a>
  <div class="note">
   <strong class="user">alban dot lopez+php [ at ] gmail dot com</strong>
   <a href="#106672" class="date">26-Nov-2011 06:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I made this code to verify Transmition with Vantage Pro2 ( weather station ) based on CRC16-CCITT standard.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// CRC16-CCITT validator<br />
</span><span class="default">$crc_table </span><span class="keyword">= array(<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">0x0</span><span class="keyword">,&nbsp; </span><span class="default">0x1021</span><span class="keyword">,&nbsp; </span><span class="default">0x2042</span><span class="keyword">,&nbsp; </span><span class="default">0x3063</span><span class="keyword">,&nbsp; </span><span class="default">0x4084</span><span class="keyword">,&nbsp; </span><span class="default">0x50a5</span><span class="keyword">,&nbsp; </span><span class="default">0x60c6</span><span class="keyword">,&nbsp; </span><span class="default">0x70e7</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0x8108</span><span class="keyword">,&nbsp; </span><span class="default">0x9129</span><span class="keyword">,&nbsp; </span><span class="default">0xa14a</span><span class="keyword">,&nbsp; </span><span class="default">0xb16b</span><span class="keyword">,&nbsp; </span><span class="default">0xc18c</span><span class="keyword">,&nbsp; </span><span class="default">0xd1ad</span><span class="keyword">,&nbsp; </span><span class="default">0xe1ce</span><span class="keyword">,&nbsp; </span><span class="default">0xf1ef</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0x1231</span><span class="keyword">,&nbsp; </span><span class="default">0x210</span><span class="keyword">,&nbsp; </span><span class="default">0x3273</span><span class="keyword">,&nbsp; </span><span class="default">0x2252</span><span class="keyword">,&nbsp; </span><span class="default">0x52b5</span><span class="keyword">,&nbsp; </span><span class="default">0x4294</span><span class="keyword">,&nbsp; </span><span class="default">0x72f7</span><span class="keyword">,&nbsp; </span><span class="default">0x62d6</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0x9339</span><span class="keyword">,&nbsp; </span><span class="default">0x8318</span><span class="keyword">,&nbsp; </span><span class="default">0xb37b</span><span class="keyword">,&nbsp; </span><span class="default">0xa35a</span><span class="keyword">,&nbsp; </span><span class="default">0xd3bd</span><span class="keyword">,&nbsp; </span><span class="default">0xc39c</span><span class="keyword">,&nbsp; </span><span class="default">0xf3ff</span><span class="keyword">,&nbsp; </span><span class="default">0xe3de</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0x2462</span><span class="keyword">,&nbsp; </span><span class="default">0x3443</span><span class="keyword">,&nbsp; </span><span class="default">0x420</span><span class="keyword">,&nbsp; </span><span class="default">0x1401</span><span class="keyword">,&nbsp; </span><span class="default">0x64e6</span><span class="keyword">,&nbsp; </span><span class="default">0x74c7</span><span class="keyword">,&nbsp; </span><span class="default">0x44a4</span><span class="keyword">,&nbsp; </span><span class="default">0x5485</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0xa56a</span><span class="keyword">,&nbsp; </span><span class="default">0xb54b</span><span class="keyword">,&nbsp; </span><span class="default">0x8528</span><span class="keyword">,&nbsp; </span><span class="default">0x9509</span><span class="keyword">,&nbsp; </span><span class="default">0xe5ee</span><span class="keyword">,&nbsp; </span><span class="default">0xf5cf</span><span class="keyword">,&nbsp; </span><span class="default">0xc5ac</span><span class="keyword">,&nbsp; </span><span class="default">0xd58d</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0x3653</span><span class="keyword">,&nbsp; </span><span class="default">0x2672</span><span class="keyword">,&nbsp; </span><span class="default">0x1611</span><span class="keyword">,&nbsp; </span><span class="default">0x630</span><span class="keyword">,&nbsp; </span><span class="default">0x76d7</span><span class="keyword">,&nbsp; </span><span class="default">0x66f6</span><span class="keyword">,&nbsp; </span><span class="default">0x5695</span><span class="keyword">,&nbsp; </span><span class="default">0x46b4</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0xb75b</span><span class="keyword">,&nbsp; </span><span class="default">0xa77a</span><span class="keyword">,&nbsp; </span><span class="default">0x9719</span><span class="keyword">,&nbsp; </span><span class="default">0x8738</span><span class="keyword">,&nbsp; </span><span class="default">0xf7df</span><span class="keyword">,&nbsp; </span><span class="default">0xe7fe</span><span class="keyword">,&nbsp; </span><span class="default">0xd79d</span><span class="keyword">,&nbsp; </span><span class="default">0xc7bc</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0x48c4</span><span class="keyword">,&nbsp; </span><span class="default">0x58e5</span><span class="keyword">,&nbsp; </span><span class="default">0x6886</span><span class="keyword">,&nbsp; </span><span class="default">0x78a7</span><span class="keyword">,&nbsp; </span><span class="default">0x840</span><span class="keyword">,&nbsp; </span><span class="default">0x1861</span><span class="keyword">,&nbsp; </span><span class="default">0x2802</span><span class="keyword">,&nbsp; </span><span class="default">0x3823</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0xc9cc</span><span class="keyword">,&nbsp; </span><span class="default">0xd9ed</span><span class="keyword">,&nbsp; </span><span class="default">0xe98e</span><span class="keyword">,&nbsp; </span><span class="default">0xf9af</span><span class="keyword">,&nbsp; </span><span class="default">0x8948</span><span class="keyword">,&nbsp; </span><span class="default">0x9969</span><span class="keyword">,&nbsp; </span><span class="default">0xa90a</span><span class="keyword">,&nbsp; </span><span class="default">0xb92b</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0x5af5</span><span class="keyword">,&nbsp; </span><span class="default">0x4ad4</span><span class="keyword">,&nbsp; </span><span class="default">0x7ab7</span><span class="keyword">,&nbsp; </span><span class="default">0x6a96</span><span class="keyword">,&nbsp; </span><span class="default">0x1a71</span><span class="keyword">,&nbsp; </span><span class="default">0xa50</span><span class="keyword">,&nbsp; </span><span class="default">0x3a33</span><span class="keyword">,&nbsp; </span><span class="default">0x2a12</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0xdbfd</span><span class="keyword">,&nbsp; </span><span class="default">0xcbdc</span><span class="keyword">,&nbsp; </span><span class="default">0xfbbf</span><span class="keyword">,&nbsp; </span><span class="default">0xeb9e</span><span class="keyword">,&nbsp; </span><span class="default">0x9b79</span><span class="keyword">,&nbsp; </span><span class="default">0x8b58</span><span class="keyword">,&nbsp; </span><span class="default">0xbb3b</span><span class="keyword">,&nbsp; </span><span class="default">0xab1a</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0x6ca6</span><span class="keyword">,&nbsp; </span><span class="default">0x7c87</span><span class="keyword">,&nbsp; </span><span class="default">0x4ce4</span><span class="keyword">,&nbsp; </span><span class="default">0x5cc5</span><span class="keyword">,&nbsp; </span><span class="default">0x2c22</span><span class="keyword">,&nbsp; </span><span class="default">0x3c03</span><span class="keyword">,&nbsp; </span><span class="default">0xc60</span><span class="keyword">,&nbsp; </span><span class="default">0x1c41</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0xedae</span><span class="keyword">,&nbsp; </span><span class="default">0xfd8f</span><span class="keyword">,&nbsp; </span><span class="default">0xcdec</span><span class="keyword">,&nbsp; </span><span class="default">0xddcd</span><span class="keyword">,&nbsp; </span><span class="default">0xad2a</span><span class="keyword">,&nbsp; </span><span class="default">0xbd0b</span><span class="keyword">,&nbsp; </span><span class="default">0x8d68</span><span class="keyword">,&nbsp; </span><span class="default">0x9d49</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0x7e97</span><span class="keyword">,&nbsp; </span><span class="default">0x6eb6</span><span class="keyword">,&nbsp; </span><span class="default">0x5ed5</span><span class="keyword">,&nbsp; </span><span class="default">0x4ef4</span><span class="keyword">,&nbsp; </span><span class="default">0x3e13</span><span class="keyword">,&nbsp; </span><span class="default">0x2e32</span><span class="keyword">,&nbsp; </span><span class="default">0x1e51</span><span class="keyword">,&nbsp; </span><span class="default">0xe70</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0xff9f</span><span class="keyword">,&nbsp; </span><span class="default">0xefbe</span><span class="keyword">,&nbsp; </span><span class="default">0xdfdd</span><span class="keyword">,&nbsp; </span><span class="default">0xcffc</span><span class="keyword">,&nbsp; </span><span class="default">0xbf1b</span><span class="keyword">,&nbsp; </span><span class="default">0xaf3a</span><span class="keyword">,&nbsp; </span><span class="default">0x9f59</span><span class="keyword">,&nbsp; </span><span class="default">0x8f78</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0x9188</span><span class="keyword">,&nbsp; </span><span class="default">0x81a9</span><span class="keyword">,&nbsp; </span><span class="default">0xb1ca</span><span class="keyword">,&nbsp; </span><span class="default">0xa1eb</span><span class="keyword">,&nbsp; </span><span class="default">0xd10c</span><span class="keyword">,&nbsp; </span><span class="default">0xc12d</span><span class="keyword">,&nbsp; </span><span class="default">0xf14e</span><span class="keyword">,&nbsp; </span><span class="default">0xe16f</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0x1080</span><span class="keyword">,&nbsp; </span><span class="default">0xa1</span><span class="keyword">,&nbsp; </span><span class="default">0x30c2</span><span class="keyword">,&nbsp; </span><span class="default">0x20e3</span><span class="keyword">,&nbsp; </span><span class="default">0x5004</span><span class="keyword">,&nbsp; </span><span class="default">0x4025</span><span class="keyword">,&nbsp; </span><span class="default">0x7046</span><span class="keyword">,&nbsp; </span><span class="default">0x6067</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0x83b9</span><span class="keyword">,&nbsp; </span><span class="default">0x9398</span><span class="keyword">,&nbsp; </span><span class="default">0xa3fb</span><span class="keyword">,&nbsp; </span><span class="default">0xb3da</span><span class="keyword">,&nbsp; </span><span class="default">0xc33d</span><span class="keyword">,&nbsp; </span><span class="default">0xd31c</span><span class="keyword">,&nbsp; </span><span class="default">0xe37f</span><span class="keyword">,&nbsp; </span><span class="default">0xf35e</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0x2b1</span><span class="keyword">,&nbsp; </span><span class="default">0x1290</span><span class="keyword">,&nbsp; </span><span class="default">0x22f3</span><span class="keyword">,&nbsp; </span><span class="default">0x32d2</span><span class="keyword">,&nbsp; </span><span class="default">0x4235</span><span class="keyword">,&nbsp; </span><span class="default">0x5214</span><span class="keyword">,&nbsp; </span><span class="default">0x6277</span><span class="keyword">,&nbsp; </span><span class="default">0x7256</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0xb5ea</span><span class="keyword">,&nbsp; </span><span class="default">0xa5cb</span><span class="keyword">,&nbsp; </span><span class="default">0x95a8</span><span class="keyword">,&nbsp; </span><span class="default">0x8589</span><span class="keyword">,&nbsp; </span><span class="default">0xf56e</span><span class="keyword">,&nbsp; </span><span class="default">0xe54f</span><span class="keyword">,&nbsp; </span><span class="default">0xd52c</span><span class="keyword">,&nbsp; </span><span class="default">0xc50d</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0x34e2</span><span class="keyword">,&nbsp; </span><span class="default">0x24c3</span><span class="keyword">,&nbsp; </span><span class="default">0x14a0</span><span class="keyword">,&nbsp; </span><span class="default">0x481</span><span class="keyword">,&nbsp; </span><span class="default">0x7466</span><span class="keyword">,&nbsp; </span><span class="default">0x6447</span><span class="keyword">,&nbsp; </span><span class="default">0x5424</span><span class="keyword">,&nbsp; </span><span class="default">0x4405</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0xa7db</span><span class="keyword">,&nbsp; </span><span class="default">0xb7fa</span><span class="keyword">,&nbsp; </span><span class="default">0x8799</span><span class="keyword">,&nbsp; </span><span class="default">0x97b8</span><span class="keyword">,&nbsp; </span><span class="default">0xe75f</span><span class="keyword">,&nbsp; </span><span class="default">0xf77e</span><span class="keyword">,&nbsp; </span><span class="default">0xc71d</span><span class="keyword">,&nbsp; </span><span class="default">0xd73c</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0x26d3</span><span class="keyword">,&nbsp; </span><span class="default">0x36f2</span><span class="keyword">,&nbsp; </span><span class="default">0x691</span><span class="keyword">,&nbsp; </span><span class="default">0x16b0</span><span class="keyword">,&nbsp; </span><span class="default">0x6657</span><span class="keyword">,&nbsp; </span><span class="default">0x7676</span><span class="keyword">,&nbsp; </span><span class="default">0x4615</span><span class="keyword">,&nbsp; </span><span class="default">0x5634</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0xd94c</span><span class="keyword">,&nbsp; </span><span class="default">0xc96d</span><span class="keyword">,&nbsp; </span><span class="default">0xf90e</span><span class="keyword">,&nbsp; </span><span class="default">0xe92f</span><span class="keyword">,&nbsp; </span><span class="default">0x99c8</span><span class="keyword">,&nbsp; </span><span class="default">0x89e9</span><span class="keyword">,&nbsp; </span><span class="default">0xb98a</span><span class="keyword">,&nbsp; </span><span class="default">0xa9ab</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0x5844</span><span class="keyword">,&nbsp; </span><span class="default">0x4865</span><span class="keyword">,&nbsp; </span><span class="default">0x7806</span><span class="keyword">,&nbsp; </span><span class="default">0x6827</span><span class="keyword">,&nbsp; </span><span class="default">0x18c0</span><span class="keyword">,&nbsp; </span><span class="default">0x8e1</span><span class="keyword">,&nbsp; </span><span class="default">0x3882</span><span class="keyword">,&nbsp; </span><span class="default">0x28a3</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0xcb7d</span><span class="keyword">,&nbsp; </span><span class="default">0xdb5c</span><span class="keyword">,&nbsp; </span><span class="default">0xeb3f</span><span class="keyword">,&nbsp; </span><span class="default">0xfb1e</span><span class="keyword">,&nbsp; </span><span class="default">0x8bf9</span><span class="keyword">,&nbsp; </span><span class="default">0x9bd8</span><span class="keyword">,&nbsp; </span><span class="default">0xabbb</span><span class="keyword">,&nbsp; </span><span class="default">0xbb9a</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0x4a75</span><span class="keyword">,&nbsp; </span><span class="default">0x5a54</span><span class="keyword">,&nbsp; </span><span class="default">0x6a37</span><span class="keyword">,&nbsp; </span><span class="default">0x7a16</span><span class="keyword">,&nbsp; </span><span class="default">0xaf1</span><span class="keyword">,&nbsp; </span><span class="default">0x1ad0</span><span class="keyword">,&nbsp; </span><span class="default">0x2ab3</span><span class="keyword">,&nbsp; </span><span class="default">0x3a92</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0xfd2e</span><span class="keyword">,&nbsp; </span><span class="default">0xed0f</span><span class="keyword">,&nbsp; </span><span class="default">0xdd6c</span><span class="keyword">,&nbsp; </span><span class="default">0xcd4d</span><span class="keyword">,&nbsp; </span><span class="default">0xbdaa</span><span class="keyword">,&nbsp; </span><span class="default">0xad8b</span><span class="keyword">,&nbsp; </span><span class="default">0x9de8</span><span class="keyword">,&nbsp; </span><span class="default">0x8dc9</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0x7c26</span><span class="keyword">,&nbsp; </span><span class="default">0x6c07</span><span class="keyword">,&nbsp; </span><span class="default">0x5c64</span><span class="keyword">,&nbsp; </span><span class="default">0x4c45</span><span class="keyword">,&nbsp; </span><span class="default">0x3ca2</span><span class="keyword">,&nbsp; </span><span class="default">0x2c83</span><span class="keyword">,&nbsp; </span><span class="default">0x1ce0</span><span class="keyword">,&nbsp; </span><span class="default">0xcc1</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0xef1f</span><span class="keyword">,&nbsp; </span><span class="default">0xff3e</span><span class="keyword">,&nbsp; </span><span class="default">0xcf5d</span><span class="keyword">,&nbsp; </span><span class="default">0xdf7c</span><span class="keyword">,&nbsp; </span><span class="default">0xaf9b</span><span class="keyword">,&nbsp; </span><span class="default">0xbfba</span><span class="keyword">,&nbsp; </span><span class="default">0x8fd9</span><span class="keyword">,&nbsp; </span><span class="default">0x9ff8</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0x6e17</span><span class="keyword">,&nbsp; </span><span class="default">0x7e36</span><span class="keyword">,&nbsp; </span><span class="default">0x4e55</span><span class="keyword">,&nbsp; </span><span class="default">0x5e74</span><span class="keyword">,&nbsp; </span><span class="default">0x2e93</span><span class="keyword">,&nbsp; </span><span class="default">0x3eb2</span><span class="keyword">,&nbsp; </span><span class="default">0xed1</span><span class="keyword">,&nbsp; </span><span class="default">0x1ef0</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$test </span><span class="keyword">= </span><span class="default">chr</span><span class="keyword">(</span><span class="default">0xC6</span><span class="keyword">).</span><span class="default">chr</span><span class="keyword">(</span><span class="default">0xCE</span><span class="keyword">).</span><span class="default">chr</span><span class="keyword">(</span><span class="default">0xA2</span><span class="keyword">).</span><span class="default">chr</span><span class="keyword">(</span><span class="default">0x03</span><span class="keyword">); </span><span class="comment">// CRC16-CCITT = 0xE2B4<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">genCRC </span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; <br />
function </span><span class="default">genCRC </span><span class="keyword">(&amp;</span><span class="default">$ptr</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$crc </span><span class="keyword">= </span><span class="default">0x0000</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$crc_table </span><span class="keyword">= </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'crc_table'</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$ptr</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$crc </span><span class="keyword">=&nbsp; </span><span class="default">$crc_table</span><span class="keyword">[((</span><span class="default">$crc</span><span class="keyword">&gt;&gt;</span><span class="default">8</span><span class="keyword">) ^ </span><span class="default">ord</span><span class="keyword">(</span><span class="default">$ptr</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]))] ^ ((</span><span class="default">$crc</span><span class="keyword">&lt;&lt;</span><span class="default">8</span><span class="keyword">) &amp; </span><span class="default">0x00FFFF</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$crc</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106216""></a>
  <div class="note">
   <strong class="user">arris at zsolttech dot com</strong>
   <a href="#106216" class="date">19-Oct-2011 05:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
not found anywhere crc64 based on <a href="http://bioinfadmin.cs.ucl.ac.uk/downloads/crc64/crc64.c ." rel="nofollow" target="_blank">http://bioinfadmin.cs.ucl.ac.uk/downloads/crc64/crc64.c .</a><br />
<br />
(use gmp module)<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">/* OLDCRC */<br />
</span><span class="default">define</span><span class="keyword">(</span><span class="string">'POLY64REV'</span><span class="keyword">, </span><span class="string">"d800000000000000"</span><span class="keyword">);<br />
</span><span class="default">define</span><span class="keyword">(</span><span class="string">'INITIALCRC'</span><span class="keyword">, </span><span class="string">"0000000000000000"</span><span class="keyword">);<br />
</span><span class="default">define</span><span class="keyword">(</span><span class="string">'TABLELEN'</span><span class="keyword">, </span><span class="default">256</span><span class="keyword">);<br />
</span><span class="comment">/* NEWCRC */<br />
// define('POLY64REV', "95AC9329AC4BC9B5");<br />
// define('INITIALCRC', "FFFFFFFFFFFFFFFF");<br />
<br />
</span><span class="keyword">if(</span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">'gmp_init'</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; class </span><span class="default">CRC64</span><span class="keyword">{<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; private static </span><span class="default">$CRCTable </span><span class="keyword">= array();<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; public static function </span><span class="default">encode</span><span class="keyword">(</span><span class="default">$seq</span><span class="keyword">){<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$crc </span><span class="keyword">= </span><span class="default">gmp_init</span><span class="keyword">(</span><span class="default">INITIALCRC</span><span class="keyword">, </span><span class="default">16</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$init </span><span class="keyword">= </span><span class="default">FALSE</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$poly64rev </span><span class="keyword">= </span><span class="default">gmp_init</span><span class="keyword">(</span><span class="default">POLY64REV</span><span class="keyword">, </span><span class="default">16</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">$init</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$init </span><span class="keyword">= </span><span class="default">TRUE</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">TABLELEN</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$part </span><span class="keyword">= </span><span class="default">gmp_init</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for (</span><span class="default">$j </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$j </span><span class="keyword">&lt; </span><span class="default">8</span><span class="keyword">; </span><span class="default">$j</span><span class="keyword">++)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">gmp_strval</span><span class="keyword">(</span><span class="default">gmp_and</span><span class="keyword">(</span><span class="default">$part</span><span class="keyword">, </span><span class="string">"0x1"</span><span class="keyword">)) != </span><span class="string">"0"</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// if (gmp_testbit($part, 1)){ /* PHP 5 &gt;= 5.3.0, untested */<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$part </span><span class="keyword">= </span><span class="default">gmp_xor</span><span class="keyword">(</span><span class="default">gmp_div_q</span><span class="keyword">(</span><span class="default">$part</span><span class="keyword">, </span><span class="string">"2"</span><span class="keyword">), </span><span class="default">$poly64rev</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$part </span><span class="keyword">= </span><span class="default">gmp_div_q</span><span class="keyword">(</span><span class="default">$part</span><span class="keyword">, </span><span class="string">"2"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">$CRCTable</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">$part</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for(</span><span class="default">$k </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$k </span><span class="keyword">&lt; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$seq</span><span class="keyword">); </span><span class="default">$k</span><span class="keyword">++){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp_gmp_val </span><span class="keyword">= </span><span class="default">gmp_init</span><span class="keyword">(</span><span class="default">ord</span><span class="keyword">(</span><span class="default">$seq</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">]), </span><span class="default">10</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tableindex </span><span class="keyword">= </span><span class="default">gmp_xor</span><span class="keyword">(</span><span class="default">gmp_and</span><span class="keyword">(</span><span class="default">$crc</span><span class="keyword">, </span><span class="string">"0xff"</span><span class="keyword">), </span><span class="default">$tmp_gmp_val</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$crc </span><span class="keyword">= </span><span class="default">gmp_div_q</span><span class="keyword">(</span><span class="default">$crc</span><span class="keyword">, </span><span class="string">"256"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$crc </span><span class="keyword">= </span><span class="default">gmp_xor</span><span class="keyword">(</span><span class="default">$crc</span><span class="keyword">, </span><span class="default">self</span><span class="keyword">::</span><span class="default">$CRCTable</span><span class="keyword">[</span><span class="default">gmp_strval</span><span class="keyword">(</span><span class="default">$tableindex</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">)]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$res </span><span class="keyword">= </span><span class="default">gmp_strval</span><span class="keyword">(</span><span class="default">$crc</span><span class="keyword">, </span><span class="default">16</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$res</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
} else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; die(</span><span class="string">"Please install php-gmp package!!!"</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105703""></a>
  <div class="note">
   <strong class="user">sukitsupaluk at hotmail dot com</strong>
   <a href="#105703" class="date">08-Sep-2011 03:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
small sample convert crc32 to character map<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">khash</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; static </span><span class="default">$map</span><span class="keyword">=</span><span class="string">"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$hash</span><span class="keyword">=</span><span class="default">crc32</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">)+</span><span class="default">0x100000000</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; do {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">$map</span><span class="keyword">[</span><span class="default">31</span><span class="keyword">+ (</span><span class="default">$hash </span><span class="keyword">% </span><span class="default">31</span><span class="keyword">)] . </span><span class="default">$str</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$hash </span><span class="keyword">/= </span><span class="default">31</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; } while(</span><span class="default">$hash </span><span class="keyword">&gt;= </span><span class="default">1</span><span class="keyword">);&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$str</span><span class="keyword">;<br />
}<br />
</span><span class="default">$test</span><span class="keyword">= array(</span><span class="default">null</span><span class="keyword">,</span><span class="default">TRUE</span><span class="keyword">,</span><span class="default">FALSE</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="string">"0"</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">,</span><span class="string">"1"</span><span class="keyword">,</span><span class="string">"2"</span><span class="keyword">,</span><span class="string">"3"</span><span class="keyword">,</span><span class="string">"ab"</span><span class="keyword">,</span><span class="string">"abc"</span><span class="keyword">,</span><span class="string">"abcd"</span><span class="keyword">,</span><span class="string">"abcde"</span><span class="keyword">,</span><span class="string">"abcdefoo"</span><span class="keyword">);<br />
</span><span class="default">$out </span><span class="keyword">= array();<br />
foreach(</span><span class="default">$test </span><span class="keyword">as </span><span class="default">$s</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$out</span><span class="keyword">[]=</span><span class="default">khash</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">).</span><span class="string">": "</span><span class="keyword">. </span><span class="default">$s</span><span class="keyword">;<br />
}<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$out</span><span class="keyword">);<br />
<br />
</span><span class="comment">/*<br />
output:<br />
array<br />
&nbsp; 0 =&gt; string 'zVvOYTv: ' (length=9)<br />
&nbsp; 1 =&gt; string 'xKDKKL8: 1' (length=10)<br />
&nbsp; 2 =&gt; string 'zVvOYTv: ' (length=9)<br />
&nbsp; 3 =&gt; string 'zOKCQxh: 0' (length=10)<br />
&nbsp; 4 =&gt; string 'zOKCQxh: 0' (length=10)<br />
&nbsp; 5 =&gt; string 'xKDKKL8: 1' (length=10)<br />
&nbsp; 6 =&gt; string 'xKDKKL8: 1' (length=10)<br />
&nbsp; 7 =&gt; string 'AFSzIAO: 2' (length=10)<br />
&nbsp; 8 =&gt; string 'BXGSvQJ: 3' (length=10)<br />
&nbsp; 9 =&gt; string 'xZWOQSu: ab' (length=11)<br />
&nbsp; 10 =&gt; string 'AVAwHOR: abc' (length=12)<br />
&nbsp; 11 =&gt; string 'zKASNE1: abcd' (length=13)<br />
&nbsp; 12 =&gt; string 'xLCTOV7: abcde' (length=14)<br />
&nbsp; 13 =&gt; string 'zQLzKMt: abcdefoo' (length=17)<br />
<br />
*/<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100060""></a>
  <div class="note">
   <strong class="user">chernyshevsky at hotmail dot com</strong>
   <a href="#100060" class="date">22-Sep-2010 03:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The crc32_combine() function provided by petteri at qred dot fi has a bug that causes an infinite loop, a shift operation on a 32-bit signed int might never reach zero. Replacing the function gf2_matrix_times() with the following seems to fix it:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">gf2_matrix_times</span><span class="keyword">(</span><span class="default">$mat</span><span class="keyword">, </span><span class="default">$vec</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$sum</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; while (</span><span class="default">$vec</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$vec </span><span class="keyword">&amp; </span><span class="default">1</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sum </span><span class="keyword">^= </span><span class="default">$mat</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$vec </span><span class="keyword">= (</span><span class="default">$vec </span><span class="keyword">&gt;&gt; </span><span class="default">1</span><span class="keyword">) &amp; </span><span class="default">0x7FFFFFFF</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">++;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$sum</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Otherwise, it's probably the best solution if you can't use hash_file(). Using a 1meg read buffer, the function only takes twice as long to process a 300meg files than hash_file() in my test.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99939""></a>
  <div class="note">
   <strong class="user">gabri dot ns at gmail dot com</strong>
   <a href="#99939" class="date">15-Sep-2010 10:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
if you are looking for a fast function to hash a file, take a look at<br />
<a href="http://www.php.net/manual/en/function.hash-file.php" rel="nofollow" target="_blank">http://www.php.net/manual/en/function.hash-file.php</a><br />
this is crc32 file checker based on a CRC32 guide<br />
it have performance at ~ 625 KB/s on my 2.2GHz Turion<br />
far slower than hash_file('crc32b','filename.ext')<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">crc32_file </span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp; </span><span class="default">$f </span><span class="keyword">= @</span><span class="default">fopen</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">,</span><span class="string">'rb'</span><span class="keyword">);<br />
&nbsp;&nbsp; if (!</span><span class="default">$f</span><span class="keyword">) return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; <br />
&nbsp;&nbsp; static </span><span class="default">$CRC32Table</span><span class="keyword">, </span><span class="default">$Reflect8Table</span><span class="keyword">;<br />
&nbsp;&nbsp; if (!isset(</span><span class="default">$CRC32Table</span><span class="keyword">))<br />
&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$Polynomial </span><span class="keyword">= </span><span class="default">0x04c11db7</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$topBit </span><span class="keyword">= </span><span class="default">1 </span><span class="keyword">&lt;&lt; </span><span class="default">31</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp;&nbsp; for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">256</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) <br />
&nbsp;&nbsp; &nbsp;&nbsp; { <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$remainder </span><span class="keyword">= </span><span class="default">$i </span><span class="keyword">&lt;&lt; </span><span class="default">24</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; for (</span><span class="default">$j </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$j </span><span class="keyword">&lt; </span><span class="default">8</span><span class="keyword">; </span><span class="default">$j</span><span class="keyword">++)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$remainder </span><span class="keyword">&amp; </span><span class="default">$topBit</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$remainder </span><span class="keyword">= (</span><span class="default">$remainder </span><span class="keyword">&lt;&lt; </span><span class="default">1</span><span class="keyword">) ^ </span><span class="default">$Polynomial</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else </span><span class="default">$remainder </span><span class="keyword">= </span><span class="default">$remainder </span><span class="keyword">&lt;&lt; </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$CRC32Table</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">$remainder</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; if (isset(</span><span class="default">$Reflect8Table</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">])) continue;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_pad</span><span class="keyword">(</span><span class="default">decbin</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">), </span><span class="default">8</span><span class="keyword">, </span><span class="string">'0'</span><span class="keyword">, </span><span class="default">STR_PAD_LEFT</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$num </span><span class="keyword">= </span><span class="default">bindec</span><span class="keyword">(</span><span class="default">strrev</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$Reflect8Table</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">$num</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$Reflect8Table</span><span class="keyword">[</span><span class="default">$num</span><span class="keyword">] = </span><span class="default">$i</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp; <br />
&nbsp;&nbsp; </span><span class="default">$remainder </span><span class="keyword">= </span><span class="default">0xffffffff</span><span class="keyword">;<br />
&nbsp;&nbsp; while (</span><span class="default">$data </span><span class="keyword">= </span><span class="default">fread</span><span class="keyword">(</span><span class="default">$f</span><span class="keyword">,</span><span class="default">1024</span><span class="keyword">))<br />
&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$len </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$len</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)<br />
&nbsp;&nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$byte </span><span class="keyword">= </span><span class="default">$Reflect8Table</span><span class="keyword">[</span><span class="default">ord</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">])];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$index </span><span class="keyword">= ((</span><span class="default">$remainder </span><span class="keyword">&gt;&gt; </span><span class="default">24</span><span class="keyword">) &amp; </span><span class="default">0xff</span><span class="keyword">) ^ </span><span class="default">$byte</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$crc </span><span class="keyword">= </span><span class="default">$CRC32Table</span><span class="keyword">[</span><span class="default">$index</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$remainder </span><span class="keyword">= (</span><span class="default">$remainder </span><span class="keyword">&lt;&lt; </span><span class="default">8</span><span class="keyword">) ^ </span><span class="default">$crc</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp; <br />
&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">decbin</span><span class="keyword">(</span><span class="default">$remainder</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_pad</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">32</span><span class="keyword">, </span><span class="string">'0'</span><span class="keyword">, </span><span class="default">STR_PAD_LEFT</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">$remainder </span><span class="keyword">= </span><span class="default">bindec</span><span class="keyword">(</span><span class="default">strrev</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">));<br />
&nbsp;&nbsp; return </span><span class="default">$remainder </span><span class="keyword">^ </span><span class="default">0xffffffff</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
<span class="default">&lt;?php<br />
$a </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(); <br />
echo </span><span class="default">dechex</span><span class="keyword">(</span><span class="default">crc32_file</span><span class="keyword">(</span><span class="string">'filename.ext'</span><span class="keyword">)).</span><span class="string">"\n"</span><span class="keyword">; <br />
</span><span class="default">$b </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(); <br />
echo </span><span class="default">array_sum</span><span class="keyword">(</span><span class="default">explode</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">,</span><span class="default">$b</span><span class="keyword">)) - </span><span class="default">array_sum</span><span class="keyword">(</span><span class="default">explode</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">,</span><span class="default">$a</span><span class="keyword">)).</span><span class="string">"\n"</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span>Output:<br />
ec7369fe<br />
2.384134054184 (or similiar)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99621""></a>
  <div class="note">
   <strong class="user">carlos at dimension-e dot net</strong>
   <a href="#99621" class="date">26-Aug-2010 07:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This crc32 issue on 64 bits servers may not be a bug, but for sure it wracks many applications when the server migrates to a linux 64 bit machine.<br />
<br />
For example, many database fields are set to accept signed 32 bits integers. This odd behavior makes those fields to be filled with the 2147483647 value, which es the higest possible number to be saved in this type of field.<br />
<br />
It seems the PHP team regards this as a operative system issue, rather than a language issue, but the result is just the same: You just can not rely on this for data comparison between machines.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96262""></a>
  <div class="note">
   <strong class="user">jian at theorchard dot com</strong>
   <a href="#96262" class="date">17-Feb-2010 10:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function returns an unsigned integer from a 64-bit Linux platform.&nbsp; It does return the signed integer from other 32-bit platforms even a 64-bit Windows one.<br />
<br />
The reason is because the two constants PHP_INT_SIZE and PHP_INT_MAX have different values on the 64-bit Linux platform.<br />
<br />
I've created a work-around function to handle this situation.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">get_signed_int</span><span class="keyword">(</span><span class="default">$in</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$int_max </span><span class="keyword">= </span><span class="default">pow</span><span class="keyword">(</span><span class="default">2</span><span class="keyword">, </span><span class="default">31</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$in </span><span class="keyword">&gt; </span><span class="default">$int_max</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$out </span><span class="keyword">= </span><span class="default">$in </span><span class="keyword">- </span><span class="default">$int_max </span><span class="keyword">* </span><span class="default">2 </span><span class="keyword">- </span><span class="default">2</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$out </span><span class="keyword">= </span><span class="default">$in</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$out</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Hope this helps.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93797""></a>
  <div class="note">
   <strong class="user">berna (at) gensis (dot) com (dot) br</strong>
   <a href="#93797" class="date">29-Sep-2009 08:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For those who want a more familiar return value for the function:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">strcrc32</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">$crc </span><span class="keyword">= </span><span class="default">crc32</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">);<br />
&nbsp; if (</span><span class="default">$crc </span><span class="keyword">&amp; </span><span class="default">0x80000000</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$crc </span><span class="keyword">^= </span><span class="default">0xffffffff</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$crc </span><span class="keyword">+= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$crc </span><span class="keyword">= -</span><span class="default">$crc</span><span class="keyword">;<br />
&nbsp; }<br />
&nbsp; return </span><span class="default">$crc</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
And to show the result in Hex string:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">int32_to_hex</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">$value </span><span class="keyword">&amp;= </span><span class="default">0xffffffff</span><span class="keyword">;<br />
&nbsp; return </span><span class="default">str_pad</span><span class="keyword">(</span><span class="default">strtoupper</span><span class="keyword">(</span><span class="default">dechex</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)), </span><span class="default">8</span><span class="keyword">, </span><span class="string">"0"</span><span class="keyword">, </span><span class="default">STR_PAD_LEFT</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92256""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#92256" class="date">16-Jul-2009 01:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
&nbsp; </span><span class="keyword">echo </span><span class="default">crc32</span><span class="keyword">(</span><span class="string">'example'</span><span class="keyword">)+</span><span class="default">4294967296</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
gives you the same result as the CRC32() function in MySQL (&gt;=4.1)<br />
<br />
"SELECT CRC32('example')"<br />
<br />
vice versa<br />
<br />
"SELECT CRC32('example')-4294967296"<br />
<br />
in MySQL gives you the same result as:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp; </span><span class="keyword">echo&nbsp; </span><span class="default">crc32</span><span class="keyword">(</span><span class="string">'example'</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80487""></a>
  <div class="note">
   <strong class="user">angelo (at) mandato (period) com</strong>
   <a href="#80487" class="date">18-Jan-2008 06:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
From my tests noted below, md5_file() function is the best function for performing file verification. This will remain the case until a native crc32_file() function is added to PHP.<br />
<br />
file_crc() function that Bulk at bulksplace dot com posted is the most efficient solution on Windows for small and medium size files.&nbsp; It is most likely because file_get_contents() uses memory mapping techniques.&nbsp; Unfortunately on Linux (Fedora), the results were slightly better for md5_file().<br />
<br />
sha1_file() on large files is slower than md5_file().&nbsp; The time it takes for the __crc32_file() function found below is linear to the size of the file.&nbsp; I would avoid using __crc32_file().&nbsp; The file_crc() function will fail when using the file_get_contents() if the file is larger than the PHP.ini memory_limit setting.&nbsp; Windows does not seem to use the memory_limit for file_get_contents(), but I did run into an error 'FATAL: emalloc(): Unable to allocate x bytes' when testing iso files.<br />
<br />
I ran the following tests on both WindowsXP and Fedora 4 machines.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp; </span><span class="comment">// File verification tests by Angelo Mandato (angelo [at] mandato {period} com)<br />
&nbsp; <br />
&nbsp;&nbsp; // __crc32_file() is very slow, you can uncomment to test for yourself.<br />
&nbsp;&nbsp; //require_once('crc32_file.php');<br />
&nbsp;&nbsp; // Copy and paste the contents of the crc32_file() code found on<br />
&nbsp;&nbsp; // the php.net crc32 PHP manual page in a new file and save<br />
&nbsp;&nbsp; // as crc32_file.php in the same directory as this script.<br />
&nbsp;<br />
&nbsp;&nbsp; // Get microseconds<br />
&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">GetMicrotime</span><span class="keyword">()<br />
&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; list(</span><span class="default">$usec</span><span class="keyword">, </span><span class="default">$sec</span><span class="keyword">) = </span><span class="default">explode</span><span class="keyword">(</span><span class="string">" "</span><span class="keyword">, </span><span class="default">microtime</span><span class="keyword">());<br />
&nbsp;&nbsp; &nbsp; &nbsp; return ((float)</span><span class="default">$usec </span><span class="keyword">+ (float)</span><span class="default">$sec</span><span class="keyword">);<br />
&nbsp;&nbsp; }<br />
&nbsp; <br />
&nbsp;&nbsp; </span><span class="comment">// file_crc() - function to test<br />
&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">file_crc</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">)<br />
&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$file_string </span><span class="keyword">= </span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$crc </span><span class="keyword">= </span><span class="default">crc32</span><span class="keyword">(</span><span class="default">$file_string</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; return </span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">"%u"</span><span class="keyword">, </span><span class="default">$crc</span><span class="keyword">);<br />
&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; </span><span class="default">$Methods </span><span class="keyword">= array(</span><span class="string">'sha1_file()'</span><span class="keyword">, </span><span class="string">'md5_file()'</span><span class="keyword">, </span><span class="string">'file_crc()'</span><span class="keyword">);<br />
&nbsp;&nbsp; if( </span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">'__crc32_file'</span><span class="keyword">) )<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$Methods</span><span class="keyword">[] = </span><span class="string">'__crc32_file()'</span><span class="keyword">;<br />
&nbsp;&nbsp; </span><span class="default">$directory </span><span class="keyword">= </span><span class="string">'/path/to/directory/'</span><span class="keyword">; </span><span class="comment">// Don't forget trailing backslash.<br />
&nbsp;&nbsp; </span><span class="default">$files </span><span class="keyword">= </span><span class="default">scandir</span><span class="keyword">(</span><span class="default">$directory</span><span class="keyword">);<br />
&nbsp; <br />
&nbsp;&nbsp; for( </span><span class="default">$method_index </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$method_index </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$Methods</span><span class="keyword">); </span><span class="default">$method_index</span><span class="keyword">++ )<br />
&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$start_time </span><span class="keyword">= </span><span class="default">GetMicrotime</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp; while( list(</span><span class="default">$index</span><span class="keyword">,</span><span class="default">$file</span><span class="keyword">) = </span><span class="default">each</span><span class="keyword">(</span><span class="default">$files</span><span class="keyword">) )<br />
&nbsp;&nbsp; &nbsp; &nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if( </span><span class="default">$file </span><span class="keyword">!= </span><span class="string">'.' </span><span class="keyword">&amp;&amp; </span><span class="default">$file </span><span class="keyword">!= </span><span class="string">'..' </span><span class="keyword">&amp;&amp; </span><span class="default">is_file</span><span class="keyword">(</span><span class="default">$directory</span><span class="keyword">.</span><span class="default">$file</span><span class="keyword">) )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; switch( </span><span class="default">$method_index </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="default">0</span><span class="keyword">: { </span><span class="comment">// sha1_file()<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">sha1_file</span><span class="keyword">(</span><span class="default">$directory</span><span class="keyword">.</span><span class="default">$file</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="default">1</span><span class="keyword">: { </span><span class="comment">// md5_file()<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">md5_file</span><span class="keyword">(</span><span class="default">$directory</span><span class="keyword">.</span><span class="default">$file</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="default">2</span><span class="keyword">: { </span><span class="comment">// file_crc()<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">file_crc</span><span class="keyword">(</span><span class="default">$directory</span><span class="keyword">.</span><span class="default">$file</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="default">3</span><span class="keyword">: { </span><span class="comment">// __crc32_file()<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">__crc32_file</span><span class="keyword">(</span><span class="default">$directory</span><span class="keyword">.</span><span class="default">$file</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else </span><span class="comment">// It is not part of our test results, lets remove it from the array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unset(</span><span class="default">$files</span><span class="keyword">[</span><span class="default">$index</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$end_time </span><span class="keyword">= </span><span class="default">GetMicrotime</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp; echo </span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">"%s took %.03f seconds to calculate %d files.\n"</span><span class="keyword">, </span><span class="default">$Methods</span><span class="keyword">[</span><span class="default">$method_index</span><span class="keyword">], </span><span class="default">$end_time</span><span class="keyword">-</span><span class="default">$start_time</span><span class="keyword">, </span><span class="default">count</span><span class="keyword">(</span><span class="default">$files</span><span class="keyword">) );<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">reset</span><span class="keyword">(</span><span class="default">$files</span><span class="keyword">); </span><span class="comment">// Reset pointer in array<br />
&nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp; echo </span><span class="string">"file verification tests completed.\n"</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
It would be nice if a crc32_file() function was added to PHP natively.<br />
<br />
I am not sure why anyone removed this post from this thread, but this is very useful information. and I believe it should remain.&nbsp; If you're the moderator and deleted this before, please contact me and explain why it was removed. This is not a question, a report of a bug nor a feature request.&nbsp; This is factual information that is useful to all.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="79567""></a>
  <div class="note">
   <strong class="user">dave at jufer dot info</strong>
   <a href="#79567" class="date">03-Dec-2007 02:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function returns the same int value on a 64 bit mc. like the crc32() function on a 32 bit mc.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">crcKw</span><span class="keyword">(</span><span class="default">$num</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$crc </span><span class="keyword">= </span><span class="default">crc32</span><span class="keyword">(</span><span class="default">$num</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$crc </span><span class="keyword">&amp; </span><span class="default">0x80000000</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$crc </span><span class="keyword">^= </span><span class="default">0xffffffff</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$crc </span><span class="keyword">+= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$crc </span><span class="keyword">= -</span><span class="default">$crc</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$crc</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78232""></a>
  <div class="note">
   <strong class="user">Ren</strong>
   <a href="#78232" class="date">03-Oct-2007 11:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Dealing with 32 bit unsigned values overflowing 32 bit php signed values can be done by adding 0x10000000 to any unexpected negative result, rather than using sprintf.<br />
<br />
$i = crc32('1');<br />
printf("%u\n", $i);<br />
if (0 &gt; $i)<br />
{<br />
&nbsp;&nbsp;&nbsp; // Implicitly casts i as float, and corrects this sign.<br />
&nbsp;&nbsp;&nbsp; $i += 0x100000000;<br />
}<br />
var_dump($i);<br />
<br />
Outputs:<br />
<br />
2212294583<br />
float(2212294583)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76080""></a>
  <div class="note">
   <strong class="user">petteri at qred dot fi</strong>
   <a href="#76080" class="date">28-Jun-2007 11:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you have php version&lt;5.1.2 you might use this.<br />
It's a little bit faster than __crc32_file() :)<br />
<br />
Ps. crc32_combine() is ported directly from zlib.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">crc32_file</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$fp</span><span class="keyword">=</span><span class="default">fopen</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">, </span><span class="string">"rb"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$old_crc</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$fp </span><span class="keyword">!= </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$buffer </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while (!</span><span class="default">feof</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$buffer</span><span class="keyword">=</span><span class="default">fread</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">, </span><span class="default">10485760</span><span class="keyword">); <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$len</span><span class="keyword">=</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$buffer</span><span class="keyword">);&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$t</span><span class="keyword">=</span><span class="default">crc32</span><span class="keyword">(</span><span class="default">$buffer</span><span class="keyword">);&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$old_crc</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$crc32</span><span class="keyword">=</span><span class="default">crc32_combine</span><span class="keyword">(</span><span class="default">$old_crc</span><span class="keyword">, </span><span class="default">$t</span><span class="keyword">, </span><span class="default">$len</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$old_crc</span><span class="keyword">=</span><span class="default">$crc32</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$crc32</span><span class="keyword">=</span><span class="default">$old_crc</span><span class="keyword">=</span><span class="default">$t</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; print </span><span class="string">"Cannot open file\n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$crc32</span><span class="keyword">;<br />
}<br />
<br />
function </span><span class="default">crc32_combine</span><span class="keyword">(</span><span class="default">$crc1</span><span class="keyword">, </span><span class="default">$crc2</span><span class="keyword">, </span><span class="default">$len2</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$odd</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]=</span><span class="default">0xedb88320</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$row</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; for(</span><span class="default">$n</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">;</span><span class="default">$n</span><span class="keyword">&lt;</span><span class="default">32</span><span class="keyword">;</span><span class="default">$n</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$odd</span><span class="keyword">[</span><span class="default">$n</span><span class="keyword">]=</span><span class="default">$row</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$row</span><span class="keyword">&lt;&lt;=</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">gf2_matrix_square</span><span class="keyword">(</span><span class="default">$even</span><span class="keyword">,</span><span class="default">$odd</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">gf2_matrix_square</span><span class="keyword">(</span><span class="default">$odd</span><span class="keyword">,</span><span class="default">$even</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; do {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">/* apply zeros operator for this bit of len2 */<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">gf2_matrix_square</span><span class="keyword">(</span><span class="default">$even</span><span class="keyword">, </span><span class="default">$odd</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$len2 </span><span class="keyword">&amp; </span><span class="default">1</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$crc1</span><span class="keyword">=</span><span class="default">gf2_matrix_times</span><span class="keyword">(</span><span class="default">$even</span><span class="keyword">, </span><span class="default">$crc1</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$len2</span><span class="keyword">&gt;&gt;=</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">/* if no more bits set, then done */<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$len2</span><span class="keyword">==</span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">/* another iteration of the loop with odd and even swapped */<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">gf2_matrix_square</span><span class="keyword">(</span><span class="default">$odd</span><span class="keyword">, </span><span class="default">$even</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$len2 </span><span class="keyword">&amp; </span><span class="default">1</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$crc1</span><span class="keyword">=</span><span class="default">gf2_matrix_times</span><span class="keyword">(</span><span class="default">$odd</span><span class="keyword">, </span><span class="default">$crc1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$len2</span><span class="keyword">&gt;&gt;= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; } while (</span><span class="default">$len2 </span><span class="keyword">!= </span><span class="default">0</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$crc1 </span><span class="keyword">^= </span><span class="default">$crc2</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$crc1</span><span class="keyword">;<br />
}<br />
<br />
function </span><span class="default">gf2_matrix_square</span><span class="keyword">(&amp;</span><span class="default">$square</span><span class="keyword">, &amp;</span><span class="default">$mat</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$n</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$n</span><span class="keyword">&lt;</span><span class="default">32</span><span class="keyword">;</span><span class="default">$n</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$square</span><span class="keyword">[</span><span class="default">$n</span><span class="keyword">]=</span><span class="default">gf2_matrix_times</span><span class="keyword">(</span><span class="default">$mat</span><span class="keyword">, </span><span class="default">$mat</span><span class="keyword">[</span><span class="default">$n</span><span class="keyword">]);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
function </span><span class="default">gf2_matrix_times</span><span class="keyword">(</span><span class="default">$mat</span><span class="keyword">, </span><span class="default">$vec</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$sum</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; while (</span><span class="default">$vec</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$vec </span><span class="keyword">&amp; </span><span class="default">1</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sum </span><span class="keyword">^= </span><span class="default">$mat</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$vec</span><span class="keyword">&gt;&gt;= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">++;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$sum</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75884""></a>
  <div class="note">
   <strong class="user">slimshady451</strong>
   <a href="#75884" class="date">20-Jun-2007 02:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I see a lot of function for crc32_file, but for php version &gt;= 5.1.2 don't forget you can use this :<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">crc32_file</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">hash_file </span><span class="keyword">(</span><span class="string">'CRC32'</span><span class="keyword">, </span><span class="default">$filename </span><span class="keyword">, </span><span class="default">FALSE </span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Using crc32(file_get_contents($filename)) will use too many memory on big file so don't use it.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75440""></a>
  <div class="note">
   <strong class="user">mail at tristansmis dot nl</strong>
   <a href="#75440" class="date">30-May-2007 01:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I used the abs value of this function on a 32-bit system. When porting the code to a 64-bit system Ive found that the value is different. The following code has the same outcome on both systems.<br />
<span class="default">&lt;?php<br />
<br />
&nbsp;&nbsp; $crc </span><span class="keyword">= </span><span class="default">abs</span><span class="keyword">(</span><span class="default">crc32</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">));<br />
&nbsp;&nbsp; if( </span><span class="default">$crc </span><span class="keyword">&amp; </span><span class="default">0x80000000</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$crc </span><span class="keyword">^= </span><span class="default">0xffffffff</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$crc </span><span class="keyword">+= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; </span><span class="comment">/* Old solution<br />
&nbsp;&nbsp;&nbsp; * $crc = abs(crc32($string))<br />
&nbsp;&nbsp;&nbsp; */<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="64127""></a>
  <div class="note">
   <strong class="user">roberto at spadim dot com dot br</strong>
   <a href="#64127" class="date">07-Apr-2006 09:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
MODBUS RTU, CRC16, <br />
input-&gt; modbus rtu string<br />
output -&gt; 2bytes string, in correct modbus order<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">crc16</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$length</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">){<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$auchCRCHi</span><span class="keyword">=array(&nbsp; &nbsp; </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0x40</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$auchCRCLo</span><span class="keyword">=array(&nbsp; &nbsp; </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC3</span><span class="keyword">, </span><span class="default">0x03</span><span class="keyword">, </span><span class="default">0x02</span><span class="keyword">, </span><span class="default">0xC2</span><span class="keyword">, </span><span class="default">0xC6</span><span class="keyword">, </span><span class="default">0x06</span><span class="keyword">, </span><span class="default">0x07</span><span class="keyword">, </span><span class="default">0xC7</span><span class="keyword">, </span><span class="default">0x05</span><span class="keyword">, </span><span class="default">0xC5</span><span class="keyword">, </span><span class="default">0xC4</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0x04</span><span class="keyword">, </span><span class="default">0xCC</span><span class="keyword">, </span><span class="default">0x0C</span><span class="keyword">, </span><span class="default">0x0D</span><span class="keyword">, </span><span class="default">0xCD</span><span class="keyword">, </span><span class="default">0x0F</span><span class="keyword">, </span><span class="default">0xCF</span><span class="keyword">, </span><span class="default">0xCE</span><span class="keyword">, </span><span class="default">0x0E</span><span class="keyword">, </span><span class="default">0x0A</span><span class="keyword">, </span><span class="default">0xCA</span><span class="keyword">, </span><span class="default">0xCB</span><span class="keyword">, </span><span class="default">0x0B</span><span class="keyword">, </span><span class="default">0xC9</span><span class="keyword">, </span><span class="default">0x09</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0x08</span><span class="keyword">, </span><span class="default">0xC8</span><span class="keyword">, </span><span class="default">0xD8</span><span class="keyword">, </span><span class="default">0x18</span><span class="keyword">, </span><span class="default">0x19</span><span class="keyword">, </span><span class="default">0xD9</span><span class="keyword">, </span><span class="default">0x1B</span><span class="keyword">, </span><span class="default">0xDB</span><span class="keyword">, </span><span class="default">0xDA</span><span class="keyword">, </span><span class="default">0x1A</span><span class="keyword">, </span><span class="default">0x1E</span><span class="keyword">, </span><span class="default">0xDE</span><span class="keyword">, </span><span class="default">0xDF</span><span class="keyword">, </span><span class="default">0x1F</span><span class="keyword">, </span><span class="default">0xDD</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0x1D</span><span class="keyword">, </span><span class="default">0x1C</span><span class="keyword">, </span><span class="default">0xDC</span><span class="keyword">, </span><span class="default">0x14</span><span class="keyword">, </span><span class="default">0xD4</span><span class="keyword">, </span><span class="default">0xD5</span><span class="keyword">, </span><span class="default">0x15</span><span class="keyword">, </span><span class="default">0xD7</span><span class="keyword">, </span><span class="default">0x17</span><span class="keyword">, </span><span class="default">0x16</span><span class="keyword">, </span><span class="default">0xD6</span><span class="keyword">, </span><span class="default">0xD2</span><span class="keyword">, </span><span class="default">0x12</span><span class="keyword">, </span><span class="default">0x13</span><span class="keyword">, </span><span class="default">0xD3</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0x11</span><span class="keyword">, </span><span class="default">0xD1</span><span class="keyword">, </span><span class="default">0xD0</span><span class="keyword">, </span><span class="default">0x10</span><span class="keyword">, </span><span class="default">0xF0</span><span class="keyword">, </span><span class="default">0x30</span><span class="keyword">, </span><span class="default">0x31</span><span class="keyword">, </span><span class="default">0xF1</span><span class="keyword">, </span><span class="default">0x33</span><span class="keyword">, </span><span class="default">0xF3</span><span class="keyword">, </span><span class="default">0xF2</span><span class="keyword">, </span><span class="default">0x32</span><span class="keyword">, </span><span class="default">0x36</span><span class="keyword">, </span><span class="default">0xF6</span><span class="keyword">, </span><span class="default">0xF7</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0x37</span><span class="keyword">, </span><span class="default">0xF5</span><span class="keyword">, </span><span class="default">0x35</span><span class="keyword">, </span><span class="default">0x34</span><span class="keyword">, </span><span class="default">0xF4</span><span class="keyword">, </span><span class="default">0x3C</span><span class="keyword">, </span><span class="default">0xFC</span><span class="keyword">, </span><span class="default">0xFD</span><span class="keyword">, </span><span class="default">0x3D</span><span class="keyword">, </span><span class="default">0xFF</span><span class="keyword">, </span><span class="default">0x3F</span><span class="keyword">, </span><span class="default">0x3E</span><span class="keyword">, </span><span class="default">0xFE</span><span class="keyword">, </span><span class="default">0xFA</span><span class="keyword">, </span><span class="default">0x3A</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0x3B</span><span class="keyword">, </span><span class="default">0xFB</span><span class="keyword">, </span><span class="default">0x39</span><span class="keyword">, </span><span class="default">0xF9</span><span class="keyword">, </span><span class="default">0xF8</span><span class="keyword">, </span><span class="default">0x38</span><span class="keyword">, </span><span class="default">0x28</span><span class="keyword">, </span><span class="default">0xE8</span><span class="keyword">, </span><span class="default">0xE9</span><span class="keyword">, </span><span class="default">0x29</span><span class="keyword">, </span><span class="default">0xEB</span><span class="keyword">, </span><span class="default">0x2B</span><span class="keyword">, </span><span class="default">0x2A</span><span class="keyword">, </span><span class="default">0xEA</span><span class="keyword">, </span><span class="default">0xEE</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0x2E</span><span class="keyword">, </span><span class="default">0x2F</span><span class="keyword">, </span><span class="default">0xEF</span><span class="keyword">, </span><span class="default">0x2D</span><span class="keyword">, </span><span class="default">0xED</span><span class="keyword">, </span><span class="default">0xEC</span><span class="keyword">, </span><span class="default">0x2C</span><span class="keyword">, </span><span class="default">0xE4</span><span class="keyword">, </span><span class="default">0x24</span><span class="keyword">, </span><span class="default">0x25</span><span class="keyword">, </span><span class="default">0xE5</span><span class="keyword">, </span><span class="default">0x27</span><span class="keyword">, </span><span class="default">0xE7</span><span class="keyword">, </span><span class="default">0xE6</span><span class="keyword">, </span><span class="default">0x26</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0x22</span><span class="keyword">, </span><span class="default">0xE2</span><span class="keyword">, </span><span class="default">0xE3</span><span class="keyword">, </span><span class="default">0x23</span><span class="keyword">, </span><span class="default">0xE1</span><span class="keyword">, </span><span class="default">0x21</span><span class="keyword">, </span><span class="default">0x20</span><span class="keyword">, </span><span class="default">0xE0</span><span class="keyword">, </span><span class="default">0xA0</span><span class="keyword">, </span><span class="default">0x60</span><span class="keyword">, </span><span class="default">0x61</span><span class="keyword">, </span><span class="default">0xA1</span><span class="keyword">, </span><span class="default">0x63</span><span class="keyword">, </span><span class="default">0xA3</span><span class="keyword">, </span><span class="default">0xA2</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0x62</span><span class="keyword">, </span><span class="default">0x66</span><span class="keyword">, </span><span class="default">0xA6</span><span class="keyword">, </span><span class="default">0xA7</span><span class="keyword">, </span><span class="default">0x67</span><span class="keyword">, </span><span class="default">0xA5</span><span class="keyword">, </span><span class="default">0x65</span><span class="keyword">, </span><span class="default">0x64</span><span class="keyword">, </span><span class="default">0xA4</span><span class="keyword">, </span><span class="default">0x6C</span><span class="keyword">, </span><span class="default">0xAC</span><span class="keyword">, </span><span class="default">0xAD</span><span class="keyword">, </span><span class="default">0x6D</span><span class="keyword">, </span><span class="default">0xAF</span><span class="keyword">, </span><span class="default">0x6F</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0x6E</span><span class="keyword">, </span><span class="default">0xAE</span><span class="keyword">, </span><span class="default">0xAA</span><span class="keyword">, </span><span class="default">0x6A</span><span class="keyword">, </span><span class="default">0x6B</span><span class="keyword">, </span><span class="default">0xAB</span><span class="keyword">, </span><span class="default">0x69</span><span class="keyword">, </span><span class="default">0xA9</span><span class="keyword">, </span><span class="default">0xA8</span><span class="keyword">, </span><span class="default">0x68</span><span class="keyword">, </span><span class="default">0x78</span><span class="keyword">, </span><span class="default">0xB8</span><span class="keyword">, </span><span class="default">0xB9</span><span class="keyword">, </span><span class="default">0x79</span><span class="keyword">, </span><span class="default">0xBB</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0x7B</span><span class="keyword">, </span><span class="default">0x7A</span><span class="keyword">, </span><span class="default">0xBA</span><span class="keyword">, </span><span class="default">0xBE</span><span class="keyword">, </span><span class="default">0x7E</span><span class="keyword">, </span><span class="default">0x7F</span><span class="keyword">, </span><span class="default">0xBF</span><span class="keyword">, </span><span class="default">0x7D</span><span class="keyword">, </span><span class="default">0xBD</span><span class="keyword">, </span><span class="default">0xBC</span><span class="keyword">, </span><span class="default">0x7C</span><span class="keyword">, </span><span class="default">0xB4</span><span class="keyword">, </span><span class="default">0x74</span><span class="keyword">, </span><span class="default">0x75</span><span class="keyword">, </span><span class="default">0xB5</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0x77</span><span class="keyword">, </span><span class="default">0xB7</span><span class="keyword">, </span><span class="default">0xB6</span><span class="keyword">, </span><span class="default">0x76</span><span class="keyword">, </span><span class="default">0x72</span><span class="keyword">, </span><span class="default">0xB2</span><span class="keyword">, </span><span class="default">0xB3</span><span class="keyword">, </span><span class="default">0x73</span><span class="keyword">, </span><span class="default">0xB1</span><span class="keyword">, </span><span class="default">0x71</span><span class="keyword">, </span><span class="default">0x70</span><span class="keyword">, </span><span class="default">0xB0</span><span class="keyword">, </span><span class="default">0x50</span><span class="keyword">, </span><span class="default">0x90</span><span class="keyword">, </span><span class="default">0x91</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0x51</span><span class="keyword">, </span><span class="default">0x93</span><span class="keyword">, </span><span class="default">0x53</span><span class="keyword">, </span><span class="default">0x52</span><span class="keyword">, </span><span class="default">0x92</span><span class="keyword">, </span><span class="default">0x96</span><span class="keyword">, </span><span class="default">0x56</span><span class="keyword">, </span><span class="default">0x57</span><span class="keyword">, </span><span class="default">0x97</span><span class="keyword">, </span><span class="default">0x55</span><span class="keyword">, </span><span class="default">0x95</span><span class="keyword">, </span><span class="default">0x94</span><span class="keyword">, </span><span class="default">0x54</span><span class="keyword">, </span><span class="default">0x9C</span><span class="keyword">, </span><span class="default">0x5C</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0x5D</span><span class="keyword">, </span><span class="default">0x9D</span><span class="keyword">, </span><span class="default">0x5F</span><span class="keyword">, </span><span class="default">0x9F</span><span class="keyword">, </span><span class="default">0x9E</span><span class="keyword">, </span><span class="default">0x5E</span><span class="keyword">, </span><span class="default">0x5A</span><span class="keyword">, </span><span class="default">0x9A</span><span class="keyword">, </span><span class="default">0x9B</span><span class="keyword">, </span><span class="default">0x5B</span><span class="keyword">, </span><span class="default">0x99</span><span class="keyword">, </span><span class="default">0x59</span><span class="keyword">, </span><span class="default">0x58</span><span class="keyword">, </span><span class="default">0x98</span><span class="keyword">, </span><span class="default">0x88</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0x48</span><span class="keyword">, </span><span class="default">0x49</span><span class="keyword">, </span><span class="default">0x89</span><span class="keyword">, </span><span class="default">0x4B</span><span class="keyword">, </span><span class="default">0x8B</span><span class="keyword">, </span><span class="default">0x8A</span><span class="keyword">, </span><span class="default">0x4A</span><span class="keyword">, </span><span class="default">0x4E</span><span class="keyword">, </span><span class="default">0x8E</span><span class="keyword">, </span><span class="default">0x8F</span><span class="keyword">, </span><span class="default">0x4F</span><span class="keyword">, </span><span class="default">0x8D</span><span class="keyword">, </span><span class="default">0x4D</span><span class="keyword">, </span><span class="default">0x4C</span><span class="keyword">, </span><span class="default">0x8C</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0x44</span><span class="keyword">, </span><span class="default">0x84</span><span class="keyword">, </span><span class="default">0x85</span><span class="keyword">, </span><span class="default">0x45</span><span class="keyword">, </span><span class="default">0x87</span><span class="keyword">, </span><span class="default">0x47</span><span class="keyword">, </span><span class="default">0x46</span><span class="keyword">, </span><span class="default">0x86</span><span class="keyword">, </span><span class="default">0x82</span><span class="keyword">, </span><span class="default">0x42</span><span class="keyword">, </span><span class="default">0x43</span><span class="keyword">, </span><span class="default">0x83</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0x40</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$length&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=(</span><span class="default">$length</span><span class="keyword">&lt;=</span><span class="default">0</span><span class="keyword">?</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">):</span><span class="default">$length</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$uchCRCHi&nbsp; &nbsp; </span><span class="keyword">=</span><span class="default">0xFF</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$uchCRCLo&nbsp; &nbsp; </span><span class="keyword">=</span><span class="default">0xFF</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$uIndex&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$length</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$uIndex&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=</span><span class="default">$uchCRCLo </span><span class="keyword">^ </span><span class="default">ord</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$uchCRCLo&nbsp; &nbsp; </span><span class="keyword">=</span><span class="default">$uchCRCHi </span><span class="keyword">^ </span><span class="default">$auchCRCHi</span><span class="keyword">[</span><span class="default">$uIndex</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$uchCRCHi&nbsp; &nbsp; </span><span class="keyword">=</span><span class="default">$auchCRCLo</span><span class="keyword">[</span><span class="default">$uIndex</span><span class="keyword">] ;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">$uchCRCLo</span><span class="keyword">).</span><span class="default">chr</span><span class="keyword">(</span><span class="default">$uchCRCHi</span><span class="keyword">));<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56215""></a>
  <div class="note">
   <strong class="user">Bulk at bulksplace dot com</strong>
   <a href="#56215" class="date">27-Aug-2005 05:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A faster way I've found to return CRC values of larger files, is instead of using the file()/implode() method used below, is to us file_get_contents() (PHP 4 &gt;= 4.3.0) which uses memory mapping techniques if supported by your OS to enhance performance. Here's my example function: <br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// $file is the path to the file you want to check.<br />
</span><span class="keyword">function </span><span class="default">file_crc</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$file_string </span><span class="keyword">= </span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$crc </span><span class="keyword">= </span><span class="default">crc32</span><span class="keyword">(</span><span class="default">$file_string</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">"%u"</span><span class="keyword">, </span><span class="default">$crc</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">$file_to_crc </span><span class="keyword">= /</span><span class="default">home</span><span class="keyword">/</span><span class="default">path</span><span class="keyword">/</span><span class="default">to</span><span class="keyword">/</span><span class="default">file</span><span class="keyword">.</span><span class="default">jpg</span><span class="keyword">;<br />
<br />
echo </span><span class="default">file_crc</span><span class="keyword">(</span><span class="default">$file_to_crc</span><span class="keyword">); </span><span class="comment">// Outputs CRC value for given file.<br />
</span><span class="default">?&gt;<br />
</span><br />
I've found in testing this method is MUCH faster for larger binary files.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="41840""></a>
  <div class="note">
   <strong class="user">waldomonster at netjukebox dot demon dot nl</strong>
   <a href="#41840" class="date">23-Apr-2004 08:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
$data </span><span class="keyword">= </span><span class="string">'dot'</span><span class="keyword">;<br />
echo </span><span class="default">dechex</span><span class="keyword">(</span><span class="default">crc32</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
Returns 59278a3<br />
Witch is missing a leading zero.<br />
<br />
<span class="default">&lt;?php<br />
$data </span><span class="keyword">= </span><span class="string">'dot'</span><span class="keyword">;<br />
echo </span><span class="default">str_pad</span><span class="keyword">(</span><span class="default">dechex</span><span class="keyword">(</span><span class="default">crc32</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">)), </span><span class="default">8</span><span class="keyword">, </span><span class="string">'0'</span><span class="keyword">, </span><span class="default">STR_PAD_LEFT</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Returns the correct string: 059278a3</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="41541""></a>
  <div class="note">
   <strong class="user">arachnid at notdot dot net</strong>
   <a href="#41541" class="date">13-Apr-2004 08:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that the CRC32 algorithm should NOT be used for cryptographic purposes, or in situations where a hostile/untrusted user is involved, as it is far too easy to generate a hash collision for CRC32 (two different binary strings that have the same CRC32 hash). Instead consider SHA-1 or MD5.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="39545""></a>
  <div class="note">
   <strong class="user">same</strong>
   <a href="#39545" class="date">01-Feb-2004 05:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
bit by bit crc32 computation<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">bitbybit_crc32</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">$first_call</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">){<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//reflection in 32 bits of crc32 polynomial 0x04C11DB7<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$poly_reflected</span><span class="keyword">=</span><span class="default">0xEDB88320</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//=0xFFFFFFFF; //keep track of register value after each call<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">static </span><span class="default">$reg</span><span class="keyword">=</span><span class="default">0xFFFFFFFF</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//initialize register on first call<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">$first_call</span><span class="keyword">) </span><span class="default">$reg</span><span class="keyword">=</span><span class="default">0xFFFFFFFF</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$n</span><span class="keyword">=</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$zeros</span><span class="keyword">=</span><span class="default">$n</span><span class="keyword">&lt;</span><span class="default">4 </span><span class="keyword">? </span><span class="default">$n </span><span class="keyword">: </span><span class="default">4</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//xor first $zeros=min(4,strlen($str)) bytes into the register<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$zeros</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$reg</span><span class="keyword">^=</span><span class="default">ord</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">{</span><span class="default">$i</span><span class="keyword">})&lt;&lt;</span><span class="default">$i</span><span class="keyword">*</span><span class="default">8</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//now for the rest of the string<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">4</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$n</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$next_char</span><span class="keyword">=</span><span class="default">ord</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">{</span><span class="default">$i</span><span class="keyword">});<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for(</span><span class="default">$j</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$j</span><span class="keyword">&lt;</span><span class="default">8</span><span class="keyword">;</span><span class="default">$j</span><span class="keyword">++)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$reg</span><span class="keyword">=((</span><span class="default">$reg</span><span class="keyword">&gt;&gt;</span><span class="default">1</span><span class="keyword">&amp;</span><span class="default">0x7FFFFFFF</span><span class="keyword">)|(</span><span class="default">$next_char</span><span class="keyword">&gt;&gt;</span><span class="default">$j</span><span class="keyword">&amp;</span><span class="default">1</span><span class="keyword">)&lt;&lt;</span><span class="default">0x1F</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ^(</span><span class="default">$reg</span><span class="keyword">&amp;</span><span class="default">1</span><span class="keyword">)*</span><span class="default">$poly_reflected</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//put in enough zeros at the end<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$zeros</span><span class="keyword">*</span><span class="default">8</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$reg</span><span class="keyword">=(</span><span class="default">$reg</span><span class="keyword">&gt;&gt;</span><span class="default">1</span><span class="keyword">&amp;</span><span class="default">0x7FFFFFFF</span><span class="keyword">)^(</span><span class="default">$reg</span><span class="keyword">&amp;</span><span class="default">1</span><span class="keyword">)*</span><span class="default">$poly_reflected</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//xor the register with 0xFFFFFFFF<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">return ~</span><span class="default">$reg</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$str</span><span class="keyword">=</span><span class="string">"123456789"</span><span class="keyword">; </span><span class="comment">//whatever<br />
</span><span class="default">$blocksize</span><span class="keyword">=</span><span class="default">4</span><span class="keyword">; </span><span class="comment">//whatever<br />
<br />
</span><span class="keyword">for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">);</span><span class="default">$i</span><span class="keyword">+=</span><span class="default">$blocksize</span><span class="keyword">) </span><span class="default">$crc</span><span class="keyword">=</span><span class="default">bitbybit_crc32</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">,</span><span class="default">$blocksize</span><span class="keyword">),!</span><span class="default">$i</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="34139""></a>
  <div class="note">
   <strong class="user">xethmir at yournextclient dot com</strong>
   <a href="#34139" class="date">16-Jul-2003 07:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is a really simple way of displaying the crc-32 hexadecimal code/checksum for a file... (absolute paths are more reliable)<br />
<br />
<span class="default">&lt;?php<br />
$file </span><span class="keyword">= </span><span class="string">"<a href="http://example.com/bar.jpg" rel="nofollow" target="_blank">http://example.com/bar.jpg</a>"</span><span class="keyword">;<br />
<br />
</span><span class="comment">// Read the file into an array<br />
</span><span class="default">$data </span><span class="keyword">= </span><span class="default">file</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">);<br />
<br />
</span><span class="comment">// Join the array into a string<br />
</span><span class="default">$data </span><span class="keyword">= </span><span class="default">implode</span><span class="keyword">(</span><span class="string">''</span><span class="keyword">, </span><span class="default">$data</span><span class="keyword">);<br />
<br />
</span><span class="comment">// Calculate the crc<br />
</span><span class="default">$crc </span><span class="keyword">= </span><span class="default">crc32</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">);<br />
<br />
</span><span class="comment">//convert from decimal to hexadecimal<br />
</span><span class="default">$crchex</span><span class="keyword">=</span><span class="default">DecHex</span><span class="keyword">(</span><span class="default">$crc</span><span class="keyword">*</span><span class="default">1</span><span class="keyword">);<br />
<br />
</span><span class="comment">//echo the result<br />
</span><span class="keyword">echo </span><span class="string">"</span><span class="default">$crchex</span><span class="string">"</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="31832""></a>
  <div class="note">
   <strong class="user">quix at free dot fr</strong>
   <a href="#31832" class="date">05-May-2003 01:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I needed the crc32 of a file that was pretty large, so I didn't want to read it into memory.<br />
So I made this:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $GLOBALS</span><span class="keyword">[</span><span class="string">'__crc32_table'</span><span class="keyword">]=array();&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Lookup table array<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">__crc32_init_table</span><span class="keyword">();<br />
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">__crc32_init_table</span><span class="keyword">() {&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Builds lookup table array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // This is the official polynomial used by<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // CRC-32 in PKZip, WinZip and Ethernet.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$polynomial </span><span class="keyword">= </span><span class="default">0x04c11db7</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// 256 values representing ASCII character codes.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i </span><span class="keyword">&lt;= </span><span class="default">0xFF</span><span class="keyword">;++</span><span class="default">$i</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'__crc32_table'</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">]=(</span><span class="default">__crc32_reflect</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">,</span><span class="default">8</span><span class="keyword">) &lt;&lt; </span><span class="default">24</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for(</span><span class="default">$j</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$j </span><span class="keyword">&lt; </span><span class="default">8</span><span class="keyword">;++</span><span class="default">$j</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'__crc32_table'</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">]=((</span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'__crc32_table'</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">] &lt;&lt; </span><span class="default">1</span><span class="keyword">) ^<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ((</span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'__crc32_table'</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">] &amp; (</span><span class="default">1 </span><span class="keyword">&lt;&lt; </span><span class="default">31</span><span class="keyword">))?</span><span class="default">$polynomial</span><span class="keyword">:</span><span class="default">0</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'__crc32_table'</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">__crc32_reflect</span><span class="keyword">(</span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'__crc32_table'</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">], </span><span class="default">32</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">__crc32_reflect</span><span class="keyword">(</span><span class="default">$ref</span><span class="keyword">, </span><span class="default">$ch</span><span class="keyword">) {&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Reflects CRC bits in the lookup table<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Swap bit 0 for bit 7, bit 1 for bit 6, etc.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;(</span><span class="default">$ch</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">);++</span><span class="default">$i</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$ref </span><span class="keyword">&amp; </span><span class="default">1</span><span class="keyword">) </span><span class="default">$value </span><span class="keyword">|= (</span><span class="default">1 </span><span class="keyword">&lt;&lt; (</span><span class="default">$ch</span><span class="keyword">-</span><span class="default">$i</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ref </span><span class="keyword">= ((</span><span class="default">$ref </span><span class="keyword">&gt;&gt; </span><span class="default">1</span><span class="keyword">) &amp; </span><span class="default">0x7fffffff</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">__crc32_string</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">) {&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Creates a CRC from a text string<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // Once the lookup table has been filled in by the two functions above,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // this function creates all CRCs using only the lookup table.<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // You need unsigned variables because negative values<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // introduce high bits where zero bits are required.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // PHP doesn't have unsigned integers:<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // I've solved this problem by doing a '&amp;' after a '&gt;&gt;'.<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // Start out with all bits set high.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$crc</span><span class="keyword">=</span><span class="default">0xffffffff</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$len</span><span class="keyword">=</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Perform the algorithm on each character in the string,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // using the lookup table values.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$len</span><span class="keyword">;++</span><span class="default">$i</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$crc</span><span class="keyword">=((</span><span class="default">$crc </span><span class="keyword">&gt;&gt; </span><span class="default">8</span><span class="keyword">) &amp; </span><span class="default">0x00ffffff</span><span class="keyword">) ^ </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'__crc32_table'</span><span class="keyword">][(</span><span class="default">$crc </span><span class="keyword">&amp; </span><span class="default">0xFF</span><span class="keyword">) ^ </span><span class="default">ord</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">{</span><span class="default">$i</span><span class="keyword">})];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Exclusive OR the result with the beginning value.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$crc </span><span class="keyword">^ </span><span class="default">0xffffffff</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">__crc32_file</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">) {&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Creates a CRC from a file<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // Info: look at __crc32_string<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // Start out with all bits set high.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$crc</span><span class="keyword">=</span><span class="default">0xffffffff</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if((</span><span class="default">$fp</span><span class="keyword">=</span><span class="default">fopen</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">,</span><span class="string">'rb'</span><span class="keyword">))===</span><span class="default">false</span><span class="keyword">) return </span><span class="default">false</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Perform the algorithm on each character in file<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">for(;;) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">=@</span><span class="default">fread</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">)==</span><span class="default">0</span><span class="keyword">) break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$crc</span><span class="keyword">=((</span><span class="default">$crc </span><span class="keyword">&gt;&gt; </span><span class="default">8</span><span class="keyword">) &amp; </span><span class="default">0x00ffffff</span><span class="keyword">) ^ </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'__crc32_table'</span><span class="keyword">][(</span><span class="default">$crc </span><span class="keyword">&amp; </span><span class="default">0xFF</span><span class="keyword">) ^ </span><span class="default">ord</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">)];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; @</span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Exclusive OR the result with the beginning value.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$crc </span><span class="keyword">^ </span><span class="default">0xffffffff</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="28012""></a>
  <div class="note">
   <strong class="user">spectrumizer at cycos dot net</strong>
   <a href="#28012" class="date">29-Dec-2002 03:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a tested and working CRC16-Algorithm:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">crc16</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">$crc </span><span class="keyword">= </span><span class="default">0xFFFF</span><span class="keyword">;<br />
&nbsp; for (</span><span class="default">$x </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$x </span><span class="keyword">&lt; </span><span class="default">strlen </span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">); </span><span class="default">$x</span><span class="keyword">++) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$crc </span><span class="keyword">= </span><span class="default">$crc </span><span class="keyword">^ </span><span class="default">ord</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">[</span><span class="default">$x</span><span class="keyword">]);<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$y </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$y </span><span class="keyword">&lt; </span><span class="default">8</span><span class="keyword">; </span><span class="default">$y</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; if ((</span><span class="default">$crc </span><span class="keyword">&amp; </span><span class="default">0x0001</span><span class="keyword">) == </span><span class="default">0x0001</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$crc </span><span class="keyword">= ((</span><span class="default">$crc </span><span class="keyword">&gt;&gt; </span><span class="default">1</span><span class="keyword">) ^ </span><span class="default">0xA001</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; } else { </span><span class="default">$crc </span><span class="keyword">= </span><span class="default">$crc </span><span class="keyword">&gt;&gt; </span><span class="default">1</span><span class="keyword">; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
&nbsp; return </span><span class="default">$crc</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Regards,<br />
Mario</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.count-chars.html">count_chars</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.crypt.html">crypt</a></div>
 <div class="up"><a href="ref.strings.html">String Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
