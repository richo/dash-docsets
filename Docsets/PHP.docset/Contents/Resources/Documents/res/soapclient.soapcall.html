<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Calls a SOAP function</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="soapclient.setsoapheaders.html">SoapClient::__setSoapHeaders</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="soapclient.soapclient.html">SoapClient::SoapClient</a></div>
 <div class="up"><a href="class.soapclient.html">SoapClient</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="soapclient.soapcall" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">SoapClient::__soapCall</h1>
  <p class="verinfo">(PHP 5 &gt;= 5.0.1)</p><p class="refpurpose"><span class="refname">SoapClient::__soapCall</span> &mdash; <span class="dc-title">Calls a SOAP function</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-soapclient.soapcall-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <span class="methodname"><b>SoapClient::__soapCall</b></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$function_name</tt></span>
   , <span class="methodparam"><span class="type">array</span> <tt class="parameter">$arguments</tt></span>
   [, <span class="methodparam"><span class="type">array</span> <tt class="parameter">$options</tt></span>
   [, <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <tt class="parameter">$input_headers</tt></span>
   [, <span class="methodparam"><span class="type">array</span> <tt class="parameter reference">&$output_headers</tt></span>
  ]]] )</div>

  <p class="para rdfs-comment">
   This is a low level API function that is used to make a SOAP call. Usually,
   in WSDL mode, SOAP functions can be called as methods of the
   <a href="class.soapclient.html" class="classname">SoapClient</a> object. This method is useful in non-WSDL
   mode when <i>soapaction</i> is unknown, <i>uri</i>
   differs from the default or when sending and/or receiving SOAP Headers.
  </p>
  <p class="para">
   On error, a call to a SOAP function can cause PHP to throw exceptions or return a
   <a href="class.soapfault.html" class="classname">SoapFault</a> object if exceptions are disabled.
   To check if the function call failed to catch the SoapFault exceptions,
   check the result with <span class="function"><a href="function.is-soap-fault.html" class="function">is_soap_fault()</a></span>.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-soapclient.soapcall-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><i><tt class="parameter">function_name</tt></i></span>
     <dd>

      <p class="para">
       The name of the SOAP function to call.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">arguments</tt></i></span>
     <dd>

      <p class="para">
       An array of the arguments to pass to the function. This can be either
       an ordered or an associative array.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">options</tt></i></span>
     <dd>

      <p class="para">
       An associative array of options to pass to the client.
      </p>
      <p class="para">
       The <i>location</i> option is the URL of the remote Web service.
      </p>
      <p class="para">
       The <i>uri</i> option is the target namespace of the SOAP service.
      </p>
      <p class="para">
        The <i>soapaction</i> option is the action to call.
      </p>
    </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">input_headers</tt></i></span>
     <dd>

      <p class="para">
       An array of headers to be sent along with the SOAP request.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">output_headers</tt></i></span>
     <dd>

      <p class="para">
       If supplied, this array will be filled with the headers from the SOAP response.
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-soapclient.soapcall-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   SOAP functions may return one, or multiple values. If only one value is returned
   by the SOAP function, the return value of <i>__soapCall</i> will be
   a simple value (e.g. an integer, a string, etc). If multiple values are
   returned, <i>__soapCall</i> will return
   an associative array of named output parameters.
  </p>
  <p class="para">
   On error, if the SoapClient object was constructed with the <i>trace</i>
   option set to <b><tt>FALSE</tt></b>, a SoapFault object will be returned.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-soapclient.soapcall-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   <div class="example" id="example-4844">
    <p><b>Example #1 <span class="function"><b>SoapClient::__soapCall()</b></span> example</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br />$client&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">SoapClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"some.wsdl"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$client</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SomeFunction</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$c</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$client</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">__soapCall</span><span style="color: #007700">(</span><span style="color: #DD0000">"SomeFunction"</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #0000BB">$a</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$c</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$client</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">__soapCall</span><span style="color: #007700">(</span><span style="color: #DD0000">"SomeFunction"</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #0000BB">$a</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$c</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">NULL</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;new&nbsp;</span><span style="color: #0000BB">SoapHeader</span><span style="color: #007700">(),&nbsp;</span><span style="color: #0000BB">$output_headers</span><span style="color: #007700">);<br /><br /><br /></span><span style="color: #0000BB">$client&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">SoapClient</span><span style="color: #007700">(</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">'location'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"http://localhost/soap.php"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'uri'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"http://test-uri/"</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$client</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SomeFunction</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$c</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$client</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">__soapCall</span><span style="color: #007700">(</span><span style="color: #DD0000">"SomeFunction"</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #0000BB">$a</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$c</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$client</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">__soapCall</span><span style="color: #007700">(</span><span style="color: #DD0000">"SomeFunction"</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #0000BB">$a</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$c</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #DD0000">'soapaction'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'some_action'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'uri'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'some_uri'</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-soapclient.soapcall-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"> <span class="methodname"><a href="soapclient.soapclient.html" class="methodname" rel="rdfs-seeAlso">SoapClient::SoapClient()</a> - SoapClient constructor</span></li>
    <li class="member"> <span class="methodname"><a href="soapparam.soapparam.html" class="methodname" rel="rdfs-seeAlso">SoapParam::SoapParam()</a> - SoapParam constructor</span></li>
    <li class="member"> <span class="methodname"><a href="soapvar.soapvar.html" class="methodname" rel="rdfs-seeAlso">SoapVar::SoapVar()</a> - SoapVar constructor</span></li>
    <li class="member"> <span class="methodname"><a href="soapheader.soapheader.html" class="methodname" rel="rdfs-seeAlso">SoapHeader::SoapHeader()</a> - SoapHeader constructor</span></li>
    <li class="member"> <span class="methodname"><a href="soapfault.soapfault.html" class="methodname" rel="rdfs-seeAlso">SoapFault::SoapFault()</a> - SoapFault constructor</span></li>
    <li class="member"><span class="function"><a href="function.is-soap-fault.html" class="function" rel="rdfs-seeAlso">is_soap_fault()</a> - Checks if a SOAP call has failed</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="102387""></a>
  <div class="note">
   <strong class="user">snuufix+nospam at gmail dot com</strong>
   <a href="#102387" class="date">11-Feb-2011 03:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I am using SOAP call response headers to sign request results.<br />
<br />
After alot of hours, I finally got the best way to get SOAP response headers (other than parsing __getLastResponse() witch requires trace option enabled) is using __soapCall() wrapper.<br />
<br />
You can extend SoapClient class and wrap some functions to make sure you get the headers.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">API </span><span class="keyword">extends </span><span class="default">SoapClient<br />
</span><span class="keyword">{<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// ... Constructor, etc.<br />
<br />
&nbsp;&nbsp;&nbsp; // Get SOAP Server response headers<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">__soapCall</span><span class="keyword">(</span><span class="default">$function</span><span class="keyword">, </span><span class="default">$arguments</span><span class="keyword">, </span><span class="default">$options </span><span class="keyword">= array(), </span><span class="default">$input_headers </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">, &amp;</span><span class="default">$output_headers </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">parent</span><span class="keyword">::</span><span class="default">__soapCall</span><span class="keyword">(</span><span class="default">$function</span><span class="keyword">, </span><span class="default">$arguments</span><span class="keyword">, </span><span class="default">$options</span><span class="keyword">, </span><span class="default">$input_headers</span><span class="keyword">, </span><span class="default">$output_headers</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$output_headers</span><span class="keyword">); </span><span class="comment">// Array of response headers<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">}<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// If you are using WSDL you need this, so you still can call functions directly without calling __soapCall manualy<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">__call</span><span class="keyword">(</span><span class="default">$func</span><span class="keyword">, </span><span class="default">$args</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">__soapCall</span><span class="keyword">(</span><span class="default">$func</span><span class="keyword">, </span><span class="default">$args</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100829""></a>
  <div class="note">
   <strong class="user">niko dot hujanen at gmail dot com</strong>
   <a href="#100829" class="date">09-Nov-2010 11:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was integrating a local warehouse system with a SOAP to our system and noticed some things.<br />
<br />
1) Service uses "dot-namespacing" (fe. Item.Price) I classmapped this to Item_Price and used magical __get() and __set() to strip off 'Item.' from variable names. Works like a charm.<br />
<br />
Example:<br />
&lt;Item.Price&gt;1.52&lt;/Item.Price&gt;<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">Item_Price </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$price</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__get</span><span class="keyword">(</span><span class="default">$field</span><span class="keyword">) { </span><span class="default">$field </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'Item.'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$field</span><span class="keyword">); return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">$field</span><span class="keyword">; }<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__set</span><span class="keyword">(</span><span class="default">$field</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">) { </span><span class="default">$field </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'Item.'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$field</span><span class="keyword">); </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">$field </span><span class="keyword">= </span><span class="default">$value</span><span class="keyword">; }<br />
</span><span class="default">?&gt;<br />
</span><br />
2) I noticed that classmapping a segment with attributes and value is possible. Class uses variables as attributes and $_ is the value.<br />
<br />
Example:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">Foo </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$item </span><span class="keyword">= </span><span class="string">'Bar'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$_ </span><span class="keyword">= </span><span class="string">'Value here'</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span>Turns to &lt;Foo item="Bar"&gt;Value here&lt;/Foo&gt;<br />
<br />
Example of using classes with soapcalls:<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $client </span><span class="keyword">= </span><span class="default">ExtendSoapClient</span><span class="keyword">::</span><span class="default">getInstance</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$foo </span><span class="keyword">= new </span><span class="default">Foo</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$response </span><span class="keyword">= </span><span class="default">$client</span><span class="keyword">-&gt;</span><span class="default">sendFoo</span><span class="keyword">(</span><span class="default">$foo</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Posted these since I think the documentation is lacking and very obsolete. Hopefully someone's burden eases.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100182""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#100182" class="date">29-Sep-2010 02:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For those getting "SOAP-ERROR: Encoding: object hasn't 'newOrderRequest' property" type errors, there is an additional bug that doesn't seem to be documented anywhere.<br />
<br />
For 2+ elements, you need a numeric array but the keys *must* start from 0 and *must* be sequential. If not, you will get this validation error. The fix is as simple as sending the array through array_values().</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100087""></a>
  <div class="note">
   <strong class="user">yoyoy at yopmail dot com</strong>
   <a href="#100087" class="date">24-Sep-2010 02:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Please, please please ...<br />
is it possible to find the name of parameters of any function ?<br />
<br />
example<br />
<br />
$params = array( 'I_DONT_KNOW_THIS_NAME'=&gt;$val_1, 'I_WANT_TO_FIND_THIS_NAME'=&gt;$val_2 );<br />
$client-&gt;call('MethodName', array('parameters' =&gt; $params));<br />
<br />
thanks</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="98348""></a>
  <div class="note">
   <strong class="user">james dot ellis at gmail dot com</strong>
   <a href="#98348" class="date">09-Jun-2010 07:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you are using this method, remember that the array of arguments need to be passed in with the ordering being the same order that the SOAP endpoint expects.<br />
<br />
e.g<br />
<span class="default">&lt;?php<br />
</span><span class="comment">//server expects: Foo(string name, int age)<br />
<br />
//won't work<br />
</span><span class="default">$args </span><span class="keyword">= array(</span><span class="default">32</span><span class="keyword">, </span><span class="string">'john'</span><span class="keyword">);<br />
</span><span class="default">$out </span><span class="keyword">= </span><span class="default">$client</span><span class="keyword">-&gt;</span><span class="default">__soapCall</span><span class="keyword">(</span><span class="string">'Foo'</span><span class="keyword">, </span><span class="default">$args</span><span class="keyword">);<br />
<br />
</span><span class="comment">//will work<br />
</span><span class="default">$args </span><span class="keyword">= array(</span><span class="string">'john'</span><span class="keyword">, </span><span class="default">32</span><span class="keyword">);<br />
</span><span class="default">$out </span><span class="keyword">= </span><span class="default">$client</span><span class="keyword">-&gt;</span><span class="default">__soapCall</span><span class="keyword">(</span><span class="string">'Foo'</span><span class="keyword">, </span><span class="default">$args</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95175""></a>
  <div class="note">
   <strong class="user">jarrod at squarecrow dot com</strong>
   <a href="#95175" class="date">16-Dec-2009 12:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you find yourself needing to consume entire datatables from .NET there are two quick ways to do this. <br />
<br />
If you are writing the web services yourself there is a very handy trick to return a datatable as a schema-less XML document. Create a new module file in .NET with this code -<br />
<br />
Imports System.Xml<br />
<br />
Module PHPDatatable<br />
&nbsp;&nbsp;&nbsp; Public Function parse(ByVal dt As DataTable)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; Dim xmlstream As New StringBuilder<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; Dim write As XmlWriter = XmlWriter.Create(xmlstream)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; write.WriteProcessingInstruction("xml", "version='1.0' encoding='utf-8'")<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; dt.WriteXml(write)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; Return xmlstream.ToString()<br />
&nbsp;&nbsp;&nbsp; End Function<br />
End Module<br />
<br />
To use it (where MyTable is the datatable we are using.......)<br />
<br />
return PHPDatatable.parse(MyTable)&nbsp; &nbsp; 'your return type will need to be a STRING.<br />
<br />
Back in PHP, after you have made your SOAP call and have the results you can use SimpleXML to parse out the datatable into an array of objects like so (where $soap are my soap results.......)<br />
<br />
<span class="default">&lt;?php<br />
<br />
$datatable </span><span class="keyword">= </span><span class="default">simplexml_load_string</span><span class="keyword">(</span><span class="default">$soap</span><span class="keyword">-&gt;</span><span class="default">myfunctionResult</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
In the unfortunate situation where you have no choice but to consume a full-blown datatable (ie: you aren't writing the web services yourself) I have a basic SOAP client available on Codeplex that can parse .NET datatables into an array of objects.&nbsp; <a href="http://superdotnet.codeplex.com/" rel="nofollow" target="_blank">http://superdotnet.codeplex.com/</a><br />
<br />
Both methods are fairly simply to implement, and should save you the headache of mapping out your datatables to prebaked .NET objects and manually setting each value.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92828""></a>
  <div class="note">
   <strong class="user">jarrod at squarecrow dot com</strong>
   <a href="#92828" class="date">10-Aug-2009 07:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When dealing with .NET web services, its a good to remember that moving data back and forth between PHP and .NET can be a little cumbersome if you aren't familiar with the object structures of both.<br />
<br />
.NET will return everything inside of an object - usually your function name with "Result" tagged onto the end.<br />
<br />
Example.<br />
<br />
<span class="default">&lt;?php<br />
$client </span><span class="keyword">= new </span><span class="default">soapclient</span><span class="keyword">(</span><span class="default">SOAP_ADDRESS</span><span class="keyword">);<br />
</span><span class="default">$objectresult </span><span class="keyword">= </span><span class="default">$client</span><span class="keyword">-&gt;</span><span class="default">GetDataByID</span><span class="keyword">(array(</span><span class="string">'PeopleVendorsID'</span><span class="keyword">=&gt; </span><span class="string">'N21248'</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
.... where GetDataByID is my .NET web service function, PeopleVendorsID is name of the parameter I pass it, and "N21248" happens to be the value of the parameter.<br />
<br />
.NET was supposed to return an array to $objectresult but instead I found myself with a triple-nested object.<br />
<br />
Basically, if you ever find yourself in a situation where you can't seem to access your data, make use of var_dump.<br />
<br />
<span class="default">&lt;?php<br />
var_dump</span><span class="keyword">(</span><span class="default">$objectresult</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
This will print out a very handy array/object structure for you to sift through - invaluable if you're dealing with cryptic results from .NET.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92645""></a>
  <div class="note">
   <strong class="user">l dot tomov at raz dot bg</strong>
   <a href="#92645" class="date">01-Aug-2009 06:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was trying to call a .net service and it took me quite some hours to get the exact object structure. <br />
I was getting a "SOAP-ERROR: Encoding: object hasn't 'newOrderRequest' property"<br />
<br />
This is how I got it working:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">NewOrderRequestElement <br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$merchantID </span><span class="keyword">= </span><span class="string">"1234"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$terminalID </span><span class="keyword">= </span><span class="string">"001"</span><span class="keyword">;<br />
}<br />
<br />
class </span><span class="default">NewOrder <br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$newOrderRequest</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$no </span><span class="keyword">= new </span><span class="default">NewOrder</span><span class="keyword">;<br />
</span><span class="default">$no</span><span class="keyword">-&gt;</span><span class="default">newOrderRequest </span><span class="keyword">= new </span><span class="default">NewOrderRequestElement</span><span class="keyword">;<br />
<br />
</span><span class="default">$response </span><span class="keyword">= </span><span class="default">$client</span><span class="keyword">-&gt;</span><span class="default">NewOrder</span><span class="keyword">(</span><span class="default">$no</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
And in order to get the exact class structure, you need to call <br />
$client-&gt;__getTypes();<br />
<br />
Hope this helps somebody.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91821""></a>
  <div class="note">
   <strong class="user">jayrajput at gmail dot com</strong>
   <a href="#91821" class="date">26-Jun-2009 09:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I see notes from lot of users where they wanted to convert the response to an array.<br />
<br />
Problem description as told by one of the user:<br />
--------------------------------------------------------<br />
When a SOAP call returns an array [max_elements="&gt;1"] - you may not actually get an array... (this may be a fault in the wsdl, but it's certainly a potential headache).<br />
<br />
foreach($result-&gt;field as $field) {<br />
&nbsp; doSomethingWith($field);<br />
}<br />
<br />
With more than 1 &lt;field&gt;, you'll loop through the &lt;field&gt; tags (as expected)... <br />
<br />
However, with exactly 1 &lt;field&gt;, you'll instead loop through the child elements of the first &lt;field&gt; (almost certainly *not* what you wanted to happen)...<br />
<br />
Solution:<br />
-----------<br />
Use SoapClient features option:<br />
<br />
new SoapClient($wsdl, array("features" =&gt; SOAP_SINGLE_ELEMENT_ARRAYS);<br />
<br />
and then the PHP takes care of converting result to an array.<br />
<br />
I have been bitten by this before and never looked into this option ...duh...duh</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90428""></a>
  <div class="note">
   <strong class="user">lesley at casbah dot com dot au</strong>
   <a href="#90428" class="date">21-Apr-2009 06:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you are calling a weblogic service with a certificate and you are getting this error on the soap method call statement:<br />
<br />
[EJB:010160]Security Violation: User: '&lt;anonymous&gt;' has insufficient permission to access EJB: type=&lt;ejb&gt;, application=app2_0_52_3, module=appsejb.jar, ejb=AppMethod, method=AppMethod, methodInterface=Remote, signature={java.lang.String}.<br />
<br />
then check the wsdl in the soap open call - it must be https.&nbsp; Supplied with an http wsdl this took some time to figure out.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $client </span><span class="keyword">= new </span><span class="default">SoapClient</span><span class="keyword">(</span><span class="string">"https://example.com/AppWs/Service?WSDL"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array(</span><span class="string">'trace'</span><span class="keyword">=&gt;</span><span class="default">true</span><span class="keyword">, <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'exceptions'</span><span class="keyword">=&gt;</span><span class="default">true</span><span class="keyword">, <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'local_cert' </span><span class="keyword">=&gt; </span><span class="string">"/var/www/html/app/newcert.pem"</span><span class="keyword">, <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'passphrase' </span><span class="keyword">=&gt; </span><span class="string">"thepassphrase"</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$response </span><span class="keyword">= </span><span class="default">$client</span><span class="keyword">-&gt;</span><span class="default">__soapCall</span><span class="keyword">(</span><span class="string">"MyMethod"</span><span class="keyword">, array(</span><span class="string">"param1" </span><span class="keyword">=&gt; </span><span class="default">$value1</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
Thanks to the authors for their comments on enabling openssl and curl by uncommenting extension=php_opensll.dll and extension=php_curl.dll in php.ini.&nbsp; Also for Olaf's instructions "append the content of the private key file and the certificate file to a single file". I did this using copy command on the DOS prompt:<br />
<br />
copy mycert.pem+mykey.pem newcert.pem</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90161""></a>
  <div class="note">
   <strong class="user">Tim Williams</strong>
   <a href="#90161" class="date">08-Apr-2009 06:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
One little gotcha when passing the parameters where you need to have attributes and a simpletype value: <br />
<br />
To get the xml<br />
<br />
&lt;foo bar="moo"&gt;cheese&lt;/foo&gt;<br />
<br />
You'd pass in:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">array(</span><span class="string">"foo" </span><span class="keyword">=&gt; array(</span><span class="string">"_" </span><span class="keyword">=&gt; </span><span class="string">"cheese"</span><span class="keyword">, </span><span class="string">"bar"</span><span class="keyword">=&gt;</span><span class="string">"moo"</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
See that "_" bit? It really wasn't obvious from the documentation.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90031""></a>
  <div class="note">
   <strong class="user">deWarlock</strong>
   <a href="#90031" class="date">02-Apr-2009 04:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The most annoying thing is that you'll get no warning trying to pass object not matching wsdl e.g. if server expects smth like $Object-&gt;expName-&gt;... and you would pass $Object-&gt;otherName the client will send empty request without notifying you.<br />
Also pay attention that names are key sensitive.<br />
<br />
In my case I spent hours trying to pass $Post-&gt;Lead-&gt;... object instead of $Post-&gt;lead-&gt; ...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89308""></a>
  <div class="note">
   <strong class="user">Shto</strong>
   <a href="#89308" class="date">03-Mar-2009 03:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
One thing to note.<br />
<br />
This happened to me and it took a while until I discovered what the problem was.<br />
<br />
I was trying to get .NET objects from a provided web service, however it always seemed to return empty objects. It did return the backbone, but nothing within the objects that made up the structure.<br />
<br />
Anyhow, it seems that you have to be very precise with the arrays when calling these functions. Par example, do this:<br />
<br />
<span class="default">&lt;?php<br />
$obj </span><span class="keyword">= </span><span class="default">$client</span><span class="keyword">-&gt;</span><span class="default">__soapCall</span><span class="keyword">(</span><span class="default">$SOAPCall</span><span class="keyword">, array(</span><span class="string">'parameters'</span><span class="keyword">=&gt;</span><span class="default">$SoapCallParameters</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
meaning that you must put an array as the second argument with 'parameters' as the key and the soap call parameters as the value.<br />
<br />
Also make sure that the parameter variable, in my case $SoapCallParameters is in the form of what is requested by the webservice.<br />
<br />
So, don't just make an array of the form:<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">(<br />
&nbsp;&nbsp; [</span><span class="default">0</span><span class="keyword">] =&gt; </span><span class="string">'Mary'</span><span class="keyword">,<br />
&nbsp;&nbsp; [</span><span class="default">1</span><span class="keyword">] =&gt; </span><span class="default">1983<br />
</span><span class="keyword">)<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
but if the webservice requests a 'muid' variable as 'Mary' and a 'birthyear' as 1983, then make your array like this:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">(<br />
&nbsp;&nbsp; [</span><span class="default">muid</span><span class="keyword">] =&gt; </span><span class="string">'Mary'</span><span class="keyword">,<br />
&nbsp;&nbsp; [</span><span class="default">birthyear</span><span class="keyword">] =&gt; </span><span class="default">1983<br />
</span><span class="keyword">)<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
The above arrays refer to the $SoapCallParameters variable.<br />
<br />
Hope this helps somebody, not having to spend too much time figuring out the problems.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88716""></a>
  <div class="note">
   <strong class="user">dennis at born05 dot nl</strong>
   <a href="#88716" class="date">04-Feb-2009 09:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To properly override the __soapCall() method use the following syntax:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">public function </span><span class="default">__soapCall </span><span class="keyword">(</span><span class="default">$function_name</span><span class="keyword">, </span><span class="default">$arguments</span><span class="keyword">, </span><span class="default">$options </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">, </span><span class="default">$input_headers </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">, &amp;</span><span class="default">$output_headers </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// your code goes here..<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">parent</span><span class="keyword">::</span><span class="default">__soapCall</span><span class="keyword">(</span><span class="default">$function_name</span><span class="keyword">, </span><span class="default">$arguments</span><span class="keyword">, </span><span class="default">$options</span><span class="keyword">, </span><span class="default">$input_headers</span><span class="keyword">, </span><span class="default">$output_headers</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
This had me puzzled for a while..</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88012""></a>
  <div class="note">
   <strong class="user">uwe dot trotzek at gmx dot de</strong>
   <a href="#88012" class="date">06-Jan-2009 01:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Receiving .NET Datatables in PHP:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">getDataBySQL</span><span class="keyword">(</span><span class="default">$strSQL</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arrParams </span><span class="keyword">= array( </span><span class="string">'strSQL' </span><span class="keyword">=&gt; </span><span class="default">$strSQL</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; try{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$arrOptions </span><span class="keyword">= array(</span><span class="string">'location' </span><span class="keyword">=&gt; </span><span class="default">WBSRV_URI</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_sclWebService </span><span class="keyword">= new&nbsp; </span><span class="default">SoapClient</span><span class="keyword">(</span><span class="default">WBSRV_WSDL_PATH</span><span class="keyword">, </span><span class="default">$arrOptions</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$dt </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_sclWebService<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">-&gt;</span><span class="default">getTableFromSQL</span><span class="keyword">(</span><span class="default">$arrParams</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -&gt;</span><span class="default">getTableFromSQLResult<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">-&gt;</span><span class="default">any</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$dt </span><span class="keyword">= </span><span class="default">simplexml_load_string</span><span class="keyword">(</span><span class="default">$dt</span><span class="keyword">)-&gt;</span><span class="default">NewDataSet</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$dt</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }catch (</span><span class="default">Exception $e</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="default">$e</span><span class="keyword">-&gt;</span><span class="default">getMessage</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span>The serialized xml String has to be converted first using the function simplexml_load_string. <br />
Now the complete dataset is represented in $dt</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85819""></a>
  <div class="note">
   <strong class="user">stephan</strong>
   <a href="#85819" class="date">18-Sep-2008 10:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When I try to convert result to array I get "Cannot use object of type stdClass as array ..." so I use next:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">toArray</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$return</span><span class="keyword">=array();<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$keys</span><span class="keyword">=</span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; } elseif (</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$keys</span><span class="keyword">=</span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">get_object_vars</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; } else {return </span><span class="default">$obj</span><span class="keyword">;}<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$keys </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value</span><span class="keyword">=</span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">$key</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$return</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]=</span><span class="default">toArray</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$return</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]=</span><span class="default">toArray</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">$key</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$return</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85442""></a>
  <div class="note">
   <strong class="user">skunkrecords at gmail . com</strong>
   <a href="#85442" class="date">30-Aug-2008 10:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I spent an entire day trying to figure out why I couldn't interface with a .net server! Read&nbsp; sethm at uoregon dot edu's comment. It will save your life :P</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84807""></a>
  <div class="note">
   <strong class="user">elementation at gmail dot com</strong>
   <a href="#84807" class="date">30-Jul-2008 12:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just as a note, when working with base64'd content, calling a function which returns a base64'd binary value will automagically base64_decode() the value for you, rendering any data unusable if you base64_decode() again.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82878""></a>
  <div class="note">
   <strong class="user">dess at dessben dot net</strong>
   <a href="#82878" class="date">30-Apr-2008 01:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I had several problems with the error "Object reference not set to an instance of an object." with .NET Webservices.<br />
This problem also can be a "non-type" problem.<br />
<br />
I can resolved this problem, defining previously the type of the soap functions arguments, with settype() function.<br />
<br />
<span class="default">&lt;?php<br />
settype</span><span class="keyword">(</span><span class="default">$foo</span><span class="keyword">, </span><span class="string">"string"</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82049""></a>
  <div class="note">
   <strong class="user">sethm at uoregon dot edu</strong>
   <a href="#82049" class="date">25-Mar-2008 03:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Trying to connect to a .NET webservice using the PHP SOAP client, we ran into much strangeness. <br />
<br />
When using __soapCall do:<br />
$params = array('a'=&gt;$a, 'b'=&gt;$b);<br />
$result = $client-&gt;__soapCall('someFunction', array($params));<br />
<br />
When using calling the function directly use:<br />
$params = array('a'=&gt;$a, 'b'=&gt;$b);<br />
$result = $client-&gt;someFunction($params);<br />
<br />
If $params isn't associative, the client doesn't form the call correctly. Calling it other ways lead to having the first parameter dropped or the parameters not being displayed in the request.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81919""></a>
  <div class="note">
   <strong class="user">Alejandro Cavallo</strong>
   <a href="#81919" class="date">19-Mar-2008 07:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I get the same problem reported above by ryan:<br />
"ryan at grunt dot tv<br />
22-Sep-2005 01:38<br />
If you want to pass an xml document node as a function parameter, your need to create a SoapVar object with a text represention of the xml node and the XSD_ANYXML encoding constant. However, this constant is not exported by the extension and is not documented for some unknown reason."<br />
<br />
When defined variable soapVar I assigned the type XSD_STRING rather than as XSD_ANYXML.<br />
And when calls to the function you must pass the soapVar in an associative array. <br />
<br />
For example if the function (called myFunc) expect a parameter called xmlInput you should do something like this:<br />
$soapvar = new SoapVar($query, XSD_STRING);<br />
$result = $client-&gt;myFunc(array('xmlInput'=&gt;$soapvar));<br />
<br />
This XML fragment are wrapped around xmlImput tags.-</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78707""></a>
  <div class="note">
   <strong class="user">stefan at datax dot biz</strong>
   <a href="#78707" class="date">24-Oct-2007 07:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The call to __soapCall returned an object to me either. This is the function which makes my life easier:<br />
<br />
function obj2array($obj) {<br />
&nbsp; $out = array();<br />
&nbsp; foreach ($obj as $key =&gt; $val) {<br />
&nbsp;&nbsp;&nbsp; switch(true) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; case is_object($val):<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; $out[$key] = obj2array($val);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; break;<br />
&nbsp;&nbsp; &nbsp;&nbsp; case is_array($val):<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; $out[$key] = obj2array($val);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; break;<br />
&nbsp;&nbsp; &nbsp;&nbsp; default:<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $out[$key] = $val;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
&nbsp; return $out;<br />
}<br />
<br />
Usage:<br />
...<br />
$response = $client -&gt;__soapCall("track", array('parameters' =&gt; $request));<br />
$response = obj2array($response);<br />
<br />
Hope it helps.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76831""></a>
  <div class="note">
   <strong class="user">stephen at sekka dot co dot uk</strong>
   <a href="#76831" class="date">01-Aug-2007 07:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you are trying to use a .NET web service and every call you make returns the following error,<br />
<br />
"Server was unable to process request. --&gt; Object reference not set to an instance of an object."<br />
<br />
... then you need to pass Objects into the method rather than the standard variables.<br />
<br />
To do this, you need to create mini classes that have properties of the variables you are trying to pass, map them to the types of the WSDL, then pass them into the methods.<br />
<br />
Here is an example,<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">Test </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$account</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$password</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$parameters </span><span class="keyword">= new </span><span class="default">Test</span><span class="keyword">;<br />
</span><span class="default">$parameters </span><span class="keyword">-&gt; </span><span class="default">account </span><span class="keyword">= </span><span class="default">$username</span><span class="keyword">;<br />
</span><span class="default">$parameters </span><span class="keyword">-&gt; </span><span class="default">password </span><span class="keyword">= </span><span class="default">$password</span><span class="keyword">;<br />
<br />
try {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$client </span><span class="keyword">= new </span><span class="default">SoapClient </span><span class="keyword">(</span><span class="string">"https://www.somewebsite.com/Service.asmx?wsdl"</span><span class="keyword">, array(</span><span class="string">'classmap' </span><span class="keyword">=&gt; array(</span><span class="string">'CheckUser' </span><span class="keyword">=&gt; </span><span class="string">'Test'</span><span class="keyword">)));<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$client </span><span class="keyword">-&gt; </span><span class="default">CheckUser </span><span class="keyword">(</span><span class="default">$parameters</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"Valid Credentials!"</span><span class="keyword">;<br />
}<br />
catch (</span><span class="default">Exception $e</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"Error!&lt;br /&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$e </span><span class="keyword">-&gt; </span><span class="default">getMessage </span><span class="keyword">();<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75797""></a>
  <div class="note">
   <strong class="user">andrewa at bigpond dot net dot au</strong>
   <a href="#75797" class="date">16-Jun-2007 04:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In response to dumbo's comment on the request not always returning an array:<br />
<br />
"more than 1 &lt;field&gt;, you'll loop through the &lt;field&gt; tags (as expected)..."<br />
<br />
Here's some quick code to get around it:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">getArrayFromResponse</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">) &lt; </span><span class="default">2</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new </span><span class="keyword">= array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new</span><span class="keyword">[] = </span><span class="default">$data</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$new</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$data</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Usage:<br />
<br />
$result = $soap-&gt;__soapCall('DoSomething', array('parameters' =&gt; $param))<br />
<br />
foreach(getArrayFromResponse($result['ResponseKeyHere']) as $a) {<br />
&nbsp;// $a will always be an object<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75078""></a>
  <div class="note">
   <strong class="user">zeta2ste2000 at yahoo dot it</strong>
   <a href="#75078" class="date">11-May-2007 01:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When I have to manage a long number in the header,<br />
&nbsp;the __soapCall function returns a float number in exponential format. <br />
The returned value can't be sent to the server because it is different <br />
from the original one ( for the floating point values limited precision ).<br />
<br />
Example :<br />
<br />
// Server sended value : 339051398236687110<br />
$soapclient-&gt;__soapCall('beginSession',$parameters, null, null,$header);<br />
<br />
echo $header["sessionID"];&nbsp;&nbsp; // returns 3.3905139823669E+17 or 339051398236687050 ( converted to sting) <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // and that is different from the original 339051398236687110&nbsp; &nbsp;&nbsp; <br />
<br />
$strNum =&nbsp; $soapclient-&gt;__getLastResponse();<br />
<br />
preg_match("([0-9-]{19,20})", $strNum, $args); // Extracts the correct sessionID value as a string <br />
$headers = new SoapHeader( "<a href="http://xml.apache.org/axis/session" rel="nofollow" target="_blank">http://xml.apache.org/axis/session</a>", "sessionID", $args[0]);<br />
<br />
$soapclient-&gt;__soapCall('nextCall', $parameters, null, $headers);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74535""></a>
  <div class="note">
   <strong class="user">bliu at computer dot org</strong>
   <a href="#74535" class="date">16-Apr-2007 06:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Using&nbsp; wsdl file automatically generated by the jboss4.2CR1 deployer, <br />
I tried dozens of methods to marshal parameters to a JAXWS endpoint. And the service constantly got null parameters. At last, I found the right way to call is <br />
&lt;?<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $params = array('param1'=&gt;"foo", 'param2'=&gt;"bar");<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $client-&gt;__soapCall('yourMethod', array('parameters' =&gt; $params));<br />
?&gt;<br />
By this way, the parameters' names and values are correctly enclosed by the method name, and the service gives expected replies.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74263""></a>
  <div class="note">
   <strong class="user">dumbo</strong>
   <a href="#74263" class="date">02-Apr-2007 06:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that when a SOAP call returns an array [max_elements="&gt;1"] - you may not actually get an array... (this may be a fault in the wsdl, but it's certainly a potential headache).<br />
<br />
foreach($result-&gt;field as $field) {<br />
&nbsp; doSomethingWith($field);<br />
}<br />
<br />
With more than 1 &lt;field&gt;, you'll loop through the &lt;field&gt; tags (as expected)... <br />
<br />
However, with exactly 1 &lt;field&gt;, you'll instead loop through the child elements of the first &lt;field&gt; (almost certainly *not* what you wanted to happen)...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73881""></a>
  <div class="note">
   <strong class="user">GoodHater</strong>
   <a href="#73881" class="date">14-Mar-2007 07:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I would just like to add to OrionI's example that if the result is an array eg int, int, string, string then those values can be retrieved as follows:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">...<br />
</span><span class="default">$simpleresult </span><span class="keyword">= </span><span class="default">$objectresult</span><span class="keyword">-&gt;</span><span class="default">SumResult</span><span class="keyword">;<br />
echo </span><span class="default">$simpleresult</span><span class="keyword">-&gt;</span><span class="default">element name</span><span class="keyword">;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="72701""></a>
  <div class="note">
   <strong class="user">temp at mailinator dot com</strong>
   <a href="#72701" class="date">30-Jan-2007 04:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The options in the third argument is documented in <a href="http://php.net/manual/en/function.soap-soapclient-construct.php" rel="nofollow" target="_blank">http://php.net/manual/en/function.soap-soapclient-construct.php</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="60576""></a>
  <div class="note">
   <strong class="user">paulsjv at gmail dot com</strong>
   <a href="#60576" class="date">11-Jan-2006 07:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was working with SOAP for the first time and I had to create a client that sent a date range to a WSDL (Web Services Description Language) to return some information I needed.&nbsp; I didn't know how to pass the params and there really was no documentation about it.&nbsp; The main thing you have to make sure to do is when you pass params to a method that is definied by the WSDL that you are calling is that you use the same param name for the key of the array or the object variable as shown below.&nbsp; Also, if you don't know what the methods/functions that a WSDL has or the params that you need to pass it you can use the __getFunctions() and __getTypes() methods after you declare your new SoapClient.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// From and to are the two params that the execute function needs<br />
// when called from the WSDL so make you to have them as the<br />
// key to an array like below<br />
</span><span class="default">$params</span><span class="keyword">[</span><span class="string">"From"</span><span class="keyword">] = </span><span class="string">"06/01/2005"</span><span class="keyword">; </span><span class="comment">// also can use $params-&gt;From = "date";<br />
</span><span class="default">$params</span><span class="keyword">[</span><span class="string">"to"</span><span class="keyword">] = </span><span class="string">"12/31/2005"</span><span class="keyword">; </span><span class="comment">// also can use $params-&gt;to = "date";<br />
<br />
</span><span class="default">$client </span><span class="keyword">= new </span><span class="default">SoapClient</span><span class="keyword">(</span><span class="string">"some.wsdl"</span><span class="keyword">);<br />
<br />
try {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; print(</span><span class="default">$client</span><span class="keyword">-&gt;</span><span class="default">execute</span><span class="keyword">(</span><span class="default">$params</span><span class="keyword">));<br />
} catch (</span><span class="default">SoapFault $exception</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="default">$exception</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="57032""></a>
  <div class="note">
   <strong class="user">ryan at grunt dot tv</strong>
   <a href="#57032" class="date">21-Sep-2005 09:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to pass an xml document node as a function parameter, your need to create a SoapVar object with a text represention of the xml node and the XSD_ANYXML encoding constant. However, this constant is not exported by the extension and is not documented for some unknown reason. <br />
<br />
Therefore, to get this to work you must either register the XSD_ANYXML #define as a PHP constant, or use the integer value of the constant when creating the SoapVar, which is 147.<br />
<br />
$soapvar = new SoapVar($xml_text, 147);<br />
<br />
$params = array("ItemXml" =&gt; $soapvar, "PropertyView" =&gt; "blah");<br />
$result = $this-&gt;soapclient-&gt;__soapCall("SaveItem", array("parameters"=&gt;$params), null, $this-&gt;soapheaders);<br />
<br />
However, this still doesnt give the correct result. For some reason, the ItemXml parameter node is not wrapped around the associated xml parameter in the soap request, and the following soap is produced (assumming '&lt;item&gt;blah&lt;/item&gt;' is used as the $xml_text):<br />
<br />
&lt;SOAP-ENV:Envelope xmlns:SOAP-ENV="..." xmlns:ns1="..."&gt;<br />
&lt;SOAP-ENV:Header&gt;...&lt;/SOAP-ENV:Header&gt;<br />
&lt;SOAP-ENV:Body&gt;<br />
&lt;ns1:SaveItem&gt;<br />
&lt;item&gt;blah&lt;/item&gt;<br />
&lt;ns1:PropertyView&gt;blah&lt;/ns1:PropertyView&gt;<br />
&lt;/ns1:SaveItem&gt;<br />
&lt;/SOAP-ENV:Body&gt;<br />
&lt;/SOAP-ENV:Envelope&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="52533""></a>
  <div class="note">
   <strong class="user">DesmondJ</strong>
   <a href="#52533" class="date">04-May-2005 03:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Following OrionI's example:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;$client </span><span class="keyword">= new </span><span class="default">SoapClient</span><span class="keyword">(</span><span class="string">"<a href="http://server/sumservice.asmx?WSDL" rel="nofollow" target="_blank">http://server/sumservice.asmx?WSDL</a>"</span><span class="keyword">);<br />
&nbsp;</span><span class="default">$params</span><span class="keyword">-&gt;</span><span class="default">a </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">;<br />
&nbsp;</span><span class="default">$params</span><span class="keyword">-&gt;</span><span class="default">b </span><span class="keyword">= </span><span class="default">3</span><span class="keyword">;<br />
&nbsp;</span><span class="default">$objectresult </span><span class="keyword">= </span><span class="default">$client</span><span class="keyword">-&gt;</span><span class="default">Sum</span><span class="keyword">(</span><span class="default">$params</span><span class="keyword">);<br />
&nbsp;</span><span class="default">$simpleresult </span><span class="keyword">= </span><span class="default">$objectresult</span><span class="keyword">-&gt;</span><span class="default">SumResult</span><span class="keyword">;<br />
&nbsp;print(</span><span class="default">$simpleresult</span><span class="keyword">); </span><span class="comment">//produces "-1"<br />
</span><span class="default">?&gt;</span> <br />
<br />
Please note that the lines: <br />
<br />
"$client-&gt;Sum($params);" <br />
<br />
and<br />
<br />
"$simpleresult = $objectresult-&gt;SumResult;"<br />
<br />
are based off of each other. If your web service function is called "Sum", then add "Result" to the end of it to get the results of the call.<br />
<br />
EG:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;$client </span><span class="keyword">= new </span><span class="default">SoapClient</span><span class="keyword">(</span><span class="string">"<a href="http://server/mathservice.asmx?WSDL" rel="nofollow" target="_blank">http://server/mathservice.asmx?WSDL</a>"</span><span class="keyword">);<br />
&nbsp;</span><span class="default">$params</span><span class="keyword">-&gt;</span><span class="default">a </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">;<br />
&nbsp;</span><span class="default">$params</span><span class="keyword">-&gt;</span><span class="default">b </span><span class="keyword">= </span><span class="default">3</span><span class="keyword">;<br />
&nbsp;</span><span class="default">$objectresult </span><span class="keyword">= </span><span class="default">$client</span><span class="keyword">-&gt;</span><span class="default">Minus</span><span class="keyword">(</span><span class="default">$params</span><span class="keyword">); </span><span class="comment">// note the name of the function is "Minus"<br />
&nbsp;</span><span class="default">$simpleresult </span><span class="keyword">= </span><span class="default">$objectresult</span><span class="keyword">-&gt;</span><span class="default">MinusResult</span><span class="keyword">; </span><span class="comment">// note the name of the result is referenced as "MinusResult"<br />
&nbsp;</span><span class="keyword">print(</span><span class="default">$simpleresult</span><span class="keyword">); </span><span class="comment">//produces "5"<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="52000""></a>
  <div class="note">
   <strong class="user">OrionI</strong>
   <a href="#52000" class="date">18-Apr-2005 07:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Correction on the previously submitted code snippet...the incoming parameter for .NET also has to be in object or array form for it to be correctly converted to the XML form that .NET expects (as already mentioned by Llu?s P?mies). The full example (when using WSDL) should be like this:<br />
<span class="default">&lt;?php<br />
&nbsp;$client </span><span class="keyword">= new </span><span class="default">SoapClient</span><span class="keyword">(</span><span class="string">"<a href="http://server/myservice.asmx?WSDL" rel="nofollow" target="_blank">http://server/myservice.asmx?WSDL</a>"</span><span class="keyword">);<br />
&nbsp;</span><span class="default">$params</span><span class="keyword">-&gt;</span><span class="default">param1 </span><span class="keyword">= </span><span class="default">$value1</span><span class="keyword">;<br />
&nbsp;</span><span class="default">$params</span><span class="keyword">-&gt;</span><span class="default">param2 </span><span class="keyword">= </span><span class="default">$value2</span><span class="keyword">;<br />
&nbsp;</span><span class="default">$objectresult </span><span class="keyword">= </span><span class="default">$client</span><span class="keyword">-&gt;</span><span class="default">MyMethod</span><span class="keyword">(</span><span class="default">$params</span><span class="keyword">);<br />
&nbsp;</span><span class="default">$simpleresult </span><span class="keyword">= </span><span class="default">$objectresult</span><span class="keyword">-&gt;</span><span class="default">MyMethodResult</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span>So if you have a C# function like this:<br />
//sumservice.asmx<br />
...<br />
[WebMethod]<br />
public int Sum(int a, int b)<br />
{<br />
&nbsp; return a + b;<br />
}<br />
...<br />
The PHP client would be this:<br />
<span class="default">&lt;?php<br />
&nbsp;$client </span><span class="keyword">= new </span><span class="default">SoapClient</span><span class="keyword">(</span><span class="string">"<a href="http://server/sumservice.asmx?WSDL" rel="nofollow" target="_blank">http://server/sumservice.asmx?WSDL</a>"</span><span class="keyword">);<br />
&nbsp;</span><span class="default">$params</span><span class="keyword">-&gt;</span><span class="default">a </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">;<br />
&nbsp;</span><span class="default">$params</span><span class="keyword">-&gt;</span><span class="default">b </span><span class="keyword">= </span><span class="default">3</span><span class="keyword">;<br />
&nbsp;</span><span class="default">$objectresult </span><span class="keyword">= </span><span class="default">$client</span><span class="keyword">-&gt;</span><span class="default">Sum</span><span class="keyword">(</span><span class="default">$params</span><span class="keyword">);<br />
&nbsp;</span><span class="default">$simpleresult </span><span class="keyword">= </span><span class="default">$objectresult</span><span class="keyword">-&gt;</span><span class="default">SumResult</span><span class="keyword">;<br />
&nbsp;print(</span><span class="default">$simpleresult</span><span class="keyword">); </span><span class="comment">//produces "5"<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="51938""></a>
  <div class="note">
   <strong class="user">OrionI</strong>
   <a href="#51938" class="date">15-Apr-2005 11:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When calling over SOAP to a .NET application, you may end up with an object as a result instead of a simple type, even if you're just grabbing a simple type (like a boolean result). Use a property accessor to get the actual result, like this:<br />
<span class="default">&lt;?php<br />
&nbsp;$client </span><span class="keyword">= new </span><span class="default">SoapClient</span><span class="keyword">(</span><span class="string">"<a href="http://server/myservice.asmx?WSDL" rel="nofollow" target="_blank">http://server/myservice.asmx?WSDL</a>"</span><span class="keyword">);<br />
&nbsp;</span><span class="default">$objectresult </span><span class="keyword">= </span><span class="default">$client</span><span class="keyword">-&gt;</span><span class="default">MyMethod</span><span class="keyword">(</span><span class="default">$param1</span><span class="keyword">, </span><span class="default">$param2</span><span class="keyword">);<br />
&nbsp;</span><span class="default">$simpleresult </span><span class="keyword">= </span><span class="default">$objectresult</span><span class="keyword">-&gt;</span><span class="default">MyMethodResult</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span>Note that .NET seems to name the result MethodNameResult for method MethodName.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="50098""></a>
  <div class="note">
   <strong class="user">Llus Pmies</strong>
   <a href="#50098" class="date">17-Feb-2005 03:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If your service is a .NET doc/lit, which means the input message has a single part named 'parameters' that is a structure that wraps the parameters.&nbsp; Your call should look like this:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$params </span><span class="keyword">= array(</span><span class="string">'param_name_1'</span><span class="keyword">=&gt;</span><span class="default">$val_1</span><span class="keyword">,</span><span class="string">'param_name_2'</span><span class="keyword">=&gt;</span><span class="default">$val_2</span><span class="keyword">);<br />
</span><span class="default">$client</span><span class="keyword">-&gt;</span><span class="default">call</span><span class="keyword">(</span><span class="string">'MethodName'</span><span class="keyword">, array(</span><span class="string">'parameters' </span><span class="keyword">=&gt; </span><span class="default">$params</span><span class="keyword">));<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="soapclient.setsoapheaders.html">SoapClient::__setSoapHeaders</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="soapclient.soapclient.html">SoapClient::SoapClient</a></div>
 <div class="up"><a href="class.soapclient.html">SoapClient</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
