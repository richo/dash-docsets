<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>The DOMDocument class</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="domcomment.construct.html">DOMComment::__construct</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="domdocument.construct.html">DOMDocument::__construct</a></div>
 <div class="up"><a href="book.dom.html">DOM</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="class.domdocument" class="reference">
 <h1 class="title">The DOMDocument class</h1>
 
 
 <div class="partintro"><p class="verinfo">(PHP 5)</p>
 

  <div class="section" id="domdocument.intro">
   <h2 class="title">Introduction</h2>
   <p class="para">
    Represents an entire HTML or XML document; serves as the root of the
    document tree.
   </p>
  </div>

 
  <div class="section" id="domdocument.synopsis">
   <h2 class="title">Class synopsis</h2>
 

   <div class="classsynopsis">
    <div class="ooclass"></div>
 

    <div class="classsynopsisinfo">
     <span class="ooclass">
      <b class="classname">DOMDocument</b>
     </span>
 

     <span class="ooclass">
      <span class="modifier">extends</span>
      <a href="class.domnode.html" class="classname">DOMNode</a>
     </span>
 
     {</div>

 
    <div class="classsynopsisinfo classsynopsisinfo_comment">/* Properties */</div>

    <div class="fieldsynopsis">
     <span class="modifier">readonly</span>
     <span class="modifier">public</span>
     <span class="type">string</span>
      <var class="varname"><a href="class.domdocument.html#domdocument.props.actualencoding">$<var class="varname">actualEncoding</var></a></var>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">readonly</span>
     <span class="modifier">public</span>
     <span class="type"><span class="type DOMConfiguration">DOMConfiguration</span></span>
      <var class="varname"><a href="class.domdocument.html#domdocument.props.config">$<var class="varname">config</var></a></var>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">readonly</span>
     <span class="modifier">public</span>
     <span class="type"><a href="class.domdocumenttype.html" class="type DOMDocumentType">DOMDocumentType</a></span>
      <var class="varname"><a href="class.domdocument.html#domdocument.props.doctype">$<var class="varname">doctype</var></a></var>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">readonly</span>
     <span class="modifier">public</span>
     <span class="type"><a href="class.domelement.html" class="type DOMElement">DOMElement</a></span>
      <var class="varname"><a href="class.domdocument.html#domdocument.props.documentelement">$<var class="varname">documentElement</var></a></var>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">public</span>
     <span class="type">string</span>
      <var class="varname"><a href="class.domdocument.html#domdocument.props.documenturi">$<var class="varname">documentURI</var></a></var>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">public</span>
     <span class="type">string</span>
      <var class="varname"><a href="class.domdocument.html#domdocument.props.encoding">$<var class="varname">encoding</var></a></var>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">public</span>
     <span class="type">bool</span>
      <var class="varname"><a href="class.domdocument.html#domdocument.props.formatoutput">$<var class="varname">formatOutput</var></a></var>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">readonly</span>
     <span class="modifier">public</span>
     <span class="type"><a href="class.domimplementation.html" class="type DOMImplementation">DOMImplementation</a></span>
      <var class="varname"><a href="class.domdocument.html#domdocument.props.implementation">$<var class="varname">implementation</var></a></var>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">public</span>
     <span class="type">bool</span>
      <var class="varname"><a href="class.domdocument.html#domdocument.props.preservewhitespace">$<var class="varname">preserveWhiteSpace</var></a></var>
     <span class="initializer"> = true</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">public</span>
     <span class="type">bool</span>
      <var class="varname"><a href="class.domdocument.html#domdocument.props.recover">$<var class="varname">recover</var></a></var>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">public</span>
     <span class="type">bool</span>
      <var class="varname"><a href="class.domdocument.html#domdocument.props.resolveexternals">$<var class="varname">resolveExternals</var></a></var>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">public</span>
     <span class="type">bool</span>
      <var class="varname"><a href="class.domdocument.html#domdocument.props.standalone">$<var class="varname">standalone</var></a></var>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">public</span>
     <span class="type">bool</span>
      <var class="varname"><a href="class.domdocument.html#domdocument.props.stricterrorchecking">$<var class="varname">strictErrorChecking</var></a></var>
     <span class="initializer"> = true</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">public</span>
     <span class="type">bool</span>
      <var class="varname"><a href="class.domdocument.html#domdocument.props.substituteentities">$<var class="varname">substituteEntities</var></a></var>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">public</span>
     <span class="type">bool</span>
      <var class="varname"><a href="class.domdocument.html#domdocument.props.validateonparse">$<var class="varname">validateOnParse</var></a></var>
     <span class="initializer"> = false</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">public</span>
     <span class="type">string</span>
      <var class="varname"><a href="class.domdocument.html#domdocument.props.version">$<var class="varname">version</var></a></var>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">readonly</span>
     <span class="modifier">public</span>
     <span class="type">string</span>
      <var class="varname"><a href="class.domdocument.html#domdocument.props.xmlencoding">$<var class="varname">xmlEncoding</var></a></var>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">public</span>
     <span class="type">bool</span>
      <var class="varname"><a href="class.domdocument.html#domdocument.props.xmlstandalone">$<var class="varname">xmlStandalone</var></a></var>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">public</span>
     <span class="type">string</span>
      <var class="varname"><a href="class.domdocument.html#domdocument.props.xmlversion">$<var class="varname">xmlVersion</var></a></var>
    ;</div>

 
    <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
    <div class="methodsynopsis dc-description">
    <span class="methodname"><a href="domdocument.construct.html" class="methodname">__construct</a></span>
    ([ <span class="methodparam"><span class="type">string</span> <tt class="parameter">$version</tt></span>
   [, <span class="methodparam"><span class="type">string</span> <tt class="parameter">$encoding</tt></span>
  ]] )</div>
<div class="methodsynopsis dc-description">
   <span class="type">DOMAttr</span> <span class="methodname"><a href="domdocument.createattribute.html" class="methodname">createAttribute</a></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$name</tt></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="type">DOMAttr</span> <span class="methodname"><a href="domdocument.createattributens.html" class="methodname">createAttributeNS</a></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$namespaceURI</tt></span>
   , <span class="methodparam"><span class="type">string</span> <tt class="parameter">$qualifiedName</tt></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="type">DOMCDATASection</span> <span class="methodname"><a href="domdocument.createcdatasection.html" class="methodname">createCDATASection</a></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$data</tt></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="type">DOMComment</span> <span class="methodname"><a href="domdocument.createcomment.html" class="methodname">createComment</a></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$data</tt></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="type">DOMDocumentFragment</span> <span class="methodname"><a href="domdocument.createdocumentfragment.html" class="methodname">createDocumentFragment</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="type">DOMElement</span> <span class="methodname"><a href="domdocument.createelement.html" class="methodname">createElement</a></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$name</tt></span>
   [, <span class="methodparam"><span class="type">string</span> <tt class="parameter">$value</tt></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="type">DOMElement</span> <span class="methodname"><a href="domdocument.createelementns.html" class="methodname">createElementNS</a></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$namespaceURI</tt></span>
   , <span class="methodparam"><span class="type">string</span> <tt class="parameter">$qualifiedName</tt></span>
   [, <span class="methodparam"><span class="type">string</span> <tt class="parameter">$value</tt></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="type">DOMEntityReference</span> <span class="methodname"><a href="domdocument.createentityreference.html" class="methodname">createEntityReference</a></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$name</tt></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="type">DOMProcessingInstruction</span> <span class="methodname"><a href="domdocument.createprocessinginstruction.html" class="methodname">createProcessingInstruction</a></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$target</tt></span>
   [, <span class="methodparam"><span class="type">string</span> <tt class="parameter">$data</tt></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="type">DOMText</span> <span class="methodname"><a href="domdocument.createtextnode.html" class="methodname">createTextNode</a></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$content</tt></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="type">DOMElement</span> <span class="methodname"><a href="domdocument.getelementbyid.html" class="methodname">getElementById</a></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$elementId</tt></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="type">DOMNodeList</span> <span class="methodname"><a href="domdocument.getelementsbytagname.html" class="methodname">getElementsByTagName</a></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$name</tt></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="type">DOMNodeList</span> <span class="methodname"><a href="domdocument.getelementsbytagnamens.html" class="methodname">getElementsByTagNameNS</a></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$namespaceURI</tt></span>
   , <span class="methodparam"><span class="type">string</span> <tt class="parameter">$localName</tt></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="type">DOMNode</span> <span class="methodname"><a href="domdocument.importnode.html" class="methodname">importNode</a></span>
    ( <span class="methodparam"><span class="type"><a href="class.domnode.html" class="type DOMNode">DOMNode</a></span> <tt class="parameter">$importedNode</tt></span>
   [, <span class="methodparam"><span class="type">bool</span> <tt class="parameter">$deep</tt></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="type">mixed</span> <span class="methodname"><a href="domdocument.load.html" class="methodname">load</a></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$filename</tt></span>
   [, <span class="methodparam"><span class="type">int</span> <tt class="parameter">$options</tt><span class="initializer"> = 0</span></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><a href="domdocument.loadhtml.html" class="methodname">loadHTML</a></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$source</tt></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><a href="domdocument.loadhtmlfile.html" class="methodname">loadHTMLFile</a></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$filename</tt></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="type">mixed</span> <span class="methodname"><a href="domdocument.loadxml.html" class="methodname">loadXML</a></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$source</tt></span>
   [, <span class="methodparam"><span class="type">int</span> <tt class="parameter">$options</tt><span class="initializer"> = 0</span></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="type">void</span> <span class="methodname"><a href="domdocument.normalizedocument.html" class="methodname">normalizeDocument</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><a href="domdocument.registernodeclass.html" class="methodname">registerNodeClass</a></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$baseclass</tt></span>
   , <span class="methodparam"><span class="type">string</span> <tt class="parameter">$extendedclass</tt></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><a href="domdocument.relaxngvalidate.html" class="methodname">relaxNGValidate</a></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$filename</tt></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><a href="domdocument.relaxngvalidatesource.html" class="methodname">relaxNGValidateSource</a></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$source</tt></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="type">int</span> <span class="methodname"><a href="domdocument.save.html" class="methodname">save</a></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$filename</tt></span>
   [, <span class="methodparam"><span class="type">int</span> <tt class="parameter">$options</tt></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="type">string</span> <span class="methodname"><a href="domdocument.savehtml.html" class="methodname">saveHTML</a></span>
    ([ <span class="methodparam"><span class="type"><a href="class.domnode.html" class="type DOMNode">DOMNode</a></span> <tt class="parameter">$node</tt><span class="initializer"> = NULL</span></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="type">int</span> <span class="methodname"><a href="domdocument.savehtmlfile.html" class="methodname">saveHTMLFile</a></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$filename</tt></span>
  )</div>
<div class="methodsynopsis dc-description">
   <span class="type">string</span> <span class="methodname"><a href="domdocument.savexml.html" class="methodname">saveXML</a></span>
    ([ <span class="methodparam"><span class="type"><a href="class.domnode.html" class="type DOMNode">DOMNode</a></span> <tt class="parameter">$node</tt></span>
   [, <span class="methodparam"><span class="type">int</span> <tt class="parameter">$options</tt></span>
  ]] )</div>
<div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><a href="domdocument.schemavalidate.html" class="methodname">schemaValidate</a></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$filename</tt></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><a href="domdocument.schemavalidatesource.html" class="methodname">schemaValidateSource</a></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$source</tt></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><a href="domdocument.validate.html" class="methodname">validate</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="type">int</span> <span class="methodname"><a href="function.domdocument-xinclude.html" class="methodname">xinclude</a></span>
    ([ <span class="methodparam"><span class="type">int</span> <tt class="parameter">$options</tt></span>
  ] )</div>

 

    <div class="classsynopsisinfo classsynopsisinfo_comment">/* Inherited methods */</div>
    <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">DOMNode</span> <span class="methodname"><a href="domnode.appendchild.html" class="methodname">DOMNode::appendChild</a></span>
    ( <span class="methodparam"><span class="type"><a href="class.domnode.html" class="type DOMNode">DOMNode</a></span> <tt class="parameter">$newnode</tt></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">string</span> <span class="methodname"><a href="domnode.c14n.html" class="methodname">DOMNode::C14N</a></span>
    ([ <span class="methodparam"><span class="type">bool</span> <tt class="parameter">$exclusive</tt></span>
   [, <span class="methodparam"><span class="type">bool</span> <tt class="parameter">$with_comments</tt></span>
   [, <span class="methodparam"><span class="type">array</span> <tt class="parameter">$xpath</tt></span>
   [, <span class="methodparam"><span class="type">array</span> <tt class="parameter">$ns_prefixes</tt></span>
  ]]]] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">int</span> <span class="methodname"><a href="domnode.c14nfile.html" class="methodname">DOMNode::C14NFile</a></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$uri</tt></span>
   [, <span class="methodparam"><span class="type">bool</span> <tt class="parameter">$exclusive</tt></span>
   [, <span class="methodparam"><span class="type">bool</span> <tt class="parameter">$with_comments</tt></span>
   [, <span class="methodparam"><span class="type">array</span> <tt class="parameter">$xpath</tt></span>
   [, <span class="methodparam"><span class="type">array</span> <tt class="parameter">$ns_prefixes</tt></span>
  ]]]] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">DOMNode</span> <span class="methodname"><a href="domnode.clonenode.html" class="methodname">DOMNode::cloneNode</a></span>
    ([ <span class="methodparam"><span class="type">bool</span> <tt class="parameter">$deep</tt></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">int</span> <span class="methodname"><a href="domnode.getlineno.html" class="methodname">DOMNode::getLineNo</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">string</span> <span class="methodname"><a href="domnode.getnodepath.html" class="methodname">DOMNode::getNodePath</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool</span> <span class="methodname"><a href="domnode.hasattributes.html" class="methodname">DOMNode::hasAttributes</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool</span> <span class="methodname"><a href="domnode.haschildnodes.html" class="methodname">DOMNode::hasChildNodes</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">DOMNode</span> <span class="methodname"><a href="domnode.insertbefore.html" class="methodname">DOMNode::insertBefore</a></span>
    ( <span class="methodparam"><span class="type"><a href="class.domnode.html" class="type DOMNode">DOMNode</a></span> <tt class="parameter">$newnode</tt></span>
   [, <span class="methodparam"><span class="type"><a href="class.domnode.html" class="type DOMNode">DOMNode</a></span> <tt class="parameter">$refnode</tt></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool</span> <span class="methodname"><a href="domnode.isdefaultnamespace.html" class="methodname">DOMNode::isDefaultNamespace</a></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$namespaceURI</tt></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool</span> <span class="methodname"><a href="domnode.issamenode.html" class="methodname">DOMNode::isSameNode</a></span>
    ( <span class="methodparam"><span class="type"><a href="class.domnode.html" class="type DOMNode">DOMNode</a></span> <tt class="parameter">$node</tt></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool</span> <span class="methodname"><a href="domnode.issupported.html" class="methodname">DOMNode::isSupported</a></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$feature</tt></span>
   , <span class="methodparam"><span class="type">string</span> <tt class="parameter">$version</tt></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">string</span> <span class="methodname"><a href="domnode.lookupnamespaceuri.html" class="methodname">DOMNode::lookupNamespaceURI</a></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$prefix</tt></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">string</span> <span class="methodname"><a href="domnode.lookupprefix.html" class="methodname">DOMNode::lookupPrefix</a></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$namespaceURI</tt></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">void</span> <span class="methodname"><a href="domnode.normalize.html" class="methodname">DOMNode::normalize</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">DOMNode</span> <span class="methodname"><a href="domnode.removechild.html" class="methodname">DOMNode::removeChild</a></span>
    ( <span class="methodparam"><span class="type"><a href="class.domnode.html" class="type DOMNode">DOMNode</a></span> <tt class="parameter">$oldnode</tt></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">DOMNode</span> <span class="methodname"><a href="domnode.replacechild.html" class="methodname">DOMNode::replaceChild</a></span>
    ( <span class="methodparam"><span class="type"><a href="class.domnode.html" class="type DOMNode">DOMNode</a></span> <tt class="parameter">$newnode</tt></span>
   , <span class="methodparam"><span class="type"><a href="class.domnode.html" class="type DOMNode">DOMNode</a></span> <tt class="parameter">$oldnode</tt></span>
   )</div>


   }</div>

 
  </div>
 

  <div class="section" id="domdocument.props">
   <h2 class="title">Properties</h2>
   <dl>

    <dt id="domdocument.props.actualencoding">
     <span class="term"><var class="varname"><var class="varname">actualEncoding</var></var></span>
     <dd>

      <p class="para">
       <em class="emphasis">Deprecated</em>. Actual encoding of the document,
       is a readonly equivalent to
       <var class="varname"><var class="varname">encoding</var></var>.
      </p>
     </dd>

    </dt>

    <dt id="domdocument.props.config">
     <span class="term"><var class="varname"><var class="varname">config</var></var></span>
     <dd>

      <p class="para">
       <em class="emphasis">Deprecated</em>. Configuration used when
       <span class="function"><a href="domdocument.normalizedocument.html" class="function">DOMDocument::normalizeDocument()</a></span> is
       invoked.
      </p>
     </dd>

    </dt>

    <dt id="domdocument.props.doctype">
     <span class="term"><var class="varname"><var class="varname">doctype</var></var></span>
     <dd>

      <p class="para">The Document Type Declaration associated with this document.</p>
     </dd>

    </dt>

    <dt id="domdocument.props.documentelement">
     <span class="term"><var class="varname"><var class="varname">documentElement</var></var></span>
     <dd>

      <p class="para">
       This is a convenience attribute that allows direct access to the
       child node that is the document element of the document.
      </p>
     </dd>

    </dt>

    <dt id="domdocument.props.documenturi">
     <span class="term"><var class="varname"><var class="varname">documentURI</var></var></span>
     <dd>

      <p class="para">The location of the document or <b><tt>NULL</tt></b> if undefined.</p>
     </dd>

    </dt>

    <dt id="domdocument.props.encoding">
     <span class="term"><var class="varname"><var class="varname">encoding</var></var></span>
     <dd>

      <p class="para">
       Encoding of the document, as specified by the XML declaration. This
       attribute is not present in the final DOM Level 3 specification, but
       is the only way of manipulating XML document encoding in this
       implementation.
      </p>
     </dd>

    </dt>

    <dt id="domdocument.props.formatoutput">
     <span class="term"><var class="varname"><var class="varname">formatOutput</var></var></span>
     <dd>

      <p class="para">Nicely formats output with indentation and extra space.</p>
     </dd>

    </dt>

    <dt id="domdocument.props.implementation">
     <span class="term"><var class="varname"><var class="varname">implementation</var></var></span>
     <dd>

      <p class="para">
       The <a href="class.domimplementation.html" class="classname">DOMImplementation</a> object that handles 
       this document.
      </p>
     </dd>

    </dt>

    <dt id="domdocument.props.preservewhitespace">
     <span class="term"><var class="varname"><var class="varname">preserveWhiteSpace</var></var></span>
     <dd>

      <p class="para">Do not remove redundant white space. Default to <b><tt>TRUE</tt></b>.</p>
     </dd>

    </dt>

    <dt id="domdocument.props.recover">
     <span class="term"><var class="varname"><var class="varname">recover</var></var></span>
     <dd>

      <p class="para">
       <em class="emphasis">Proprietary</em>. Enables recovery mode, i.e. trying
       to parse non-well formed documents. This attribute is not part of
       the DOM specification and is specific to libxml.
      </p>
     </dd>

    </dt>

    <dt id="domdocument.props.resolveexternals">
     <span class="term"><var class="varname"><var class="varname">resolveExternals</var></var></span>
     <dd>

      <p class="para">
       Set it to <b><tt>TRUE</tt></b> to load external entities from a doctype 
       declaration. This is useful for including character entities in
       your XML document.
      </p>
     </dd>

    </dt>

    <dt id="domdocument.props.standalone">
     <span class="term"><var class="varname"><var class="varname">standalone</var></var></span>
     <dd>

      <p class="para">
       <em class="emphasis">Deprecated</em>. Whether or not the document is
       standalone, as specified by the XML declaration, corresponds to
       <var class="varname"><var class="varname">xmlStandalone</var></var>.
      </p>
     </dd>

    </dt>

    <dt id="domdocument.props.stricterrorchecking">
     <span class="term"><var class="varname"><var class="varname">strictErrorChecking</var></var></span>
     <dd>

      <p class="para">Throws <a href="class.domexception.html" class="classname">DOMException</a> on errors. Default to <b><tt>TRUE</tt></b>.</p>
     </dd>

    </dt>

    <dt id="domdocument.props.substituteentities">
     <span class="term"><var class="varname"><var class="varname">substituteEntities</var></var></span>
     <dd>

      <p class="para">
       <em class="emphasis">Proprietary</em>. Whether or not to substitute
       entities. This attribute is not part of
       the DOM specification and is specific to libxml.
      </p>
     </dd>

    </dt>

    <dt id="domdocument.props.validateonparse">
     <span class="term"><var class="varname"><var class="varname">validateOnParse</var></var></span>
     <dd>

      <p class="para">Loads and validates against the DTD. Default to <b><tt>FALSE</tt></b>.</p>
     </dd>

    </dt>

    <dt id="domdocument.props.version">
     <span class="term"><var class="varname"><var class="varname">version</var></var></span>
     <dd>

      <p class="para">
       <em class="emphasis">Deprecated</em>. Version of XML, corresponds to
       <var class="varname"><var class="varname">xmlVersion</var></var>.
      </p>
     </dd>

    </dt>

    <dt id="domdocument.props.xmlencoding">
     <span class="term"><var class="varname"><var class="varname">xmlEncoding</var></var></span>
     <dd>

      <p class="para">
       An attribute specifying, as part of the XML declaration, the
       encoding of this document. This is <b><tt>NULL</tt></b> when unspecified or when it
       is not known, such as when the Document was created in memory.
      </p>
     </dd>

    </dt>

    <dt id="domdocument.props.xmlstandalone">
     <span class="term"><var class="varname"><var class="varname">xmlStandalone</var></var></span>
     <dd>

      <p class="para">
       An attribute specifying, as part of the XML declaration, whether
       this document is standalone. This is <b><tt>FALSE</tt></b> when unspecified.
      </p>
     </dd>

    </dt>

    <dt id="domdocument.props.xmlversion">
     <span class="term"><var class="varname"><var class="varname">xmlVersion</var></var></span>
     <dd>

      <p class="para">
       An attribute specifying, as part of the XML declaration, the
       version number of this document. If there is no declaration and if
       this document supports the &quot;XML&quot; feature, the value is &quot;1.0&quot;.
      </p>
     </dd>

    </dt>

   </dl>

  </div>



  <div class="section">
   <h2 class="title">Notes</h2>
   <blockquote class="note"><p><b class="note">Note</b>: 
    <p class="para">
     The DOM extension uses UTF-8 encoding. Use <span class="function"><a href="function.utf8-encode.html" class="function">utf8_encode()</a></span>
     and <span class="function"><a href="function.utf8-decode.html" class="function">utf8_decode()</a></span> to work with texts in ISO-8859-1
     encoding or <a href="ref.iconv.html" class="link">Iconv</a> for other encodings.
    </p>
   </p></blockquote>
  </div>

  

  <div class="section">
   <h2 class="title">See Also</h2>
   <p class="para">
    <ul class="simplelist">
     <li class="member"><a href="http://www.w3.org/TR/2003/WD-DOM-Level-3-Core-20030226/DOM3-Core.html#core-i-Document" class="link external" title="Link : http://www.w3.org/TR/2003/WD-DOM-Level-3-Core-20030226/DOM3-Core.html#core-i-Document">&raquo;&nbsp;W3C specification for Document</a></li>
    </ul>
   </p>
  </div>

 
 </div>
 
 


























































































































































































 
<h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="domdocument.construct.html">DOMDocument::__construct</a> â€” Creates a new DOMDocument object</li><li><a href="domdocument.createattribute.html">DOMDocument::createAttribute</a> â€” Create new attribute</li><li><a href="domdocument.createattributens.html">DOMDocument::createAttributeNS</a> â€” Create new attribute node with an associated namespace</li><li><a href="domdocument.createcdatasection.html">DOMDocument::createCDATASection</a> â€” Create new cdata node</li><li><a href="domdocument.createcomment.html">DOMDocument::createComment</a> â€” Create new comment node</li><li><a href="domdocument.createdocumentfragment.html">DOMDocument::createDocumentFragment</a> â€” Create new document fragment</li><li><a href="domdocument.createelement.html">DOMDocument::createElement</a> â€” Create new element node</li><li><a href="domdocument.createelementns.html">DOMDocument::createElementNS</a> â€” Create new element node with an associated namespace</li><li><a href="domdocument.createentityreference.html">DOMDocument::createEntityReference</a> â€” Create new entity reference node</li><li><a href="domdocument.createprocessinginstruction.html">DOMDocument::createProcessingInstruction</a> â€” Creates new PI node</li><li><a href="domdocument.createtextnode.html">DOMDocument::createTextNode</a> â€” Create new text node</li><li><a href="domdocument.getelementbyid.html">DOMDocument::getElementById</a> â€” Searches for an element with a certain id</li><li><a href="domdocument.getelementsbytagname.html">DOMDocument::getElementsByTagName</a> â€” Searches for all elements with given local tag name</li><li><a href="domdocument.getelementsbytagnamens.html">DOMDocument::getElementsByTagNameNS</a> â€” Searches for all elements with given tag name in specified namespace</li><li><a href="domdocument.importnode.html">DOMDocument::importNode</a> â€” Import node into current document</li><li><a href="domdocument.load.html">DOMDocument::load</a> â€” Load XML from a file</li><li><a href="domdocument.loadhtml.html">DOMDocument::loadHTML</a> â€” Load HTML from a string</li><li><a href="domdocument.loadhtmlfile.html">DOMDocument::loadHTMLFile</a> â€” Load HTML from a file</li><li><a href="domdocument.loadxml.html">DOMDocument::loadXML</a> â€” Load XML from a string</li><li><a href="domdocument.normalizedocument.html">DOMDocument::normalizeDocument</a> â€” Normalizes the document</li><li><a href="domdocument.registernodeclass.html">DOMDocument::registerNodeClass</a> â€” Register extended class used to create base node type</li><li><a href="domdocument.relaxngvalidate.html">DOMDocument::relaxNGValidate</a> â€” Performs relaxNG validation on the document</li><li><a href="domdocument.relaxngvalidatesource.html">DOMDocument::relaxNGValidateSource</a> â€” Performs relaxNG validation on the document</li><li><a href="domdocument.save.html">DOMDocument::save</a> â€” Dumps the internal XML tree back into a file</li><li><a href="domdocument.savehtml.html">DOMDocument::saveHTML</a> â€” Dumps the internal document into a string using HTML formatting</li><li><a href="domdocument.savehtmlfile.html">DOMDocument::saveHTMLFile</a> â€” Dumps the internal document into a file using HTML formatting</li><li><a href="domdocument.savexml.html">DOMDocument::saveXML</a> â€” Dumps the internal XML tree back into a string</li><li><a href="domdocument.schemavalidate.html">DOMDocument::schemaValidate</a> â€” Validates a document based on a schema</li><li><a href="domdocument.schemavalidatesource.html">DOMDocument::schemaValidateSource</a> â€” Validates a document based on a schema</li><li><a href="domdocument.validate.html">DOMDocument::validate</a> â€” Validates the document based on its DTD</li><li><a href="domdocument.xinclude.html">DOMDocument::xinclude</a> â€” Substitutes XIncludes in a DOMDocument Object</li></ul>
</div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="104218""></a>
  <div class="note">
   <strong class="user">Nick M</strong>
   <a href="#104218" class="date">01-Jun-2011 10:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You may need to save all or part of a DOMDocument as an XHTML-friendly string, something compliant with both XML and HTML 4. Here's the DOMDocument class extended with a saveXHTML method:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">/**<br />
&nbsp;* XHTML Document<br />
&nbsp;*<br />
&nbsp;* Represents an entire XHTML DOM document; serves as the root of the document tree.<br />
&nbsp;*/<br />
</span><span class="keyword">class </span><span class="default">XHTMLDocument </span><span class="keyword">extends </span><span class="default">DOMDocument </span><span class="keyword">{<br />
<br />
&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; * These tags must always self-terminate. Anything else must never self-terminate.<br />
&nbsp;&nbsp; * <br />
&nbsp;&nbsp; * @var array<br />
&nbsp;&nbsp; */<br />
&nbsp; </span><span class="keyword">public </span><span class="default">$selfTerminate </span><span class="keyword">= array(<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="string">'area'</span><span class="keyword">,</span><span class="string">'base'</span><span class="keyword">,</span><span class="string">'basefont'</span><span class="keyword">,</span><span class="string">'br'</span><span class="keyword">,</span><span class="string">'col'</span><span class="keyword">,</span><span class="string">'frame'</span><span class="keyword">,</span><span class="string">'hr'</span><span class="keyword">,</span><span class="string">'img'</span><span class="keyword">,</span><span class="string">'input'</span><span class="keyword">,</span><span class="string">'link'</span><span class="keyword">,</span><span class="string">'meta'</span><span class="keyword">,</span><span class="string">'param'<br />
&nbsp; </span><span class="keyword">);<br />
&nbsp; <br />
&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; * saveXHTML<br />
&nbsp;&nbsp; *<br />
&nbsp;&nbsp; * Dumps the internal XML tree back into an XHTML-friendly string.<br />
&nbsp;&nbsp; *<br />
&nbsp;&nbsp; * @param DOMNode $node<br />
&nbsp;&nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Use this parameter to output only a specific node rather than the entire document.<br />
&nbsp;&nbsp; */<br />
&nbsp; </span><span class="keyword">public function </span><span class="default">saveXHTML</span><span class="keyword">(</span><span class="default">DOMNode $node</span><span class="keyword">=</span><span class="default">null</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; if (!</span><span class="default">$node</span><span class="keyword">) </span><span class="default">$node </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">firstChild</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$doc </span><span class="keyword">= new </span><span class="default">DOMDocument</span><span class="keyword">(</span><span class="string">'1.0'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$clone </span><span class="keyword">= </span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">importNode</span><span class="keyword">(</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">cloneNode</span><span class="keyword">(</span><span class="default">false</span><span class="keyword">), </span><span class="default">true</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$term </span><span class="keyword">= </span><span class="default">in_array</span><span class="keyword">(</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$clone</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">), </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">selfTerminate</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$inner</span><span class="keyword">=</span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; if (!</span><span class="default">$term</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$clone</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(new </span><span class="default">DOMText</span><span class="keyword">(</span><span class="string">''</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">childNodes</span><span class="keyword">) foreach (</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">childNodes </span><span class="keyword">as </span><span class="default">$child</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$inner </span><span class="keyword">.= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">saveXHTML</span><span class="keyword">(</span><span class="default">$child</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(</span><span class="default">$clone</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$out </span><span class="keyword">= </span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">saveXML</span><span class="keyword">(</span><span class="default">$clone</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$term </span><span class="keyword">? </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$out</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, -</span><span class="default">2</span><span class="keyword">) . </span><span class="string">' /&gt;' </span><span class="keyword">: </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'&gt;&lt;'</span><span class="keyword">, </span><span class="string">"&gt;</span><span class="default">$inner</span><span class="string">&lt;"</span><span class="keyword">, </span><span class="default">$out</span><span class="keyword">);<br />
<br />
&nbsp; }<br />
<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
This hasn't been benchmarked, but is probably significantly slower than saveXML or saveHTML and should be used sparingly.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101014""></a>
  <div class="note">
   <strong class="user">evert at er dot nl</strong>
   <a href="#101014" class="date">20-Nov-2010 02:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A nice and simple node 2 array I wrote, worth a try ;) <br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">getArray</span><span class="keyword">(</span><span class="default">$node</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">hasAttributes</span><span class="keyword">())<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">attributes </span><span class="keyword">as </span><span class="default">$attr</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$attr</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">] = </span><span class="default">$attr</span><span class="keyword">-&gt;</span><span class="default">nodeValue</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">hasChildNodes</span><span class="keyword">())<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">childNodes</span><span class="keyword">-&gt;</span><span class="default">length </span><span class="keyword">== </span><span class="default">1</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">firstChild</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">] = </span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">firstChild</span><span class="keyword">-&gt;</span><span class="default">nodeValue</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">childNodes </span><span class="keyword">as </span><span class="default">$childNode</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$childNode</span><span class="keyword">-&gt;</span><span class="default">nodeType </span><span class="keyword">!= </span><span class="default">XML_TEXT_NODE</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$childNode</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">][] = </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">getArray</span><span class="keyword">(</span><span class="default">$childNode</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$array</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99154""></a>
  <div class="note">
   <strong class="user">nathan at crause dot name</strong>
   <a href="#99154" class="date">30-Jul-2010 09:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be careful with any assumptions you may have about this library. Unlike XML parsers in other languages (such as Java), when parsing an XML Schema constrained XML document, defaults you may define (such as for attributes) will NOT be correctly represented in the DOMDocument.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="97554""></a>
  <div class="note">
   <strong class="user">hutch one two zero at gmail dot com</strong>
   <a href="#97554" class="date">25-Apr-2010 10:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you're using AJAX, make sure you put a header directive like the following at the top of your php file.<br />
<br />
<span class="default">&lt;?php header</span><span class="keyword">( </span><span class="string">"content-type: application/xml; charset=ISO-8859-15" </span><span class="keyword">); </span><span class="default">?&gt;<br />
</span><br />
If you don't add this header then your javascript downloadURL function will not work because the content type will not be recognised to be XML.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="97051""></a>
  <div class="note">
   <strong class="user">me at richardsnazell dot com</strong>
   <a href="#97051" class="date">29-Mar-2010 06:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
After running into a problem with DomDocument and a UTF-8 encoded input string, a simple work-around was to convert the input string to ISO-8859-1, run my DOM queries, then convert back to UTF-8:<br />
<br />
<span class="default">&lt;?php<br />
$xhtml </span><span class="keyword">= </span><span class="string">'a UTF-8 encoded string'</span><span class="keyword">;<br />
</span><span class="default">$xhtml </span><span class="keyword">= </span><span class="default">utf8_decode</span><span class="keyword">(</span><span class="default">$xhtml</span><span class="keyword">); </span><span class="comment">// convert UTF-8 string to ISO-8859-1<br />
<br />
// doing some DOM manipulation here on $xhtml<br />
<br />
</span><span class="default">$xhtml </span><span class="keyword">= </span><span class="default">utf8_encode</span><span class="keyword">(</span><span class="default">$xhtml</span><span class="keyword">); </span><span class="comment">// convert ISO-8859-1 string back to UTF-8<br />
</span><span class="default">?&gt;<br />
</span><br />
Not ideal - but it worked for me.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96709""></a>
  <div class="note">
   <strong class="user">admin at beerpla dot net</strong>
   <a href="#96709" class="date">12-Mar-2010 02:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
After seeing many complaints about certain DOMDocument shortcomings, such as bad handling of encodings and always saving HTML fragments with &lt;html&gt;, &lt;head&gt;, and DOCTYPE, I decided that a better solution is needed.<br />
<br />
So here it is: SmartDOMDocument. You can find it at <a href="http://beerpla.net/projects/smartdomdocument/" rel="nofollow" target="_blank">http://beerpla.net/projects/smartdomdocument/</a><br />
<br />
Currently, the main highlights are:<br />
<br />
- SmartDOMDocument inherits from DOMDocument, so it's very easy to use - just declare an object of type SmartDOMDocument instead of DOMDocument and enjoy the new behavior on top of all existing functionality (see example below).<br />
<br />
- saveHTMLExact() - DOMDocument has an extremely badly designed "feature" where if the HTML code you are loading does not contain &lt;html&gt; and &lt;body&gt; tags, it adds them automatically (yup, there are no flags to turn this behavior off).<br />
Thus, when you call $doc-&gt;saveHTML(), your newly saved content now has &lt;html&gt;&lt;body&gt; and DOCTYPE in it. Not very handy when trying to work with code fragments (XML has a similar problem).<br />
SmartDOMDocument contains a new function called saveHTMLExact() which does exactly what you would want - it saves HTML without adding that extra garbage that DOMDocument does.<br />
<br />
- encoding fix - DOMDocument notoriously doesn't handle encoding (at least UTF-8) correctly and garbles the output.<br />
SmartDOMDocument tries to work around this problem by enhancing loadHTML() to deal with encoding correctly. This behavior is transparent to you - just use loadHTML() as you would normally.<br />
<br />
- SmartDOMDocument Object As String - you can use a SmartDOMDocument object as a string which will print out its contents.<br />
For example:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">echo </span><span class="string">"Here is the HTML: </span><span class="default">$smart_dom_doc</span><span class="string">"</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
I'm going to maintain this code and try to fix bugs as they come in.<br />
<br />
Enjoy.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96055""></a>
  <div class="note">
   <strong class="user">tloach at gmail dot com</strong>
   <a href="#96055" class="date">05-Feb-2010 10:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For anyone else who has been having issues with formatOuput not working, here is a work-around:<br />
<br />
rather than just doing something like:<br />
<br />
<span class="default">&lt;?php<br />
$outXML </span><span class="keyword">= </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">saveXML</span><span class="keyword">();<br />
</span><span class="default">?&gt;<br />
</span><br />
force it to reload the XML from scratch, then it will format correctly:<br />
<br />
<span class="default">&lt;?php<br />
$outXML </span><span class="keyword">= </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">saveXML</span><span class="keyword">();<br />
</span><span class="default">$xml </span><span class="keyword">= new </span><span class="default">DOMDocument</span><span class="keyword">();<br />
</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">preserveWhiteSpace </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">formatOutput </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />
</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">loadXML</span><span class="keyword">(</span><span class="default">$outXML</span><span class="keyword">);<br />
</span><span class="default">$outXML </span><span class="keyword">= </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">saveXML</span><span class="keyword">();<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95894""></a>
  <div class="note">
   <strong class="user">jay at jaygilford dot com</strong>
   <a href="#95894" class="date">27-Jan-2010 08:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's a small function I wrote to get all page links using the DOMDocument which will hopefully be of use to others<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;* @author Jay Gilford<br />
&nbsp;*/<br />
&nbsp;<br />
/**<br />
&nbsp;* get_links()<br />
&nbsp;* <br />
&nbsp;* @param string $url<br />
&nbsp;* @return array<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">get_links</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">) {<br />
&nbsp;<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Create a new DOM Document to hold our webpage structure<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$xml </span><span class="keyword">= new </span><span class="default">DOMDocument</span><span class="keyword">();<br />
&nbsp;<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Load the url's contents into the DOM<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">loadHTMLFile</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">);<br />
&nbsp;<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Empty array to hold all links to return<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$links </span><span class="keyword">= array();<br />
&nbsp;<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//Loop through each &lt;a&gt; tag in the dom and add it to the link array<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">foreach(</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">getElementsByTagName</span><span class="keyword">(</span><span class="string">'a'</span><span class="keyword">) as </span><span class="default">$link</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$links</span><span class="keyword">[] = array(</span><span class="string">'url' </span><span class="keyword">=&gt; </span><span class="default">$link</span><span class="keyword">-&gt;</span><span class="default">getAttribute</span><span class="keyword">(</span><span class="string">'href'</span><span class="keyword">), </span><span class="string">'text' </span><span class="keyword">=&gt; </span><span class="default">$link</span><span class="keyword">-&gt;</span><span class="default">nodeValue</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//Return the links<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$links</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94380""></a>
  <div class="note">
   <strong class="user">fcartegnie</strong>
   <a href="#94380" class="date">31-Oct-2009 01:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be careful with formatOutput().<br />
<br />
Creating an empty node like this:<br />
createElement('foo','')<br />
instead of<br />
createElement('foo')<br />
will break formatOutput.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93900""></a>
  <div class="note">
   <strong class="user">Yarg Dahc</strong>
   <a href="#93900" class="date">05-Oct-2009 05:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Child class of DOMDocument which has a toArray() method. Enjoy and/or improve<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">MyDOMDocument </span><span class="keyword">extends </span><span class="default">DOMDocument<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">toArray</span><span class="keyword">(</span><span class="default">DOMNode $oDomNode </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// return empty array if dom is blank<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">is_null</span><span class="keyword">(</span><span class="default">$oDomNode</span><span class="keyword">) &amp;&amp; !</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">hasChildNodes</span><span class="keyword">()) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$oDomNode </span><span class="keyword">= (</span><span class="default">is_null</span><span class="keyword">(</span><span class="default">$oDomNode</span><span class="keyword">)) ? </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">documentElement </span><span class="keyword">: </span><span class="default">$oDomNode</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">$oDomNode</span><span class="keyword">-&gt;</span><span class="default">hasChildNodes</span><span class="keyword">()) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$mResult </span><span class="keyword">= </span><span class="default">$oDomNode</span><span class="keyword">-&gt;</span><span class="default">nodeValue</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$mResult </span><span class="keyword">= array();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$oDomNode</span><span class="keyword">-&gt;</span><span class="default">childNodes </span><span class="keyword">as </span><span class="default">$oChildNode</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// how many of these child nodes do we have?<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // this will give us a clue as to what the result structure should be<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$oChildNodeList </span><span class="keyword">= </span><span class="default">$oDomNode</span><span class="keyword">-&gt;</span><span class="default">getElementsByTagName</span><span class="keyword">(</span><span class="default">$oChildNode</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">);&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$iChildCount </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// there are x number of childs in this node that have the same tag name<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // however, we are only interested in the # of siblings with the same tag name<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">foreach (</span><span class="default">$oChildNodeList </span><span class="keyword">as </span><span class="default">$oNode</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$oNode</span><span class="keyword">-&gt;</span><span class="default">parentNode</span><span class="keyword">-&gt;</span><span class="default">isSameNode</span><span class="keyword">(</span><span class="default">$oChildNode</span><span class="keyword">-&gt;</span><span class="default">parentNode</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$iChildCount</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$mValue </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">toArray</span><span class="keyword">(</span><span class="default">$oChildNode</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sKey&nbsp;&nbsp; </span><span class="keyword">= (</span><span class="default">$oChildNode</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">{</span><span class="default">0</span><span class="keyword">} == </span><span class="string">'#'</span><span class="keyword">) ? </span><span class="default">0 </span><span class="keyword">: </span><span class="default">$oChildNode</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$mValue </span><span class="keyword">= </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$mValue</span><span class="keyword">) ? </span><span class="default">$mValue</span><span class="keyword">[</span><span class="default">$oChildNode</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">] : </span><span class="default">$mValue</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// how many of thse child nodes do we have?<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$iChildCount </span><span class="keyword">&gt; </span><span class="default">1</span><span class="keyword">) {&nbsp; </span><span class="comment">// more than 1 child - make numeric array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$mResult</span><span class="keyword">[</span><span class="default">$sKey</span><span class="keyword">][] = </span><span class="default">$mValue</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$mResult</span><span class="keyword">[</span><span class="default">$sKey</span><span class="keyword">] = </span><span class="default">$mValue</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// if the child is &lt;foo&gt;bar&lt;/foo&gt;, the result will be array(bar)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // make the result just 'bar'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$mResult</span><span class="keyword">) == </span><span class="default">1 </span><span class="keyword">&amp;&amp; isset(</span><span class="default">$mResult</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]) &amp;&amp; !</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$mResult</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$mResult </span><span class="keyword">= </span><span class="default">$mResult</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// get our attributes if we have any<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arAttributes </span><span class="keyword">= array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$oDomNode</span><span class="keyword">-&gt;</span><span class="default">hasAttributes</span><span class="keyword">()) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$oDomNode</span><span class="keyword">-&gt;</span><span class="default">attributes </span><span class="keyword">as </span><span class="default">$sAttrName</span><span class="keyword">=&gt;</span><span class="default">$oAttrNode</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// retain namespace prefixes<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arAttributes</span><span class="keyword">[</span><span class="string">"@</span><span class="keyword">{</span><span class="default">$oAttrNode</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">}</span><span class="string">"</span><span class="keyword">] = </span><span class="default">$oAttrNode</span><span class="keyword">-&gt;</span><span class="default">nodeValue</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// check for namespace attribute - Namespaces will not show up in the attributes list<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$oDomNode </span><span class="keyword">instanceof </span><span class="default">DOMElement </span><span class="keyword">&amp;&amp; </span><span class="default">$oDomNode</span><span class="keyword">-&gt;</span><span class="default">getAttribute</span><span class="keyword">(</span><span class="string">'xmlns'</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arAttributes</span><span class="keyword">[</span><span class="string">"@xmlns"</span><span class="keyword">] = </span><span class="default">$oDomNode</span><span class="keyword">-&gt;</span><span class="default">getAttribute</span><span class="keyword">(</span><span class="string">'xmlns'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$arAttributes</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$mResult</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$mResult </span><span class="keyword">= (</span><span class="default">trim</span><span class="keyword">(</span><span class="default">$mResult</span><span class="keyword">)) ? array(</span><span class="default">$mResult</span><span class="keyword">) : array();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$mResult </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$mResult</span><span class="keyword">, </span><span class="default">$arAttributes</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arResult </span><span class="keyword">= array(</span><span class="default">$oDomNode</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">=&gt;</span><span class="default">$mResult</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$arResult</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">$sXml </span><span class="keyword">= &lt;&lt;&lt;XML<br />
</span><span class="string">&lt;nodes&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;node&gt;text&lt;node&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;node&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;field&gt;hello&lt;field&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;field&gt;world&lt;field&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;node&gt;<br />
&lt;nodes&gt;<br />
</span><span class="keyword">XML;<br />
</span><span class="default">$dom </span><span class="keyword">= new </span><span class="default">MyDOMDocument</span><span class="keyword">;<br />
</span><span class="default">$dom</span><span class="keyword">-&gt;</span><span class="default">loadXml</span><span class="keyword">(</span><span class="default">$sXml</span><span class="keyword">);<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$dom</span><span class="keyword">-&gt;</span><span class="default">toArray</span><span class="keyword">());<br />
</span><span class="default">?&gt;<br />
</span>Output:<br />
<br />
array (<br />
&nbsp;&nbsp;&nbsp; "nodes" =&gt; array (<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; "node" =&gt; array (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 0 =&gt; "text",<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 1 =&gt; array (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; "field" =&gt; array (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 0 =&gt; "hello",<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 1 =&gt; "world"<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
&nbsp;&nbsp;&nbsp; )<br />
&nbsp;)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92947""></a>
  <div class="note">
   <strong class="user">PhilipWayneRollins at gmail dot com</strong>
   <a href="#92947" class="date">15-Aug-2009 01:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to use the DOMDocument to create xHTML documents here is a simple class<br />
<br />
Note this is designed for creating xHTML documents from scratch but could be easily extended to work with xHTML documents. Also this is for xHTML not XML.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">class </span><span class="default">Document<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public </span><span class="default">$doctype</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public </span><span class="default">$head</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public </span><span class="default">$title </span><span class="keyword">= </span><span class="string">'Sensei Ninja'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public </span><span class="default">$body</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; private </span><span class="default">$styles</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; private </span><span class="default">$metas</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; private </span><span class="default">$scripts</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; private </span><span class="default">$document</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; function </span><span class="default">__construct </span><span class="keyword">(&nbsp; )<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">document </span><span class="keyword">= new </span><span class="default">DOMDocument</span><span class="keyword">( );<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">head </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">document</span><span class="keyword">-&gt;</span><span class="default">createElement</span><span class="keyword">( </span><span class="string">'head'</span><span class="keyword">, </span><span class="string">' ' </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">body </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">document</span><span class="keyword">-&gt;</span><span class="default">createElement</span><span class="keyword">( </span><span class="string">'body'</span><span class="keyword">, </span><span class="string">' ' </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public function </span><span class="default">addStyleSheet </span><span class="keyword">( </span><span class="default">$url</span><span class="keyword">, </span><span class="default">$media</span><span class="keyword">=</span><span class="string">'all' </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$element </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">document</span><span class="keyword">-&gt;</span><span class="default">createElement</span><span class="keyword">( </span><span class="string">'link' </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$element</span><span class="keyword">-&gt;</span><span class="default">setAttribute</span><span class="keyword">( </span><span class="string">'type'</span><span class="keyword">, </span><span class="string">'text/css' </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$element</span><span class="keyword">-&gt;</span><span class="default">setAttribute</span><span class="keyword">( </span><span class="string">'href'</span><span class="keyword">, </span><span class="default">$url </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$element</span><span class="keyword">-&gt;</span><span class="default">setAttribute</span><span class="keyword">( </span><span class="string">'media'</span><span class="keyword">, </span><span class="default">$media </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">styles</span><span class="keyword">[] = </span><span class="default">$element</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public function </span><span class="default">addScript </span><span class="keyword">( </span><span class="default">$url </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$element </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">document</span><span class="keyword">-&gt;</span><span class="default">createElement</span><span class="keyword">( </span><span class="string">'script'</span><span class="keyword">, </span><span class="string">' ' </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$element</span><span class="keyword">-&gt;</span><span class="default">setAttribute</span><span class="keyword">( </span><span class="string">'type'</span><span class="keyword">, </span><span class="string">'text/javascript' </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$element</span><span class="keyword">-&gt;</span><span class="default">setAttribute</span><span class="keyword">( </span><span class="string">'src'</span><span class="keyword">, </span><span class="default">$url </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">scripts</span><span class="keyword">[] = </span><span class="default">$element</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public function </span><span class="default">addMetaTag </span><span class="keyword">( </span><span class="default">$name</span><span class="keyword">, </span><span class="default">$content </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$element </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">document</span><span class="keyword">-&gt;</span><span class="default">createElement</span><span class="keyword">( </span><span class="string">'meta' </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$element</span><span class="keyword">-&gt;</span><span class="default">setAttribute</span><span class="keyword">( </span><span class="string">'name'</span><span class="keyword">, </span><span class="default">$name </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$element</span><span class="keyword">-&gt;</span><span class="default">setAttribute</span><span class="keyword">( </span><span class="string">'content'</span><span class="keyword">, </span><span class="default">$content </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">metas</span><span class="keyword">[] = </span><span class="default">$element</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public function </span><span class="default">setDescription </span><span class="keyword">( </span><span class="default">$dec </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">addMetaTag</span><span class="keyword">( </span><span class="string">'description'</span><span class="keyword">, </span><span class="default">$dec </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public function </span><span class="default">setKeywords </span><span class="keyword">( </span><span class="default">$keywords </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">addMetaTag</span><span class="keyword">( </span><span class="string">'keywords'</span><span class="keyword">, </span><span class="default">$keywords </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public function </span><span class="default">createElement </span><span class="keyword">( </span><span class="default">$nodeName</span><span class="keyword">, </span><span class="default">$nodeValue</span><span class="keyword">=</span><span class="default">null </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">document</span><span class="keyword">-&gt;</span><span class="default">createElement</span><span class="keyword">( </span><span class="default">$nodeName</span><span class="keyword">, </span><span class="default">$nodeValue </span><span class="keyword">); <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public function </span><span class="default">assemble </span><span class="keyword">( )<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Doctype creation<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$doctype </span><span class="keyword">= </span><span class="string">'&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML TRANSITIONAL 1.0//EN" "<a href="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd" rel="nofollow" target="_blank">http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd</a>"&gt;'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Create the head element<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$title </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">document</span><span class="keyword">-&gt;</span><span class="default">createElement</span><span class="keyword">( </span><span class="string">'title'</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">title </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Add stylesheets if needed<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if ( </span><span class="default">is_array</span><span class="keyword">( </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">styles </span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach ( </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">styles </span><span class="keyword">as </span><span class="default">$element </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">head</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">( </span><span class="default">$element </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Add scripts if needed<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if(&nbsp; </span><span class="default">is_array</span><span class="keyword">( </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">scripts </span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach ( </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">scripts </span><span class="keyword">as </span><span class="default">$element </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">head</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">( </span><span class="default">$element </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Add meta tags if needed<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if ( </span><span class="default">is_array</span><span class="keyword">( </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">metas </span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach ( </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">metas </span><span class="keyword">as </span><span class="default">$element </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">head</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">( </span><span class="default">$element </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">head</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">( </span><span class="default">$title </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Create the document<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$html </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">document</span><span class="keyword">-&gt;</span><span class="default">createElement</span><span class="keyword">( </span><span class="string">'html' </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$html</span><span class="keyword">-&gt;</span><span class="default">setAttribute</span><span class="keyword">( </span><span class="string">'xmlns'</span><span class="keyword">, </span><span class="string">'<a href="http://www.w3.org/1999/xhtml" rel="nofollow" target="_blank">http://www.w3.org/1999/xhtml</a>' </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$html</span><span class="keyword">-&gt;</span><span class="default">setAttribute</span><span class="keyword">( </span><span class="string">'xml:lang'</span><span class="keyword">, </span><span class="string">'en' </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$html</span><span class="keyword">-&gt;</span><span class="default">setAttribute</span><span class="keyword">( </span><span class="string">'lang'</span><span class="keyword">, </span><span class="string">'en' </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$html</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">( </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">head </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$html</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">( </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">body </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">document</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">( </span><span class="default">$html </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$doctype </span><span class="keyword">. </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">document</span><span class="keyword">-&gt;</span><span class="default">saveXML</span><span class="keyword">( );<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
</span><span class="default">?&gt;<br />
</span><br />
Small example<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $document </span><span class="keyword">= new </span><span class="default">Document</span><span class="keyword">( );<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$document</span><span class="keyword">-&gt;</span><span class="default">title </span><span class="keyword">= </span><span class="string">'Hello'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$document</span><span class="keyword">-&gt;</span><span class="default">addStyleSheet</span><span class="keyword">( </span><span class="string">'StyleSheets/main.css' </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$div </span><span class="keyword">= </span><span class="default">$document</span><span class="keyword">-&gt;</span><span class="default">createElement</span><span class="keyword">( </span><span class="string">'div' </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$div</span><span class="keyword">-&gt;</span><span class="default">nodeValue </span><span class="keyword">= </span><span class="string">'Hello, world!'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$div</span><span class="keyword">-&gt;</span><span class="default">setAttribute</span><span class="keyword">( </span><span class="string">'style'</span><span class="keyword">, </span><span class="string">'color: red;' </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$document</span><span class="keyword">-&gt;</span><span class="default">body</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">( </span><span class="default">$div </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">printf</span><span class="keyword">( </span><span class="string">'%s'</span><span class="keyword">, </span><span class="default">$document</span><span class="keyword">-&gt;</span><span class="default">assemble</span><span class="keyword">( ) );<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91617""></a>
  <div class="note">
   <strong class="user">e dot sand at elisand dot com</strong>
   <a href="#91617" class="date">19-Jun-2009 09:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It should be pointed out that DOMDocument extends DOMNode in every way... that means that you even have access to the DOMNode properties (even though the documentation here does not mention them as being inherited).<br />
<br />
I used to use an XPath query to access nodes from a DOMDocument (when getElementById or getElementsByTagName weren't usable), as I believed this to be the only way.&nbsp; However, since DOMDocument fully extends DOMNode, you can use DOMDocument-&gt;firstChild for example to get the first child node.<br />
<br />
This simplifies things quite a bit when using an XPath query may seem a bit excessive to get access to something as simple as the child nodes.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91072""></a>
  <div class="note">
   <strong class="user">cmyk777 at gmail dot com</strong>
   <a href="#91072" class="date">23-May-2009 12:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function may help to debug current dom element:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">dom_dump</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$classname </span><span class="keyword">= </span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$retval </span><span class="keyword">= </span><span class="string">"Instance of </span><span class="default">$classname</span><span class="string">, node list: \n"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; switch (</span><span class="default">true</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case (</span><span class="default">$obj </span><span class="keyword">instanceof </span><span class="default">DOMDocument</span><span class="keyword">):<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$retval </span><span class="keyword">.= </span><span class="string">"XPath: </span><span class="keyword">{</span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">getNodePath</span><span class="keyword">()}</span><span class="string">\n"</span><span class="keyword">.</span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">saveXML</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case (</span><span class="default">$obj </span><span class="keyword">instanceof </span><span class="default">DOMElement</span><span class="keyword">):<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$retval </span><span class="keyword">.= </span><span class="string">"XPath: </span><span class="keyword">{</span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">getNodePath</span><span class="keyword">()}</span><span class="string">\n"</span><span class="keyword">.</span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">ownerDocument</span><span class="keyword">-&gt;</span><span class="default">saveXML</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case (</span><span class="default">$obj </span><span class="keyword">instanceof </span><span class="default">DOMAttr</span><span class="keyword">):<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$retval </span><span class="keyword">.= </span><span class="string">"XPath: </span><span class="keyword">{</span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">getNodePath</span><span class="keyword">()}</span><span class="string">\n"</span><span class="keyword">.</span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">ownerDocument</span><span class="keyword">-&gt;</span><span class="default">saveXML</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//$retval .= $obj-&gt;ownerDocument-&gt;saveXML($obj);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case (</span><span class="default">$obj </span><span class="keyword">instanceof </span><span class="default">DOMNodeList</span><span class="keyword">):<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">length</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$retval </span><span class="keyword">.= </span><span class="string">"Item #</span><span class="default">$i</span><span class="string">, XPath: </span><span class="keyword">{</span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">item</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">)-&gt;</span><span class="default">getNodePath</span><span class="keyword">()}</span><span class="string">\n"</span><span class="keyword">.<br />
</span><span class="string">"</span><span class="keyword">{</span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">item</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">)-&gt;</span><span class="default">ownerDocument</span><span class="keyword">-&gt;</span><span class="default">saveXML</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">item</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">))}</span><span class="string">\n"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; default:<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="string">"Instance of unknown class"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="string">'no elements...'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">htmlspecialchars</span><span class="keyword">(</span><span class="default">$retval</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Example usage:<br />
<br />
<span class="default">&lt;?php<br />
$dom </span><span class="keyword">= new </span><span class="default">DomDocument</span><span class="keyword">();<br />
</span><span class="default">$dom</span><span class="keyword">-&gt;</span><span class="default">load</span><span class="keyword">(</span><span class="string">'test.xml'</span><span class="keyword">);<br />
</span><span class="default">$body </span><span class="keyword">= </span><span class="default">$dom</span><span class="keyword">-&gt;</span><span class="default">documentElement</span><span class="keyword">-&gt;</span><span class="default">getElementsByTagName</span><span class="keyword">(</span><span class="string">'book'</span><span class="keyword">);<br />
echo </span><span class="string">'&lt;pre&gt;'</span><span class="keyword">.</span><span class="default">dom_dump</span><span class="keyword">(</span><span class="default">$body</span><span class="keyword">).</span><span class="string">'&lt;pre&gt;'</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
Output:<br />
<br />
Instance of DOMNodeList, node list: <br />
Item #0, XPath: /library/book[1]<br />
&lt;book isbn="0345342968"&gt;<br />
&lt;title&gt;Fahrenheit 451&lt;/title&gt;<br />
&lt;author&gt;R. Bradbury&lt;/author&gt;<br />
&lt;publisher&gt;Del Rey&lt;/publisher&gt;<br />
&lt;/book&gt;<br />
Item #1, XPath: /library/book[2]<br />
&lt;book isbn="0048231398"&gt;<br />
&lt;title&gt;The Silmarillion&lt;/title&gt;<br />
&lt;author&gt;J.R.R. Tolkien&lt;/author&gt;<br />
&lt;publisher&gt;G. Allen &amp;amp; Unwin&lt;/publisher&gt;<br />
&lt;/book&gt;<br />
Item #2, XPath: /library/book[3]<br />
&lt;book isbn="0451524934"&gt;<br />
&lt;title&gt;1984&lt;/title&gt;<br />
&lt;author&gt;G. Orwell&lt;/author&gt;<br />
&lt;publisher&gt;Signet&lt;/publisher&gt;<br />
&lt;/book&gt;<br />
Item #3, XPath: /library/book[4]<br />
&lt;book isbn="031219126X"&gt;<br />
&lt;title&gt;Frankenstein&lt;/title&gt;<br />
&lt;author&gt;M. Shelley&lt;/author&gt;<br />
&lt;publisher&gt;Bedford&lt;/publisher&gt;<br />
&lt;/book&gt;<br />
Item #4, XPath: /library/book[5]<br />
&lt;book isbn="0312863551"&gt;<br />
&lt;title&gt;The Moon Is a Harsh Mistress&lt;/title&gt;<br />
&lt;author&gt;R. A. Heinlein&lt;/author&gt;<br />
&lt;publisher&gt;Orb&lt;/publisher&gt;<br />
&lt;/book&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87320""></a>
  <div class="note">
   <strong class="user">Atanas Markov (dreamer79bg at gmail dot com)</strong>
   <a href="#87320" class="date">29-Nov-2008 11:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a simple web scraping example using the PHP DOM that tries to get the largest text body of a HTML document. I needed it for a spider that had to show a short description for a page. It assumes that document annotation can be the largest &lt;div&gt;, &lt;td&gt; or &lt;p&gt; element in the page. <br />
In the example I show a way to prevent a bug in the DOM as it sometimes just doesn't recognize html encoding. It seems to work if you put charset meta tag right after the head tag of the document.<br />
<br />
<span class="default">&lt;?php<br />
$ch</span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">();<br />
</span><span class="default">curl_setopt </span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_URL</span><span class="keyword">, </span><span class="string">'...put url here...' </span><span class="keyword">);<br />
</span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_HEADER</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br />
</span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">,</span><span class="default">CURLOPT_VERBOSE</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">);<br />
</span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_USERAGENT</span><span class="keyword">, </span><span class="string">'set sth...'</span><span class="keyword">);<br />
</span><span class="default">curl_setopt </span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_REFERER</span><span class="keyword">, </span><span class="string">'...set sth...'</span><span class="keyword">); </span><span class="comment">//just a fake referer<br />
</span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_RETURNTRANSFER</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
</span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">,</span><span class="default">CURLOPT_POST</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">);<br />
</span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_FOLLOWLOCATION</span><span class="keyword">, </span><span class="default">20</span><span class="keyword">);<br />
<br />
</span><span class="default">$html</span><span class="keyword">= </span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);<br />
</span><span class="default">$html1</span><span class="keyword">= </span><span class="default">curl_getinfo</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);<br />
<br />
</span><span class="comment">//try to get page encoding as it was sent from server<br />
</span><span class="keyword">if (</span><span class="default">$html1</span><span class="keyword">[</span><span class="string">'content_type'</span><span class="keyword">]){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$arr</span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'charset='</span><span class="keyword">,</span><span class="default">$html1</span><span class="keyword">[</span><span class="string">'content_type'</span><span class="keyword">]);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$csethdr</span><span class="keyword">= </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">trim</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]));<br />
} else {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$csethdr</span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$cset</span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
</span><span class="default">$arr</span><span class="keyword">= array();<br />
<br />
</span><span class="comment">//This has to replace page meta tags for charset with utf-8, but it doesn't actually help(see the bug info).<br />
</span><span class="keyword">if (</span><span class="default">preg_match_all</span><span class="keyword">(<br />
</span><span class="string">'/(&lt;meta\s*http-equiv="Content-Type"\s*content="[^;]*;<br />
\s*charset=([^"]*?)(?:"|\;)[^&gt;]*&gt;)/' </span><span class="comment">//merge this line<br />
</span><span class="keyword">,</span><span class="default">$html</span><span class="keyword">,</span><span class="default">$arr</span><span class="keyword">,</span><span class="default">PREG_PATTERN_ORDER</span><span class="keyword">)){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$cset</span><span class="keyword">= </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">trim</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">]));<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$cset</span><span class="keyword">!=</span><span class="string">'utf-8'</span><span class="keyword">||</span><span class="default">$cset</span><span class="keyword">!=</span><span class="default">$csethdr</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new</span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">],</span><span class="string">'utf-8'</span><span class="keyword">,</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$html</span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">],</span><span class="default">$new</span><span class="keyword">,</span><span class="default">$html</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$cset</span><span class="keyword">= </span><span class="default">$csethdr</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$cset</span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$cset</span><span class="keyword">==</span><span class="string">'utf-8'</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$cset</span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
unset(</span><span class="default">$arr</span><span class="keyword">);<br />
if (</span><span class="default">$cset</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$html</span><span class="keyword">= </span><span class="default">iconv</span><span class="keyword">(</span><span class="default">$cset</span><span class="keyword">,</span><span class="string">'utf-8'</span><span class="keyword">,</span><span class="default">$html</span><span class="keyword">);<br />
}<br />
unset(</span><span class="default">$cset</span><span class="keyword">);<br />
<br />
</span><span class="comment">//solve dom bug<br />
</span><span class="default">$html</span><span class="keyword">=</span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/&lt;head[^&gt;]*&gt;/'</span><span class="keyword">,</span><span class="string">'&lt;head&gt;<br />
&lt;META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8"&gt;<br />
'</span><span class="keyword">,</span><span class="default">$html</span><span class="keyword">);<br />
<br />
</span><span class="default">$dom</span><span class="keyword">= new </span><span class="default">DOMDocument</span><span class="keyword">();<br />
</span><span class="default">$dom</span><span class="keyword">-&gt;</span><span class="default">loadHTML</span><span class="keyword">(</span><span class="default">$html</span><span class="keyword">);<br />
</span><span class="default">$dom</span><span class="keyword">-&gt;</span><span class="default">preserveWhiteSpace </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
<br />
function </span><span class="default">getMaxTextBody</span><span class="keyword">(</span><span class="default">$dom</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$content </span><span class="keyword">= </span><span class="default">$dom</span><span class="keyword">-&gt;</span><span class="default">getElementsByTagname</span><span class="keyword">(</span><span class="string">'div'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$content2</span><span class="keyword">= </span><span class="default">$dom</span><span class="keyword">-&gt;</span><span class="default">getElementsByTagname</span><span class="keyword">(</span><span class="string">'td'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$content3</span><span class="keyword">= </span><span class="default">$dom</span><span class="keyword">-&gt;</span><span class="default">getElementsByTagname</span><span class="keyword">(</span><span class="string">'p'</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$new</span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$content </span><span class="keyword">as </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new</span><span class="keyword">[]= </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; unset(</span><span class="default">$content</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$content2 </span><span class="keyword">as </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new</span><span class="keyword">[]= </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; unset(</span><span class="default">$content2</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$content3 </span><span class="keyword">as </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new</span><span class="keyword">[]= </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; unset(</span><span class="default">$content3</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$maxlen</span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$new </span><span class="keyword">as </span><span class="default">$item</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$str</span><span class="keyword">= </span><span class="default">$item</span><span class="keyword">-&gt;</span><span class="default">nodeValue</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">)&gt;</span><span class="default">$maxlen</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$content1</span><span class="keyword">= </span><span class="default">$item</span><span class="keyword">-&gt;</span><span class="default">getElementsByTagName</span><span class="keyword">(</span><span class="string">'div'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$content2</span><span class="keyword">= </span><span class="default">$item</span><span class="keyword">-&gt;</span><span class="default">getElementsByTagname</span><span class="keyword">(</span><span class="string">'td'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$content3</span><span class="keyword">= </span><span class="default">$item</span><span class="keyword">-&gt;</span><span class="default">getElementsByTagname</span><span class="keyword">(</span><span class="string">'p'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$contentnew</span><span class="keyword">= array();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$content1 </span><span class="keyword">as </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$contentnew</span><span class="keyword">[]= </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$content1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$content2 </span><span class="keyword">as </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$contentnew</span><span class="keyword">[]= </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$content2</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$content3 </span><span class="keyword">as </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$contentnew</span><span class="keyword">[]= </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$content3</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$contentnew</span><span class="keyword">)==</span><span class="default">0</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">= </span><span class="default">$str</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$contentnew </span><span class="keyword">as </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$str1</span><span class="keyword">= </span><span class="default">getMaxTextBody</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$str2</span><span class="keyword">= </span><span class="default">$value</span><span class="keyword">-&gt;</span><span class="default">nodeValue</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//let's say largest body has more than 50% of the text in its parent<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str1</span><span class="keyword">)*</span><span class="default">2</span><span class="keyword">&lt;</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str2</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$str1</span><span class="keyword">= </span><span class="default">$str2</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str1</span><span class="keyword">)*</span><span class="default">2</span><span class="keyword">&gt;</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">)&amp;&amp;</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str1</span><span class="keyword">)&gt;</span><span class="default">$maxlen</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">= </span><span class="default">$str1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } elseif (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str1</span><span class="keyword">)&gt;</span><span class="default">$maxlen</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">= </span><span class="default">$str1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$maxlen</span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$maxlen</span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$contnentnew</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; unset(</span><span class="default">$new</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;<br />
}<br />
print </span><span class="default">getMaxTextBody</span><span class="keyword">(</span><span class="default">$dom</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83210""></a>
  <div class="note">
   <strong class="user">Jochem Blok</strong>
   <a href="#83210" class="date">15-May-2008 06:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To indent a XML in a pretty way I use:<br />
<br />
&lt;?<br />
$sXML = '&lt;root&gt;&lt;element&gt;&lt;key&gt;a&lt;/key&gt;&lt;value&gt;b&lt;/value&gt;&lt;/element&gt;&lt;/root&gt;';<br />
$doc = new DOMDocument();<br />
$doc-&gt;preserveWhiteSpace = false;<br />
$doc-&gt;formatOutput&nbsp;&nbsp; = true;<br />
$doc-&gt;loadXML($sXML);<br />
echo $doc-&gt;saveXML();<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82447""></a>
  <div class="note">
   <strong class="user">Fernando H</strong>
   <a href="#82447" class="date">11-Apr-2008 12:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Showing a quick example of how to use this class, just so that new users can get a quick start without having to figure it all out by themself. ( At the day of posting, this documentation just got added and is lacking examples. )<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">// Set the content type to be XML, so that the browser will&nbsp;&nbsp; recognise it as XML.<br />
</span><span class="default">header</span><span class="keyword">( </span><span class="string">"content-type: application/xml; charset=ISO-8859-15" </span><span class="keyword">);<br />
<br />
</span><span class="comment">// "Create" the document.<br />
</span><span class="default">$xml </span><span class="keyword">= new </span><span class="default">DOMDocument</span><span class="keyword">( </span><span class="string">"1.0"</span><span class="keyword">, </span><span class="string">"ISO-8859-15" </span><span class="keyword">);<br />
<br />
</span><span class="comment">// Create some elements.<br />
</span><span class="default">$xml_album </span><span class="keyword">= </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">createElement</span><span class="keyword">( </span><span class="string">"Album" </span><span class="keyword">);<br />
</span><span class="default">$xml_track </span><span class="keyword">= </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">createElement</span><span class="keyword">( </span><span class="string">"Track"</span><span class="keyword">, </span><span class="string">"The ninth symphony" </span><span class="keyword">);<br />
<br />
</span><span class="comment">// Set the attributes.<br />
</span><span class="default">$xml_track</span><span class="keyword">-&gt;</span><span class="default">setAttribute</span><span class="keyword">( </span><span class="string">"length"</span><span class="keyword">, </span><span class="string">"0:01:15" </span><span class="keyword">);<br />
</span><span class="default">$xml_track</span><span class="keyword">-&gt;</span><span class="default">setAttribute</span><span class="keyword">( </span><span class="string">"bitrate"</span><span class="keyword">, </span><span class="string">"64kb/s" </span><span class="keyword">);<br />
</span><span class="default">$xml_track</span><span class="keyword">-&gt;</span><span class="default">setAttribute</span><span class="keyword">( </span><span class="string">"channels"</span><span class="keyword">, </span><span class="string">"2" </span><span class="keyword">);<br />
<br />
</span><span class="comment">// Create another element, just to show you can add any (realistic to computer) number of sublevels.<br />
</span><span class="default">$xml_note </span><span class="keyword">= </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">createElement</span><span class="keyword">( </span><span class="string">"Note"</span><span class="keyword">, </span><span class="string">"The last symphony composed by Ludwig van Beethoven." </span><span class="keyword">);<br />
<br />
</span><span class="comment">// Append the whole bunch.<br />
</span><span class="default">$xml_track</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">( </span><span class="default">$xml_note </span><span class="keyword">);<br />
</span><span class="default">$xml_album</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">( </span><span class="default">$xml_track </span><span class="keyword">);<br />
<br />
</span><span class="comment">// Repeat the above with some different values..<br />
</span><span class="default">$xml_track </span><span class="keyword">= </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">createElement</span><span class="keyword">( </span><span class="string">"Track"</span><span class="keyword">, </span><span class="string">"Highway Blues" </span><span class="keyword">);<br />
<br />
</span><span class="default">$xml_track</span><span class="keyword">-&gt;</span><span class="default">setAttribute</span><span class="keyword">( </span><span class="string">"length"</span><span class="keyword">, </span><span class="string">"0:01:33" </span><span class="keyword">);<br />
</span><span class="default">$xml_track</span><span class="keyword">-&gt;</span><span class="default">setAttribute</span><span class="keyword">( </span><span class="string">"bitrate"</span><span class="keyword">, </span><span class="string">"64kb/s" </span><span class="keyword">);<br />
</span><span class="default">$xml_track</span><span class="keyword">-&gt;</span><span class="default">setAttribute</span><span class="keyword">( </span><span class="string">"channels"</span><span class="keyword">, </span><span class="string">"2" </span><span class="keyword">);<br />
</span><span class="default">$xml_album</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">( </span><span class="default">$xml_track </span><span class="keyword">);<br />
<br />
</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">( </span><span class="default">$xml_album </span><span class="keyword">);<br />
<br />
</span><span class="comment">// Parse the XML.<br />
</span><span class="keyword">print </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">saveXML</span><span class="keyword">();<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Output:<br />
&lt;Album&gt;<br />
&nbsp; &lt;Track length="0:01:15" bitrate="64kb/s" channels="2"&gt;<br />
&nbsp;&nbsp;&nbsp; The ninth symphony<br />
&nbsp;&nbsp;&nbsp; &lt;Note&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; The last symphony composed by Ludwig van Beethoven.<br />
&nbsp;&nbsp;&nbsp; &lt;/Note&gt;<br />
&nbsp; &lt;/Track&gt;<br />
&nbsp; &lt;Track length="0:01:33" bitrate="64kb/s" channels="2"&gt;Highway Blues&lt;/Track&gt;<br />
&lt;/Album&gt;<br />
<br />
If you want your PHP-&gt;DOM code to run under the .xml extension, you should set your webserver up to run the .xml extension with PHP ( Refer to the installation/configuration configuration for PHP on how to do this ).<br />
<br />
Note that this:<br />
<span class="default">&lt;?php<br />
$xml </span><span class="keyword">= new </span><span class="default">DOMDocument</span><span class="keyword">( </span><span class="string">"1.0"</span><span class="keyword">, </span><span class="string">"ISO-8859-15" </span><span class="keyword">);<br />
</span><span class="default">$xml_album </span><span class="keyword">= </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">createElement</span><span class="keyword">( </span><span class="string">"Album" </span><span class="keyword">);<br />
</span><span class="default">$xml_track </span><span class="keyword">= </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">createElement</span><span class="keyword">( </span><span class="string">"Track" </span><span class="keyword">);<br />
</span><span class="default">$xml_album</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">( </span><span class="default">$xml_track </span><span class="keyword">);<br />
</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">( </span><span class="default">$xml_album </span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
is NOT the same as this:<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// Will NOT work.<br />
</span><span class="default">$xml </span><span class="keyword">= new </span><span class="default">DOMDocument</span><span class="keyword">( </span><span class="string">"1.0"</span><span class="keyword">, </span><span class="string">"ISO-8859-15" </span><span class="keyword">);<br />
</span><span class="default">$xml_album </span><span class="keyword">= new </span><span class="default">DOMElement</span><span class="keyword">( </span><span class="string">"Album" </span><span class="keyword">);<br />
</span><span class="default">$xml_track </span><span class="keyword">= new </span><span class="default">DOMElement</span><span class="keyword">( </span><span class="string">"Track" </span><span class="keyword">);<br />
</span><span class="default">$xml_album</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">( </span><span class="default">$xml_track </span><span class="keyword">);<br />
</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">( </span><span class="default">$xml_album </span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
although this will work:<br />
<span class="default">&lt;?php<br />
$xml </span><span class="keyword">= new </span><span class="default">DOMDocument</span><span class="keyword">( </span><span class="string">"1.0"</span><span class="keyword">, </span><span class="string">"ISO-8859-15" </span><span class="keyword">);<br />
</span><span class="default">$xml_album </span><span class="keyword">= new </span><span class="default">DOMElement</span><span class="keyword">( </span><span class="string">"Album" </span><span class="keyword">);<br />
</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">( </span><span class="default">$xml_album </span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="domcomment.construct.html">DOMComment::__construct</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="domdocument.construct.html">DOMDocument::__construct</a></div>
 <div class="up"><a href="book.dom.html">DOM</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
