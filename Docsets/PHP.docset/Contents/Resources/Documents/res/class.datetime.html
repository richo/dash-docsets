<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>The DateTime class</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="datetime.constants.html">Predefined Constants</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="datetime.add.html">DateTime::add</a></div>
 <div class="up"><a href="book.datetime.html">Date/Time</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="class.datetime" class="reference">

 <h1 class="title">The DateTime class</h1>
 

 <div class="partintro"><p class="verinfo">(PHP 5 &gt;= 5.2.0)</p>


  <div class="section" id="datetime.intro">
   <h2 class="title">Introduction</h2>
   <p class="para">
    Representation of date and time.
   </p>
  </div>


  <div class="section" id="datetime.synopsis">
   <h2 class="title">Class synopsis</h2>


   <div class="classsynopsis">
    <div class="ooclass"></div>


    <div class="classsynopsisinfo">
     <span class="ooclass">
      <b class="classname">DateTime</b>
     </span>
     {</div>

    <div class="classsynopsisinfo classsynopsisinfo_comment">/* Constants */</div>
    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">string</span>
      <var class="fieldsynopsis_varname"><a href="class.datetime.html#datetime.constants.atom"><var class="varname">ATOM</var></a></var>
     <span class="initializer"> = &quot;Y-m-d\TH:i:sP&quot;</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">string</span>
      <var class="fieldsynopsis_varname"><a href="class.datetime.html#datetime.constants.cookie"><var class="varname">COOKIE</var></a></var>
     <span class="initializer"> = &quot;l, d-M-y H:i:s T&quot;</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">string</span>
      <var class="fieldsynopsis_varname"><a href="class.datetime.html#datetime.constants.iso8601"><var class="varname">ISO8601</var></a></var>
     <span class="initializer"> = &quot;Y-m-d\TH:i:sO&quot;</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">string</span>
      <var class="fieldsynopsis_varname"><a href="class.datetime.html#datetime.constants.rfc822"><var class="varname">RFC822</var></a></var>
     <span class="initializer"> = &quot;D, d M y H:i:s O&quot;</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">string</span>
      <var class="fieldsynopsis_varname"><a href="class.datetime.html#datetime.constants.rfc850"><var class="varname">RFC850</var></a></var>
     <span class="initializer"> = &quot;l, d-M-y H:i:s T&quot;</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">string</span>
      <var class="fieldsynopsis_varname"><a href="class.datetime.html#datetime.constants.rfc1036"><var class="varname">RFC1036</var></a></var>
     <span class="initializer"> = &quot;D, d M y H:i:s O&quot;</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">string</span>
      <var class="fieldsynopsis_varname"><a href="class.datetime.html#datetime.constants.rfc1123"><var class="varname">RFC1123</var></a></var>
     <span class="initializer"> = &quot;D, d M Y H:i:s O&quot;</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">string</span>
      <var class="fieldsynopsis_varname"><a href="class.datetime.html#datetime.constants.rfc2822"><var class="varname">RFC2822</var></a></var>
     <span class="initializer"> = &quot;D, d M Y H:i:s O&quot;</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">string</span>
      <var class="fieldsynopsis_varname"><a href="class.datetime.html#datetime.constants.rfc3339"><var class="varname">RFC3339</var></a></var>
     <span class="initializer"> = &quot;Y-m-d\TH:i:sP&quot;</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">string</span>
      <var class="fieldsynopsis_varname"><a href="class.datetime.html#datetime.constants.rss"><var class="varname">RSS</var></a></var>
     <span class="initializer"> = &quot;D, d M Y H:i:s O&quot;</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">string</span>
      <var class="fieldsynopsis_varname"><a href="class.datetime.html#datetime.constants.w3c"><var class="varname">W3C</var></a></var>
     <span class="initializer"> = &quot;Y-m-d\TH:i:sP&quot;</span>
    ;</div>

    
    <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
    <div class="constructorsynopsis dc-description">
   <span class="modifier">public</span>  <span class="methodname"><a href="datetime.construct.html" class="methodname">__construct</a></span>
    ([ <span class="methodparam"><span class="type">string</span> <tt class="parameter">$time</tt><span class="initializer"> = &quot;now&quot;</span></span>
   [, <span class="methodparam"><span class="type"><a href="class.datetimezone.html" class="type DateTimeZone">DateTimeZone</a></span> <tt class="parameter">$timezone</tt><span class="initializer"> = <b><tt>NULL</tt></b></span></span>
  ]] )</div>

    
    <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">DateTime</span> <span class="methodname"><a href="datetime.add.html" class="methodname">add</a></span>
    ( <span class="methodparam"><span class="type"><a href="class.dateinterval.html" class="type DateInterval">DateInterval</a></span> <tt class="parameter">$interval</tt></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="modifier">static</span> <span class="type">DateTime</span> <span class="methodname"><a href="datetime.createfromformat.html" class="methodname">createFromFormat</a></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$format</tt></span>
   , <span class="methodparam"><span class="type">string</span> <tt class="parameter">$time</tt></span>
   [, <span class="methodparam"><span class="type"><a href="class.datetimezone.html" class="type DateTimeZone">DateTimeZone</a></span> <tt class="parameter">$timezone</tt></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">DateInterval</span> <span class="methodname"><a href="datetime.diff.html" class="methodname">diff</a></span>
    ( <span class="methodparam"><span class="type"><a href="class.datetime.html" class="type DateTime">DateTime</a></span> <tt class="parameter">$datetime2</tt></span>
   [, <span class="methodparam"><span class="type">bool</span> <tt class="parameter">$absolute</tt><span class="initializer"> = false</span></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">string</span> <span class="methodname"><a href="datetime.format.html" class="methodname">format</a></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$format</tt></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="modifier">static</span> <span class="type">array</span> <span class="methodname"><a href="datetime.getlasterrors.html" class="methodname">getLastErrors</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">int</span> <span class="methodname"><a href="datetime.getoffset.html" class="methodname">getOffset</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">int</span> <span class="methodname"><a href="datetime.gettimestamp.html" class="methodname">getTimestamp</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">DateTimeZone</span> <span class="methodname"><a href="datetime.gettimezone.html" class="methodname">getTimezone</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">DateTime</span> <span class="methodname"><a href="datetime.modify.html" class="methodname">modify</a></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$modify</tt></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="modifier">static</span> <span class="type">DateTime</span> <span class="methodname"><a href="datetime.set-state.html" class="methodname">__set_state</a></span>
    ( <span class="methodparam"><span class="type">array</span> <tt class="parameter">$array</tt></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">DateTime</span> <span class="methodname"><a href="datetime.setdate.html" class="methodname">setDate</a></span>
    ( <span class="methodparam"><span class="type">int</span> <tt class="parameter">$year</tt></span>
   , <span class="methodparam"><span class="type">int</span> <tt class="parameter">$month</tt></span>
   , <span class="methodparam"><span class="type">int</span> <tt class="parameter">$day</tt></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">DateTime</span> <span class="methodname"><a href="datetime.setisodate.html" class="methodname">setISODate</a></span>
    ( <span class="methodparam"><span class="type">int</span> <tt class="parameter">$year</tt></span>
   , <span class="methodparam"><span class="type">int</span> <tt class="parameter">$week</tt></span>
   [, <span class="methodparam"><span class="type">int</span> <tt class="parameter">$day</tt><span class="initializer"> = 1</span></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">DateTime</span> <span class="methodname"><a href="datetime.settime.html" class="methodname">setTime</a></span>
    ( <span class="methodparam"><span class="type">int</span> <tt class="parameter">$hour</tt></span>
   , <span class="methodparam"><span class="type">int</span> <tt class="parameter">$minute</tt></span>
   [, <span class="methodparam"><span class="type">int</span> <tt class="parameter">$second</tt><span class="initializer"> = 0</span></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">DateTime</span> <span class="methodname"><a href="datetime.settimestamp.html" class="methodname">setTimestamp</a></span>
    ( <span class="methodparam"><span class="type">int</span> <tt class="parameter">$unixtimestamp</tt></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">DateTime</span> <span class="methodname"><a href="datetime.settimezone.html" class="methodname">setTimezone</a></span>
    ( <span class="methodparam"><span class="type"><a href="class.datetimezone.html" class="type DateTimeZone">DateTimeZone</a></span> <tt class="parameter">$timezone</tt></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">DateTime</span> <span class="methodname"><a href="datetime.sub.html" class="methodname">sub</a></span>
    ( <span class="methodparam"><span class="type"><a href="class.dateinterval.html" class="type DateInterval">DateInterval</a></span> <tt class="parameter">$interval</tt></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">DateTime</span> <span class="methodname"><a href="datetime.wakeup.html" class="methodname">__wakeup</a></span>
    ( <span class="methodparam">void</span>
   )</div>


   }</div>


  </div>
  

  <div class="section" id="datetime.constants.types">
   <h2 class="title">Predefined Constants</h2>
   <dl>

    <dt id="datetime.constants.atom">
     <span class="term"><b><tt>DateTime::ATOM</tt></b></span>
     <br /><span class="term"><b><tt>DATE_ATOM</tt></b></span>
     <dd>

      <span class="simpara">
       Atom (example: 2005-08-15T15:52:01+00:00)
      </span>
     </dd>

    </dt>


    <dt id="datetime.constants.cookie">
     <span class="term"><b><tt>DateTime::COOKIE</tt></b></span>
     <br /><span class="term"><b><tt>DATE_COOKIE</tt></b></span>
     <dd>

      <span class="simpara">
       HTTP Cookies (example: Monday, 15-Aug-05 15:52:01 UTC)
      </span>
     </dd>

    </dt>


    <dt id="datetime.constants.iso8601">
     <span class="term"><b><tt>DateTime::ISO8601</tt></b></span>
     <br /><span class="term"><b><tt>DATE_ISO8601</tt></b></span>
     <dd>

      <span class="simpara">
       ISO-8601 (example: 2005-08-15T15:52:01+0000)
      </span>
     </dd>

    </dt>


    <dt id="datetime.constants.rfc822">
     <span class="term"><b><tt>DateTime::RFC822</tt></b></span>
     <br /><span class="term"><b><tt>DATE_RFC822</tt></b></span>
     <dd>

      <span class="simpara">
       RFC 822 (example: Mon, 15 Aug 05 15:52:01 +0000)
      </span>
     </dd>

    </dt>


    <dt id="datetime.constants.rfc850">
     <span class="term"><b><tt>DateTime::RFC850</tt></b></span>
     <br /><span class="term"><b><tt>DATE_RFC850</tt></b></span>
     <dd>

      <span class="simpara">
       RFC 850 (example: Monday, 15-Aug-05 15:52:01 UTC)
      </span>
     </dd>

    </dt>


    <dt id="datetime.constants.rfc1036">
     <span class="term"><b><tt>DateTime::RFC1036</tt></b></span>
     <br /><span class="term"><b><tt>DATE_RFC1036</tt></b></span>
     <dd>

      <span class="simpara">
       RFC 1036 (example: Mon, 15 Aug 05 15:52:01 +0000)
      </span>
     </dd>

    </dt>


    <dt id="datetime.constants.rfc1123">
     <span class="term"><b><tt>DateTime::RFC1123</tt></b></span>
     <br /><span class="term"><b><tt>DATE_RFC1123</tt></b></span>
     <dd>

      <span class="simpara">
       RFC 1123 (example: Mon, 15 Aug 2005 15:52:01 +0000)
      </span>
     </dd>

    </dt>


    <dt id="datetime.constants.rfc2822">
     <span class="term"><b><tt>DateTime::RFC2822</tt></b></span>
     <br /><span class="term"><b><tt>DATE_RFC2822</tt></b></span>
     <dd>

      <span class="simpara">
       RFC 2822 (Mon, 15 Aug 2005 15:52:01 +0000)
      </span>
     </dd>

    </dt>


    <dt id="datetime.constants.rfc3339">
     <span class="term"><b><tt>DateTime::RFC3339</tt></b></span>
     <br /><span class="term"><b><tt>DATE_RFC3339</tt></b></span>
     <dd>

      <span class="simpara">
       Same as <b><tt>DATE_ATOM</tt></b> (since PHP 5.1.3)
      </span>
     </dd>

    </dt>


    <dt id="datetime.constants.rss">
     <span class="term"><b><tt>DateTime::RSS</tt></b></span>
     <br /><span class="term"><b><tt>DATE_RSS</tt></b></span>
     <dd>

      <span class="simpara">
       RSS (Mon, 15 Aug 2005 15:52:01 +0000)
      </span>
     </dd>

    </dt>


    <dt id="datetime.constants.w3c">
     <span class="term"><b><tt>DateTime::W3C</tt></b></span>
     <br /><span class="term"><b><tt>DATE_W3C</tt></b></span>
     <dd>

      <span class="simpara">
       World Wide Web Consortium (example: 2005-08-15T15:52:01+00:00)
      </span>
     </dd>

    </dt>


   </dl>

  </div>



 </div>

 































































































































<h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="datetime.add.html">DateTime::add</a> â€” Adds an amount of days, months, years, hours, minutes and seconds to a
   DateTime object</li><li><a href="datetime.construct.html">DateTime::__construct</a> â€” Returns new DateTime object</li><li><a href="datetime.createfromformat.html">DateTime::createFromFormat</a> â€” Returns new DateTime object formatted according to the specified format</li><li><a href="datetime.diff.html">DateTime::diff</a> â€” Returns the difference between two DateTime objects</li><li><a href="datetime.format.html">DateTime::format</a> â€” Returns date formatted according to given format</li><li><a href="datetime.getlasterrors.html">DateTime::getLastErrors</a> â€” Returns the warnings and errors</li><li><a href="datetime.getoffset.html">DateTime::getOffset</a> â€” Returns the timezone offset</li><li><a href="datetime.gettimestamp.html">DateTime::getTimestamp</a> â€” Gets the Unix timestamp</li><li><a href="datetime.gettimezone.html">DateTime::getTimezone</a> â€” Return time zone relative to given DateTime</li><li><a href="datetime.modify.html">DateTime::modify</a> â€” Alters the timestamp</li><li><a href="datetime.set-state.html">DateTime::__set_state</a> â€” The __set_state handler</li><li><a href="datetime.setdate.html">DateTime::setDate</a> â€” Sets the date</li><li><a href="datetime.setisodate.html">DateTime::setISODate</a> â€” Sets the ISO date</li><li><a href="datetime.settime.html">DateTime::setTime</a> â€” Sets the time</li><li><a href="datetime.settimestamp.html">DateTime::setTimestamp</a> â€” Sets the date and time based on an Unix timestamp</li><li><a href="datetime.settimezone.html">DateTime::setTimezone</a> â€” Sets the time zone for the DateTime object</li><li><a href="datetime.sub.html">DateTime::sub</a> â€” Subtracts an amount of days, months, years, hours, minutes and seconds from
   a DateTime object</li><li><a href="datetime.wakeup.html">DateTime::__wakeup</a> â€” The __wakeup handler</li></ul>
</div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="104966""></a>
  <div class="note">
   <strong class="user">nodweber at gmail dot com</strong>
   <a href="#104966" class="date">19-Jul-2011 02:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
IF You want to create clone of $time, use clone..<br />
<br />
<span class="default">&lt;?php<br />
&nbsp; $now&nbsp;&nbsp; </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$clone </span><span class="keyword">= </span><span class="default">$now</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//this doesnot clone so:<br />
&nbsp; </span><span class="default">$clone</span><span class="keyword">-&gt;</span><span class="default">modify</span><span class="keyword">( </span><span class="string">'-1 day' </span><span class="keyword">);<br />
&nbsp;<br />
&nbsp; echo </span><span class="default">$now</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">( </span><span class="string">'d-m-Y' </span><span class="keyword">), </span><span class="string">"\n"</span><span class="keyword">, </span><span class="default">$clone</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">( </span><span class="string">'d-m-Y' </span><span class="keyword">);<br />
&nbsp; echo </span><span class="string">'----'</span><span class="keyword">, </span><span class="string">"\n"</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="comment">// will print same.. if you want to clone make like this:<br />
&nbsp; </span><span class="default">$now&nbsp;&nbsp; </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$clone </span><span class="keyword">= clone </span><span class="default">$now</span><span class="keyword">;&nbsp; &nbsp; <br />
&nbsp; </span><span class="default">$clone</span><span class="keyword">-&gt;</span><span class="default">modify</span><span class="keyword">( </span><span class="string">'-1 day' </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp; echo </span><span class="default">$now</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">( </span><span class="string">'d-m-Y' </span><span class="keyword">), </span><span class="string">"\n"</span><span class="keyword">, </span><span class="default">$clone</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">( </span><span class="string">'d-m-Y' </span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Results:<br />
18-07-2011<br />
18-07-2011<br />
----<br />
19-07-2011<br />
18-07-2011</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99386""></a>
  <div class="note">
   <strong class="user">giorgio dot liscio at email dot it</strong>
   <a href="#99386" class="date">13-Aug-2010 10:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
please note that using<br />
<br />
setTimezone<br />
setTimestamp<br />
setDate<br />
setTime<br />
etc..<br />
<br />
will modify the original object, and the return value is $this<br />
<br />
$original = new DateTime("now");<br />
<br />
$modified = $original-&gt;setTimezone(new DateTimezone("europe/rome"));<br />
<br />
echo $original === $modified ? "THE OBJECT IS THE SAME" : "OBJECTS ARE DIFFERENT";<br />
<br />
so a datetime object is mutable</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99309""></a>
  <div class="note">
   <strong class="user">bf at tbwb dot nl</strong>
   <a href="#99309" class="date">10-Aug-2010 03:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you have timezone information in the time string you construct the DateTime object with, you cannot add an extra timezone in the constructor. It will ignore the timezone information in the time string:<br />
<br />
$date = new DateTime("2010-07-05T06:00:00Z", new DateTimeZone("Europe/Amsterdam"));<br />
<br />
will create a DateTime object set to "2010-07-05 06:00:00+0200" (+2 being the TZ offset for Europe/Amsterdam)<br />
<br />
To get this done, you will need to set the timezone separately:<br />
<br />
$date = new DateTime("2010-07-05T06:00:00Z");<br />
$date-&gt;setTimeZone(new DateTimeZone("Europe/Amsterdam");<br />
<br />
This will create a DateTime object set to "2010-07-05 08:00:00+0200"</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96875""></a>
  <div class="note">
   <strong class="user">ediathome</strong>
   <a href="#96875" class="date">20-Mar-2010 01:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you need DateTime::createFromFormat functionality in versions &lt;5.3.0 releases you might use the following basic class which can also be combined with Tom's class. It should work for most basic formats, however you should improve this function if you need more complex formats.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">DateClass </span><span class="keyword">extends </span><span class="default">DateTime</span><span class="keyword">{<br />
<br />
public function </span><span class="default">getTimestamp</span><span class="keyword">(){<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">format </span><span class="keyword">(</span><span class="string">"U"</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="comment">/**<br />
*&nbsp; &nbsp; This function calculates the number of days between the first and the second date. Arguments must be subclasses of DateTime<br />
**/<br />
</span><span class="keyword">static function </span><span class="default">differenceInDays </span><span class="keyword">(</span><span class="default">$firstDate</span><span class="keyword">, </span><span class="default">$secondDate</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$firstDateTimeStamp </span><span class="keyword">= </span><span class="default">$firstDate</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">"U"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$secondDateTimeStamp </span><span class="keyword">= </span><span class="default">$secondDate</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">"U"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$rv </span><span class="keyword">= </span><span class="default">round </span><span class="keyword">(((</span><span class="default">$firstDateTimeStamp </span><span class="keyword">- </span><span class="default">$secondDateTimeStamp</span><span class="keyword">))/</span><span class="default">86400</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$rv</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">/**<br />
* This function returns an object of DateClass from $time in format $format. See date() for possible values for $format<br />
**/<br />
</span><span class="keyword">static function </span><span class="default">createFromFormat </span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">, </span><span class="default">$time</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">assert </span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">!=</span><span class="string">""</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$time</span><span class="keyword">==</span><span class="string">""</span><span class="keyword">){ <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return new </span><span class="default">DateClass</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$regexpArray</span><span class="keyword">[</span><span class="string">'Y'</span><span class="keyword">] = </span><span class="string">"(?P&lt;Y&gt;19|20\d\d)"</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$regexpArray</span><span class="keyword">[</span><span class="string">'m'</span><span class="keyword">] = </span><span class="string">"(?P&lt;m&gt;0[1-9]|1[012])"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$regexpArray</span><span class="keyword">[</span><span class="string">'d'</span><span class="keyword">] = </span><span class="string">"(?P&lt;d&gt;0[1-9]|[12][0-9]|3[01])"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$regexpArray</span><span class="keyword">[</span><span class="string">'-'</span><span class="keyword">] = </span><span class="string">"[-]"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$regexpArray</span><span class="keyword">[</span><span class="string">'.'</span><span class="keyword">] = </span><span class="string">"[\. /.]"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$regexpArray</span><span class="keyword">[</span><span class="string">':'</span><span class="keyword">] = </span><span class="string">"[:]"</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$regexpArray</span><span class="keyword">[</span><span class="string">'space'</span><span class="keyword">] = </span><span class="string">"[\s]"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$regexpArray</span><span class="keyword">[</span><span class="string">'H'</span><span class="keyword">] = </span><span class="string">"(?P&lt;H&gt;0[0-9]|1[0-9]|2[0-3])"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$regexpArray</span><span class="keyword">[</span><span class="string">'i'</span><span class="keyword">] = </span><span class="string">"(?P&lt;i&gt;[0-5][0-9])"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$regexpArray</span><span class="keyword">[</span><span class="string">'s'</span><span class="keyword">] = </span><span class="string">"(?P&lt;s&gt;[0-5][0-9])"</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$formatArray </span><span class="keyword">= </span><span class="default">str_split </span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$regex </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// create the regular expression<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">foreach(</span><span class="default">$formatArray </span><span class="keyword">as </span><span class="default">$character</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$character</span><span class="keyword">==</span><span class="string">" "</span><span class="keyword">) </span><span class="default">$regex </span><span class="keyword">= </span><span class="default">$regex</span><span class="keyword">.</span><span class="default">$regexpArray</span><span class="keyword">[</span><span class="string">'space'</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; elseif (</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$character</span><span class="keyword">, </span><span class="default">$regexpArray</span><span class="keyword">)) </span><span class="default">$regex </span><span class="keyword">= </span><span class="default">$regex</span><span class="keyword">.</span><span class="default">$regexpArray</span><span class="keyword">[</span><span class="default">$character</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$regex </span><span class="keyword">= </span><span class="string">"/"</span><span class="keyword">.</span><span class="default">$regex</span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// get results for regualar expression<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">preg_match </span><span class="keyword">(</span><span class="default">$regex</span><span class="keyword">, </span><span class="default">$time</span><span class="keyword">, </span><span class="default">$result</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// create the init string for the new DateTime<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$initString </span><span class="keyword">= </span><span class="default">$result</span><span class="keyword">[</span><span class="string">'Y'</span><span class="keyword">].</span><span class="string">"-"</span><span class="keyword">.</span><span class="default">$result</span><span class="keyword">[</span><span class="string">'m'</span><span class="keyword">].</span><span class="string">"-"</span><span class="keyword">.</span><span class="default">$result</span><span class="keyword">[</span><span class="string">'d'</span><span class="keyword">];<br />
<br />
</span><span class="comment">// if no value for hours, minutes and seconds was found add 00:00:00<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (isset(</span><span class="default">$result</span><span class="keyword">[</span><span class="string">'H'</span><span class="keyword">])) </span><span class="default">$initString </span><span class="keyword">= </span><span class="default">$initString</span><span class="keyword">.</span><span class="string">" "</span><span class="keyword">.</span><span class="default">$result</span><span class="keyword">[</span><span class="string">'H'</span><span class="keyword">].</span><span class="string">":"</span><span class="keyword">.</span><span class="default">$result</span><span class="keyword">[</span><span class="string">'i'</span><span class="keyword">].</span><span class="string">":"</span><span class="keyword">.</span><span class="default">$result</span><span class="keyword">[</span><span class="string">'s'</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; else {</span><span class="default">$initString </span><span class="keyword">= </span><span class="default">$initString</span><span class="keyword">.</span><span class="string">" 00:00:00"</span><span class="keyword">;}<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$newDate </span><span class="keyword">= new </span><span class="default">DateClass </span><span class="keyword">(</span><span class="default">$initString</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$newDate</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }&nbsp; &nbsp; <br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95830""></a>
  <div class="note">
   <strong class="user">gmblar+php at gmail dot com</strong>
   <a href="#95830" class="date">24-Jan-2010 08:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Small but powerful extension to DateTime<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">Blar_DateTime </span><span class="keyword">extends </span><span class="default">DateTime </span><span class="keyword">{<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * Return Date in ISO8601 format<br />
&nbsp;&nbsp; &nbsp; *<br />
&nbsp;&nbsp; &nbsp; * @return String<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">__toString</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'Y-m-d H:i'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * Return difference between $this and $now<br />
&nbsp;&nbsp; &nbsp; *<br />
&nbsp;&nbsp; &nbsp; * @param Datetime|String $now<br />
&nbsp;&nbsp; &nbsp; * @return DateInterval<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">diff</span><span class="keyword">(</span><span class="default">$now </span><span class="keyword">= </span><span class="string">'NOW'</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(!(</span><span class="default">$now </span><span class="keyword">instanceOf </span><span class="default">DateTime</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$now </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="default">$now</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">parent</span><span class="keyword">::</span><span class="default">diff</span><span class="keyword">(</span><span class="default">$now</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * Return Age in Years<br />
&nbsp;&nbsp; &nbsp; *<br />
&nbsp;&nbsp; &nbsp; * @param Datetime|String $now<br />
&nbsp;&nbsp; &nbsp; * @return Integer<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">getAge</span><span class="keyword">(</span><span class="default">$now </span><span class="keyword">= </span><span class="string">'NOW'</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">diff</span><span class="keyword">(</span><span class="default">$now</span><span class="keyword">)-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'%y'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Usage:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$birthday </span><span class="keyword">= new </span><span class="default">Blar_DateTime</span><span class="keyword">(</span><span class="string">'1879-03-14'</span><span class="keyword">);<br />
<br />
</span><span class="comment">// Example 1<br />
</span><span class="keyword">echo </span><span class="default">$birthday</span><span class="keyword">;<br />
</span><span class="comment">// Result: 1879-03-14 00:00<br />
<br />
// Example 2<br />
</span><span class="keyword">echo </span><span class="string">'&lt;p&gt;Albert Einstein would now be '</span><span class="keyword">, </span><span class="default">$birthday</span><span class="keyword">-&gt;</span><span class="default">getAge</span><span class="keyword">(), </span><span class="string">' years old.&lt;/p&gt;'</span><span class="keyword">;<br />
</span><span class="comment">// Result: &lt;p&gt;Albert Einstein would now be 130 years old.&lt;/p&gt;<br />
<br />
// Example 3<br />
</span><span class="keyword">echo </span><span class="string">'&lt;p&gt;Albert Einstein would now be '</span><span class="keyword">, </span><span class="default">$birthday</span><span class="keyword">-&gt;</span><span class="default">diff</span><span class="keyword">()-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'%y Years, %m Months, %d Days'</span><span class="keyword">), </span><span class="string">' old.&lt;/p&gt;'</span><span class="keyword">;<br />
</span><span class="comment">// Result: &lt;p&gt;Albert Einstein would now be 130 Years, 10 Months, 10 Days old.&lt;/p&gt;<br />
<br />
// Example 4<br />
</span><span class="keyword">echo </span><span class="string">'&lt;p&gt;Albert Einstein was on 2010-10-10 '</span><span class="keyword">, </span><span class="default">$birthday</span><span class="keyword">-&gt;</span><span class="default">getAge</span><span class="keyword">(</span><span class="string">'2010-10-10'</span><span class="keyword">), </span><span class="string">' years old.&lt;/p&gt;'</span><span class="keyword">;<br />
</span><span class="comment">// Result: &lt;p&gt;Albert Einstein was on 2010-10-10 131 years old.&lt;/p&gt;<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91450""></a>
  <div class="note">
   <strong class="user">tom at r dot je</strong>
   <a href="#91450" class="date">10-Jun-2009 08:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you're stuck on a PHP 5.1 system (unfortunately one of my clients is on a rather horrible webhost who claims they cannot upgrade php) you can use this as a quick workaround:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">if (!</span><span class="default">class_exists</span><span class="keyword">(</span><span class="string">'DateTime'</span><span class="keyword">)) {<br />
class </span><span class="default">DateTime </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$date</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$date</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">date </span><span class="keyword">= </span><span class="default">strtotime</span><span class="keyword">(</span><span class="default">$date</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">setTimeZone</span><span class="keyword">(</span><span class="default">$timezone</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; private function </span><span class="default">__getDate</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">date</span><span class="keyword">(</span><span class="default">DATE_ATOM</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">date</span><span class="keyword">);&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">modify</span><span class="keyword">(</span><span class="default">$multiplier</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">date </span><span class="keyword">= </span><span class="default">strtotime</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">__getDate</span><span class="keyword">() . </span><span class="string">' ' </span><span class="keyword">. </span><span class="default">$multiplier</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">format</span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">date</span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">date</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
it is NOT perfect. Timezones and DST are not supported, but if you just need compatible basic functions this works. Feel free to complete this so it's compatible with the 5.2 datetime object.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="datetime.constants.html">Predefined Constants</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="datetime.add.html">DateTime::add</a></div>
 <div class="up"><a href="book.datetime.html">Date/Time</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
