<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Returns the name of the character set</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.mysql-affected-rows.html">mysql_affected_rows</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.mysql-close.html">mysql_close</a></div>
 <div class="up"><a href="ref.mysql.html">MySQL Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.mysql-client-encoding" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">mysql_client_encoding</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.3.0, PHP 5)</p><p class="refpurpose"><span class="refname">mysql_client_encoding</span> &mdash; <span class="dc-title">Returns the name of the character set</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.mysql-client-encoding-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">string</span> <span class="methodname"><b>mysql_client_encoding</b></span>
    ([ <span class="methodparam"><span class="type">resource</span> <tt class="parameter">$link_identifier</tt></span>
  ] )</div>

  <p class="para rdfs-comment">
   Retrieves the <i>character_set</i> variable from MySQL.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.mysql-client-encoding-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>

    <dt>
<span class="term"><i><tt class="parameter">
link_identifier</tt></i></span><dd>
<p class="para">The MySQL connection. If the
link identifier is not specified, the last link opened by
<span class="function"><a href="function.mysql-connect.html" class="function">mysql_connect()</a></span> is assumed. If no such link is found, it
will try to create one as if <span class="function"><a href="function.mysql-connect.html" class="function">mysql_connect()</a></span> was called
with no arguments. If no connection is found or established, an
<b><tt>E_WARNING</tt></b> level error is generated.</p></dd>

</dt>

   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.mysql-client-encoding-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns the default character set name for the current connection.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.mysql-client-encoding-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   <div class="example" id="example-1498">
    <p><b>Example #1 <span class="function"><b>mysql_client_encoding()</b></span> example</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$link&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">mysql_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'mysql_user'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'mysql_password'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$charset&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">mysql_client_encoding</span><span style="color: #007700">(</span><span style="color: #0000BB">$link</span><span style="color: #007700">);<br /><br />echo&nbsp;</span><span style="color: #DD0000">"The&nbsp;current&nbsp;character&nbsp;set&nbsp;is:&nbsp;</span><span style="color: #0000BB">$charset</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output
something similar to:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
The current character set is: latin1
</pre></div>
    </div>
   </div>
  </p>
 </div>

 
 <div class="refsect1 seealso" id="refsect1-function.mysql-client-encoding-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.mysql-set-charset.html" class="function" rel="rdfs-seeAlso">mysql_set_charset()</a> - Sets the client character set</span></li>
    <li class="member"><span class="function"><a href="function.mysql-real-escape-string.html" class="function" rel="rdfs-seeAlso">mysql_real_escape_string()</a> - Escapes special characters in a string for use in an SQL statement</span></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="77297""></a>
  <div class="note">
   <strong class="user">devos at montp dot inserm dot fr</strong>
   <a href="#77297" class="date">23-Aug-2007 03:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I use mysql 3.23 and none of the above worked for me. Looking at <a href="http://dev.mysql.com/tech-resources/articles/4.1/unicode.html as advised by romain at dardour dot com, I tried to include the following header in my php scripts, and all the funy characters disapeared. Hope it will help." rel="nofollow" target="_blank">http://dev.mysql.com/tech-resources/articles/4.1/unicode.html as advised by romain at dardour dot com, I tried to include the following header in my php scripts, and all the funy characters disapeared. Hope it will help.</a><br />
<br />
<span class="default">&lt;?php header</span><span class="keyword">(</span><span class="string">"Content-type: text/html; charset=latin1"</span><span class="keyword">);</span><span class="default">?&gt;<br />
</span><br />
(my mysql character was latin1)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76668""></a>
  <div class="note">
   <strong class="user">php at quarkus dot de</strong>
   <a href="#76668" class="date">25-Jul-2007 06:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Please note that even if you set the charset by issuing the two mentioned SQL statements (set names, set character set) mysql_client_encoding still deliveres the old result.<br />
<br />
Default for me is latin1. After switching to UTF8 mysql_client_encoding still returns latin1. The charset switched to UTF8 successfully, though.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76165""></a>
  <div class="note">
   <strong class="user">msieniek at interia dot pl</strong>
   <a href="#76165" class="date">03-Jul-2007 09:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I had the same problem as bartullus, I'm from Poland too. I had my base encoded in UTF-8 and my website in ISO-8859-2 aka Latin-2. Long time those fuckin' question marks appeared...<br />
<br />
I used this function mysql_client_encoding() but it shows "latin1" which appeared to be false. My solution was to include those two lines after connection to database in my PHP script:<br />
<br />
&lt;?<br />
&nbsp;&nbsp;&nbsp; mysql_query("SET CHARACTER SET latin2");<br />
&nbsp;&nbsp;&nbsp; mysql_query("SET NAMES latin2");<br />
?&gt;<br />
<br />
So, probably this function lies;)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73963""></a>
  <div class="note">
   <strong class="user">GZ</strong>
   <a href="#73963" class="date">18-Mar-2007 06:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This one also may be necessary for happy work with utf-8, if you have no other encodings.<br />
In server section add:<br />
<br />
init-connect='SET NAMES utf8'<br />
<br />
(from MySQL manual)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="72530""></a>
  <div class="note">
   <strong class="user">roy dot the dot geek+php at gmail dot com</strong>
   <a href="#72530" class="date">23-Jan-2007 05:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
f you think "set names utf8" for each connection is too trouble, you can modify my.cnf of MySQL to solve the problem forever. In my.cnf, add the line "default-character-set=utf8" in both [mysqld] and [client] sections:<br />
<br />
[client]<br />
default-character-set=utf8<br />
<br />
[mysqld]<br />
default-character-set=utf8<br />
<br />
The MySQL will use utf8 after you restart it.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="71627""></a>
  <div class="note">
   <strong class="user">bartullus at wp dot pl</strong>
   <a href="#71627" class="date">08-Dec-2006 06:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For some reason given entry in php.ini:<br />
default_charset = "ISO-8859-2"<br />
nor<br />
default_charset = "latin2"<br />
doesn't work.<br />
<br />
Every time you run:<br />
<br />
$charset= mysql_client_encoding($dbh);<br />
echo $charset;<br />
<br />
from PHP connecting to MySQL you will get 'latin1'.<br />
<br />
Even if all HTML/PHP pages are stored as UTF8 with header:<br />
&lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8"&gt;<br />
and MySQL server is everywhere UTF8:<br />
character_set_client&nbsp; &nbsp;&nbsp; | utf8<br />
character_set_connection | utf8<br />
character_set_database&nbsp;&nbsp; | utf8<br />
character_set_filesystem | binary<br />
character_set_results&nbsp; &nbsp; | utf8<br />
character_set_server&nbsp; &nbsp;&nbsp; | utf8<br />
character_set_system&nbsp; &nbsp;&nbsp; | utf8<br />
adding "SET NAMES latin2" and "SET CHARACTER SET latin2" into your PHP to MySQL connection you will always get question marks after doing select.<br />
I also tried all the tips from this page and did not succeed as others stated 'it worked for me' - blah...spent 6 hours on that.<br />
<br />
THE ONLY solution that "worked for me" and for others using latin2-iso-8859-2 (i'm from Poland) is to put single line into your SQL script with many inserts:<br />
set name LATIN1;<br />
<br />
After that, you can run a SQL script from QUERY BROWSER with the latin2 characters in inserts.<br />
After only that, when you query those fields from PHP page via select you will get NO question marks and garbage.<br />
<br />
If you use 'mysql' command line tool instead of QUERY BROWSER to run insert script you must remove "set names latin1" from the beginning of the script because of the error while processing that line. Instead of that run "set names latin1" separatelly and then run the insert script.<br />
'mysql' works fine with "set names latin2" but only with singleline, manual inserts.<br />
<br />
'mysql' command client works fine after switching to "set names latin2" but MySQL Query Browser do not. Query Browser v.1.2.6 beta is not great for some other reasons not worth mentioning here.<br />
<br />
My configuration is:<br />
Windows 2000<br />
Apache2.2<br />
MySQL 5.0.27<br />
MySQL client shows 5.1.11<br />
PHP5.2.0<br />
and I needed to run insert script to fullfil dictionaries with initial data.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="69542""></a>
  <div class="note">
   <strong class="user">Pedro Pereira</strong>
   <a href="#69542" class="date">09-Sep-2006 07:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
All I had to do to save utf8 data with php mysql_query() was to go to the php.ini and put default_charset = "utf-8". Without this I had the same problems some of you have. Plus, all my mysql charsets vars are in 'utf8'. (Changed them with Mysql Admin Tool)<br />
<br />
Didnt use any mysql SET **** command at all.<br />
<br />
Mysql 4.1.20<br />
PHP 4.4.4<br />
Win XP<br />
<br />
Hope this help some of you.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68422""></a>
  <div class="note">
   <strong class="user">alamakota at mises dot pl</strong>
   <a href="#68422" class="date">26-Jul-2006 07:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There's no 'character_set' variable available in MySQL. You can check it yourself in MySQL online documentation or by running MySQL query "SHOW VARIABLES LIKE 'character_set%';".<br />
This must be an error in PHP manual, unless I'm missing something.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68300""></a>
  <div class="note">
   
   <a href="#68300" class="date">21-Jul-2006 05:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A very easy way to always get results in UTF-8 is to make a common function to connect to DB and in that function set character set to utf-8.<br />
<br />
function OpenConn() {<br />
&nbsp; global $link;<br />
&nbsp; $link = mysql_connect ("localhost", "username", "password")<br />
&nbsp;&nbsp; &nbsp;&nbsp; or die(sendError('Could not connect to DB'));<br />
&nbsp; mysql_select_db ("dbName");<br />
&nbsp; //<br />
&nbsp; // Set character set to UTF-8<br />
&nbsp; //<br />
&nbsp; mysql_query("SET CHARACTER SET 'utf8'", $link);<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="66131""></a>
  <div class="note">
   <strong class="user">romain at dardour dot com</strong>
   <a href="#66131" class="date">15-May-2006 08:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I couldn't get any luck with all the stuff mentioned below, and despite having an unicode DB, and setting all my field to utf8_general_ci...<br />
After looking around, I found that this page: <a href="http://dev.mysql.com/tech-resources/articles/4.1/unicode.html was adding the fields with an extra info before each value:" rel="nofollow" target="_blank">http://dev.mysql.com/tech-resources/articles/4.1/unicode.html was adding the fields with an extra info before each value:</a><br />
<br />
&lt;?<br />
mysql_query("INSERT INTO table SET field = _utf8'value'");<br />
?&gt;<br />
Mind the "_utf8" before the field value, and outside of the quotes.<br />
<br />
This works for me wether in an Insert or an Update statement.<br />
<br />
No need here for a &lt;? mysql_query("SET NAMES utf8"); ?&gt; before each query, or to change anything in the config files (that was important since I don't have access to these).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="64827""></a>
  <div class="note">
   <strong class="user">zayfod at yahoo dot com</strong>
   <a href="#64827" class="date">21-Apr-2006 04:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The right lines to put in /etc/my.cnf (or other MySQL options file) are:<br />
<br />
[client]<br />
init-command="SET NAMES utf8"<br />
<br />
Unfortuantely the PHP mysql_connect() function does not use MySQL options files so this is not a sollution for changing the default connection character set for mysqlclient library v4.1+.<br />
<br />
The only working sollution remains:<br />
<br />
mysql_query("SET NAMES utf8", $conn);<br />
<br />
(of course /ext/mysql/php_mysql.c can always be patched ;] )</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="63235""></a>
  <div class="note">
   <strong class="user">Wio at psitrax dot de</strong>
   <a href="#63235" class="date">16-Mar-2006 09:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you set the encoding in my.cnf like<br />
<br />
[mysqld]<br />
init_connect='SET NAMES utf8'<br />
<br />
note that the content of init_connect&nbsp; is not executed for users that have the SUPER privilege - ie root!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="59149""></a>
  <div class="note">
   <strong class="user">vrbcik</strong>
   <a href="#59149" class="date">27-Nov-2005 09:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I have had problems with encoding after export of tables (from hosting - via PhpMyAdmin) and import them to other machine (my notebook - via PhpMyAdmin too). In PhpMyAdmin the encoding of all data was shown correctly, not that good with the web pages (data pulled via php).<br />
The first point is indication, that the data was imported correctly, but php script has got other character set than MySql is sending.<br />
<br />
The script's character set is set in header: &lt;meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-2"&gt;. MySql setting was latin1.<br />
<br />
Then following code helped me:<br />
<br />
<span class="default">&lt;?php<br />
mysql_query</span><span class="keyword">(</span><span class="string">"SET CHARACTER SET 'latin2'"</span><span class="keyword">, </span><span class="default">$conn</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="48578""></a>
  <div class="note">
   <strong class="user">info at jantichy dot cz</strong>
   <a href="#48578" class="date">30-Dec-2004 02:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Notice the difference between following two SQL statements:<br />
<br />
SET NAMES 'charset_name'<br />
SET CHARACTER SET charset_name<br />
<br />
For more detail see<br />
<a href="http://dev.mysql.com/doc/mysql/en/Charset-connection.html" rel="nofollow" target="_blank">http://dev.mysql.com/doc/mysql/en/Charset-connection.html</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="46690""></a>
  <div class="note">
   <strong class="user">black at scene-si dot org</strong>
   <a href="#46690" class="date">20-Oct-2004 04:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
the above (as it seems to be vaguely indicated in the mysql manual) works only with mysql 4.1+</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="46653""></a>
  <div class="note">
   <strong class="user">stian at grytoyr dot net</strong>
   <a href="#46653" class="date">19-Oct-2004 06:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you experience weird problems, like some UTF-8 characters (the Unicode character &amp;#x010D and a few others in my case) seemingly being changed to garbage by mysql_query, you may need to do something like this before your actual query:<br />
<br />
<span class="default">&lt;?php<br />
mysql_query</span><span class="keyword">(</span><span class="string">"SET NAMES 'utf8'"</span><span class="keyword">, </span><span class="default">$conn</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Took me days to figure that one out...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.mysql-affected-rows.html">mysql_affected_rows</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.mysql-close.html">mysql_close</a></div>
 <div class="up"><a href="ref.mysql.html">MySQL Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
