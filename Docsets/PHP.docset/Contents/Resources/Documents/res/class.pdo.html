<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>The PDO class</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="pdo.lobs.html">Large Objects (LOBs)</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="pdo.begintransaction.html">PDO::beginTransaction</a></div>
 <div class="up"><a href="book.pdo.html">PDO</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="class.pdo" class="reference">
 <h1 class="title">The PDO class</h1>
 
 
 <div class="partintro"><p class="verinfo">(No version information available, might only be in SVN)</p>
 

  <div class="section" id="pdo.intro">
   <h2 class="title">Introduction</h2>
   <p class="para">
    Represents a connection between PHP and a database server.
   </p>
  </div>

 
  <div class="section" id="pdo.synopsis">
   <h2 class="title">Class synopsis</h2>
 

   <div class="classsynopsis">
    <div class="ooclass"></div>
 

    <div class="classsynopsisinfo">
     <span class="ooclass">
      <b class="classname">PDO</b>
     </span>
     {</div>

 
    <div class="constructorsynopsis dc-description">
    <span class="methodname"><a href="pdo.construct.html" class="methodname">__construct</a></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$dsn</tt></span>
   [, <span class="methodparam"><span class="type">string</span> <tt class="parameter">$username</tt></span>
   [, <span class="methodparam"><span class="type">string</span> <tt class="parameter">$password</tt></span>
   [, <span class="methodparam"><span class="type">array</span> <tt class="parameter">$driver_options</tt></span>
  ]]] )</div>

    <div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><a href="pdo.begintransaction.html" class="methodname">beginTransaction</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><a href="pdo.commit.html" class="methodname">commit</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="type">mixed</span> <span class="methodname"><a href="pdo.errorcode.html" class="methodname">errorCode</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="type">array</span> <span class="methodname"><a href="pdo.errorinfo.html" class="methodname">errorInfo</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="type">int</span> <span class="methodname"><a href="pdo.exec.html" class="methodname">exec</a></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$statement</tt></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="type">mixed</span> <span class="methodname"><a href="pdo.getattribute.html" class="methodname">getAttribute</a></span>
    ( <span class="methodparam"><span class="type">int</span> <tt class="parameter">$attribute</tt></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="type">array</span> <span class="methodname"><a href="pdo.getavailabledrivers.html" class="methodname">getAvailableDrivers</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><a href="pdo.intransaction.html" class="methodname">inTransaction</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="type">string</span> <span class="methodname"><a href="pdo.lastinsertid.html" class="methodname">lastInsertId</a></span>
    ([ <span class="methodparam"><span class="type">string</span> <tt class="parameter">$name</tt><span class="initializer"> = <b><tt>NULL</tt></b></span></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="type">PDOStatement</span> <span class="methodname"><a href="pdo.prepare.html" class="methodname">prepare</a></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$statement</tt></span>
   [, <span class="methodparam"><span class="type">array</span> <tt class="parameter">$driver_options</tt><span class="initializer"> = array()</span></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="type">PDOStatement</span> <span class="methodname"><a href="pdo.query.html" class="methodname">query</a></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$statement</tt></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="type">string</span> <span class="methodname"><a href="pdo.quote.html" class="methodname">quote</a></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$string</tt></span>
   [, <span class="methodparam"><span class="type">int</span> <tt class="parameter">$parameter_type</tt><span class="initializer"> = PDO::PARAM_STR</span></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><a href="pdo.rollback.html" class="methodname">rollBack</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><a href="pdo.setattribute.html" class="methodname">setAttribute</a></span>
    ( <span class="methodparam"><span class="type">int</span> <tt class="parameter">$attribute</tt></span>
   , <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <tt class="parameter">$value</tt></span>
   )</div>


 
   }</div>
  </div>
 
 </div>
 
 


























































































 
<h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="pdo.begintransaction.html">PDO::beginTransaction</a> â€” Initiates a transaction</li><li><a href="pdo.commit.html">PDO::commit</a> â€” Commits a transaction</li><li><a href="pdo.construct.html">PDO::__construct</a> â€” Creates a PDO instance representing a connection to a database</li><li><a href="pdo.errorcode.html">PDO::errorCode</a> â€” Fetch the SQLSTATE associated with the last operation on the database handle</li><li><a href="pdo.errorinfo.html">PDO::errorInfo</a> â€” Fetch extended error information associated with the last operation on the database handle</li><li><a href="pdo.exec.html">PDO::exec</a> â€” Execute an SQL statement and return the number of affected rows</li><li><a href="pdo.getattribute.html">PDO::getAttribute</a> â€” Retrieve a database connection attribute</li><li><a href="pdo.getavailabledrivers.html">PDO::getAvailableDrivers</a> â€” Return an array of available PDO drivers</li><li><a href="pdo.intransaction.html">PDO::inTransaction</a> â€” Checks if inside a transaction</li><li><a href="pdo.lastinsertid.html">PDO::lastInsertId</a> â€” Returns the ID of the last inserted row or sequence value</li><li><a href="pdo.prepare.html">PDO::prepare</a> â€” Prepares a statement for execution and returns a statement object</li><li><a href="pdo.query.html">PDO::query</a> â€” Executes an SQL statement, returning a result set as a PDOStatement object</li><li><a href="pdo.quote.html">PDO::quote</a> â€” Quotes a string for use in a query.</li><li><a href="pdo.rollback.html">PDO::rollBack</a> â€” Rolls back a transaction</li><li><a href="pdo.setattribute.html">PDO::setAttribute</a> â€” Set an attribute</li></ul>
</div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="106125""></a>
  <div class="note">
   <strong class="user">williambarry007 at gmail dot com</strong>
   <a href="#106125" class="date">12-Oct-2011 01:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
PDO and Dependency Injection<br />
<br />
Dependency injection is good for testing.&nbsp; But for anyone wanting various data mapper objects to have a database connection, dependency injection can make other model code very messy because database objects have to be instantiated all over the place and given to the data mapper objects.<br />
<br />
The code below is a good way to maintain dependency injection while keeping clean and minimal model code.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">DataMapper<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public static </span><span class="default">$db</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">init</span><span class="keyword">(</span><span class="default">$db</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">$db </span><span class="keyword">= </span><span class="default">$db</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
class </span><span class="default">VendorMapper </span><span class="keyword">extends </span><span class="default">DataMapper<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">add</span><span class="keyword">(</span><span class="default">$vendor</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$st </span><span class="keyword">= </span><span class="default">self</span><span class="keyword">::</span><span class="default">$db</span><span class="keyword">-&gt;</span><span class="default">prepare</span><span class="keyword">(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"insert into vendors set<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; first_name = :first_name,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; last_name = :last_name"<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$st</span><span class="keyword">-&gt;</span><span class="default">execute</span><span class="keyword">(array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">':first_name' </span><span class="keyword">=&gt; </span><span class="default">$vendor</span><span class="keyword">-&gt;</span><span class="default">first_name</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">':last_name' </span><span class="keyword">=&gt; </span><span class="default">$vendor</span><span class="keyword">-&gt;</span><span class="default">last_name<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="comment">// In your bootstrap<br />
</span><span class="default">$db </span><span class="keyword">= new </span><span class="default">PDO</span><span class="keyword">(...);<br />
</span><span class="default">DataMapper</span><span class="keyword">::</span><span class="default">init</span><span class="keyword">(</span><span class="default">$db</span><span class="keyword">);<br />
<br />
</span><span class="comment">// In your model logic<br />
</span><span class="default">$vendor </span><span class="keyword">= new </span><span class="default">Vendor</span><span class="keyword">(</span><span class="string">'John'</span><span class="keyword">, </span><span class="string">'Doe'</span><span class="keyword">);<br />
</span><span class="default">VendorMapper</span><span class="keyword">::</span><span class="default">add</span><span class="keyword">(</span><span class="default">$vendor</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99593""></a>
  <div class="note">
   <strong class="user">RockMeAmadeus</strong>
   <a href="#99593" class="date">25-Aug-2010 10:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
PDO::getAvailableDrivers is the only PDO static method so it needs a double colon. The other PDO methods are used by an object, so they should use the -&gt; syntax.<br />
&nbsp;&nbsp; * PDO-&gt;beginTransaction â€” Initiates a transaction<br />
&nbsp;&nbsp;&nbsp; * PDO-&gt;commit â€” Commits a transaction<br />
&nbsp;&nbsp;&nbsp; * PDO-&gt;__construct â€” Creates a PDO instance representing a connection to a database<br />
&nbsp;&nbsp;&nbsp; * PDO-&gt;errorCode â€” Fetch the SQLSTATE associated with the last operation on the database handle<br />
&nbsp;&nbsp;&nbsp; * PDO-&gt;errorInfo â€” Fetch extended error information associated with the last operation on the database handle<br />
&nbsp;&nbsp;&nbsp; * PDO-&gt;exec â€” Execute an SQL statement and return the number of affected rows<br />
&nbsp;&nbsp;&nbsp; * PDO-&gt;getAttribute â€” Retrieve a database connection attribute<br />
&nbsp;&nbsp;&nbsp; * PDO::getAvailableDrivers â€” Return an array of available PDO drivers<br />
&nbsp;&nbsp;&nbsp; * PDO-&gt;lastInsertId â€” Returns the ID of the last inserted row or sequence value<br />
&nbsp;&nbsp;&nbsp; * PDO-&gt;prepare â€” Prepares a statement for execution and returns a statement object<br />
&nbsp;&nbsp;&nbsp; * PDO-&gt;query â€” Executes an SQL statement, returning a result set as a PDOStatement object<br />
&nbsp;&nbsp;&nbsp; * PDO-&gt;quote â€” Quotes a string for use in a query.<br />
&nbsp;&nbsp;&nbsp; * PDO-&gt;rollBack â€” Rolls back a transaction<br />
&nbsp;&nbsp;&nbsp; * PDO-&gt;setAttribute â€” Set an attribute</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="97682""></a>
  <div class="note">
   <strong class="user">kcleung at kcleung dot no-ip dot org</strong>
   <a href="#97682" class="date">02-May-2010 03:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is an singleton PDO example:<br />
<br />
###### config.ini ######<br />
db_driver=mysql<br />
db_user=root<br />
db_password=924892xp<br />
<br />
[dsn]<br />
host=localhost<br />
port=3306<br />
dbname=localhost<br />
<br />
[db_options]<br />
PDO::MYSQL_ATTR_INIT_COMMAND=set names utf8<br />
<br />
[db_attributes]<br />
ATTR_ERRMODE=ERRMODE_EXCEPTION<br />
############<br />
<br />
<span class="default">&lt;?php </span><span class="keyword">class </span><span class="default">Database </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; private static </span><span class="default">$link </span><span class="keyword">= </span><span class="default">null </span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; private static function </span><span class="default">getLink </span><span class="keyword">( ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">self </span><span class="keyword">:: </span><span class="default">$link </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">self </span><span class="keyword">:: </span><span class="default">$link </span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ini </span><span class="keyword">= </span><span class="default">_BASE_DIR </span><span class="keyword">. </span><span class="string">"config.ini" </span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$parse </span><span class="keyword">= </span><span class="default">parse_ini_file </span><span class="keyword">( </span><span class="default">$ini </span><span class="keyword">, </span><span class="default">true </span><span class="keyword">) ;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$driver </span><span class="keyword">= </span><span class="default">$parse </span><span class="keyword">[ </span><span class="string">"db_driver" </span><span class="keyword">] ;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$dsn </span><span class="keyword">= </span><span class="string">"</span><span class="keyword">${</span><span class="default">driver</span><span class="keyword">}</span><span class="string">:" </span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$user </span><span class="keyword">= </span><span class="default">$parse </span><span class="keyword">[ </span><span class="string">"db_user" </span><span class="keyword">] ;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$password </span><span class="keyword">= </span><span class="default">$parse </span><span class="keyword">[ </span><span class="string">"db_password" </span><span class="keyword">] ;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$options </span><span class="keyword">= </span><span class="default">$parse </span><span class="keyword">[ </span><span class="string">"db_options" </span><span class="keyword">] ;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$attributes </span><span class="keyword">= </span><span class="default">$parse </span><span class="keyword">[ </span><span class="string">"db_attributes" </span><span class="keyword">] ;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach ( </span><span class="default">$parse </span><span class="keyword">[ </span><span class="string">"dsn" </span><span class="keyword">] as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$dsn </span><span class="keyword">.= </span><span class="string">"</span><span class="keyword">${</span><span class="default">k</span><span class="keyword">}</span><span class="string">=</span><span class="keyword">${</span><span class="default">v</span><span class="keyword">}</span><span class="string">;" </span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self </span><span class="keyword">:: </span><span class="default">$link </span><span class="keyword">= new </span><span class="default">PDO </span><span class="keyword">( </span><span class="default">$dsn</span><span class="keyword">, </span><span class="default">$user</span><span class="keyword">, </span><span class="default">$password</span><span class="keyword">, </span><span class="default">$options </span><span class="keyword">) ;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach ( </span><span class="default">$attributes </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self </span><span class="keyword">:: </span><span class="default">$link </span><span class="keyword">-&gt; </span><span class="default">setAttribute </span><span class="keyword">( </span><span class="default">constant </span><span class="keyword">( </span><span class="string">"PDO::</span><span class="keyword">{</span><span class="default">$k</span><span class="keyword">}</span><span class="string">" </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; , </span><span class="default">constant </span><span class="keyword">( </span><span class="string">"PDO::</span><span class="keyword">{</span><span class="default">$v</span><span class="keyword">}</span><span class="string">" </span><span class="keyword">) ) ;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">self </span><span class="keyword">:: </span><span class="default">$link </span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">__callStatic </span><span class="keyword">( </span><span class="default">$name</span><span class="keyword">, </span><span class="default">$args </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$callback </span><span class="keyword">= array ( </span><span class="default">self </span><span class="keyword">:: </span><span class="default">getLink </span><span class="keyword">( ), </span><span class="default">$name </span><span class="keyword">) ;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">call_user_func_array </span><span class="keyword">( </span><span class="default">$callback </span><span class="keyword">, </span><span class="default">$args </span><span class="keyword">) ;<br />
&nbsp;&nbsp;&nbsp; }<br />
} </span><span class="default">?&gt;<br />
</span><br />
<span class="default">&lt;?php </span><span class="comment">// examples<br />
</span><span class="default">$stmt </span><span class="keyword">= </span><span class="default">Database </span><span class="keyword">:: </span><span class="default">prepare </span><span class="keyword">( </span><span class="string">"SELECT 'something' ;" </span><span class="keyword">) ;<br />
</span><span class="default">$stmt </span><span class="keyword">-&gt; </span><span class="default">execute </span><span class="keyword">( ) ;<br />
</span><span class="default">var_dump </span><span class="keyword">( </span><span class="default">$stmt </span><span class="keyword">-&gt; </span><span class="default">fetchAll </span><span class="keyword">( ) ) ;<br />
</span><span class="default">$stmt </span><span class="keyword">-&gt; </span><span class="default">closeCursor </span><span class="keyword">( ) ;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89019""></a>
  <div class="note">
   <strong class="user">Megaloman</strong>
   <a href="#89019" class="date">18-Feb-2009 07:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
"And storing username/password inside class is not a very good idea for production code."<br />
<br />
Good idea is to store database connection settings in *.ini files but you have to restrict access to them. For example this way:<br />
<br />
my_setting.ini:<br />
[database]<br />
driver = mysql<br />
host = localhost<br />
;port = 3306<br />
schema = db_schema<br />
username = user<br />
password = secret<br />
<br />
Database connection:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">MyPDO </span><span class="keyword">extends </span><span class="default">PDO<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$file </span><span class="keyword">= </span><span class="string">'my_setting.ini'</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">$settings </span><span class="keyword">= </span><span class="default">parse_ini_file</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">, </span><span class="default">TRUE</span><span class="keyword">)) throw new </span><span class="default">exception</span><span class="keyword">(</span><span class="string">'Unable to open ' </span><span class="keyword">. </span><span class="default">$file </span><span class="keyword">. </span><span class="string">'.'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$dns </span><span class="keyword">= </span><span class="default">$settings</span><span class="keyword">[</span><span class="string">'database'</span><span class="keyword">][</span><span class="string">'driver'</span><span class="keyword">] .<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">':host=' </span><span class="keyword">. </span><span class="default">$settings</span><span class="keyword">[</span><span class="string">'database'</span><span class="keyword">][</span><span class="string">'host'</span><span class="keyword">] .<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; ((!empty(</span><span class="default">$settings</span><span class="keyword">[</span><span class="string">'database'</span><span class="keyword">][</span><span class="string">'port'</span><span class="keyword">])) ? (</span><span class="string">';port=' </span><span class="keyword">. </span><span class="default">$settings</span><span class="keyword">[</span><span class="string">'database'</span><span class="keyword">][</span><span class="string">'port'</span><span class="keyword">]) : </span><span class="string">''</span><span class="keyword">) .<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">';dbname=' </span><span class="keyword">. </span><span class="default">$settings</span><span class="keyword">[</span><span class="string">'database'</span><span class="keyword">][</span><span class="string">'schema'</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">parent</span><span class="keyword">::</span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$dns</span><span class="keyword">, </span><span class="default">$settings</span><span class="keyword">[</span><span class="string">'database'</span><span class="keyword">][</span><span class="string">'username'</span><span class="keyword">], </span><span class="default">$settings</span><span class="keyword">[</span><span class="string">'database'</span><span class="keyword">][</span><span class="string">'password'</span><span class="keyword">]);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Database connection parameters are accessible via human readable ini file for those who screams even if they see one PHP/HTML/any_other command.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85256""></a>
  <div class="note">
   <strong class="user">anrdaemon at freemail dot ru</strong>
   <a href="#85256" class="date">22-Aug-2008 01:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Keep in mind, you MUST NOT use 'root' user in your applications, unless your application designed to do a database maintenance.<br />
<br />
And storing username/password inside class is not a very good idea for production code. You would need to edit the actual working code to change settings, which is bad.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84751""></a>
  <div class="note">
   <strong class="user">schizo_mind at hotmail dot com</strong>
   <a href="#84751" class="date">28-Jul-2008 10:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">PDOConfig </span><span class="keyword">extends </span><span class="default">PDO </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; private </span><span class="default">$engine</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; private </span><span class="default">$host</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; private </span><span class="default">$database</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; private </span><span class="default">$user</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; private </span><span class="default">$pass</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__construct</span><span class="keyword">(){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">engine </span><span class="keyword">= </span><span class="string">'mysql'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">host </span><span class="keyword">= </span><span class="string">'localhost'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">database </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">user </span><span class="keyword">= </span><span class="string">'root'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">pass </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$dns </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">engine</span><span class="keyword">.</span><span class="string">':dbname='</span><span class="keyword">.</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">database</span><span class="keyword">.</span><span class="string">";host="</span><span class="keyword">.</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">host</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">parent</span><span class="keyword">::</span><span class="default">__construct</span><span class="keyword">( </span><span class="default">$dns</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">user</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">pass </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="pdo.lobs.html">Large Objects (LOBs)</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="pdo.begintransaction.html">PDO::beginTransaction</a></div>
 <div class="up"><a href="book.pdo.html">PDO</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
