<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Dumps the internal XML tree back into a string</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.domdocument-dump-file.html">DomDocument::dump_file</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.domdocument-get-element-by-id.html">DomDocument::get_element_by_id</a></div>
 <div class="up"><a href="ref.domxml.html">DOM XML (PHP 4) Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.domdocument-dump-mem" class="refentry">
   <div class="refnamediv">
    <h1 class="refname">DomDocument::dump_mem</h1>
    <p class="verinfo">(PHP 4 &gt;= 4.1.0)</p><p class="refpurpose"><span class="refname">DomDocument::dump_mem</span> &mdash; <span class="dc-title">
     Dumps the internal XML tree back into a string
    </span></p>

   </div>
   <div class="refsect1 unknown" id="refsect1-function.domdocument-dump-mem-unknown">
    <h3 class="title">Description</h3>
    <div class="methodsynopsis dc-description">
     <span class="type">string</span> <span class="methodname"><b>DomDocument::dump_mem</b></span>
      ([ <span class="methodparam"><span class="type">bool</span> <tt class="parameter">$format</tt></span>
     [, <span class="methodparam"><span class="type">string</span> <tt class="parameter">$encoding</tt></span> 
    ]] )</div>

    <p class="para rdfs-comment">
     Creates an XML document from the dom representation. This function
     usually is called after building a new dom document from scratch
     as in the example below. The
     <i><tt class="parameter">format</tt></i> specifies whether the output should be
     neatly formatted, or not.
    </p>
    <p class="para">
     <div class="example" id="example-4953">
      <p><b>Example #1 Creating a simple HTML document header</b></p>
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$doc&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">domxml_new_doc</span><span style="color: #007700">(</span><span style="color: #DD0000">"1.0"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$root&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$doc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">create_element</span><span style="color: #007700">(</span><span style="color: #DD0000">"HTML"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$root&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$doc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">append_child</span><span style="color: #007700">(</span><span style="color: #0000BB">$root</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$head&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$doc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">create_element</span><span style="color: #007700">(</span><span style="color: #DD0000">"HEAD"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$head&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$root</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">append_child</span><span style="color: #007700">(</span><span style="color: #0000BB">$head</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$title&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$doc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">create_element</span><span style="color: #007700">(</span><span style="color: #DD0000">"TITLE"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$title&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$head</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">append_child</span><span style="color: #007700">(</span><span style="color: #0000BB">$title</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$text&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$doc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">create_text_node</span><span style="color: #007700">(</span><span style="color: #DD0000">"This&nbsp;is&nbsp;the&nbsp;title"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$text&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$title</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">append_child</span><span style="color: #007700">(</span><span style="color: #0000BB">$text</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #DD0000">"&lt;PRE&gt;"</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #0000BB">htmlentities</span><span style="color: #007700">(</span><span style="color: #0000BB">$doc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">dump_mem</span><span style="color: #007700">(</span><span style="color: #0000BB">true</span><span style="color: #007700">));<br />echo&nbsp;</span><span style="color: #DD0000">"&lt;/PRE&gt;"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

     </div>
    </p>
    <blockquote class="note"><p><b class="note">Note</b>: 
     <p class="para">
      The first parameter was added in PHP 4.3.0.
     </p>
    </p></blockquote>
    <p class="para">
     See also <span class="function"><a href="function.domdocument-dump-file.html" class="function">domdocument_dump_file()</a></span>, and
     <span class="function"><a href="function.domdocument-html-dump-mem.html" class="function">domdocument_html_dump_mem()</a></span>.
    </p>
   </div>

  </div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="37868""></a>
  <div class="note">
   <strong class="user">jonathan at fluent dot ltd dot uk</strong>
   <a href="#37868" class="date">30-Nov-2003 04:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It seems that if you use $xslt-&gt;dump_mem(TRUE) IE: breaks and formats all the HTML Badly. Perhaps its a problem with CR's...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="36131""></a>
  <div class="note">
   <strong class="user">ross at dev-null dot accretivetg dot com</strong>
   <a href="#36131" class="date">26-Sep-2003 10:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Given the missing description of the encoding parameter, I had hoped it would automatically encode the document if I set the encoding type; this is not the case.<br />
<br />
At least in PHP v4.3.3, it seems that setting the encoding type does NOTHING other than set the name displayed in the string:<br />
<br />
&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br />
<br />
Thus if you want your values to be encoded, you need to manually encode them when you create your DOM object.&nbsp; E.g. assume you have a simple setup like this:<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp; $text </span><span class="keyword">= </span><span class="string">'¡Spanish exclamation!' </span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="default">$xml </span><span class="keyword">= </span><span class="default">domxml_new_doc</span><span class="keyword">( </span><span class="string">'1.0' </span><span class="keyword">);<br />
&nbsp; </span><span class="default">$node </span><span class="keyword">= </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">create_element</span><span class="keyword">( </span><span class="string">'example' </span><span class="keyword">);<br />
&nbsp; </span><span class="default">$cdata </span><span class="keyword">= </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">create_cdata_section</span><span class="keyword">( </span><span class="default">$text </span><span class="keyword">);<br />
&nbsp; </span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">append_child</span><span class="keyword">( </span><span class="default">$cdata </span><span class="keyword">);<br />
&nbsp; </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">append_child</span><span class="keyword">( </span><span class="default">$node </span><span class="keyword">);<br />
<br />
&nbsp; echo </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">dump_mem</span><span class="keyword">( </span><span class="default">true</span><span class="keyword">, </span><span class="string">'UTF-8' </span><span class="keyword">) ;<br />
<br />
&nbsp; </span><span class="default">?&gt;<br />
</span><br />
This will output the following:<br />
<br />
&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br />
&lt;example&gt;<br />
&lt;![CDATA[¡Spanish exclamation!]]&gt;<br />
&lt;/example&gt;<br />
<br />
However, that is not what was intended, as the exclamation is not UTF-8-encoded.&nbsp; To make $text be encoded correctly, you have to explicitly do so, as in:<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp; $cdata </span><span class="keyword">= </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">create_cdata_section</span><span class="keyword">( </span><span class="default">utf8_encode</span><span class="keyword">( </span><span class="default">$text </span><span class="keyword">) );<br />
<br />
&nbsp; </span><span class="default">?&gt;<br />
</span><br />
This results in the output being correctly UTF-8-encoded, as follows:<br />
<br />
&lt;![CDATA[Â¡Spanish exclamation!]]&gt;<br />
<br />
Apparently MSIE's MSXML2.DOMDocument ActiveX control requires UTF-8 encoding for special characters, and it will invalidate the entire document if those chars are not appropriately encoded, so beware.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="26242""></a>
  <div class="note">
   <strong class="user">amaslov at pegasus dot rutgers dot edu</strong>
   <a href="#26242" class="date">23-Oct-2002 02:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
&lt;pre&gt;<br />
for xml file that goes like this:<br />
&lt;item&gt;<br />
&lt;name&gt;foo&lt;/name&gt;<br />
&lt;desc&gt;bar&lt;/desc&gt;<br />
&lt;/item&gt;<br />
<br />
Format ID's influence output in this manner:<br />
case 0 :{<br />
&lt;item&gt;&lt;name&gt;foo&lt;/name&gt;&lt;desc&gt;bar&lt;/desc&gt;&lt;/item&gt;<br />
}<br />
case 1 :{<br />
&lt;item&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;name&gt;foo&lt;/name&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;desc&gt;bar&lt;/desc&gt;<br />
&lt;/item&gt;<br />
}<br />
case 2:{<br />
&lt;item&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;name&gt;<br />
foo<br />
&nbsp;&nbsp;&nbsp; &lt;/name&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;desc&gt;<br />
bar<br />
&nbsp;&nbsp;&nbsp; &lt;/desc&gt;<br />
&lt;/item&gt;<br />
<br />
If you use PHP SAX(Expat) XML engine, you should always stick to format "0". It reads any empty spaces as XML data.<br />
&lt;/pre&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="24423""></a>
  <div class="note">
   <strong class="user">bruno dot rodrigues at litux dot org</strong>
   <a href="#24423" class="date">15-Aug-2002 02:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
string dump_mem(int format, string encoding);<br />
<br />
format=0,1 = &lt;tag&gt;text&lt;/tag&gt;<br />
format=2 = <br />
&lt;tag&gt;<br />
&nbsp; text<br />
&lt;/tag&gt;<br />
<br />
encoding set's the encoding attribute in line<br />
&lt;?xml version="1.0" encoding="iso-8859-1"?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.domdocument-dump-file.html">DomDocument::dump_file</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.domdocument-get-element-by-id.html">DomDocument::get_element_by_id</a></div>
 <div class="up"><a href="ref.domxml.html">DOM XML (PHP 4) Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
