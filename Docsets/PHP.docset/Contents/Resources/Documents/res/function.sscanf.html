<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Parses input from a string according to a format</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.sprintf.html">sprintf</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.str-getcsv.html">str_getcsv</a></div>
 <div class="up"><a href="ref.strings.html">String Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.sscanf" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">sscanf</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.0.1, PHP 5)</p><p class="refpurpose"><span class="refname">sscanf</span> &mdash; <span class="dc-title">Parses input from a string according to a format</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.sscanf-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <span class="methodname"><b>sscanf</b></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$str</tt></span>
   , <span class="methodparam"><span class="type">string</span> <tt class="parameter">$format</tt></span>
   [, <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <tt class="parameter reference">&$...</tt></span>
  ] )</div>

  <p class="para rdfs-comment">
   The function <span class="function"><b>sscanf()</b></span> is the input analog of
   <span class="function"><a href="function.printf.html" class="function">printf()</a></span>. <span class="function"><b>sscanf()</b></span> reads
   from the string <i><tt class="parameter">str</tt></i> and interprets it
   according to the specified <i><tt class="parameter">format</tt></i>, which is
   described in the documentation for <span class="function"><a href="function.sprintf.html" class="function">sprintf()</a></span>. 
  </p>
  <p class="para">
   Any whitespace in the format string matches any whitespace in the input
   string. This means that even a tab \t in the format string can match a
   single space character in the input string.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.sscanf-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><i><tt class="parameter">str</tt></i></span>
     <dd>

      <p class="para">
       The input <span class="type"><a href="language.types.string.html" class="type string">string</a></span> being parsed.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">format</tt></i></span>
     <dd>

      <p class="para">
       The interpreted format for <i><tt class="parameter">str</tt></i>, which is
       described in the documentation for <span class="function"><a href="function.sprintf.html" class="function">sprintf()</a></span> with
       following differences:
       <ul class="simplelist">
        <li class="member">
         Function is not locale-aware.
        </li>
        <li class="member">
         <i>F</i>, <i>g</i>, <i>G</i> and
         <i>b</i> are not supported.
        </li>
        <li class="member">
         <i>D</i> stands for decimal number.
        </li>
        <li class="member">
         <i>i</i> stands for integer with base detection.
        </li>
        <li class="member">
         <i>n</i> stands for number of characters processed so far.
        </li>
       </ul>
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">...</tt></i></span>
     <dd>

      <p class="para">
       Optionally pass in variables by reference that will contain the parsed values.
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>

 
 <div class="refsect1 returnvalues" id="refsect1-function.sscanf-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   If only
   two parameters were passed to this function, the values parsed
   will be returned as an array. Otherwise, if optional parameters are passed,
   the function will return the number of assigned values. The optional
   parameters must be passed by reference.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.sscanf-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   <div class="example" id="example-4420">
    <p><b>Example #1 <span class="function"><b>sscanf()</b></span> Example</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;getting&nbsp;the&nbsp;serial&nbsp;number<br /></span><span style="color: #007700">list(</span><span style="color: #0000BB">$serial</span><span style="color: #007700">)&nbsp;=&nbsp;</span><span style="color: #0000BB">sscanf</span><span style="color: #007700">(</span><span style="color: #DD0000">"SN/2350001"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"SN/%d"</span><span style="color: #007700">);<br /></span><span style="color: #FF8000">//&nbsp;and&nbsp;the&nbsp;date&nbsp;of&nbsp;manufacturing<br /></span><span style="color: #0000BB">$mandate&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"January&nbsp;01&nbsp;2000"</span><span style="color: #007700">;<br />list(</span><span style="color: #0000BB">$month</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$day</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$year</span><span style="color: #007700">)&nbsp;=&nbsp;</span><span style="color: #0000BB">sscanf</span><span style="color: #007700">(</span><span style="color: #0000BB">$mandate</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"%s&nbsp;%d&nbsp;%d"</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #DD0000">"Item&nbsp;</span><span style="color: #0000BB">$serial</span><span style="color: #DD0000">&nbsp;was&nbsp;manufactured&nbsp;on:&nbsp;</span><span style="color: #0000BB">$year</span><span style="color: #DD0000">-"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #0000BB">$month</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"-</span><span style="color: #0000BB">$day</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   If optional parameters are passed, the function will return the
   number of assigned values.
  </p>
  <p class="para">
   <div class="example" id="example-4421">
    <p><b>Example #2 <span class="function"><b>sscanf()</b></span> - using optional parameters</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;get&nbsp;author&nbsp;info&nbsp;and&nbsp;generate&nbsp;DocBook&nbsp;entry<br /></span><span style="color: #0000BB">$auth&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"24\tLewis&nbsp;Carroll"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$n&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">sscanf</span><span style="color: #007700">(</span><span style="color: #0000BB">$auth</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"%d\t%s&nbsp;%s"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$id</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$first</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$last</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #DD0000">"&lt;author&nbsp;id='</span><span style="color: #0000BB">$id</span><span style="color: #DD0000">'&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;firstname&gt;</span><span style="color: #0000BB">$first</span><span style="color: #DD0000">&lt;/firstname&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;surname&gt;</span><span style="color: #0000BB">$last</span><span style="color: #DD0000">&lt;/surname&gt;<br />&lt;/author&gt;\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.sscanf-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.fscanf.html" class="function" rel="rdfs-seeAlso">fscanf()</a> - Parses input from a file according to a format</span></li>
    <li class="member"><span class="function"><a href="function.printf.html" class="function" rel="rdfs-seeAlso">printf()</a> - Output a formatted string</span></li>
    <li class="member"><span class="function"><a href="function.sprintf.html" class="function" rel="rdfs-seeAlso">sprintf()</a> - Return a formatted string</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="106630""></a>
  <div class="note">
   <strong class="user">nmmm at nmmm dot nu</strong>
   <a href="#106630" class="date">23-Nov-2011 05:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is more like C/C++ example, but works on PHP too.<br />
<br />
<span class="default">&lt;?php<br />
$qs </span><span class="keyword">= </span><span class="string">"index.php?id=34&amp;name=john"</span><span class="keyword">;<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(&nbsp;&nbsp; </span><span class="default">sscanf</span><span class="keyword">(</span><span class="default">$qs</span><span class="keyword">, </span><span class="string">"%[^?]?%[^?]"</span><span class="keyword">)&nbsp;&nbsp; );<br />
<br />
</span><span class="default">$qs </span><span class="keyword">= </span><span class="string">"id=34&amp;name=john"</span><span class="keyword">;<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(&nbsp;&nbsp; </span><span class="default">sscanf</span><span class="keyword">(</span><span class="default">$qs</span><span class="keyword">, </span><span class="string">"id=%[^&amp;]&amp;name=%[^&amp;]"</span><span class="keyword">)&nbsp;&nbsp; );<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86512""></a>
  <div class="note">
   <strong class="user">Igor Feghali</strong>
   <a href="#86512" class="date">22-Oct-2008 10:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
parses an input string with fixed field sizes that contains data with spaces:<br />
<br />
<span class="default">&lt;?php<br />
$result </span><span class="keyword">= </span><span class="default">sscanf</span><span class="keyword">(</span><span class="string">"&nbsp; Vendor: My Vendo Model: Super Model Foo&nbsp; Rev: 1234"</span><span class="keyword">,&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'&nbsp; Vendor: %8[ -~] Model: %16[ -~] Rev: %4c'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$vendor</span><span class="keyword">, </span><span class="default">$model</span><span class="keyword">, </span><span class="default">$rev</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
$vendor =&gt; My Vendo<br />
$model =&gt; Super Model Foo <br />
$rev =&gt; 1234</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85069""></a>
  <div class="note">
   <strong class="user">leg</strong>
   <a href="#85069" class="date">13-Aug-2008 09:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
@mikewillitsgmail.com:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$out </span><span class="keyword">= </span><span class="default">sscanf</span><span class="keyword">(</span><span class="string">'file_name.gif'</span><span class="keyword">, </span><span class="string">'file_%[^.].%s'</span><span class="keyword">, </span><span class="default">$fpart1</span><span class="keyword">, </span><span class="default">$fpart2</span><span class="keyword">);<br />
<br />
echo </span><span class="string">'&lt;pre&gt;'</span><span class="keyword">;<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$fpart1</span><span class="keyword">);<br />
echo </span><span class="string">'&lt;hr /&gt;'</span><span class="keyword">;<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$fpart2</span><span class="keyword">);<br />
echo </span><span class="string">'&lt;/pre&gt;'</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
output:<br />
<br />
name<br />
-<br />
gif<br />
<br />
The "^." part avoid the first searched string to be too greedy. But doesn't protect you against an "file_test.name.gif" input, with bad results!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83479""></a>
  <div class="note">
   <strong class="user">--==[FReeZ]==--</strong>
   <a href="#83479" class="date">27-May-2008 01:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
sscanf() in PHP also supports the more advanced patterns like in C++.<br />
That means you can use it a lot more, after readining the details from <a href="http://www.cplusplus.com/reference/clibrary/cstdio/sscanf.html" rel="nofollow" target="_blank">http://www.cplusplus.com/reference/clibrary/cstdio/sscanf.html</a><br />
<br />
Example usage:<br />
$date = 'january-2008';<br />
sscanf($date, '%[a-z]-%d', $month, $year);<br />
printf('Parsed values: "%s", "%d"', $month, $year);<br />
<br />
// Outputs Parsed values: "january", "2008"</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81842""></a>
  <div class="note">
   <strong class="user">mikewillitsgmail.com</strong>
   <a href="#81842" class="date">15-Mar-2008 11:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
FYI - if you are trying to scan from a string which contains a filename with extension. For instance:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$out </span><span class="keyword">= </span><span class="default">sscanf</span><span class="keyword">(</span><span class="string">'file_name.gif'</span><span class="keyword">, </span><span class="string">'file_%s.%s'</span><span class="keyword">, </span><span class="default">$fpart1</span><span class="keyword">, </span><span class="default">$fpart2</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
The scanned string in the $fpart1 parameter turns out to be 'name.gif' and $fpart2 will be NULL.<br />
<br />
To get around this you can simply replace the "." with a space or another "white-space like" string sequence.<br />
<br />
I didn't see any other comments on regarding string literals which contain a '.' so I thought I'd mention it. The subtle characteristics of having "white-space delimited" content I think can be a source of usage contention. Obviously, another way to go is regular expressions in this instance, but for newer users this may be helpful.<br />
<br />
Just in case someone else spent 10 minutes of frustration like I did. This was seen on PHP Version 5.2.3-1ubuntu6.3.<br />
<br />
Searching the bug reports shows another users misunderstanding: <a href="http://bugs.php.net/bug.php?id=7793" rel="nofollow" target="_blank">http://bugs.php.net/bug.php?id=7793</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="77077""></a>
  <div class="note">
   <strong class="user">Hayley Watson</strong>
   <a href="#77077" class="date">13-Aug-2007 08:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just to note something not explicitly mentioned in the documentation.<br />
<br />
sscanf() matches as much of the passed string as it can against the format. If it gets part way through and discovers that the next part of the string fails to match the format it gives up; it will return the parts that it did match, and NULL for the remainder.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="70356""></a>
  <div class="note">
   <strong class="user">Rodrigo AraÌ¼jo</strong>
   <a href="#70356" class="date">12-Oct-2006 01:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Important warning about the last note by "anonymouse" (quoting):<br />
----------------------------------------------------------------------<br />
sscanf($string_to_parse,'%d %[^$]s',$num,$text);<br />
<br />
This conversion command says "look for an integer, then a space, then any string up to the end of the string"<br />
----------------------------------------------------------------------<br />
<br />
This won't do what you think. You have the ^ and $ characters inside square brackets: $text will be empty if $string_to_parse contains for example "123 $".<br />
<br />
What that pattern really means is: match an signed integer, followed by a whitespace, followed by a string *NOT* containing a dollar sign, followed by an 's'.<br />
<br />
To do what you want i'm afraid you really must use ereg. Scanf is *not* a regular expression parser. It was designed to be used in plain C, where you don't have arbitrary length strings natively. Also, in scanf patterns you don't have an equivalent to matching the beginning/end of string, like you have with ^ and $ in regular expressions.<br />
<br />
In PHP, you should use something like:<br />
if (ereg('^([+-]?[0-9]+) (.+)$', $string_to_parse, $regs)) {<br />
&nbsp; $num = $regs[1];<br />
&nbsp; $text = $regs[2];<br />
}<br />
This regular expression assumes you want a signed integer at the beginning, and you don't mind if it starts with 0 when it is non-zero, e.g. 0123, +0321 or -0456 is also valid.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68565""></a>
  <div class="note">
   <strong class="user">anonymouse</strong>
   <a href="#68565" class="date">01-Aug-2006 09:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I've seen several examples of people using brackets to define what look like regexp character classes. In my limited testing I don't think they are genuine character classes but they seem to be similar.<br />
<br />
My task was to use sscanf() to parse an array of strings with the format:<br />
<br />
number SPACE string_which_may_also_have_spaces<br />
<br />
The normal %s conversion command treats spaces as some kind of delimiter. So, you can get the strings if you know beforehand how many "words" there will be. But, my input was variable.<br />
<br />
Here's what I came up with: (note use of the dollar-sign 'end of string' hidden delimiter)<br />
<br />
sscanf($string_to_parse,'%d %[^$]s',$num,$text);<br />
<br />
This conversion command says "look for an integer, then a space, then any string up to the end of the string"</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="63526""></a>
  <div class="note">
   <strong class="user">skeltoac</strong>
   <a href="#63526" class="date">22-Mar-2006 08:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To parse a line from an Apache access log in common format:<br />
<br />
<span class="default">&lt;?php<br />
$log </span><span class="keyword">= array();<br />
</span><span class="default">$n </span><span class="keyword">= </span><span class="default">sscanf</span><span class="keyword">(</span><span class="default">trim</span><span class="keyword">(</span><span class="default">$line</span><span class="keyword">), </span><span class="string">'%s %s %s [%[^]]] "%s %s %[^"]" %d %s "%[^"]" "%[^"]"'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$log</span><span class="keyword">[</span><span class="string">'ip'</span><span class="keyword">],<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$log</span><span class="keyword">[</span><span class="string">'client'</span><span class="keyword">],<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$log</span><span class="keyword">[</span><span class="string">'user'</span><span class="keyword">],<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$log</span><span class="keyword">[</span><span class="string">'time'</span><span class="keyword">],<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$log</span><span class="keyword">[</span><span class="string">'method'</span><span class="keyword">],<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$log</span><span class="keyword">[</span><span class="string">'uri'</span><span class="keyword">],<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$log</span><span class="keyword">[</span><span class="string">'prot'</span><span class="keyword">],<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$log</span><span class="keyword">[</span><span class="string">'code'</span><span class="keyword">],<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$log</span><span class="keyword">[</span><span class="string">'bytes'</span><span class="keyword">],<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$log</span><span class="keyword">[</span><span class="string">'ref'</span><span class="keyword">],<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$log</span><span class="keyword">[</span><span class="string">'agent'</span><span class="keyword">]<br />
);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="57097""></a>
  <div class="note">
   <strong class="user">Fuzzmaster</strong>
   <a href="#57097" class="date">23-Sep-2005 07:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Building a better Phone Format.&nbsp; This function, a variation of prev. posts (in theory):<br />
<br />
Should stip all non-numeric characters.<br />
Treat partial numbers as extensions.<br />
Treat 8 - 9 digit numbers as phone+ext.<br />
<br />
Be kind I'm a newbie.<br />
<br />
<span class="default">&lt;?php <br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// ##### Format String as Phone Number<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">Function </span><span class="default">formatPH</span><span class="keyword">(</span><span class="default">$ph</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ph </span><span class="keyword">= </span><span class="default">ereg_replace </span><span class="keyword">(</span><span class="string">'[^0-9]+'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$ph</span><span class="keyword">); </span><span class="comment">// ##### Strip all Non-Numeric Characters<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$phlen </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$ph</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; switch (</span><span class="default">TRUE</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case (</span><span class="default">$phlen </span><span class="keyword">&lt; </span><span class="default">7</span><span class="keyword">):<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ext </span><span class="keyword">= </span><span class="default">$ph</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case (</span><span class="default">$phlen </span><span class="keyword">== </span><span class="default">7</span><span class="keyword">):<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">sscanf</span><span class="keyword">(</span><span class="default">$ph</span><span class="keyword">, </span><span class="string">"%3s%4s"</span><span class="keyword">, </span><span class="default">$pfx</span><span class="keyword">, </span><span class="default">$exc</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case (</span><span class="default">$phlen </span><span class="keyword">&gt; </span><span class="default">7 </span><span class="keyword">AND </span><span class="default">$phlen </span><span class="keyword">&lt; </span><span class="default">10</span><span class="keyword">):<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">sscanf</span><span class="keyword">(</span><span class="default">$ph</span><span class="keyword">, </span><span class="string">"%3s%4s%s"</span><span class="keyword">, </span><span class="default">$pfx</span><span class="keyword">, </span><span class="default">$exc</span><span class="keyword">, </span><span class="default">$ext</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case (</span><span class="default">$phlen </span><span class="keyword">== </span><span class="default">10</span><span class="keyword">):<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">sscanf</span><span class="keyword">(</span><span class="default">$ph</span><span class="keyword">, </span><span class="string">"%3s%3s%4s"</span><span class="keyword">, </span><span class="default">$area</span><span class="keyword">, </span><span class="default">$pfx</span><span class="keyword">, </span><span class="default">$exc</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case (</span><span class="default">$phlen </span><span class="keyword">== </span><span class="default">11</span><span class="keyword">):<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">sscanf</span><span class="keyword">(</span><span class="default">$ph</span><span class="keyword">, </span><span class="string">"%1s%3s%3s%4s"</span><span class="keyword">, </span><span class="default">$cty</span><span class="keyword">, </span><span class="default">$area</span><span class="keyword">, </span><span class="default">$pfx</span><span class="keyword">, </span><span class="default">$exc</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case (</span><span class="default">$phlen </span><span class="keyword">&gt; </span><span class="default">11</span><span class="keyword">):<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">sscanf</span><span class="keyword">(</span><span class="default">$ph</span><span class="keyword">, </span><span class="string">"%1s%3s%3s%4s%s"</span><span class="keyword">, </span><span class="default">$cty</span><span class="keyword">, </span><span class="default">$area</span><span class="keyword">, </span><span class="default">$pfx</span><span class="keyword">, </span><span class="default">$exc</span><span class="keyword">, </span><span class="default">$ext</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$out </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$out </span><span class="keyword">.= isset(</span><span class="default">$cty</span><span class="keyword">) ? </span><span class="default">$cty</span><span class="keyword">.</span><span class="string">' ' </span><span class="keyword">: </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$out </span><span class="keyword">.= isset(</span><span class="default">$area</span><span class="keyword">) ? </span><span class="string">'('</span><span class="keyword">.</span><span class="default">$area</span><span class="keyword">.</span><span class="string">') ' </span><span class="keyword">: </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$out </span><span class="keyword">.= isset(</span><span class="default">$pfx</span><span class="keyword">) ? </span><span class="default">$pfx</span><span class="keyword">.</span><span class="string">' - ' </span><span class="keyword">: </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$out </span><span class="keyword">.= isset(</span><span class="default">$exc</span><span class="keyword">) ? </span><span class="default">$exc</span><span class="keyword">.</span><span class="string">' ' </span><span class="keyword">: </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$out </span><span class="keyword">.= isset(</span><span class="default">$ext</span><span class="keyword">) ? </span><span class="string">'x'</span><span class="keyword">.</span><span class="default">$ext </span><span class="keyword">: </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$out</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56076""></a>
  <div class="note">
   <strong class="user">Brainiac361</strong>
   <a href="#56076" class="date">22-Aug-2005 01:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The %[^[]]-trick may seem to work, but it doesn't!<br />
<br />
What happens is that sscanf will simply match any characters but an opening square bracket (which is rather rare and that's why it might just seem to work).<br />
But even worse it will expect a ]-character next and continue to match anything.<br />
<br />
Now what you can do is make sscanf look for any character but a character that is really never used... a good choice is the linebreak "%[^\\n]", especially in combination with fscanf.<br />
<br />
What you can also do is copy and paste any unused ascii character like #001 or something.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54785""></a>
  <div class="note">
   <strong class="user">joshmckenneyATgmailDOT(0{</strong>
   <a href="#54785" class="date">14-Jul-2005 03:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
added country code (1) to phone number function:<br />
<br />
function formatPhone($phone) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; if (empty($phone)) return "";<br />
&nbsp;&nbsp; &nbsp; &nbsp; if (strlen($phone) == 7)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sscanf($phone, "%3s%4s", $prefix, $exchange);<br />
&nbsp;&nbsp; &nbsp; &nbsp; else if (strlen($phone) == 10)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sscanf($phone, "%3s%3s%4s", $area, $prefix, $exchange);<br />
&nbsp;&nbsp; &nbsp; &nbsp; else if (strlen($phone) &gt; 10)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(substr($phone,0,1)=='1') {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sscanf($phone, "%1s%3s%3s%4s", $country, $area, $prefix, $exchange);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sscanf($phone, "%3s%3s%4s%s", $area, $prefix, $exchange, $extension);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return "unknown phone format: $phone";<br />
&nbsp;&nbsp; &nbsp; &nbsp; $out = "";<br />
&nbsp;&nbsp; &nbsp; &nbsp; $out .= isset($country) ? $country.' ' : '';<br />
&nbsp;&nbsp; &nbsp; &nbsp; $out .= isset($area) ? '(' . $area . ') ' : '';<br />
&nbsp;&nbsp; &nbsp; &nbsp; $out .= $prefix . '-' . $exchange;<br />
&nbsp;&nbsp; &nbsp; &nbsp; $out .= isset($extension) ? ' x' . $extension : '';<br />
&nbsp;&nbsp; &nbsp; &nbsp; return $out;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="53890""></a>
  <div class="note">
   <strong class="user">Vincent Jansen</strong>
   <a href="#53890" class="date">16-Jun-2005 01:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you just wants filter out information between two parts of a string, i used the following, it works better for me then the sscanf function. <br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">scanstr</span><span class="keyword">(</span><span class="default">$zoekstr</span><span class="keyword">,</span><span class="default">$part1</span><span class="keyword">,</span><span class="default">$part2</span><span class="keyword">) {<br />
</span><span class="default">$firstpos</span><span class="keyword">=</span><span class="default">strpos </span><span class="keyword">(</span><span class="default">$zoekstr</span><span class="keyword">, </span><span class="default">$part1</span><span class="keyword">)+</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$part1</span><span class="keyword">);<br />
</span><span class="default">$lastpos</span><span class="keyword">=</span><span class="default">strpos </span><span class="keyword">(</span><span class="default">$zoekstr</span><span class="keyword">, </span><span class="default">$part2</span><span class="keyword">);<br />
</span><span class="default">$scanresult</span><span class="keyword">=</span><span class="default">substr </span><span class="keyword">(</span><span class="default">$zoekstr</span><span class="keyword">, </span><span class="default">$firstpos</span><span class="keyword">, </span><span class="default">$lastpos</span><span class="keyword">-</span><span class="default">$firstpos</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return(</span><span class="default">$scanresult</span><span class="keyword">);<br />
}<br />
echo </span><span class="default">scanstr </span><span class="keyword">(</span><span class="string">"var1=hello&amp;var2=test&amp;var3=more"</span><span class="keyword">,</span><span class="string">"var2="</span><span class="keyword">,</span><span class="string">"&amp;var3"</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="49713""></a>
  <div class="note">
   <strong class="user">codeslinger at compsalot dot com</strong>
   <a href="#49713" class="date">06-Feb-2005 06:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Security Note:<br />
<br />
Although it is a very powerful technique, keep in mind that it is easily deceived.<br />
<br />
Many successful exploits have been based on scanf attacks.&nbsp; It should not be used on untrusted input without a lot of additional validation.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="45792""></a>
  <div class="note">
   <strong class="user">steve (atsign) rapaport *fullstop* com</strong>
   <a href="#45792" class="date">18-Sep-2004 04:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The classic example <br />
<span class="default">&lt;?php<br />
</span><span class="keyword">list(</span><span class="default">$month</span><span class="keyword">, </span><span class="default">$day</span><span class="keyword">, </span><span class="default">$year</span><span class="keyword">) = </span><span class="default">sscanf</span><span class="keyword">(</span><span class="default">$mandate</span><span class="keyword">, </span><span class="string">"%s %d %d"</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
works fine if you already know the variable names you want to fill, and the format string you want to fill them with.&nbsp; If you want both of those to be dynamically configurable (as in reading a file with a flexible format), you may have a use for this code:<br />
<br />
Assumes your variables are listed in the variable <br />
$varstr = "var1, var2, var3"&nbsp; <br />
(you don't know what the variable names will be, <br />
&nbsp;perhaps they're a subset of a long list of valid ones)<br />
<br />
Assumes your input line is in $line, and your sscanf spec is in $spec.&nbsp; Both of these may also be in your input.<br />
<br />
Integrity checks omitted for clarity.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $vars </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">','</span><span class="keyword">, </span><span class="default">$varstr</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$values </span><span class="keyword">= @</span><span class="default">sscanf</span><span class="keyword">(</span><span class="default">$line</span><span class="keyword">, </span><span class="default">$spec</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Do input integrity checks<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">foreach (</span><span class="default">$vars </span><span class="keyword">as </span><span class="default">$var</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$var </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$next </span><span class="keyword">= </span><span class="default">each</span><span class="keyword">(</span><span class="default">$values</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $</span><span class="default">$var </span><span class="keyword">= </span><span class="default">$next</span><span class="keyword">[</span><span class="string">'value'</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ($</span><span class="default">$var</span><span class="keyword">) </span><span class="default">$result_array</span><span class="keyword">[</span><span class="default">$var</span><span class="keyword">] = $</span><span class="default">$var</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
This took me some time to write successfully, so I'm including it for posterity.&nbsp; Non-obvious is the use of<br />
$next.<br />
<br />
Cheers,<br />
<br />
Steve</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="30636""></a>
  <div class="note">
   <strong class="user">marcus at synchromedia dot co dot uk</strong>
   <a href="#30636" class="date">24-Mar-2003 09:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In PHP &gt;= 4.3.0, if you use additional reference parameters, you will get this warning:<br />
<br />
PHP Warning:&nbsp; Call-time pass-by-reference has been deprecated - argument passed by value<br />
<br />
This clearly has the potential to cause unexpected consequences (vars left empty), and will break existing code. So don't do it! These docs need updating to say this too.<br />
<br />
The syntax:<br />
<br />
&nbsp;&nbsp;&nbsp; list($a, $b) = sscanf("hello world", "%s %s");<br />
<br />
will work as expected, and doesn't seem to cause any problems with Apache that I've noticed.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="29637""></a>
  <div class="note">
   <strong class="user">sbarnum.pointsystems@com</strong>
   <a href="#29637" class="date">19-Feb-2003 01:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is a better phone format function than the one above, handles leading zeroes correctly, by using the "%s" instead of "%d" argument to sscanf().&nbsp; Again, this function assumes that the input has been stripped of all non-integer values.<br />
<br />
function formatPhone($phone) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (empty($phone)) return "";<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (strlen($phone) == 7)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; sscanf($phone, "%3s%4s", $prefix, $exchange);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else if (strlen($phone) == 10)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; sscanf($phone, "%3s%3s%4s", $area, $prefix, $exchange);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else if (strlen($phone) &gt; 10)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; sscanf($phone, "%3s%3s%4s%s", $area, $prefix, $exchange, $extension);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return "unknown phone format: $phone";<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $out = "";<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $out .= isset($area) ? '(' . $area . ') ' : "";<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $out .= $prefix . '-' . $exchange;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $out .= isset($extension) ? ' x' . $extension : "";<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return $out;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="26996""></a>
  <div class="note">
   <strong class="user">sbarnum.pointsystems@com</strong>
   <a href="#26996" class="date">19-Nov-2002 07:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
More fun with phones!&nbsp; This assumes that the phone number is 10 digits, with only numeric data, but it would be easy to check the length of the string first.<br />
<br />
function formatPhone($phone) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (empty($phone)) return "";<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; sscanf($phone, "%3d%3d%4d", $area, $prefix, $exchange);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $out = @$area ? "($area) " : "";<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $out .= $prefix . '-' . $exchange;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return $out;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="25190""></a>
  <div class="note">
   <strong class="user">jon at fuck dot org</strong>
   <a href="#25190" class="date">13-Sep-2002 11:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
this function is a great way to get integer rgb values from the html equivalent hex.<br />
<br />
list($r, $g, $b) = sscanf('00ccff', '%2x%2x%2x');</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="23145""></a>
  <div class="note">
   <strong class="user">jamesDOTwatsonATrealismstudiosDOTcom</strong>
   <a href="#23145" class="date">10-Jul-2002 12:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You're making a common mistake in believing that sscanf (and the whole scanf family) are more intelligent than they really are, sscanf always starts checking from the first character of the string, the first character that doesn't match the format string causes it to bail out early, if you want to match later in the string you'll have to do something like this:<br />
<br />
sscanf(strstr($lit[$x],"Vol."),"Vol. %d",&amp;$vol[$x]);<br />
<br />
(check the docs on strstr if you're unsure of how it works)<br />
<br />
or if you want you can add some simple error correction<br />
<br />
$temp=strstr($lit[$x],"Vol.");<br />
if ($temp)<br />
&nbsp;&nbsp;&nbsp; sscanf($temp,"Vol. %d",&amp;$vol[$x]);<br />
else<br />
&nbsp;&nbsp;&nbsp; $vol[$x]=$default_vol;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="19430""></a>
  <div class="note">
   <strong class="user">elgabos at umail dot ucsb dot edu</strong>
   <a href="#19430" class="date">27-Feb-2002 03:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
After playing around with this for a while, I found that if you use %[^[]] instead of %s (since php has problems with spaces when using %s) it works nicely. <br />
<br />
For those that aren't familiar with regular expressions, %[^[]] basically matches anything that isn't nothing.<br />
<br />
Hope this helps. - Gabe</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="16041""></a>
  <div class="note">
   <strong class="user">narainsbrain at yahoo dot com</strong>
   <a href="#16041" class="date">14-Oct-2001 03:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
apparently, sscanf always splits at spaces, even if spaces are not specified in the format. consider this script:<br />
<br />
<span class="default">&lt;?php<br />
$str </span><span class="keyword">= </span><span class="string">"This is a\tsentence with\ttabs"</span><span class="keyword">;<br />
</span><span class="default">$scanned </span><span class="keyword">= </span><span class="default">sscanf</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="string">"%s\t%s\t%s"</span><span class="keyword">);<br />
echo </span><span class="default">join</span><span class="keyword">(</span><span class="string">" : "</span><span class="keyword">, </span><span class="default">$scanned</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
this echoes "This : is : a", not the expected "This is a : sentence with : tabs."<br />
this behaviour is fine if your strings don't contain spaces, but if they do you'd be better off using explode().</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="9853""></a>
  <div class="note">
   <strong class="user">owenh at halo5 dot com</strong>
   <a href="#9853" class="date">28-Nov-2000 04:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php </span><span class="keyword">list(</span><span class="default">$phone11</span><span class="keyword">, </span><span class="default">$phone12</span><span class="keyword">, </span><span class="default">$phone13</span><span class="keyword">) = </span><span class="default">sscanf</span><span class="keyword">(</span><span class="default">$arow</span><span class="keyword">[</span><span class="default">9</span><span class="keyword">],</span><span class="string">"(%d) %d-%d"</span><span class="keyword">); </span><span class="default">?&gt;<br />
</span><br />
If thoes variables dont have data in them it seems to cause segfaults on apache.&nbsp; ( just to save you some trouble shooting time here is my fix: <br />
<span class="default">&lt;?php sscanf</span><span class="keyword">(</span><span class="default">$arow</span><span class="keyword">[</span><span class="default">9</span><span class="keyword">],</span><span class="string">"(%d) %d-%d"</span><span class="keyword">, &amp;</span><span class="default">$phone11</span><span class="keyword">,&amp;</span><span class="default">$phone12</span><span class="keyword">, &amp;</span><span class="default">$phone13</span><span class="keyword">); </span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="8420""></a>
  <div class="note">
   <strong class="user">clcollie at mindspring dot com</strong>
   <a href="#8420" class="date">12-Sep-2000 04:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Actually sscanf()_always_ returns an array if you specify less return variables than format specifiers. i may change this to return a scalar if only a single format specifier exists.<br />
&nbsp; Note that sscanf() is (almost) the complete functional equivalent of its "C" counterpart, so you can do the following to get the expected effect :<br />
<br />
&nbsp;&nbsp; sscanf("SN/2350001","SN/%d",&amp;$serial)<br />
<br />
The array return was a nicety for PHP.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.sprintf.html">sprintf</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.str-getcsv.html">str_getcsv</a></div>
 <div class="up"><a href="ref.strings.html">String Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
