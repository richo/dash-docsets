<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Draw a filled rectangle</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.imagefilledpolygon.html">imagefilledpolygon</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.imagefilltoborder.html">imagefilltoborder</a></div>
 <div class="up"><a href="ref.image.html">GD and Image Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.imagefilledrectangle" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">imagefilledrectangle</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">imagefilledrectangle</span> &mdash; <span class="dc-title">Draw a filled rectangle</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.imagefilledrectangle-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><b>imagefilledrectangle</b></span>
    ( <span class="methodparam"><span class="type">resource</span> <tt class="parameter">$image</tt></span>
   , <span class="methodparam"><span class="type">int</span> <tt class="parameter">$x1</tt></span>
   , <span class="methodparam"><span class="type">int</span> <tt class="parameter">$y1</tt></span>
   , <span class="methodparam"><span class="type">int</span> <tt class="parameter">$x2</tt></span>
   , <span class="methodparam"><span class="type">int</span> <tt class="parameter">$y2</tt></span>
   , <span class="methodparam"><span class="type">int</span> <tt class="parameter">$color</tt></span>
   )</div>

  <p class="para rdfs-comment">
   Creates a rectangle filled with <i><tt class="parameter">color</tt></i> in the given
   <i><tt class="parameter">image</tt></i> starting at point 1 and ending at point 2.
   0, 0 is the top left corner of the image.
  </p>
 </div>

 <div class="refsect1 parameters" id="refsect1-function.imagefilledrectangle-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>

    <dt>
<span class="term"><i><tt class="parameter">
image</tt></i></span><dd>
<p class="para">An image resource, returned by one of the image creation functions,
such as <span class="function"><a href="function.imagecreatetruecolor.html" class="function">imagecreatetruecolor()</a></span>.</p></dd>
</dt>

    <dt>

     <span class="term"><i><tt class="parameter">x1</tt></i></span>
     <dd>

      <p class="para">
       x-coordinate for point 1.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">y1</tt></i></span>
     <dd>

      <p class="para">
       y-coordinate for point 1.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">x2</tt></i></span>
     <dd>

      <p class="para">
       x-coordinate for point 2.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">y2</tt></i></span>
     <dd>

      <p class="para">
       y-coordinate for point 2.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">color</tt></i></span>
     <dd>

      <p class="para">
       The fill color. A color identifier created with 
       <span class="function"><a href="function.imagecolorallocate.html" class="function">imagecolorallocate()</a></span>.
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.imagefilledrectangle-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns <b><tt>TRUE</tt></b> on success or <b><tt>FALSE</tt></b> on failure.
  </p>
 </div>

 <div class="refsect1 examples" id="refsect1-function.imagefilledrectangle-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   <div class="example" id="example-2979">
    <p><b>Example #1 <span class="function"><b>imagefilledrectangle()</b></span> usage</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Create&nbsp;a&nbsp;55x30&nbsp;image<br /></span><span style="color: #0000BB">$im&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">imagecreatetruecolor</span><span style="color: #007700">(</span><span style="color: #0000BB">55</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">30</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$white&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">imagecolorallocate</span><span style="color: #007700">(</span><span style="color: #0000BB">$im</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">255</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">255</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">255</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Draw&nbsp;a&nbsp;white&nbsp;rectangle<br /></span><span style="color: #0000BB">imagefilledrectangle</span><span style="color: #007700">(</span><span style="color: #0000BB">$im</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">50</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">25</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$white</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Save&nbsp;the&nbsp;image<br /></span><span style="color: #0000BB">imagepng</span><span style="color: #007700">(</span><span style="color: #0000BB">$im</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'./imagefilledrectangle.png'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">imagedestroy</span><span style="color: #007700">(</span><span style="color: #0000BB">$im</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output
something similar to:</p></div>
    <div class="mediaobject">
     
     <div class="imageobject">
      <img src="images/21009b70229598c6a80eef8b45bf282b-imagefilledrectangle.png" alt="Output of example : imagefilledrectangle()" width="55" height="30" />
     </div>
    </div>
   </div>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="100111""></a>
  <div class="note">
   <strong class="user">Tobi</strong>
   <a href="#100111" class="date">25-Sep-2010 02:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It looks like there are waves beetween the points, but it's straight.<br />
<br />
<span class="default">&lt;?php<br />
$maxwert </span><span class="keyword">= </span><span class="default">300</span><span class="keyword">;<br />
</span><span class="default">$size </span><span class="keyword">= </span><span class="default">10</span><span class="keyword">;<br />
</span><span class="default">$img </span><span class="keyword">= </span><span class="default">imagecreatetruecolor</span><span class="keyword">(</span><span class="default">$maxwert</span><span class="keyword">, </span><span class="default">$maxwert</span><span class="keyword">);<br />
</span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; for(</span><span class="default">$y</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$y</span><span class="keyword">&lt;</span><span class="default">$maxwert</span><span class="keyword">;</span><span class="default">$y </span><span class="keyword">+= </span><span class="default">$size</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; for(</span><span class="default">$x</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$x</span><span class="keyword">&lt;</span><span class="default">$maxwert</span><span class="keyword">;</span><span class="default">$x</span><span class="keyword">+=</span><span class="default">$size</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$r </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">255</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$g </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">255</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$b </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">255</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$color </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">$r</span><span class="keyword">, </span><span class="default">$g</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">imagefilledrectangle </span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">$x</span><span class="keyword">, </span><span class="default">$y</span><span class="keyword">, </span><span class="default">$x</span><span class="keyword">+</span><span class="default">$size </span><span class="keyword">,</span><span class="default">$y</span><span class="keyword">+</span><span class="default">$size</span><span class="keyword">, </span><span class="default">$color</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; }<br />
&nbsp;&nbsp; }&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
</span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-type: image/png"</span><span class="keyword">); <br />
</span><span class="default">imagepng</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96871""></a>
  <div class="note">
   <strong class="user">Mice32</strong>
   <a href="#96871" class="date">19-Mar-2010 04:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
That script draws Serpinski's carpet:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; set_time_limit</span><span class="keyword">(</span><span class="default">5</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">4</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Iterations<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$xy </span><span class="keyword">= </span><span class="default">500</span><span class="keyword">;&nbsp; &nbsp; </span><span class="comment">// Picture size<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$img </span><span class="keyword">= </span><span class="default">imagecreatetruecolor</span><span class="keyword">(</span><span class="default">$xy</span><span class="keyword">, </span><span class="default">$xy</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$white </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">drawCarpet</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$xy</span><span class="keyword">, </span><span class="default">$xy</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">drawCarpet</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">, </span><span class="default">$c</span><span class="keyword">, </span><span class="default">$d</span><span class="keyword">, </span><span class="default">$n</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; global </span><span class="default">$img</span><span class="keyword">, </span><span class="default">$white</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$n </span><span class="keyword">&lt;= </span><span class="default">0</span><span class="keyword">) return;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$a1 </span><span class="keyword">= </span><span class="default">2 </span><span class="keyword">* </span><span class="default">$a </span><span class="keyword">/ </span><span class="default">3 </span><span class="keyword">+ </span><span class="default">$c </span><span class="keyword">/ </span><span class="default">3</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$c1 </span><span class="keyword">= </span><span class="default">$a </span><span class="keyword">/ </span><span class="default">3 </span><span class="keyword">+ </span><span class="default">2 </span><span class="keyword">* </span><span class="default">$c </span><span class="keyword">/ </span><span class="default">3</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$b1 </span><span class="keyword">= </span><span class="default">2 </span><span class="keyword">* </span><span class="default">$b </span><span class="keyword">/ </span><span class="default">3 </span><span class="keyword">+ </span><span class="default">$d </span><span class="keyword">/ </span><span class="default">3</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$d1 </span><span class="keyword">= </span><span class="default">$b </span><span class="keyword">/ </span><span class="default">3 </span><span class="keyword">+ </span><span class="default">2 </span><span class="keyword">* </span><span class="default">$d </span><span class="keyword">/ </span><span class="default">3</span><span class="keyword">;<br />
&nbsp;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">imagefilledrectangle</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">$a1</span><span class="keyword">, </span><span class="default">$b1</span><span class="keyword">, </span><span class="default">$c1</span><span class="keyword">, </span><span class="default">$d1</span><span class="keyword">, </span><span class="default">$white</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">drawCarpet</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">, </span><span class="default">$a1</span><span class="keyword">, </span><span class="default">$b1</span><span class="keyword">, </span><span class="default">$n </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">drawCarpet</span><span class="keyword">(</span><span class="default">$a1</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">, </span><span class="default">$c1</span><span class="keyword">, </span><span class="default">$b1</span><span class="keyword">, </span><span class="default">$n </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">drawCarpet</span><span class="keyword">(</span><span class="default">$c1</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">, </span><span class="default">$c</span><span class="keyword">, </span><span class="default">$b1</span><span class="keyword">, </span><span class="default">$n </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">drawCarpet</span><span class="keyword">(</span><span class="default">$c1</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">, </span><span class="default">$c</span><span class="keyword">, </span><span class="default">$b1</span><span class="keyword">, </span><span class="default">$n </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">drawCarpet</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b1</span><span class="keyword">, </span><span class="default">$a1</span><span class="keyword">, </span><span class="default">$d1</span><span class="keyword">, </span><span class="default">$n </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">drawCarpet</span><span class="keyword">(</span><span class="default">$c1</span><span class="keyword">, </span><span class="default">$b1</span><span class="keyword">, </span><span class="default">$c</span><span class="keyword">, </span><span class="default">$d1</span><span class="keyword">, </span><span class="default">$n </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">drawCarpet</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$d1</span><span class="keyword">, </span><span class="default">$a1</span><span class="keyword">, </span><span class="default">$d</span><span class="keyword">, </span><span class="default">$n </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">drawCarpet</span><span class="keyword">(</span><span class="default">$a1</span><span class="keyword">, </span><span class="default">$d1</span><span class="keyword">, </span><span class="default">$c1</span><span class="keyword">, </span><span class="default">$d</span><span class="keyword">, </span><span class="default">$n </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">drawCarpet</span><span class="keyword">(</span><span class="default">$c1</span><span class="keyword">, </span><span class="default">$d1</span><span class="keyword">, </span><span class="default">$c</span><span class="keyword">, </span><span class="default">$d</span><span class="keyword">, </span><span class="default">$n </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">'Content-Type: image/png'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">imagepng</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83036""></a>
  <div class="note">
   <strong class="user">mike at delenk dot net</strong>
   <a href="#83036" class="date">07-May-2008 12:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The examples in function imagettfbbox() gave me many problems because of misunderstand of how the text is positionned in the box.<br />
<br />
So I did a new example:<br />
- writing a text<br />
- in the correct position in its box<br />
- with a padding around<br />
<br />
Enjoy !<br />
Mike<br />
<br />
&lt;?<br />
<br />
// some settings<br />
&nbsp;&nbsp;&nbsp; $angle = 0;<br />
&nbsp;&nbsp;&nbsp; $text = 'ÌÏhg 0123456789';<br />
&nbsp;&nbsp;&nbsp; $font_face = dirname(__FILE__).'/verdana.ttf'; // put the file in the same directory<br />
&nbsp;&nbsp;&nbsp; $font_size = 9; //(int) pixels in GD 1, or points in GD 2<br />
<br />
// retrieves box frame<br />
&nbsp;&nbsp;&nbsp; $box = imagettfbbox($font_size, 0, $font_face, $text);<br />
&nbsp;&nbsp;&nbsp; $bottom_left_x = $box[0]; // used below<br />
&nbsp;&nbsp;&nbsp; $bottom_left_y = $box[1]; // used below<br />
&nbsp;&nbsp;&nbsp; $bottom_right_x = $box[2]; // used below<br />
&nbsp;&nbsp;&nbsp; $bottom_right_y = $box[3];<br />
&nbsp;&nbsp;&nbsp; $top_right_x = $box[4];<br />
&nbsp;&nbsp;&nbsp; $top_right_y = $box[5];<br />
&nbsp;&nbsp;&nbsp; $top_left_x = $box[6];<br />
&nbsp;&nbsp;&nbsp; $top_left_y = $box[7]; // used below<br />
<br />
// define width and height of the text box<br />
&nbsp;&nbsp;&nbsp; $box_w = abs($bottom_left_x) + abs($bottom_right_x);<br />
&nbsp;&nbsp;&nbsp; $box_h = abs($bottom_left_y) + abs($top_left_y);<br />
<br />
// add padding<br />
&nbsp;&nbsp;&nbsp; $padding_x = 5;<br />
&nbsp;&nbsp;&nbsp; $padding_y = 5;<br />
&nbsp;&nbsp;&nbsp; $box_w = $box_w + 2 * $padding_x;<br />
&nbsp;&nbsp;&nbsp; $box_h = $box_h + 2 * $padding_y;<br />
<br />
// origin of the text = baseline of the first char<br />
&nbsp;&nbsp;&nbsp; $text_x = abs($bottom_left_x) -1 + $padding_x;<br />
&nbsp;&nbsp;&nbsp; $text_y = $box_h -1 - abs($bottom_left_y) - $padding_y;<br />
&nbsp;&nbsp;&nbsp; <br />
// mysterious correction for the characters going low like pgjq<br />
&nbsp;&nbsp;&nbsp; if(abs($bottom_left_y) &lt;= 1) $box_h--;<br />
<br />
// create the image<br />
&nbsp;&nbsp;&nbsp; $img = imagecreatetruecolor($box_w, $box_h);<br />
&nbsp;<br />
// define some colors<br />
&nbsp;&nbsp;&nbsp; $white = imagecolorallocate($img,255,255,255);<br />
&nbsp;&nbsp;&nbsp; $black = imagecolorallocate($img,0,0,0);<br />
&nbsp;&nbsp;&nbsp; $lightgrey = imagecolorallocate($img, 200, 200, 200);<br />
&nbsp;&nbsp;&nbsp; $grey = imagecolorallocate($img,100,100,100);<br />
&nbsp;&nbsp;&nbsp; $yellow = imagecolorallocate($img, 0xFF, 0xFF, 0x00);<br />
&nbsp;<br />
// attribute colors<br />
&nbsp;&nbsp;&nbsp; $font_color =&nbsp; $black;<br />
&nbsp;&nbsp;&nbsp; $padding_color =&nbsp; $lightgrey;<br />
&nbsp;&nbsp;&nbsp; $background_color =&nbsp; $yellow;<br />
&nbsp;<br />
// fill image with background color<br />
&nbsp;&nbsp;&nbsp; imagefill($img, 0, 0, $background_color);<br />
<br />
// fill image with padding color<br />
&nbsp;&nbsp;&nbsp; imagefilledrectangle($img, 0, 0, $box_w, $padding_y - 1, $padding_color); // top<br />
&nbsp;&nbsp;&nbsp; imagefilledrectangle($img, 0, 0, $padding_x - 1, $box_h - 1, $padding_color); // left<br />
&nbsp;&nbsp;&nbsp; imagefilledrectangle($img, 0, $box_h - $padding_y -1, $box_w, $box_h - 1, $padding_color); // bottom<br />
&nbsp;&nbsp;&nbsp; imagefilledrectangle($img, $box_w - $padding_x, 0, $box_w - 1, $box_h - 1, $padding_color); // right<br />
<br />
//write text<br />
imagettftext($img, $font_size, 0, $text_x, $text_y, $font_color, $font_face, $text);<br />
<br />
//rotate image<br />
&nbsp;&nbsp;&nbsp; if ($angle &gt; 0) $img = imagerotate($img, $angle, $white);<br />
<br />
// send header<br />
&nbsp;&nbsp;&nbsp; header("Content-type: image/gif");<br />
&nbsp;<br />
//sends image<br />
&nbsp;&nbsp;&nbsp; imagegif($img);<br />
&nbsp;&nbsp;&nbsp; imagedestroy($img);<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80851""></a>
  <div class="note">
   <strong class="user">kyperkins at shadowdev dot com</strong>
   <a href="#80851" class="date">04-Feb-2008 02:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is a very simple Progress Bar using basic PHP 5.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">#Created by Kyle "KP" Perkins<br />
# of Shadow Development Technologies (<a href="http://shadowdev.com" rel="nofollow" target="_blank">http://shadowdev.com</a>)<br />
# on 20080204<br />
<br />
#very simple and flexible dynamic PROGRESS BAR<br />
<br />
#Used under the Creative Commons Share-Alike License 3.0<br />
#<a href="http://creativecommons.org/licenses/by-sa/3.0/us/" rel="nofollow" target="_blank">http://creativecommons.org/licenses/by-sa/3.0/us/</a><br />
<br />
#use: index.php?percent/total/width(px)<br />
#example: ?s=85/100/300<br />
<br />
#edit how you like, comments to kyperkins@shadowdev.com<br />
<br />
</span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-type: image/png"</span><span class="keyword">);<br />
</span><span class="default">extract</span><span class="keyword">(</span><span class="default">$_GET</span><span class="keyword">);<br />
</span><span class="default">$num</span><span class="keyword">=</span><span class="default">explode</span><span class="keyword">(</span><span class="string">"/"</span><span class="keyword">, </span><span class="default">$s</span><span class="keyword">);<br />
</span><span class="default">$width</span><span class="keyword">=</span><span class="default">$num</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">];<br />
</span><span class="default">$per</span><span class="keyword">=(</span><span class="default">$num</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]/</span><span class="default">$num</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]) * </span><span class="default">100</span><span class="keyword">;<br />
</span><span class="default">$percent</span><span class="keyword">=</span><span class="default">round</span><span class="keyword">(</span><span class="default">$per</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br />
</span><span class="default">$im </span><span class="keyword">= @</span><span class="default">imagecreate</span><span class="keyword">(</span><span class="default">$width</span><span class="keyword">, </span><span class="default">20</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; or die(</span><span class="string">"Cannot Initialize new GD image stream"</span><span class="keyword">);<br />
</span><span class="default">$background_color </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">200</span><span class="keyword">,</span><span class="default">200</span><span class="keyword">,</span><span class="default">200</span><span class="keyword">);<br />
</span><span class="default">$text_color </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">);<br />
</span><span class="default">$fill</span><span class="keyword">=(</span><span class="default">$percent</span><span class="keyword">/</span><span class="default">100</span><span class="keyword">)*</span><span class="default">$width</span><span class="keyword">;<br />
</span><span class="default">$offset</span><span class="keyword">=(</span><span class="default">$width</span><span class="keyword">/</span><span class="default">2</span><span class="keyword">)-(</span><span class="default">$width</span><span class="keyword">*</span><span class="default">.02</span><span class="keyword">);<br />
</span><span class="default">imagestring</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">,&nbsp; </span><span class="string">"</span><span class="default">$percent</span><span class="string">%"</span><span class="keyword">, </span><span class="default">$text_color</span><span class="keyword">);<br />
</span><span class="default">imagefilledrectangle</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$fill</span><span class="keyword">, </span><span class="default">20</span><span class="keyword">, </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">));<br />
</span><span class="default">imagestring</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">,&nbsp; </span><span class="string">"</span><span class="default">$percent</span><span class="string">%"</span><span class="keyword">, </span><span class="default">$text_color</span><span class="keyword">);<br />
</span><span class="default">imagepng</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">);<br />
</span><span class="default">imagedestroy</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="71788""></a>
  <div class="note">
   <strong class="user">Google</strong>
   <a href="#71788" class="date">15-Dec-2006 01:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="comment">//index.php <br />
//set your year, month, daym hour, minute, second you want to cuuntdown to.<br />
<br />
//ONLY CHANGE FROM HERE<br />
</span><span class="default">$year</span><span class="keyword">=</span><span class="string">"2006"</span><span class="keyword">;<br />
</span><span class="default">$month</span><span class="keyword">=</span><span class="string">"12"</span><span class="keyword">;<br />
</span><span class="default">$day</span><span class="keyword">=</span><span class="string">"25"</span><span class="keyword">;<br />
</span><span class="default">$hour</span><span class="keyword">=</span><span class="string">"00"</span><span class="keyword">;<br />
</span><span class="default">$minute</span><span class="keyword">=</span><span class="string">"00"</span><span class="keyword">;<br />
</span><span class="default">$second</span><span class="keyword">=</span><span class="string">"00"</span><span class="keyword">;<br />
</span><span class="default">$event</span><span class="keyword">=</span><span class="string">"Christmas Day 2006"</span><span class="keyword">;<br />
<br />
</span><span class="default">$time</span><span class="keyword">=</span><span class="default">mktime</span><span class="keyword">(</span><span class="default">$hour</span><span class="keyword">, </span><span class="default">$minute</span><span class="keyword">, </span><span class="default">$second</span><span class="keyword">, </span><span class="default">$month</span><span class="keyword">, </span><span class="default">$day</span><span class="keyword">, </span><span class="default">$year</span><span class="keyword">);<br />
<br />
</span><span class="default">$timecurrent</span><span class="keyword">=</span><span class="default">date</span><span class="keyword">(</span><span class="string">'U'</span><span class="keyword">);<br />
</span><span class="default">$cdtime</span><span class="keyword">=</span><span class="default">$time</span><span class="keyword">-</span><span class="default">$timecurrent</span><span class="keyword">;<br />
</span><span class="default">$cdmonths</span><span class="keyword">=</span><span class="default">$cddays</span><span class="keyword">/</span><span class="default">30</span><span class="keyword">;<br />
</span><span class="default">$cdyears</span><span class="keyword">=</span><span class="default">$cddays</span><span class="keyword">/</span><span class="default">365</span><span class="keyword">;<br />
<br />
</span><span class="comment">//Used this case only...<br />
</span><span class="default">$cdminutes</span><span class="keyword">=</span><span class="default">round</span><span class="keyword">(</span><span class="default">$cdtime</span><span class="keyword">/</span><span class="default">60</span><span class="keyword">);<br />
</span><span class="comment">//cdtime is seconds<br />
</span><span class="default">$cdhours</span><span class="keyword">=</span><span class="default">round</span><span class="keyword">(</span><span class="default">$cdtime</span><span class="keyword">/</span><span class="default">3600</span><span class="keyword">);<br />
</span><span class="default">$cddays</span><span class="keyword">=</span><span class="default">round</span><span class="keyword">(</span><span class="default">$cdhours</span><span class="keyword">/</span><span class="default">24</span><span class="keyword">);<br />
<br />
</span><span class="comment">//String the date<br />
</span><span class="default">$currentdate </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'l, F j, Y'</span><span class="keyword">);<br />
</span><span class="comment">// Set the content-type<br />
</span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-type: image/png"</span><span class="keyword">);<br />
<br />
</span><span class="comment">// Create the image<br />
</span><span class="default">$im </span><span class="keyword">= </span><span class="default">imagecreatetruecolor</span><span class="keyword">(</span><span class="default">701</span><span class="keyword">, </span><span class="default">355</span><span class="keyword">);<br />
<br />
</span><span class="comment">//Temp BGCOLOR (center of c-finder)<br />
</span><span class="default">$bg1 </span><span class="keyword">= </span><span class="default">208</span><span class="keyword">;<br />
</span><span class="default">$bg2 </span><span class="keyword">= </span><span class="default">130</span><span class="keyword">;<br />
</span><span class="default">$bg3 </span><span class="keyword">= </span><span class="default">208</span><span class="keyword">;<br />
<br />
</span><span class="default">$s1 </span><span class="keyword">= </span><span class="default">$bg1 </span><span class="keyword">- </span><span class="default">20</span><span class="keyword">;<br />
</span><span class="default">$s2 </span><span class="keyword">= </span><span class="default">$bg2 </span><span class="keyword">- </span><span class="default">20</span><span class="keyword">;<br />
</span><span class="default">$s3 </span><span class="keyword">= </span><span class="default">$bg3 </span><span class="keyword">- </span><span class="default">20</span><span class="keyword">;<br />
<br />
</span><span class="default">$t1 </span><span class="keyword">= </span><span class="default">$bg1 </span><span class="keyword">+ </span><span class="default">30</span><span class="keyword">;<br />
</span><span class="default">$t2 </span><span class="keyword">= </span><span class="default">$bg2 </span><span class="keyword">+ </span><span class="default">30</span><span class="keyword">;<br />
</span><span class="default">$t3 </span><span class="keyword">= </span><span class="default">$bg3 </span><span class="keyword">+ </span><span class="default">30</span><span class="keyword">;<br />
<br />
</span><span class="default">$cArray</span><span class="keyword">=array();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$c1 </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$bg1</span><span class="keyword">, </span><span class="default">$bg2</span><span class="keyword">, </span><span class="default">$bg3</span><span class="keyword">); </span><span class="comment">//Background<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$c8 </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">$bg2</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">); </span><span class="comment">//Background<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$c2 </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$s1</span><span class="keyword">, </span><span class="default">$s2</span><span class="keyword">, </span><span class="default">$s3</span><span class="keyword">); </span><span class="comment">//Shadow<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$c3 </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$t1</span><span class="keyword">, </span><span class="default">$t2</span><span class="keyword">, </span><span class="default">$t3</span><span class="keyword">); </span><span class="comment">//Text<br />
<br />
</span><span class="default">imagefilledrectangle</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">701</span><span class="keyword">, </span><span class="default">50</span><span class="keyword">, </span><span class="default">$c1</span><span class="keyword">);<br />
<br />
</span><span class="default">imagefilledrectangle</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">701</span><span class="keyword">, </span><span class="default">50</span><span class="keyword">, </span><span class="default">$c8</span><span class="keyword">);<br />
<br />
</span><span class="comment">// The text to draw<br />
</span><span class="default">$text </span><span class="keyword">= </span><span class="default">$string</span><span class="keyword">;<br />
</span><span class="comment">// Replace path by your own font path<br />
</span><span class="default">$fnum </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">, </span><span class="default">9</span><span class="keyword">);<br />
</span><span class="default">$font </span><span class="keyword">= </span><span class="string">"/f/font (</span><span class="default">$fnum</span><span class="string">)"</span><span class="keyword">;<br />
<br />
</span><span class="comment">// Add some shadow to the text<br />
</span><span class="default">imagettftext</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">29</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">17</span><span class="keyword">, </span><span class="default">42</span><span class="keyword">, </span><span class="default">$c2</span><span class="keyword">, </span><span class="default">$font</span><span class="keyword">, </span><span class="string">"Today is:"</span><span class="keyword">);<br />
</span><span class="default">imagettftext</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">28</span><span class="keyword">, -</span><span class="default">1</span><span class="keyword">, </span><span class="default">15</span><span class="keyword">, </span><span class="default">40</span><span class="keyword">, </span><span class="default">$c3</span><span class="keyword">, </span><span class="default">$font</span><span class="keyword">, </span><span class="string">"Today is:"</span><span class="keyword">);<br />
</span><span class="default">imagettftext</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">29</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">17</span><span class="keyword">, </span><span class="default">92</span><span class="keyword">, </span><span class="default">$c2</span><span class="keyword">, </span><span class="default">$font</span><span class="keyword">, </span><span class="string">"...</span><span class="default">$currentdate</span><span class="string">..."</span><span class="keyword">);<br />
</span><span class="default">imagettftext</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">28</span><span class="keyword">, -</span><span class="default">1</span><span class="keyword">, </span><span class="default">15</span><span class="keyword">, </span><span class="default">90</span><span class="keyword">, </span><span class="default">$c3</span><span class="keyword">, </span><span class="default">$font</span><span class="keyword">, </span><span class="string">"...</span><span class="default">$currentdate</span><span class="string">..."</span><span class="keyword">);<br />
</span><span class="default">imagettftext</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">29</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">17</span><span class="keyword">, </span><span class="default">142</span><span class="keyword">, </span><span class="default">$c2</span><span class="keyword">, </span><span class="default">$font</span><span class="keyword">, </span><span class="string">"So there are exactly:"</span><span class="keyword">);<br />
</span><span class="default">imagettftext</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">28</span><span class="keyword">, -</span><span class="default">1</span><span class="keyword">, </span><span class="default">15</span><span class="keyword">, </span><span class="default">140</span><span class="keyword">, </span><span class="default">$c3</span><span class="keyword">, </span><span class="default">$font</span><span class="keyword">, </span><span class="string">"So there are exactly:"</span><span class="keyword">);<br />
</span><span class="default">imagettftext</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">29</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">17</span><span class="keyword">, </span><span class="default">192</span><span class="keyword">, </span><span class="default">$c2</span><span class="keyword">, </span><span class="default">$font</span><span class="keyword">, </span><span class="string">"</span><span class="default">$cddays</span><span class="string"> with just..."</span><span class="keyword">);<br />
</span><span class="default">imagettftext</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">28</span><span class="keyword">, -</span><span class="default">1</span><span class="keyword">, </span><span class="default">15</span><span class="keyword">, </span><span class="default">190</span><span class="keyword">, </span><span class="default">$c3</span><span class="keyword">, </span><span class="default">$font</span><span class="keyword">, </span><span class="string">"</span><span class="default">$cddays</span><span class="string"> days with just..."</span><span class="keyword">);<br />
</span><span class="default">imagettftext</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">29</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">17</span><span class="keyword">, </span><span class="default">242</span><span class="keyword">, </span><span class="default">$c2</span><span class="keyword">, </span><span class="default">$font</span><span class="keyword">, </span><span class="string">"</span><span class="default">$cdminutes</span><span class="string"> minutes and only..."</span><span class="keyword">);<br />
</span><span class="default">imagettftext</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">28</span><span class="keyword">, -</span><span class="default">1</span><span class="keyword">, </span><span class="default">15</span><span class="keyword">, </span><span class="default">240</span><span class="keyword">, </span><span class="default">$c3</span><span class="keyword">, </span><span class="default">$font</span><span class="keyword">, </span><span class="string">"</span><span class="default">$cdminutes</span><span class="string"> minutes and only..."</span><span class="keyword">);<br />
</span><span class="default">imagettftext</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">29</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">17</span><span class="keyword">, </span><span class="default">292</span><span class="keyword">, </span><span class="default">$c2</span><span class="keyword">, </span><span class="default">$font</span><span class="keyword">, </span><span class="string">"</span><span class="default">$cdseconds</span><span class="string"> seconds until..."</span><span class="keyword">);<br />
</span><span class="default">imagettftext</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">28</span><span class="keyword">, -</span><span class="default">1</span><span class="keyword">, </span><span class="default">15</span><span class="keyword">, </span><span class="default">290</span><span class="keyword">, </span><span class="default">$c3</span><span class="keyword">, </span><span class="default">$font</span><span class="keyword">, </span><span class="string">"</span><span class="default">$cdseconds</span><span class="string"> seconds until..."</span><span class="keyword">);<br />
</span><span class="default">imagettftext</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">29</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">17</span><span class="keyword">, </span><span class="default">342</span><span class="keyword">, </span><span class="default">$c2</span><span class="keyword">, </span><span class="default">$font</span><span class="keyword">, </span><span class="string">"- + </span><span class="default">$event</span><span class="string"> + -"</span><span class="keyword">);<br />
</span><span class="default">imagettftext</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">28</span><span class="keyword">, -</span><span class="default">1</span><span class="keyword">, </span><span class="default">15</span><span class="keyword">, </span><span class="default">340</span><span class="keyword">, </span><span class="default">$c3</span><span class="keyword">, </span><span class="default">$font</span><span class="keyword">, </span><span class="string">"- + </span><span class="default">$event</span><span class="string"> + -"</span><span class="keyword">);<br />
<br />
</span><span class="comment">// Using imagepng() results in clearer text compared with imagejpeg()<br />
</span><span class="default">imagepng</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">);<br />
</span><span class="default">imagedestroy</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="70731""></a>
  <div class="note">
   <strong class="user">info at 555webdesign dot com</strong>
   <a href="#70731" class="date">25-Oct-2006 10:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Thanks terereese. it took me over two hours to figure that one out.<br />
it worked locally: imagefilledrectangle(imagresource, int x1, int x2, int y1, inty2, color)<br />
<br />
BUT remote on my provider only this worked: imagefilledrectangle(imagresource, int x1, int y2, int x1, inty1, color)<br />
<br />
Any ideas why and where?</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68066""></a>
  <div class="note">
   <strong class="user">terereese at hotmail dot com</strong>
   <a href="#68066" class="date">11-Jul-2006 08:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I would like to inform developers about a problem I encountered when trying to use imagefilledrectangle.<br />
<br />
I noted that the order in which the start and end y coordinates are listed is extremely important.<br />
as in the statements below.<br />
if($this-&gt;d_values[$i]['unit_value'] &lt; 0)<br />
imagefilledrectangle($this-&gt;img,$position_x, $start_y , $end_x, $end_y ,$d_color);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
else&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
imagefilledrectangle($this-&gt;img, $position_x,$ end_y , $end_x, $start_y,$d_colour);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
<br />
Thanks</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="65557""></a>
  <div class="note">
   <strong class="user">administrador(ensaimada)sphoera(punt)com</strong>
   <a href="#65557" class="date">03-May-2006 03:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I've made a function to make full color gradients:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">// The image must be in truecolor mode!!<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">gradient_region</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">$x</span><span class="keyword">, </span><span class="default">$y</span><span class="keyword">, </span><span class="default">$width</span><span class="keyword">, </span><span class="default">$height</span><span class="keyword">,</span><span class="default">$src_color</span><span class="keyword">, </span><span class="default">$dest_color</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$src_alpha </span><span class="keyword">= (</span><span class="default">$src_color</span><span class="keyword">) &gt;&gt; </span><span class="default">24</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$src_red </span><span class="keyword">= (</span><span class="default">$src_color </span><span class="keyword">&amp; </span><span class="default">0xFF0000</span><span class="keyword">) &gt;&gt; </span><span class="default">16</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$src_green </span><span class="keyword">= (</span><span class="default">$src_color </span><span class="keyword">&amp; </span><span class="default">0x00FF00</span><span class="keyword">) &gt;&gt; </span><span class="default">8</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$src_blue </span><span class="keyword">= (</span><span class="default">$src_color </span><span class="keyword">&amp; </span><span class="default">0x0000FF</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$dest_alpha </span><span class="keyword">= (</span><span class="default">$dest_color</span><span class="keyword">) &gt;&gt; </span><span class="default">24</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$dest_red </span><span class="keyword">= (</span><span class="default">$dest_color </span><span class="keyword">&amp; </span><span class="default">0xFF0000</span><span class="keyword">) &gt;&gt; </span><span class="default">16</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$dest_green </span><span class="keyword">= (</span><span class="default">$dest_color </span><span class="keyword">&amp; </span><span class="default">0x00FF00</span><span class="keyword">) &gt;&gt; </span><span class="default">8</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$dest_blue </span><span class="keyword">= (</span><span class="default">$dest_color </span><span class="keyword">&amp; </span><span class="default">0x0000FF</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$inc_alpha </span><span class="keyword">= (</span><span class="default">$dest_alpha </span><span class="keyword">- </span><span class="default">$src_alpha</span><span class="keyword">) / </span><span class="default">$width</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$inc_red </span><span class="keyword">= (</span><span class="default">$dest_red </span><span class="keyword">- </span><span class="default">$src_red</span><span class="keyword">)/</span><span class="default">$width</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$inc_green </span><span class="keyword">= (</span><span class="default">$dest_green </span><span class="keyword">- </span><span class="default">$src_green</span><span class="keyword">)/</span><span class="default">$width</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$inc_blue </span><span class="keyword">= (</span><span class="default">$dest_blue </span><span class="keyword">- </span><span class="default">$src_blue</span><span class="keyword">)/</span><span class="default">$width</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// If you need more performance, the step can be increased<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$width</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$src_alpha </span><span class="keyword">+= </span><span class="default">$inc_alpha</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$src_blue </span><span class="keyword">+= </span><span class="default">$inc_blue</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$src_green </span><span class="keyword">+= </span><span class="default">$inc_green</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$src_red </span><span class="keyword">+= </span><span class="default">$inc_red</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">imagefilledrectangle</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$x</span><span class="keyword">+</span><span class="default">$i</span><span class="keyword">,</span><span class="default">$y</span><span class="keyword">,&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$x</span><span class="keyword">+</span><span class="default">$i</span><span class="keyword">,</span><span class="default">$y</span><span class="keyword">+</span><span class="default">$height</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">imagecolorallocatealpha</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$src_red</span><span class="keyword">,</span><span class="default">$src_green</span><span class="keyword">,</span><span class="default">$src_blue</span><span class="keyword">,</span><span class="default">$src_alpha</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
More functions at <a href="http://www.sphoera.com" rel="nofollow" target="_blank">http://www.sphoera.com</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="64468""></a>
  <div class="note">
   <strong class="user">spam at junk dot dk</strong>
   <a href="#64468" class="date">14-Apr-2006 03:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A different kind of rating bar, using michal's rounded corners function :) I saw this type of rating bar somewhere and thought it looked cool, so the 'design' is a complete ripoff.<br />
<br />
Also, note that it scales quite well, from tiny 3x3 pixel dots to huge 300x300 pixel blocks. (Man am I proud of this thing.. well, enjoy!)<br />
<br />
/Scarpia<br />
<br />
<span class="default">&lt;?php<br />
<br />
Header</span><span class="keyword">(</span><span class="string">"Content-type: image/png"</span><span class="keyword">);<br />
</span><span class="default">drawRatingBlocks</span><span class="keyword">(</span><span class="default">$rating</span><span class="keyword">);<br />
<br />
function </span><span class="default">drawRatingBlocks</span><span class="keyword">(</span><span class="default">$rating</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$rating </span><span class="keyword">= </span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'rating'</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$width </span><span class="keyword">= </span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'width'</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$height </span><span class="keyword">= </span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'height'</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$blocks </span><span class="keyword">= </span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'blocks'</span><span class="keyword">];<br />
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$width </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">) </span><span class="default">$width </span><span class="keyword">= </span><span class="default">130</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$height </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">) </span><span class="default">$height </span><span class="keyword">= </span><span class="default">13</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$spacing </span><span class="keyword">= </span><span class="default">max</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">, </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$height</span><span class="keyword">/</span><span class="default">6</span><span class="keyword">) );<br />
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$blocks </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">) </span><span class="default">$blocks </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">( </span><span class="default">$width </span><span class="keyword">/ (</span><span class="default">$height</span><span class="keyword">-</span><span class="default">2 </span><span class="keyword">+ </span><span class="default">$spacing</span><span class="keyword">) );<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$blockwidth </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">( </span><span class="default">$width </span><span class="keyword">/ </span><span class="default">$blocks </span><span class="keyword">) - </span><span class="default">$spacing</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$short_side </span><span class="keyword">= </span><span class="default">min</span><span class="keyword">(</span><span class="default">$height</span><span class="keyword">-</span><span class="default">2</span><span class="keyword">, </span><span class="default">$blockwidth</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$blockvalue </span><span class="keyword">= </span><span class="default">100 </span><span class="keyword">/ </span><span class="default">$blocks</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$image </span><span class="keyword">= </span><span class="default">ImageCreate</span><span class="keyword">(</span><span class="default">$width</span><span class="keyword">,</span><span class="default">$height</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$img2 </span><span class="keyword">= </span><span class="default">ImageCreate</span><span class="keyword">(</span><span class="default">$width</span><span class="keyword">,</span><span class="default">$height</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Define base colors<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$back </span><span class="keyword">= </span><span class="default">ImageColorAllocate</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">255</span><span class="keyword">,</span><span class="default">255</span><span class="keyword">,</span><span class="default">255</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$blur </span><span class="keyword">= </span><span class="default">ImageColorAllocate</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">230</span><span class="keyword">,</span><span class="default">223</span><span class="keyword">,</span><span class="default">188</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$fill </span><span class="keyword">= </span><span class="default">ImageColorAllocate</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">188</span><span class="keyword">,</span><span class="default">182</span><span class="keyword">,</span><span class="default">133</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$lightblur </span><span class="keyword">= </span><span class="default">ImageColorAllocate</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">238</span><span class="keyword">,</span><span class="default">235</span><span class="keyword">,</span><span class="default">216</span><span class="keyword">); </span><span class="comment">// Would be nice to calculate these dynamically instead<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$lightfill </span><span class="keyword">= </span><span class="default">ImageColorAllocate</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">221</span><span class="keyword">,</span><span class="default">217</span><span class="keyword">,</span><span class="default">193</span><span class="keyword">); </span><span class="comment">// Would be nice to calculate these dynamically instead<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">ImagePaletteCopy</span><span class="keyword">(</span><span class="default">$img2</span><span class="keyword">,</span><span class="default">$image</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">ImageFilledRectangle</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$width</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">,</span><span class="default">$height</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">,</span><span class="default">$back</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">ImageFilledRectangle</span><span class="keyword">(</span><span class="default">$img2</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$width</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">,</span><span class="default">$height</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">,</span><span class="default">$back</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$short_side </span><span class="keyword">&lt; </span><span class="default">25</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$radius </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; else if (</span><span class="default">$short_side </span><span class="keyword">&lt; </span><span class="default">40</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$radius </span><span class="keyword">= </span><span class="default">3</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; else if (</span><span class="default">$short_side </span><span class="keyword">&lt; </span><span class="default">50</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$radius </span><span class="keyword">= </span><span class="default">5</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$radius </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$height</span><span class="keyword">/</span><span class="default">10</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$blocks</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$startX </span><span class="keyword">= (</span><span class="default">$blockwidth</span><span class="keyword">+</span><span class="default">$spacing</span><span class="keyword">)*</span><span class="default">$i </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ((</span><span class="default">9 </span><span class="keyword">&lt;= </span><span class="default">$short_side</span><span class="keyword">) &amp;&amp; (</span><span class="default">$short_side </span><span class="keyword">&lt;= </span><span class="default">16</span><span class="keyword">)) <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ImageFilledRectangle</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">$startX</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">$startX</span><span class="keyword">+</span><span class="default">$blockwidth</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">, </span><span class="default">$height</span><span class="keyword">-</span><span class="default">2</span><span class="keyword">, </span><span class="default">$lightblur</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ImageFilledRectangle</span><span class="keyword">(</span><span class="default">$img2</span><span class="keyword">, </span><span class="default">$startX</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">$startX</span><span class="keyword">+</span><span class="default">$blockwidth</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">, </span><span class="default">$height</span><span class="keyword">-</span><span class="default">2</span><span class="keyword">, </span><span class="default">$lightfill</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ImageRectangleWithRoundedCorners</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">$startX</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">$startX</span><span class="keyword">+</span><span class="default">$blockwidth</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">, </span><span class="default">$height</span><span class="keyword">-</span><span class="default">2</span><span class="keyword">, </span><span class="default">$radius</span><span class="keyword">, </span><span class="default">$blur</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ImageRectangleWithRoundedCorners</span><span class="keyword">(</span><span class="default">$img2</span><span class="keyword">, </span><span class="default">$startX</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">$startX</span><span class="keyword">+</span><span class="default">$blockwidth</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">, </span><span class="default">$height</span><span class="keyword">-</span><span class="default">2</span><span class="keyword">, </span><span class="default">$radius</span><span class="keyword">, </span><span class="default">$fill</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$barwidth </span><span class="keyword">= (</span><span class="default">$rating</span><span class="keyword">/</span><span class="default">100</span><span class="keyword">)*</span><span class="default">$blocks</span><span class="keyword">*</span><span class="default">$blockwidth</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$barwidth </span><span class="keyword">+= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$barwidth</span><span class="keyword">/</span><span class="default">$blockwidth</span><span class="keyword">)*</span><span class="default">$spacing</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">ImageCopy</span><span class="keyword">( </span><span class="default">$image</span><span class="keyword">, </span><span class="default">$img2</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$barwidth</span><span class="keyword">, </span><span class="default">$height </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">ImageDestroy</span><span class="keyword">(</span><span class="default">$img2</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">ImagePNG</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">ImageDestroy</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">);<br />
}<br />
<br />
function </span><span class="default">ImageRectangleWithRoundedCorners</span><span class="keyword">(&amp;</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$y1</span><span class="keyword">, </span><span class="default">$x2</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">, </span><span class="default">$radius</span><span class="keyword">, </span><span class="default">$color</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Draw rectangle without corners<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">ImageFilledRectangle</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$x1</span><span class="keyword">+</span><span class="default">$radius</span><span class="keyword">, </span><span class="default">$y1</span><span class="keyword">, </span><span class="default">$x2</span><span class="keyword">-</span><span class="default">$radius</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">, </span><span class="default">$color</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">ImageFilledRectangle</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$y1</span><span class="keyword">+</span><span class="default">$radius</span><span class="keyword">, </span><span class="default">$x2</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">-</span><span class="default">$radius</span><span class="keyword">, </span><span class="default">$color</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Draw circled corners<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">ImageFilledEllipse</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$x1</span><span class="keyword">+</span><span class="default">$radius</span><span class="keyword">, </span><span class="default">$y1</span><span class="keyword">+</span><span class="default">$radius</span><span class="keyword">, </span><span class="default">$radius</span><span class="keyword">*</span><span class="default">2</span><span class="keyword">, </span><span class="default">$radius</span><span class="keyword">*</span><span class="default">2</span><span class="keyword">, </span><span class="default">$color</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">ImageFilledEllipse</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$x2</span><span class="keyword">-</span><span class="default">$radius</span><span class="keyword">, </span><span class="default">$y1</span><span class="keyword">+</span><span class="default">$radius</span><span class="keyword">, </span><span class="default">$radius</span><span class="keyword">*</span><span class="default">2</span><span class="keyword">, </span><span class="default">$radius</span><span class="keyword">*</span><span class="default">2</span><span class="keyword">, </span><span class="default">$color</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">ImageFilledEllipse</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$x1</span><span class="keyword">+</span><span class="default">$radius</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">-</span><span class="default">$radius</span><span class="keyword">, </span><span class="default">$radius</span><span class="keyword">*</span><span class="default">2</span><span class="keyword">, </span><span class="default">$radius</span><span class="keyword">*</span><span class="default">2</span><span class="keyword">, </span><span class="default">$color</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">ImageFilledEllipse</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$x2</span><span class="keyword">-</span><span class="default">$radius</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">-</span><span class="default">$radius</span><span class="keyword">, </span><span class="default">$radius</span><span class="keyword">*</span><span class="default">2</span><span class="keyword">, </span><span class="default">$radius</span><span class="keyword">*</span><span class="default">2</span><span class="keyword">, </span><span class="default">$color</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="57743""></a>
  <div class="note">
   <strong class="user">me [a.t.] forestfactory [d.o.t.] de</strong>
   <a href="#57743" class="date">12-Oct-2005 04:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As of PHP 5, it seems to be no longer necessary to draw the rectangle from the upper left to the lower right corner. This led me into big trouble porting a script developed under PHP 5 to PHP 4.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="42815""></a>
  <div class="note">
   <strong class="user">michal dot kocarek at seznam dot cz</strong>
   <a href="#42815" class="date">30-May-2004 01:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to draw a rectangle with rounded corners, you can use this simple function... <br />
Rectangle starts at x1y1 and ends at x2y2. $radius defines radius of circled corner. <br />
<br />
&lt;?<br />
<br />
function ImageRectangleWithRoundedCorners(&amp;$im, $x1, $y1, $x2, $y2, $radius, $color) {<br />
// draw rectangle without corners<br />
imagefilledrectangle($im, $x1+$radius, $y1, $x2-$radius, $y2, $color);<br />
imagefilledrectangle($im, $x1, $y1+$radius, $x2, $y2-$radius, $color);<br />
// draw circled corners<br />
imagefilledellipse($im, $x1+$radius, $y1+$radius, $radius*2, $radius*2, $color);<br />
imagefilledellipse($im, $x2-$radius, $y1+$radius, $radius*2, $radius*2, $color);<br />
imagefilledellipse($im, $x1+$radius, $y2-$radius, $radius*2, $radius*2, $color);<br />
imagefilledellipse($im, $x2-$radius, $y2-$radius, $radius*2, $radius*2, $color);<br />
}<br />
<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="42734""></a>
  <div class="note">
   <strong class="user">sdonie at lgc dot com</strong>
   <a href="#42734" class="date">27-May-2004 10:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I made some simple additions to the 'ratings bar' example above to allow for different sizes. It also doesn't assume that global GET variables is turned on, and explicitly looks for parameters it needs.<br />
<br />
----<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">// copied from the PHP manual: <br />
// <a href="http://us3.php.net/manual/en/function.imagefilledrectangle.php" rel="nofollow" target="_blank">http://us3.php.net/manual/en/function.imagefilledrectangle.php</a><br />
//this needs to reside in its own php page<br />
//you can include that php page in your html as you would an image:<br />
//&lt;IMG SRC="makebar.php?rating=25.2&amp;width=200&amp;height=20" border="0"&gt;<br />
// rating is a percentage from 0 to 100.<br />
<br />
</span><span class="keyword">function </span><span class="default">drawRating</span><span class="keyword">(</span><span class="default">$rating</span><span class="keyword">) {<br />
&nbsp;&nbsp; </span><span class="default">$width </span><span class="keyword">= </span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'width'</span><span class="keyword">];<br />
&nbsp;&nbsp; </span><span class="default">$height </span><span class="keyword">= </span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'height'</span><span class="keyword">];<br />
&nbsp;&nbsp; if (</span><span class="default">$width </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$width </span><span class="keyword">= </span><span class="default">102</span><span class="keyword">;<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp; if (</span><span class="default">$height </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$height </span><span class="keyword">= </span><span class="default">10</span><span class="keyword">;<br />
&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; </span><span class="default">$rating </span><span class="keyword">= </span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'rating'</span><span class="keyword">];<br />
&nbsp;&nbsp; </span><span class="default">$ratingbar </span><span class="keyword">= ((</span><span class="default">$rating</span><span class="keyword">/</span><span class="default">100</span><span class="keyword">)*</span><span class="default">$width</span><span class="keyword">)-</span><span class="default">2</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; </span><span class="default">$image </span><span class="keyword">= </span><span class="default">imagecreate</span><span class="keyword">(</span><span class="default">$width</span><span class="keyword">,</span><span class="default">$height</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="comment">//colors<br />
&nbsp;&nbsp; </span><span class="default">$back </span><span class="keyword">= </span><span class="default">ImageColorAllocate</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">255</span><span class="keyword">,</span><span class="default">255</span><span class="keyword">,</span><span class="default">255</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">$border </span><span class="keyword">= </span><span class="default">ImageColorAllocate</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">$red </span><span class="keyword">= </span><span class="default">ImageColorAllocate</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">255</span><span class="keyword">,</span><span class="default">60</span><span class="keyword">,</span><span class="default">75</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">$fill </span><span class="keyword">= </span><span class="default">ImageColorAllocate</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">44</span><span class="keyword">,</span><span class="default">81</span><span class="keyword">,</span><span class="default">150</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; </span><span class="default">ImageFilledRectangle</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$width</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">,</span><span class="default">$height</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">,</span><span class="default">$back</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">ImageFilledRectangle</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">,</span><span class="default">$ratingbar</span><span class="keyword">,</span><span class="default">$height</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">,</span><span class="default">$fill</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">ImageRectangle</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$width</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">,</span><span class="default">$height</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">,</span><span class="default">$border</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">imagePNG</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">imagedestroy</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">Header</span><span class="keyword">(</span><span class="string">"Content-type: image/png"</span><span class="keyword">);<br />
</span><span class="default">drawRating</span><span class="keyword">(</span><span class="default">$rating</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="39123""></a>
  <div class="note">
   <strong class="user">booga</strong>
   <a href="#39123" class="date">17-Jan-2004 05:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
a simple way of using imagerectangle to create a percentage bar<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">//this needs to reside in its own php page<br />
//you can include that php page in your html as you would an image:<br />
//&lt;IMG SRC="ratingpng.php?rating=25.2" border="0"&gt;<br />
<br />
</span><span class="keyword">function </span><span class="default">drawRating</span><span class="keyword">(</span><span class="default">$rating</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$image </span><span class="keyword">= </span><span class="default">imagecreate</span><span class="keyword">(</span><span class="default">102</span><span class="keyword">,</span><span class="default">10</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$back </span><span class="keyword">= </span><span class="default">ImageColorAllocate</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">255</span><span class="keyword">,</span><span class="default">255</span><span class="keyword">,</span><span class="default">255</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$border </span><span class="keyword">= </span><span class="default">ImageColorAllocate</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$red </span><span class="keyword">= </span><span class="default">ImageColorAllocate</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">255</span><span class="keyword">,</span><span class="default">60</span><span class="keyword">,</span><span class="default">75</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$fill </span><span class="keyword">= </span><span class="default">ImageColorAllocate</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">44</span><span class="keyword">,</span><span class="default">81</span><span class="keyword">,</span><span class="default">150</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">ImageFilledRectangle</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">101</span><span class="keyword">,</span><span class="default">9</span><span class="keyword">,</span><span class="default">$back</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">ImageFilledRectangle</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">,</span><span class="default">$rating</span><span class="keyword">,</span><span class="default">9</span><span class="keyword">,</span><span class="default">$fill</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">ImageRectangle</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">101</span><span class="keyword">,</span><span class="default">9</span><span class="keyword">,</span><span class="default">$border</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">imagePNG</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">imagedestroy</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">Header</span><span class="keyword">(</span><span class="string">"Content-type: image/png"</span><span class="keyword">);<br />
</span><span class="default">drawRating</span><span class="keyword">(</span><span class="default">$rating</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="20333""></a>
  <div class="note">
   <strong class="user">ivank at 2xtreme dot net</strong>
   <a href="#20333" class="date">30-Mar-2002 04:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As stated above, it needs to go from the top left corner to the bottom right corner. Just use this to flip it if neccessary:<br />
<br />
// flip them if neccessary (x3, y3 are temp vars)<br />
if($x1 &gt; $x2) { $x3 = $x2; $x2 = $x1; $x1 = $x3; }<br />
if($y1 &gt; $y2) { $y3 = $y2; $y2 = $y1; $y1 = $y3; }<br />
ImageFilledRectangle($im, $x1, $y1, $x2, $y2, $color);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="17216""></a>
  <div class="note">
   <strong class="user">saramg at uclink dot berkeley dot edu</strong>
   <a href="#17216" class="date">29-Nov-2001 07:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Important quirk to note:<br />
<br />
While imagerectangle will allow you to use a different order of your coordinates (such as bottom-left to upper-right), imagefilledrectangle will only work correctly if you use top-left to bottom-right as indicated in the docs.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.imagefilledpolygon.html">imagefilledpolygon</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.imagefilltoborder.html">imagefilltoborder</a></div>
 <div class="up"><a href="ref.image.html">GD and Image Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
