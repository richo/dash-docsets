<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Searches the array for a given value and returns the corresponding key if successful</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.array-reverse.html">array_reverse</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.array-shift.html">array_shift</a></div>
 <div class="up"><a href="ref.array.html">Array Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.array-search" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">array_search</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.0.5, PHP 5)</p><p class="refpurpose"><span class="refname">array_search</span> &mdash; <span class="dc-title">Searches the array for a given value and returns the corresponding key if successful</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.array-search-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <span class="methodname"><b>array_search</b></span>
    ( <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <tt class="parameter">$needle</tt></span>
   , <span class="methodparam"><span class="type">array</span> <tt class="parameter">$haystack</tt></span>
   [, <span class="methodparam"><span class="type">bool</span> <tt class="parameter">$strict</tt><span class="initializer"> = false</span></span>
  ] )</div>

  <p class="para rdfs-comment">
   Searches <i><tt class="parameter">haystack</tt></i> for <i><tt class="parameter">needle</tt></i>.
  </p>
 </div>

 <div class="refsect1 parameters" id="refsect1-function.array-search-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><i><tt class="parameter">needle</tt></i></span>
     <dd>

      <p class="para">
       The searched value.
      </p>
      <blockquote class="note"><p><b class="note">Note</b>: 
       <p class="para">
        If <i><tt class="parameter">needle</tt></i> is a string, the comparison is done
        in a case-sensitive manner.
       </p>
      </p></blockquote>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">haystack</tt></i></span>
     <dd>

      <p class="para">
       The array.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">strict</tt></i></span>
     <dd>

      <p class="para">
       If the third parameter <i><tt class="parameter">strict</tt></i> is set to <b><tt>TRUE</tt></b>
       then the <span class="function"><b>array_search()</b></span> function will search for
       <em class="emphasis">identical</em> elements in the
       <i><tt class="parameter">haystack</tt></i>. This means it will also check the
       <a href="language.types.html" class="link">types</a> of the
       <i><tt class="parameter">needle</tt></i> in the <i><tt class="parameter">haystack</tt></i>,
       and objects must be the same instance.
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.array-search-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns the key for <i><tt class="parameter">needle</tt></i> if it is found in the
   array, <b><tt>FALSE</tt></b> otherwise.
  </p>
  <p class="para">
   If <i><tt class="parameter">needle</tt></i> is found in <i><tt class="parameter">haystack</tt></i>
   more than once, the first matching key is returned. To return the keys for
   all matching values, use <span class="function"><a href="function.array-keys.html" class="function">array_keys()</a></span> with the optional
   <i><tt class="parameter">search_value</tt></i> parameter instead.
  </p>
  <div class="warning"><b class="warning">Warning</b><p class="simpara">This function may
return Boolean <b><tt>FALSE</tt></b>, but may also return a non-Boolean value which
evaluates to <b><tt>FALSE</tt></b>. Please read the section on <a href="language.types.boolean.html" class="link">Booleans</a> for more
information. Use <a href="language.operators.comparison.html" class="link">the ===
operator</a> for testing the return value of this
function.</p></div>
 </div>

 <div class="refsect1 changelog" id="refsect1-function.array-search-changelog">
  <h3 class="title">Changelog</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead valign="middle">
      <tr valign="middle">
       <th>Version</th>
       <th>Description</th>
      </tr>

     </thead>

     <tbody valign="middle" class="tbody">
      <tr valign="middle">
       <td align="left">4.2.0</td>
       <td align="left">
        Prior to PHP 4.2.0, <span class="function"><b>array_search()</b></span> returns <b><tt>NULL</tt></b>
        on failure instead of <b><tt>FALSE</tt></b>.
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>

 <div class="refsect1 examples" id="refsect1-function.array-search-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   <div class="example" id="example-4525">
    <p><b>Example #1 <span class="function"><b>array_search()</b></span> example</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$array&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #0000BB">0&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'blue'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'red'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'green'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'red'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$key&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">array_search</span><span style="color: #007700">(</span><span style="color: #DD0000">'green'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$array</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;$key&nbsp;=&nbsp;2;<br /></span><span style="color: #0000BB">$key&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">array_search</span><span style="color: #007700">(</span><span style="color: #DD0000">'red'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$array</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;$key&nbsp;=&nbsp;1;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>

 <div class="refsect1 seealso" id="refsect1-function.array-search-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.array-keys.html" class="function" rel="rdfs-seeAlso">array_keys()</a> - Return all the keys or a subset of the keys of an array</span></li>
    <li class="member"><span class="function"><a href="function.array-values.html" class="function" rel="rdfs-seeAlso">array_values()</a> - Return all the values of an array</span></li>
    <li class="member"><span class="function"><a href="function.array-key-exists.html" class="function" rel="rdfs-seeAlso">array_key_exists()</a> - Checks if the given key or index exists in the array</span></li>
    <li class="member"><span class="function"><a href="function.in-array.html" class="function" rel="rdfs-seeAlso">in_array()</a> - Checks if a value exists in an array</span></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="107223""></a>
  <div class="note">
   <strong class="user">nsstl</strong>
   <a href="#107223" class="date">22-Jan-2012 09:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Some thing that I wrote from a while, for what ever usefull purpose<br />
<br />
This retrieves recursively a value from an array using a path-like notation.<br />
&nbsp;<br />
&nbsp;&nbsp; with: <br />
&nbsp;&nbsp; &nbsp; $delimiter&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; path delimiter<br />
&nbsp;&nbsp; &nbsp; $strict&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if false, the search will allow gaps between path's components&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">path_through_array</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">, </span><span class="default">$delimiter </span><span class="keyword">= </span><span class="string">'.'</span><span class="keyword">, </span><span class="default">$strict </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">)<br />
{<br />
&nbsp; </span><span class="default">$path_token </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="default">$delimiter</span><span class="keyword">, </span><span class="default">$path</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$head </span><span class="keyword">= </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$path_token</span><span class="keyword">);<br />
<br />
&nbsp; if (isset(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$head</span><span class="keyword">]) &amp;&amp; (</span><span class="default">0 </span><span class="keyword">== </span><span class="default">count</span><span class="keyword">(</span><span class="default">$path_token</span><span class="keyword">)))<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$head</span><span class="keyword">];<br />
&nbsp; }<br />
&nbsp; else if (isset(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$head</span><span class="keyword">]))<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">path_through_array</span><span class="keyword">(</span><span class="default">implode</span><span class="keyword">(</span><span class="default">$delimiter</span><span class="keyword">, </span><span class="default">$path_token</span><span class="keyword">), </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$head</span><span class="keyword">], </span><span class="default">$delimiter</span><span class="keyword">, </span><span class="default">$strict</span><span class="keyword">);<br />
&nbsp; }<br />
&nbsp; else if (</span><span class="default">$strict </span><span class="keyword">== </span><span class="default">true</span><span class="keyword">)<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp; }<br />
<br />
&nbsp; foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">)<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$found </span><span class="keyword">= </span><span class="default">path_through_array</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">, </span><span class="default">$delimiter</span><span class="keyword">, </span><span class="default">$strict</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; if(</span><span class="default">false </span><span class="keyword">!= </span><span class="default">$found</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$found</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">//use:<br />
<br />
</span><span class="default">$array1 </span><span class="keyword">= array(</span><span class="string">'path' </span><span class="keyword">=&gt; array(</span><span class="string">'to' </span><span class="keyword">=&gt; array(</span><span class="string">'get' </span><span class="keyword">=&gt; array(</span><span class="string">'something' </span><span class="keyword">=&gt; </span><span class="string">'bar'</span><span class="keyword">)), </span><span class="string">'somethingelse'</span><span class="keyword">), </span><span class="string">'foo' </span><span class="keyword">=&gt; </span><span class="string">'anotherthing'</span><span class="keyword">);<br />
<br />
</span><span class="default">$val1 </span><span class="keyword">= </span><span class="default">path_through_array</span><span class="keyword">(</span><span class="string">'path.to.get.something'</span><span class="keyword">, </span><span class="default">$array1</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// =&gt; will return : 'bar'<br />
</span><span class="default">$val2 </span><span class="keyword">= </span><span class="default">path_through_array</span><span class="keyword">(</span><span class="string">'path.to.get'</span><span class="keyword">, </span><span class="default">$array1</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// =&gt; will return : array('something'=&gt;'bar')<br />
</span><span class="default">$val3 </span><span class="keyword">= </span><span class="default">path_through_array</span><span class="keyword">(</span><span class="string">'path/to/get/something'</span><span class="keyword">, </span><span class="default">$array1</span><span class="keyword">, </span><span class="string">'/'</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// =&gt; will return : 'bar'<br />
</span><span class="default">$val4 </span><span class="keyword">= </span><span class="default">path_through_array</span><span class="keyword">(</span><span class="string">'path.to.something'</span><span class="keyword">, </span><span class="default">$array1</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// =&gt; will return : 'bar'<br />
</span><span class="default">$val5 </span><span class="keyword">= </span><span class="default">path_through_array</span><span class="keyword">(</span><span class="string">'path.to.something'</span><span class="keyword">, </span><span class="default">$array1</span><span class="keyword">, </span><span class="string">'.'</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// =&gt; will return : false</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106904""></a>
  <div class="note">
   <strong class="user">Ouz zcan (mail at oguzozcan dot com)</strong>
   <a href="#106904" class="date">17-Dec-2011 02:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is a multidimensional recursive find function :<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">GetArrKey</span><span class="keyword">( </span><span class="default">$findArr</span><span class="keyword">, </span><span class="default">$key_arr</span><span class="keyword">, </span><span class="default">$depth</span><span class="keyword">=</span><span class="default">0 </span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if( </span><span class="default">count</span><span class="keyword">(</span><span class="default">$key_arr</span><span class="keyword">) &lt;= </span><span class="default">$depth </span><span class="keyword">|| !</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$key_arr</span><span class="keyword">[</span><span class="default">$depth</span><span class="keyword">], </span><span class="default">$findArr</span><span class="keyword">) )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">NULL</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else if( </span><span class="default">count</span><span class="keyword">(</span><span class="default">$key_arr</span><span class="keyword">) == </span><span class="default">$depth</span><span class="keyword">+</span><span class="default">1 </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$findArr</span><span class="keyword">[</span><span class="default">$key_arr</span><span class="keyword">[</span><span class="default">$depth</span><span class="keyword">]];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">self</span><span class="keyword">::</span><span class="default">GetArrKey</span><span class="keyword">( </span><span class="default">$findArr</span><span class="keyword">[</span><span class="default">$key_arr</span><span class="keyword">[</span><span class="default">$depth</span><span class="keyword">]], </span><span class="default">$key_arr</span><span class="keyword">, </span><span class="default">$depth</span><span class="keyword">+</span><span class="default">1 </span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Using :<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $findArray </span><span class="keyword">= array( </span><span class="string">"first_dim" </span><span class="keyword">=&gt; array( </span><span class="string">"first_dim_in_1" </span><span class="keyword">=&gt; array( </span><span class="string">"first_dim_in_1_val_1"</span><span class="keyword">, </span><span class="string">"first_dim_in_1_val_2"</span><span class="keyword">, </span><span class="string">"first_dim_in_1_val_3" </span><span class="keyword">), </span><span class="string">"first_dim_in_2" </span><span class="keyword">=&gt; array( </span><span class="string">"first_dim_in_2_val_1"</span><span class="keyword">, </span><span class="string">"first_dim_in_2_val_2"</span><span class="keyword">, </span><span class="string">"first_dim_in_2_val_3" </span><span class="keyword">) ), </span><span class="string">"second_dim" </span><span class="keyword">=&gt; array( </span><span class="string">"second_dim_in" </span><span class="keyword">=&gt; </span><span class="string">"test"</span><span class="keyword">, </span><span class="string">"second_dim_in_val_1"</span><span class="keyword">));<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">( </span><span class="default">GetArrKey</span><span class="keyword">( </span><span class="default">$findArray</span><span class="keyword">, array( </span><span class="string">"first_dim"</span><span class="keyword">, </span><span class="string">"first_dim_in_2" </span><span class="keyword">) ) );<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">/*<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Prints :<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array( "first_dim_in_2_val_1", "first_dim_in_2_val_2", "first_dim_in_2_val_3" )<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; */<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //----------------------------------------------------//<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">GetArrKey</span><span class="keyword">( </span><span class="default">$findArray</span><span class="keyword">, array( </span><span class="string">"first_dim"</span><span class="keyword">, </span><span class="string">"first_dim_in_2"</span><span class="keyword">, </span><span class="default">0 </span><span class="keyword">) ) );<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">/*<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Prints :<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; string(20) =&gt; "first_dim_in_2_val_1"<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; */<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //----------------------------------------------------//<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">GetArrKey</span><span class="keyword">( </span><span class="default">$findArray</span><span class="keyword">, array( </span><span class="string">"second_dim"</span><span class="keyword">, </span><span class="default">0 </span><span class="keyword">) ) );<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">/*<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Prints :<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; string(4) =&gt; "test"<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; */<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //----------------------------------------------------//<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">GetArrKey</span><span class="keyword">( </span><span class="default">$findArray</span><span class="keyword">, array( </span><span class="string">"second_dim"</span><span class="keyword">, </span><span class="default">0 </span><span class="keyword">) ) );<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">/*<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Prints :<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; string(4) =&gt; "test"<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; */<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //----------------------------------------------------//<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">GetArrKey</span><span class="keyword">( </span><span class="default">$findArray</span><span class="keyword">, array( </span><span class="string">"second_dim"</span><span class="keyword">, </span><span class="default">1 </span><span class="keyword">) ) );<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">/*<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Prints :<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; string(19) =&gt; "second_dim_in_val_1"<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; */<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //----------------------------------------------------//<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">GetArrKey</span><span class="keyword">( </span><span class="default">$findArray</span><span class="keyword">, array( </span><span class="string">"second_dim"</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">1 </span><span class="keyword">) ) );<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">/*<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Prints :<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; std_object =&gt; NULL<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; */<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106107""></a>
  <div class="note">
   <strong class="user">revoke</strong>
   <a href="#106107" class="date">11-Oct-2011 04:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Better solution of multidimensional searching.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">multidimensional_search</span><span class="keyword">(</span><span class="default">$parents</span><span class="keyword">, </span><span class="default">$searched</span><span class="keyword">) {<br />
&nbsp; if (empty(</span><span class="default">$searched</span><span class="keyword">) || empty(</span><span class="default">$parents</span><span class="keyword">)) {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp; }<br />
&nbsp;<br />
&nbsp; foreach (</span><span class="default">$parents </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$exists </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$searched </span><span class="keyword">as </span><span class="default">$skey </span><span class="keyword">=&gt; </span><span class="default">$svalue</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$exists </span><span class="keyword">= (</span><span class="default">$exists </span><span class="keyword">&amp;&amp; IsSet(</span><span class="default">$parents</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][</span><span class="default">$skey</span><span class="keyword">]) &amp;&amp; </span><span class="default">$parents</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][</span><span class="default">$skey</span><span class="keyword">] == </span><span class="default">$svalue</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$exists</span><span class="keyword">){ return </span><span class="default">$key</span><span class="keyword">; }<br />
&nbsp; }<br />
&nbsp;<br />
&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$parents </span><span class="keyword">= array();<br />
</span><span class="default">$parents</span><span class="keyword">[] = array(</span><span class="string">'date'</span><span class="keyword">=&gt;</span><span class="default">1320883200</span><span class="keyword">, </span><span class="string">'uid'</span><span class="keyword">=&gt;</span><span class="default">3</span><span class="keyword">);<br />
</span><span class="default">$parents</span><span class="keyword">[] = array(</span><span class="string">'date'</span><span class="keyword">=&gt;</span><span class="default">1320883200</span><span class="keyword">, </span><span class="string">'uid'</span><span class="keyword">=&gt;</span><span class="default">5</span><span class="keyword">);<br />
</span><span class="default">$parents</span><span class="keyword">[] = array(</span><span class="string">'date'</span><span class="keyword">=&gt;</span><span class="default">1318204800</span><span class="keyword">, </span><span class="string">'uid'</span><span class="keyword">=&gt;</span><span class="default">5</span><span class="keyword">);<br />
<br />
echo </span><span class="default">multidimensional_search</span><span class="keyword">(</span><span class="default">$parents</span><span class="keyword">, array(</span><span class="string">'date'</span><span class="keyword">=&gt;</span><span class="default">1320883200</span><span class="keyword">, </span><span class="string">'uid'</span><span class="keyword">=&gt;</span><span class="default">5</span><span class="keyword">)); </span><span class="comment">// 1<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106056""></a>
  <div class="note">
   <strong class="user">stooshie at gmail dot com</strong>
   <a href="#106056" class="date">06-Oct-2011 02:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Example of a recursive binary search that returns the index rather than boolean.<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// returns the index of needle in haystack<br />
</span><span class="keyword">function </span><span class="default">binSearch</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// n is only needed if counting depth of search<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">global </span><span class="default">$n</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$n</span><span class="keyword">++;<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// get the length of passed array<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$l </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// if length is 0, problem<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">$l </span><span class="keyword">&lt;= </span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return -</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// get the mid element<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$m </span><span class="keyword">= ((</span><span class="default">$l</span><span class="keyword">+(</span><span class="default">$l</span><span class="keyword">%</span><span class="default">2</span><span class="keyword">))/</span><span class="default">2</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// if mid &gt;= length (e.g. l=1)<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">$m </span><span class="keyword">&gt;= </span><span class="default">$l</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$m </span><span class="keyword">= </span><span class="default">$m</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// get the indexed element to compare to the passed element and branch accordingly<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$compare </span><span class="keyword">= </span><span class="default">$haystack</span><span class="keyword">[</span><span class="default">$m</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; switch(</span><span class="default">true</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; case(</span><span class="default">$compare</span><span class="keyword">&gt;</span><span class="default">$needle</span><span class="keyword">):<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// recurse on the lower half<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new_haystack </span><span class="keyword">= </span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$m</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$c </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$new_haystack</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$r </span><span class="keyword">= </span><span class="default">binSearch</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$new_haystack</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// return current index - (length of lower half - found index in lower half)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$m </span><span class="keyword">- (</span><span class="default">$c </span><span class="keyword">- </span><span class="default">$r</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; case(</span><span class="default">$compare</span><span class="keyword">&lt;</span><span class="default">$needle</span><span class="keyword">):<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// recurse on the upper half<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new_haystack </span><span class="keyword">= </span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$m</span><span class="keyword">, (</span><span class="default">$l</span><span class="keyword">-</span><span class="default">$m</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$c </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$new_haystack</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$r </span><span class="keyword">= </span><span class="default">binSearch</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$new_haystack</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// return current position + found index in upper half<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$m </span><span class="keyword">+ </span><span class="default">$r</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; case(</span><span class="default">$compare</span><span class="keyword">==</span><span class="default">$needle</span><span class="keyword">):<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// found it, so return index<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$m</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105955""></a>
  <div class="note">
   <strong class="user">Dave C</strong>
   <a href="#105955" class="date">27-Sep-2011 01:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a version of binary search that is done via recursion instead of iteration.&nbsp; Remember that your data needs to be presorted!<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">static function </span><span class="default">Bin_Search</span><span class="keyword">(&amp;</span><span class="default">$needle</span><span class="keyword">, &amp;</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">, </span><span class="default">$end</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$end </span><span class="keyword">&lt; </span><span class="default">$start</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$mid </span><span class="keyword">= (int)((</span><span class="default">$end </span><span class="keyword">- </span><span class="default">$start</span><span class="keyword">) / </span><span class="default">2</span><span class="keyword">) + </span><span class="default">$start</span><span class="keyword">;<br />
&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$haystack</span><span class="keyword">[</span><span class="default">$mid</span><span class="keyword">] &gt; </span><span class="default">$needle</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">Bin_Search</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">, </span><span class="default">$mid </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else if(</span><span class="default">$haystack</span><span class="keyword">[</span><span class="default">$mid</span><span class="keyword">] &lt; </span><span class="default">$needle</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">Bin_Search</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$mid </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">, </span><span class="default">$end</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104739""></a>
  <div class="note">
   <strong class="user">Jordan Rutty (ruttyj92[-at-][hotmailcom)</strong>
   <a href="#104739" class="date">04-Jul-2011 10:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Array AFTER/BEFORE Function<br />
<br />
function made to mimic the jQuery function to insert items/arrays into another array before or after a specific key. It is split into two functions for reuse to find the offset of a key. it detects if the array is associative (can also be manually controlled) and adds the keys where needed. if the inserted array is associative then any overlapping keys will be replaced by the new ones.<br />
<br />
array_insert(array &amp;$original , mixed $insert=null , var $position='after' , $key=null [, $keep_keys=true])<br />
<br />
options for $position = (after|before)<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">key_offset</span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$searchKey</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">) &amp;&amp; </span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$searchKey</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$counter </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$searchKey </span><span class="keyword">== </span><span class="default">$key</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$counter</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$counter</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
function </span><span class="default">array_insert</span><span class="keyword">(&amp;</span><span class="default">$original</span><span class="keyword">, </span><span class="default">$insert</span><span class="keyword">=</span><span class="default">null</span><span class="keyword">, </span><span class="default">$position</span><span class="keyword">=</span><span class="string">'after'</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">=</span><span class="default">null</span><span class="keyword">, </span><span class="default">$sens</span><span class="keyword">=</span><span class="default">true</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; if(!empty(</span><span class="default">$insert</span><span class="keyword">)){&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$after </span><span class="keyword">= </span><span class="default">$position </span><span class="keyword">== </span><span class="string">'after' </span><span class="keyword">? </span><span class="default">true </span><span class="keyword">: </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$insert </span><span class="keyword">= (array)</span><span class="default">$insert</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$assoc </span><span class="keyword">= (</span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$insert</span><span class="keyword">) !== </span><span class="default">range</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">count</span><span class="keyword">(</span><span class="default">$insert</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">));&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$keep_keys </span><span class="keyword">= </span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$insert</span><span class="keyword">) || !</span><span class="default">$assoc </span><span class="keyword">|| </span><span class="default">$sens</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(!empty(</span><span class="default">$key</span><span class="keyword">) &amp;&amp; </span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$original</span><span class="keyword">)){&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$start </span><span class="keyword">= </span><span class="default">key_offset</span><span class="keyword">(</span><span class="default">$original</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$start </span><span class="keyword">= </span><span class="default">$after </span><span class="keyword">? </span><span class="default">$start</span><span class="keyword">+</span><span class="default">1 </span><span class="keyword">: </span><span class="default">$start</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(!</span><span class="default">$keep_keys</span><span class="keyword">){&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_Splice</span><span class="keyword">(</span><span class="default">$original</span><span class="keyword">,</span><span class="default">$start</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$insert</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$keys </span><span class="keyword">= </span><span class="default">array_Keys</span><span class="keyword">(</span><span class="default">$original</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$values </span><span class="keyword">= </span><span class="default">array_Values</span><span class="keyword">(</span><span class="default">$original</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$insert </span><span class="keyword">= (array)</span><span class="default">$insert</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rKeys </span><span class="keyword">= </span><span class="default">array_Keys</span><span class="keyword">(</span><span class="default">$insert</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rValues </span><span class="keyword">= </span><span class="default">array_Values</span><span class="keyword">(</span><span class="default">$insert</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_Splice</span><span class="keyword">(</span><span class="default">$keys</span><span class="keyword">,</span><span class="default">$start</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$rKeys</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_Splice</span><span class="keyword">(</span><span class="default">$values</span><span class="keyword">,</span><span class="default">$start</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$rValues</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$original </span><span class="keyword">= </span><span class="default">array_Combine</span><span class="keyword">(</span><span class="default">$keys</span><span class="keyword">,</span><span class="default">$values</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$original </span><span class="keyword">= </span><span class="default">$after </span><span class="keyword">? </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$original</span><span class="keyword">, </span><span class="default">$insert</span><span class="keyword">) : </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$insert</span><span class="keyword">, </span><span class="default">$original</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">$insert </span><span class="keyword">= array(</span><span class="string">'omg'</span><span class="keyword">=&gt; </span><span class="string">'it works'</span><span class="keyword">, </span><span class="string">'this_is' </span><span class="keyword">=&gt; </span><span class="string">'awsome'</span><span class="keyword">, </span><span class="string">'r' </span><span class="keyword">=&gt;</span><span class="default">103</span><span class="keyword">,</span><span class="default">104</span><span class="keyword">);<br />
</span><span class="default">$insert2 </span><span class="keyword">= </span><span class="default">range</span><span class="keyword">(</span><span class="default">11</span><span class="keyword">,</span><span class="default">15</span><span class="keyword">);<br />
</span><span class="default">$insert3 </span><span class="keyword">= array(</span><span class="default">100</span><span class="keyword">=&gt;</span><span class="default">101</span><span class="keyword">,</span><span class="default">102</span><span class="keyword">,</span><span class="default">103</span><span class="keyword">,</span><span class="default">104</span><span class="keyword">);<br />
<br />
</span><span class="default">$original</span><span class="keyword">=</span><span class="default">range</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">,</span><span class="default">10</span><span class="keyword">);<br />
</span><span class="default">array_insert</span><span class="keyword">(</span><span class="default">$original</span><span class="keyword">, </span><span class="default">$insert</span><span class="keyword">, </span><span class="string">'after'</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">);<br />
<br />
</span><span class="default">$original</span><span class="keyword">=</span><span class="default">range</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">,</span><span class="default">10</span><span class="keyword">);<br />
</span><span class="default">array_insert</span><span class="keyword">(</span><span class="default">$original</span><span class="keyword">, </span><span class="default">$insert</span><span class="keyword">, </span><span class="string">'after'</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">, </span><span class="default">false</span><span class="keyword">);<br />
<br />
</span><span class="default">$original</span><span class="keyword">=</span><span class="default">range</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">,</span><span class="default">10</span><span class="keyword">);<br />
</span><span class="default">array_insert</span><span class="keyword">(</span><span class="default">$original</span><span class="keyword">, </span><span class="default">$insert2</span><span class="keyword">, </span><span class="string">'after'</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">);<br />
<br />
</span><span class="default">$original</span><span class="keyword">=</span><span class="default">range</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">,</span><span class="default">10</span><span class="keyword">);<br />
</span><span class="default">array_insert</span><span class="keyword">(</span><span class="default">$original</span><span class="keyword">, </span><span class="default">$insert3</span><span class="keyword">, </span><span class="string">'after'</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">);<br />
<br />
</span><span class="comment">/*<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; 104<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; 2<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; 3<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; 4<br />
&nbsp;&nbsp;&nbsp; [4] =&gt; 5<br />
&nbsp;&nbsp;&nbsp; [omg] =&gt; it works<br />
&nbsp;&nbsp;&nbsp; [this_is] =&gt; awsome<br />
&nbsp;&nbsp;&nbsp; [r] =&gt; 103<br />
&nbsp;&nbsp;&nbsp; [5] =&gt; 6<br />
&nbsp;&nbsp;&nbsp; [6] =&gt; 7<br />
&nbsp;&nbsp;&nbsp; [7] =&gt; 8<br />
&nbsp;&nbsp;&nbsp; [8] =&gt; 9<br />
&nbsp;&nbsp;&nbsp; [9] =&gt; 10<br />
)<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; 1<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; 2<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; 3<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; 4<br />
&nbsp;&nbsp;&nbsp; [4] =&gt; 5<br />
&nbsp;&nbsp;&nbsp; [5] =&gt; it works<br />
&nbsp;&nbsp;&nbsp; [6] =&gt; awsome<br />
&nbsp;&nbsp;&nbsp; [7] =&gt; 103<br />
&nbsp;&nbsp;&nbsp; [8] =&gt; 104<br />
&nbsp;&nbsp;&nbsp; [9] =&gt; 6<br />
&nbsp;&nbsp;&nbsp; [10] =&gt; 7<br />
&nbsp;&nbsp;&nbsp; [11] =&gt; 8<br />
&nbsp;&nbsp;&nbsp; [12] =&gt; 9<br />
&nbsp;&nbsp;&nbsp; [13] =&gt; 10<br />
)<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; 11<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; 12<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; 13<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; 14<br />
&nbsp;&nbsp;&nbsp; [4] =&gt; 15<br />
&nbsp;&nbsp;&nbsp; [5] =&gt; 6<br />
&nbsp;&nbsp;&nbsp; [6] =&gt; 7<br />
&nbsp;&nbsp;&nbsp; [7] =&gt; 8<br />
&nbsp;&nbsp;&nbsp; [8] =&gt; 9<br />
&nbsp;&nbsp;&nbsp; [9] =&gt; 10<br />
)<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; 1<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; 2<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; 3<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; 4<br />
&nbsp;&nbsp;&nbsp; [4] =&gt; 5<br />
&nbsp;&nbsp;&nbsp; [100] =&gt; 101<br />
&nbsp;&nbsp;&nbsp; [101] =&gt; 102<br />
&nbsp;&nbsp;&nbsp; [102] =&gt; 103<br />
&nbsp;&nbsp;&nbsp; [103] =&gt; 104<br />
&nbsp;&nbsp;&nbsp; [5] =&gt; 6<br />
&nbsp;&nbsp;&nbsp; [6] =&gt; 7<br />
&nbsp;&nbsp;&nbsp; [7] =&gt; 8<br />
&nbsp;&nbsp;&nbsp; [8] =&gt; 9<br />
&nbsp;&nbsp;&nbsp; [9] =&gt; 10<br />
)<br />
*/<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102388""></a>
  <div class="note">
   <strong class="user">willemvannus at gmail dot com</strong>
   <a href="#102388" class="date">11-Feb-2011 03:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I found a simple script to remove certain values from a array.<br />
I use it when using the scandir function, because i don't want certain items in the array (like the ., .. folders and the thumbs.db)<br />
<br />
<span class="default">&lt;?php<br />
$music </span><span class="keyword">= </span><span class="default">scandir</span><span class="keyword">(</span><span class="string">"music"</span><span class="keyword">);<br />
unset(</span><span class="default">$music</span><span class="keyword">[</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">'.'</span><span class="keyword">,</span><span class="default">$music</span><span class="keyword">)]);&nbsp; </span><span class="comment">// Removing the . directory<br />
</span><span class="keyword">unset(</span><span class="default">$music</span><span class="keyword">[</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">'..'</span><span class="keyword">,</span><span class="default">$music</span><span class="keyword">)]); </span><span class="comment">// Removing the .. directory<br />
</span><span class="keyword">unset(</span><span class="default">$music</span><span class="keyword">[</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">'Thumbs.db'</span><span class="keyword">,</span><span class="default">$music</span><span class="keyword">)]); </span><span class="comment">// Removing the Thumbs.db file<br />
</span><span class="keyword">unset(</span><span class="default">$music</span><span class="keyword">[</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">'thumbs.db'</span><span class="keyword">,</span><span class="default">$music</span><span class="keyword">)]); </span><span class="comment">// Removing the thumbs.db file<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101932""></a>
  <div class="note">
   <strong class="user">syrgjyn at gmail dot com</strong>
   <a href="#101932" class="date">18-Jan-2011 07:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Recently I had to get all locations of a one-dimensional non-associative array (needle, not array of needles) in another one-dimensional non-associative array (haystack) without using more memory than necessary. I haven't found any satisfactory way to do that, so I wrote the following function, inspired by the array_slice() source code.<br />
<br />
Notes:<br />
0. $offset, $length and $strict behave the same way as those for array_slice() and array_search();<br />
1. this function doesn't use foreach or array_slice(), neither does it modify $needle or $haystack, so no temporary copies are needed/created, regardless of whether the arguments are passed by reference or not -- useful when dealing with very large haystacks and needles;<br />
2. $needle and $haystack are typecast to array if they're not arrays;<br />
3. you can specify the $start position to start searching from in the $haystack (default is 0);<br />
4. negative $start values can be used if you want to specify the starting position from the end of $haystack.<br />
5. you can specify the search $length, starting from $start; a negative value stops the search at that many elements from the end of the haystack;<br />
6. pass true as the fifth argument to do a strict search (not tested on objects);<br />
7. the function returns an array if it finds one or more occurrences of $needle in the $haystack, false on failure.<br />
8. keys are preserved;<br />
9. if you want to get only the first location of $needle in $haystack, returned as an integer rather than array -- in other words, to make an array_match() function instead of array_match_all() -- remove this line:<br />
<br />
&nbsp; $results = array();<br />
<br />
and replace:<br />
<br />
&nbsp;&nbsp;&nbsp; if ($found)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; $results[] = $i;<br />
&nbsp;&nbsp; &nbsp;&nbsp; $i += $ncount - 1;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
&nbsp; if (!empty($results))<br />
&nbsp;&nbsp;&nbsp; return $results;<br />
&nbsp; else<br />
&nbsp;&nbsp;&nbsp; return false;<br />
<br />
with:<br />
<br />
&nbsp;&nbsp;&nbsp; if ($found)<br />
&nbsp;&nbsp; &nbsp;&nbsp; return $i;<br />
&nbsp; }<br />
&nbsp; return false;<br />
<br />
And now the function:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_match_all</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$length </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$strict </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">)<br />
{<br />
&nbsp; if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$needle </span><span class="keyword">= (array) </span><span class="default">$needle</span><span class="keyword">;<br />
&nbsp; if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$haystack </span><span class="keyword">= (array) </span><span class="default">$haystack</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="default">$offset </span><span class="keyword">= (int) </span><span class="default">$offset</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$length </span><span class="keyword">= (int) </span><span class="default">$length</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$strict </span><span class="keyword">= (</span><span class="default">$strict </span><span class="keyword">!= </span><span class="default">false</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$ncount </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$hcount </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">);<br />
<br />
&nbsp; </span><span class="comment">// Empty arrays? Really? Also, no point in dealing with a needle larger than the haystack.<br />
&nbsp; </span><span class="keyword">if ((</span><span class="default">$hcount </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">) || (</span><span class="default">$ncount </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">) || (</span><span class="default">$ncount </span><span class="keyword">&gt; </span><span class="default">$hcount</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="comment">// Is offset beyond the upper bound?<br />
&nbsp; </span><span class="keyword">if (</span><span class="default">$offset </span><span class="keyword">&gt; </span><span class="default">$hcount </span><span class="keyword">- </span><span class="default">$ncount</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp; </span><span class="comment">// If offset is specified from the end of haystack, is it beyond the lower bound?<br />
&nbsp; </span><span class="keyword">elseif (</span><span class="default">$offset </span><span class="keyword">&lt; </span><span class="default">0 </span><span class="keyword">&amp;&amp; (</span><span class="default">$offset </span><span class="keyword">= </span><span class="default">$hcount </span><span class="keyword">+ </span><span class="default">$offset</span><span class="keyword">) &lt; </span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="comment">// Determine the length.<br />
&nbsp; </span><span class="keyword">if (</span><span class="default">$length </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$length </span><span class="keyword">= </span><span class="default">$hcount</span><span class="keyword">;<br />
<br />
&nbsp; if (</span><span class="default">$length </span><span class="keyword">&lt; </span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$length </span><span class="keyword">= </span><span class="default">$hcount </span><span class="keyword">- </span><span class="default">$offset </span><span class="keyword">+ </span><span class="default">$length</span><span class="keyword">;<br />
&nbsp; elseif (</span><span class="default">$offset </span><span class="keyword">+ </span><span class="default">$length </span><span class="keyword">&gt; </span><span class="default">$hcount</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$length </span><span class="keyword">= </span><span class="default">$hcount </span><span class="keyword">- </span><span class="default">$offset</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="comment">// Is the needle larger than the portion of the haystack we are searching in?<br />
&nbsp; </span><span class="keyword">if ((</span><span class="default">$length </span><span class="keyword">&lt;= </span><span class="default">1</span><span class="keyword">) || (</span><span class="default">$ncount </span><span class="keyword">&gt; </span><span class="default">$length</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="comment">// Determine the actual search length.<br />
&nbsp; </span><span class="default">$length </span><span class="keyword">= </span><span class="default">$offset </span><span class="keyword">+ </span><span class="default">$length </span><span class="keyword">- </span><span class="default">$ncount </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="default">$results </span><span class="keyword">= array();<br />
&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">$offset</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$length</span><span class="keyword">; ++</span><span class="default">$i</span><span class="keyword">)<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$found </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$j </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$j </span><span class="keyword">&lt; </span><span class="default">$ncount</span><span class="keyword">; ++</span><span class="default">$j</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; if ((</span><span class="default">$strict </span><span class="keyword">&amp;&amp; (</span><span class="default">$haystack</span><span class="keyword">[</span><span class="default">$i </span><span class="keyword">+ </span><span class="default">$j</span><span class="keyword">] !== </span><span class="default">$needle</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">])) || (!</span><span class="default">$strict </span><span class="keyword">&amp;&amp; (</span><span class="default">$haystack</span><span class="keyword">[</span><span class="default">$i </span><span class="keyword">+ </span><span class="default">$j</span><span class="keyword">] != </span><span class="default">$needle</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">])))<br />
&nbsp;&nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$found </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$found</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$results</span><span class="keyword">[] = </span><span class="default">$i</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$i </span><span class="keyword">+= </span><span class="default">$ncount </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
<br />
&nbsp; if (empty(</span><span class="default">$results</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp; else<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$results</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101869""></a>
  <div class="note">
   <strong class="user">stefano@takys dot it</strong>
   <a href="#101869" class="date">14-Jan-2011 01:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
for searching case insensitive better this:<br />
<br />
<span class="default">&lt;?php<br />
array_search</span><span class="keyword">(</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$element</span><span class="keyword">),</span><span class="default">array_map</span><span class="keyword">(</span><span class="string">'strtolower'</span><span class="keyword">,</span><span class="default">$array</span><span class="keyword">));<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101595""></a>
  <div class="note">
   <strong class="user">user at www dot mp3s dot pl</strong>
   <a href="#101595" class="date">28-Dec-2010 01:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
for case insensitive array_search you could use:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_search_i</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">$array</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">stristr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">$value</span><span class="keyword">)) return </span><span class="default">$key</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100701""></a>
  <div class="note">
   <strong class="user">manchimen [at) yahoo [dot) com</strong>
   <a href="#100701" class="date">01-Nov-2010 02:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hey all - I needed a function to search for an array in a multi-dimensional array, but only the keys I wanted, not all keys. Hee if my function:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">my_array_search</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (empty(</span><span class="default">$needle</span><span class="keyword">) || empty(</span><span class="default">$haystack</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$exists </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$needle </span><span class="keyword">as </span><span class="default">$nkey </span><span class="keyword">=&gt; </span><span class="default">$nvalue</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!empty(</span><span class="default">$value</span><span class="keyword">[</span><span class="default">$nkey</span><span class="keyword">]) &amp;&amp; </span><span class="default">$value</span><span class="keyword">[</span><span class="default">$nkey</span><span class="keyword">] == </span><span class="default">$nvalue</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$exists </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$exists </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$exists</span><span class="keyword">) return </span><span class="default">$key</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
Examples:<br />
<span class="default">&lt;?php<br />
$needle </span><span class="keyword">= array(</span><span class="string">'date_start' </span><span class="keyword">=&gt; </span><span class="string">'27-10-2010'</span><span class="keyword">, </span><span class="string">'date_end' </span><span class="keyword">=&gt; </span><span class="string">'29-10-2010'</span><span class="keyword">);<br />
<br />
</span><span class="default">$haystack </span><span class="keyword">= array();<br />
</span><span class="default">$haystack</span><span class="keyword">[] = array(</span><span class="string">'date_start' </span><span class="keyword">=&gt; </span><span class="string">'25-10-2010'</span><span class="keyword">, </span><span class="string">'date_end' </span><span class="keyword">=&gt; </span><span class="string">'26-10-2010'</span><span class="keyword">, </span><span class="string">'promos' </span><span class="keyword">=&gt; array(</span><span class="string">'test'</span><span class="keyword">, </span><span class="string">'test1'</span><span class="keyword">);<br />
</span><span class="default">$haystack</span><span class="keyword">[] = array(</span><span class="string">'date_start' </span><span class="keyword">=&gt; </span><span class="string">'27-10-2010'</span><span class="keyword">, </span><span class="string">'date_end' </span><span class="keyword">=&gt; </span><span class="string">'28-10-2010'</span><span class="keyword">, </span><span class="string">'promos' </span><span class="keyword">=&gt; array(</span><span class="string">'test2'</span><span class="keyword">, </span><span class="string">'test3'</span><span class="keyword">);<br />
</span><span class="default">$haystack</span><span class="keyword">[] = array(</span><span class="string">'date_start' </span><span class="keyword">=&gt; </span><span class="string">'27-10-2010'</span><span class="keyword">, </span><span class="string">'date_end' </span><span class="keyword">=&gt; </span><span class="string">'29-10-2010'</span><span class="keyword">, </span><span class="string">'promos' </span><span class="keyword">=&gt; array(</span><span class="string">'test4'</span><span class="keyword">, </span><span class="string">'test5'</span><span class="keyword">);<br />
<br />
</span><span class="default">$key </span><span class="keyword">= </span><span class="default">my_array_search</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">);<br />
</span><span class="comment">// will output (bool)false for not found or (int)key_no with the key number<br />
// this example outputs (int)2<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
I hope this function will help someone!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100065""></a>
  <div class="note">
   <strong class="user">GuardianGI</strong>
   <a href="#100065" class="date">23-Sep-2010 12:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I needed to check an array for a value but the value only had to match part of a string in the array value so i wrote this little function hope it helps someone out (also some documentation of what used to test if there already was such a function 'couse i was hoping array_search was this.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">my_array_search</span><span class="keyword">(</span><span class="default">$needle </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">, </span><span class="default">$haystack_array </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">, </span><span class="default">$skip </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$needle </span><span class="keyword">== </span><span class="default">null </span><span class="keyword">|| </span><span class="default">$haystack_array </span><span class="keyword">== </span><span class="default">null</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; die(</span><span class="string">'$needle and $haystack_array are mandatory for functie my_array_search()'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$haystack_array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$eval</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$skip </span><span class="keyword">!= </span><span class="default">0</span><span class="keyword">)</span><span class="default">$eval </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$eval</span><span class="keyword">, </span><span class="default">$skip</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">stristr</span><span class="keyword">(</span><span class="default">$eval</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">) return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$arr </span><span class="keyword">= array(</span><span class="string">'foo'</span><span class="keyword">, </span><span class="string">'bar'</span><span class="keyword">);<br />
<br />
echo </span><span class="string">'using in_array&lt;br /&gt;'</span><span class="keyword">;<br />
if(</span><span class="default">in_array</span><span class="keyword">(</span><span class="string">'ar'</span><span class="keyword">, </span><span class="default">$arr</span><span class="keyword">) === </span><span class="default">true</span><span class="keyword">)echo </span><span class="string">'ar found&lt;br /&gt;'</span><span class="keyword">;<br />
if(</span><span class="default">in_array</span><span class="keyword">(</span><span class="string">'bar'</span><span class="keyword">, </span><span class="default">$arr</span><span class="keyword">) === </span><span class="default">true</span><span class="keyword">)echo </span><span class="string">'bar found&lt;br /&gt;'</span><span class="keyword">;<br />
<br />
echo </span><span class="string">'using array_search&lt;br /&gt;'</span><span class="keyword">;<br />
if(</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">'ar'</span><span class="keyword">, </span><span class="default">$arr</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">)echo </span><span class="string">'ar found&lt;br /&gt;'</span><span class="keyword">;<br />
if(</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">'bar'</span><span class="keyword">, </span><span class="default">$arr</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">)echo </span><span class="string">'bar found&lt;br /&gt;'</span><span class="keyword">;<br />
<br />
echo </span><span class="string">'using my_array_search&lt;br /&gt;'</span><span class="keyword">;<br />
if(</span><span class="default">my_array_search</span><span class="keyword">(</span><span class="string">'ar'</span><span class="keyword">, </span><span class="default">$arr</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">)echo </span><span class="string">'ar found&lt;br /&gt;'</span><span class="keyword">;<br />
if(</span><span class="default">my_array_search</span><span class="keyword">(</span><span class="string">'bar'</span><span class="keyword">, </span><span class="default">$arr</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">)echo </span><span class="string">'bar found&lt;br /&gt;'</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
returns:<br />
<br />
using in_array<br />
bar found<br />
using array_search<br />
bar found<br />
using my_array_search<br />
ar found<br />
bar found</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100058""></a>
  <div class="note">
   <strong class="user">j dot vd dot merwe at enovision dot net</strong>
   <a href="#100058" class="date">22-Sep-2010 02:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The getParentStack is also working if you work with JSON records that are encoded. Following sample:<br />
<br />
$in = '{"total":"2","records": [{"id":"25"},{"id":"32"}]}'; // string!!!<br />
$json = json_decode( $in, true ); //don't forget the true here<br />
<br />
$s = getParentStack(32, $json['records']) ;<br />
<br />
then test this with:<br />
<br />
if ($s != false)&nbsp; &nbsp;&nbsp; // then it is found, don't test true here!!!<br />
<br />
or test direct with:<br />
<br />
if ( getParentStack(32, $json['records']) != false )<br />
<br />
It works great with my JSON's thanks Robert Gonzalez</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100057""></a>
  <div class="note">
   <strong class="user">robert at robert-gonzalez dot com</strong>
   <a href="#100057" class="date">22-Sep-2010 12:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I needed a way to find the parent hierarchy of a multidimensional array. Being the rogue that I am, I got to coding before searching the manual and came up with two little functions that will return a parent stack for a first find and a complete parent stack, similar in nature to the solution presented by jette at nerdgirl dot dk without all the extra stuff or use of eval(). ;)<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;* Gets the parent stack of a string array element if it is found within the <br />
&nbsp;* parent array<br />
&nbsp;* <br />
&nbsp;* This will not search objects within an array, though I suspect you could <br />
&nbsp;* tweak it easily enough to do that<br />
&nbsp;*<br />
&nbsp;* @param string $child The string array element to search for<br />
&nbsp;* @param array $stack The stack to search within for the child<br />
&nbsp;* @return array An array containing the parent stack for the child if found,<br />
&nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; false otherwise<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">getParentStack</span><span class="keyword">(</span><span class="default">$child</span><span class="keyword">, </span><span class="default">$stack</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$stack </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// If the current element of the array is an array, recurse it and capture the return<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$return </span><span class="keyword">= </span><span class="default">getParentStack</span><span class="keyword">(</span><span class="default">$child</span><span class="keyword">, </span><span class="default">$v</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// If the return is an array, stack it and return it<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$return</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return array(</span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$return</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Since we are not on an array, compare directly<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$v </span><span class="keyword">== </span><span class="default">$child</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// And if we match, stack it and return it<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return array(</span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$child</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Return false since there was nothing found<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">false</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">/**<br />
&nbsp;* Gets the complete parent stack of a string array element if it is found <br />
&nbsp;* within the parent array<br />
&nbsp;* <br />
&nbsp;* This will not search objects within an array, though I suspect you could <br />
&nbsp;* tweak it easily enough to do that<br />
&nbsp;*<br />
&nbsp;* @param string $child The string array element to search for<br />
&nbsp;* @param array $stack The stack to search within for the child<br />
&nbsp;* @return array An array containing the parent stack for the child if found,<br />
&nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; false otherwise<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">getParentStackComplete</span><span class="keyword">(</span><span class="default">$child</span><span class="keyword">, </span><span class="default">$stack</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$return </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$stack </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// If the current element of the array is an array, recurse it <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // and capture the return stack<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$stack </span><span class="keyword">= </span><span class="default">getParentStackComplete</span><span class="keyword">(</span><span class="default">$child</span><span class="keyword">, </span><span class="default">$v</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// If the return stack is an array, add it to the return<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$stack</span><span class="keyword">) &amp;&amp; !empty(</span><span class="default">$stack</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$return</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">] = </span><span class="default">$stack</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Since we are not on an array, compare directly<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$v </span><span class="keyword">== </span><span class="default">$child</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// And if we match, stack it and return it<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$return</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">] = </span><span class="default">$child</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Return the stack<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">return empty(</span><span class="default">$return</span><span class="keyword">) ? </span><span class="default">false</span><span class="keyword">: </span><span class="default">$return</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">// TESTING<br />
</span><span class="default">$array </span><span class="keyword">= array(<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'balloon' </span><span class="keyword">=&gt; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'red' </span><span class="keyword">=&gt; array(</span><span class="default">1 </span><span class="keyword">=&gt; </span><span class="string">'Love'</span><span class="keyword">, </span><span class="string">'Valentine'</span><span class="keyword">, </span><span class="string">'Heart'</span><span class="keyword">,),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'green' </span><span class="keyword">=&gt; array(</span><span class="default">1 </span><span class="keyword">=&gt; </span><span class="string">'Summertime'</span><span class="keyword">, </span><span class="string">'Hope'</span><span class="keyword">,),<br />
&nbsp;&nbsp;&nbsp; ),<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'ribbon' </span><span class="keyword">=&gt; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'yellow' </span><span class="keyword">=&gt; array(</span><span class="default">2 </span><span class="keyword">=&gt; </span><span class="string">'Welcome'</span><span class="keyword">,),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'red' </span><span class="keyword">=&gt; array(</span><span class="default">3 </span><span class="keyword">=&gt; </span><span class="string">'Love'</span><span class="keyword">, </span><span class="string">'Love'</span><span class="keyword">,),<br />
&nbsp;&nbsp;&nbsp; ),<br />
);<br />
<br />
</span><span class="default">$s </span><span class="keyword">= </span><span class="default">getParentStack</span><span class="keyword">(</span><span class="string">'Love'</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">);<br />
</span><span class="default">$c </span><span class="keyword">= </span><span class="default">getParentStackComplete</span><span class="keyword">(</span><span class="string">'Love'</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">);<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">, </span><span class="default">$c</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Output:<br />
<br />
array<br />
&nbsp; 'balloon' =&gt; <br />
&nbsp;&nbsp;&nbsp; array<br />
&nbsp;&nbsp; &nbsp;&nbsp; 'red' =&gt; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 1 =&gt; string 'Love' (length=4)<br />
<br />
array<br />
&nbsp; 'balloon' =&gt; <br />
&nbsp;&nbsp;&nbsp; array<br />
&nbsp;&nbsp; &nbsp;&nbsp; 'red' =&gt; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 1 =&gt; string 'Love' (length=4)<br />
&nbsp; 'ribbon' =&gt; <br />
&nbsp;&nbsp;&nbsp; array<br />
&nbsp;&nbsp; &nbsp;&nbsp; 'red' =&gt; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 3 =&gt; string 'Love' (length=4)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 4 =&gt; string 'Love' (length=4)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99964""></a>
  <div class="note">
   <strong class="user">hanan dot ali dot shaikh at googlemail dot com</strong>
   <a href="#99964" class="date">17-Sep-2010 01:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In this code I write a code to find next and previous element of an array using current element of that array. Let suppose if we are in element 9 and have to access its next and previous element then this code be helpful for someone.<br />
<br />
<span class="default">&lt;?php<br />
$myArray </span><span class="keyword">= array(</span><span class="default">4</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">,</span><span class="default">7</span><span class="keyword">,</span><span class="default">9</span><span class="keyword">,</span><span class="default">10</span><span class="keyword">,</span><span class="default">11</span><span class="keyword">,</span><span class="default">13</span><span class="keyword">,</span><span class="default">19</span><span class="keyword">,</span><span class="default">25</span><span class="keyword">);<br />
<br />
</span><span class="default">$currentElement </span><span class="keyword">= </span><span class="default">9</span><span class="keyword">;<br />
</span><span class="default">$firstElement </span><span class="keyword">= </span><span class="default">current</span><span class="keyword">(</span><span class="default">$myArray</span><span class="keyword">);<br />
</span><span class="default">$lastElement </span><span class="keyword">= </span><span class="default">$myArray</span><span class="keyword">[</span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$myArray</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">];<br />
<br />
</span><span class="default">$currentKey </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="default">$currentElement</span><span class="keyword">, </span><span class="default">$myArray</span><span class="keyword">);<br />
</span><span class="default">$currentValue </span><span class="keyword">= </span><span class="default">$myArray</span><span class="keyword">[</span><span class="default">$currentKey</span><span class="keyword">];<br />
<br />
</span><span class="default">$previousValue </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />
</span><span class="default">$nextValue </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />
if(</span><span class="default">$currentElement</span><span class="keyword">!=</span><span class="default">$lastElement</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$nextKey </span><span class="keyword">= </span><span class="default">$currentKey </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$nextValue </span><span class="keyword">= </span><span class="default">$myArray</span><span class="keyword">[</span><span class="default">$nextKey</span><span class="keyword">];<br />
}<br />
<br />
if(</span><span class="default">$currentElement</span><span class="keyword">!=</span><span class="default">$firstElement</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$previousKey </span><span class="keyword">= </span><span class="default">$currentKey </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$previousValue </span><span class="keyword">= </span><span class="default">$myArray</span><span class="keyword">[</span><span class="default">$previousKey</span><span class="keyword">];<br />
}<br />
<br />
echo </span><span class="default">$previousValue</span><span class="keyword">.</span><span class="string">"--"</span><span class="keyword">.</span><span class="default">$currentValue</span><span class="keyword">.</span><span class="string">"--"</span><span class="keyword">.</span><span class="default">$nextValue</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Thanks,<br />
Hanan Ali</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99203""></a>
  <div class="note">
   <strong class="user">Yco</strong>
   <a href="#99203" class="date">03-Aug-2010 01:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This a simple and lazy lazy method to search a key name in an array by pattern, and return the value if it isn't empty.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_search_key</span><span class="keyword">(</span><span class="default">$p</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$a </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">strstr</span><span class="keyword">(</span><span class="default">$k</span><span class="keyword">, </span><span class="default">$p</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(!empty(</span><span class="default">$v</span><span class="keyword">) || </span><span class="default">$v </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$v</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="97645""></a>
  <div class="note">
   <strong class="user">giulio dot provasi at gmail dot com</strong>
   <a href="#97645" class="date">30-Apr-2010 02:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want a very simple way of searching a value through a multidimensionnal array here's a&nbsp; trick : <br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">recursiveArraySearch</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$index </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$aIt&nbsp; &nbsp;&nbsp; </span><span class="keyword">= new </span><span class="default">RecursiveArrayIterator</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$it&nbsp; &nbsp; </span><span class="keyword">= new </span><span class="default">RecursiveIteratorIterator</span><span class="keyword">(</span><span class="default">$aIt</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; while(</span><span class="default">$it</span><span class="keyword">-&gt;</span><span class="default">valid</span><span class="keyword">())<br />
&nbsp;&nbsp;&nbsp; {&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (((isset(</span><span class="default">$index</span><span class="keyword">) AND (</span><span class="default">$it</span><span class="keyword">-&gt;</span><span class="default">key</span><span class="keyword">() == </span><span class="default">$index</span><span class="keyword">)) OR (!isset(</span><span class="default">$index</span><span class="keyword">))) AND (</span><span class="default">$it</span><span class="keyword">-&gt;</span><span class="default">current</span><span class="keyword">() == </span><span class="default">$needle</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$aIt</span><span class="keyword">-&gt;</span><span class="default">key</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$it</span><span class="keyword">-&gt;</span><span class="default">next</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
So let's take a misc multi-dimensionnal array : <br />
<br />
<span class="default">&lt;?php<br />
$std </span><span class="keyword">= new </span><span class="default">stdClass</span><span class="keyword">();<br />
</span><span class="default">$std</span><span class="keyword">-&gt;</span><span class="default">name&nbsp; &nbsp;&nbsp; </span><span class="keyword">= </span><span class="string">'luke'</span><span class="keyword">;<br />
</span><span class="default">$std</span><span class="keyword">-&gt;</span><span class="default">age&nbsp; &nbsp;&nbsp; </span><span class="keyword">= </span><span class="string">'25'</span><span class="keyword">;<br />
</span><span class="default">$std</span><span class="keyword">-&gt;</span><span class="default">sex&nbsp; &nbsp;&nbsp; </span><span class="keyword">= </span><span class="string">'M'</span><span class="keyword">;<br />
<br />
</span><span class="default">$array&nbsp; &nbsp;&nbsp; </span><span class="keyword">= array(&nbsp; &nbsp; array(</span><span class="string">'type'</span><span class="keyword">=&gt;</span><span class="string">'dog'</span><span class="keyword">, </span><span class="string">'name'</span><span class="keyword">=&gt;</span><span class="string">'butch'</span><span class="keyword">, </span><span class="string">'sex'</span><span class="keyword">=&gt;</span><span class="string">'m'</span><span class="keyword">, </span><span class="string">'breed'</span><span class="keyword">=&gt;</span><span class="string">'boxer'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array(</span><span class="string">'type'</span><span class="keyword">=&gt;</span><span class="string">'dog'</span><span class="keyword">, </span><span class="string">'name'</span><span class="keyword">=&gt;</span><span class="string">'fido'</span><span class="keyword">, </span><span class="string">'sex'</span><span class="keyword">=&gt;</span><span class="string">'m'</span><span class="keyword">, </span><span class="string">'breed'</span><span class="keyword">=&gt;</span><span class="string">'doberman'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'simpleValue'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array(</span><span class="string">'type'</span><span class="keyword">=&gt;</span><span class="string">'cat'</span><span class="keyword">, </span><span class="string">'name'</span><span class="keyword">=&gt;</span><span class="string">'tiddles'</span><span class="keyword">,</span><span class="string">'sex'</span><span class="keyword">=&gt;</span><span class="string">'m'</span><span class="keyword">, </span><span class="string">'breed'</span><span class="keyword">=&gt;</span><span class="string">'maine coon'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array(</span><span class="string">'type'</span><span class="keyword">=&gt;</span><span class="string">'horse'</span><span class="keyword">, </span><span class="string">'name'</span><span class="keyword">=&gt;</span><span class="string">'ed'</span><span class="keyword">,</span><span class="string">'sex'</span><span class="keyword">=&gt;</span><span class="string">'m'</span><span class="keyword">, </span><span class="string">'breed'</span><span class="keyword">=&gt;</span><span class="string">'clydesdale'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$std</span><span class="keyword">);<br />
<br />
echo </span><span class="default">recursiveArraySearch</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="string">'25'</span><span class="keyword">, </span><span class="string">'age'</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// returns 5<br />
</span><span class="keyword">echo </span><span class="default">recursiveArraySearch</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="string">'25'</span><span class="keyword">, </span><span class="string">'name'</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// returns false<br />
</span><span class="keyword">echo </span><span class="default">recursiveArraySearch</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="string">'simpleValue'</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// returns 2<br />
</span><span class="keyword">echo </span><span class="default">recursiveArraySearch</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="string">'fido'</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// returns 1<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96866""></a>
  <div class="note">
   <strong class="user">kim at steinhaug dot com</strong>
   <a href="#96866" class="date">19-Mar-2010 12:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was looking around for a recursive search by keys in multidimensional arrays. After testing the ones in this thread seems noone accually works. So I put this one together, and it does what you expect it to do.<br />
<br />
You need to find the value for the key "han-solo".<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">if( (</span><span class="default">$val </span><span class="keyword">= </span><span class="default">array_search_key</span><span class="keyword">(</span><span class="string">'han-solo'</span><span class="keyword">,</span><span class="default">$array</span><span class="keyword">)) !== </span><span class="default">false</span><span class="keyword">){<br />
&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">);<br />
} else {<br />
&nbsp; </span><span class="comment">// No keys with the name "han-solo"<br />
</span><span class="keyword">}<br />
<br />
function </span><span class="default">array_search_key</span><span class="keyword">( </span><span class="default">$needle_key</span><span class="keyword">, </span><span class="default">$array </span><span class="keyword">) {<br />
&nbsp; foreach(</span><span class="default">$array </span><span class="keyword">AS </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$key </span><span class="keyword">== </span><span class="default">$needle_key</span><span class="keyword">) return </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp;&nbsp; if( (</span><span class="default">$result </span><span class="keyword">= </span><span class="default">array_search_key</span><span class="keyword">(</span><span class="default">$needle_key</span><span class="keyword">,</span><span class="default">$value</span><span class="keyword">)) !== </span><span class="default">false</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96533""></a>
  <div class="note">
   <strong class="user">camden dot michael at gmail dot com</strong>
   <a href="#96533" class="date">03-Mar-2010 10:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I needed a case insensitive array search function for a project...<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;* Performs the same function as array_search except that it is case<br />
&nbsp;* insensitive<br />
&nbsp;* @param mixed $needle<br />
&nbsp;* @param array $haystack<br />
&nbsp;* @return mixed<br />
&nbsp;*/<br />
<br />
</span><span class="keyword">function </span><span class="default">array_nsearch</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, array </span><span class="default">$haystack</span><span class="keyword">) {<br />
&nbsp;&nbsp; </span><span class="default">$it </span><span class="keyword">= new </span><span class="default">IteratorIterator</span><span class="keyword">(new </span><span class="default">ArrayIterator</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">));<br />
&nbsp;&nbsp; foreach(</span><span class="default">$it </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; if(</span><span class="default">strcasecmp</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">,</span><span class="default">$needle</span><span class="keyword">) === </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$key</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96486""></a>
  <div class="note">
   <strong class="user">jette at nerdgirl dot dk</strong>
   <a href="#96486" class="date">01-Mar-2010 08:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I use this function to search the value of arrays of any dimension, and return the result with keys preserved:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">multiArrayValueSearch</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, &amp;</span><span class="default">$result</span><span class="keyword">, &amp;</span><span class="default">$aryPath</span><span class="keyword">=</span><span class="default">NULL</span><span class="keyword">, </span><span class="default">$currentKey</span><span class="keyword">=</span><span class="string">''</span><span class="keyword">) {<br />
&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">)) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$count </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$iterator </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$location </span><span class="keyword">=&gt; </span><span class="default">$straw</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$iterator</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$next </span><span class="keyword">= (</span><span class="default">$iterator </span><span class="keyword">== </span><span class="default">$count</span><span class="keyword">)?</span><span class="default">false</span><span class="keyword">:</span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$straw</span><span class="keyword">)) </span><span class="default">$aryPath</span><span class="keyword">[</span><span class="default">$location</span><span class="keyword">] = </span><span class="default">$location</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">multiArrayValueSearch</span><span class="keyword">(</span><span class="default">$straw</span><span class="keyword">,</span><span class="default">$needle</span><span class="keyword">,</span><span class="default">$result</span><span class="keyword">,</span><span class="default">$aryPath</span><span class="keyword">,</span><span class="default">$location</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">$next</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$aryPath</span><span class="keyword">[</span><span class="default">$currentKey</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$straw </span><span class="keyword">= </span><span class="default">$haystack</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">$straw </span><span class="keyword">== </span><span class="default">$needle</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!isset(</span><span class="default">$aryPath</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$strPath </span><span class="keyword">= </span><span class="string">"\$result[</span><span class="default">$currentKey</span><span class="string">] = \$needle;"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$strPath </span><span class="keyword">= </span><span class="string">"\$result['"</span><span class="keyword">.</span><span class="default">join</span><span class="keyword">(</span><span class="string">"']['"</span><span class="keyword">,</span><span class="default">$aryPath</span><span class="keyword">).</span><span class="string">"'][</span><span class="default">$currentKey</span><span class="string">] = \$needle;"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; eval(</span><span class="default">$strPath</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Example:<br />
<br />
<span class="default">&lt;?php<br />
$ary</span><span class="keyword">[</span><span class="string">'ballon'</span><span class="keyword">][</span><span class="string">'red'</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">] = </span><span class="string">'Love'</span><span class="keyword">;<br />
</span><span class="default">$ary</span><span class="keyword">[</span><span class="string">'ballon'</span><span class="keyword">][</span><span class="string">'red'</span><span class="keyword">][</span><span class="default">2</span><span class="keyword">] = </span><span class="string">'Valentine'</span><span class="keyword">;<br />
</span><span class="default">$ary</span><span class="keyword">[</span><span class="string">'ballon'</span><span class="keyword">][</span><span class="string">'red'</span><span class="keyword">][</span><span class="default">3</span><span class="keyword">] = </span><span class="string">'Heart'</span><span class="keyword">;<br />
</span><span class="default">$ary</span><span class="keyword">[</span><span class="string">'ballon'</span><span class="keyword">][</span><span class="string">'green'</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">] = </span><span class="string">'Summertime'</span><span class="keyword">;<br />
</span><span class="default">$ary</span><span class="keyword">[</span><span class="string">'ballon'</span><span class="keyword">][</span><span class="string">'green'</span><span class="keyword">][</span><span class="default">2</span><span class="keyword">] = </span><span class="string">'Hope'</span><span class="keyword">;<br />
</span><span class="default">$ary</span><span class="keyword">[</span><span class="string">'ribbon'</span><span class="keyword">][</span><span class="string">'yellow'</span><span class="keyword">][</span><span class="default">2</span><span class="keyword">] = </span><span class="string">'Welcome'</span><span class="keyword">;<br />
</span><span class="default">$ary</span><span class="keyword">[</span><span class="string">'ribbon'</span><span class="keyword">][</span><span class="string">'red'</span><span class="keyword">][</span><span class="default">3</span><span class="keyword">] = </span><span class="string">'Love'</span><span class="keyword">;<br />
</span><span class="default">$ary</span><span class="keyword">[</span><span class="string">'ribbon'</span><span class="keyword">][</span><span class="string">'red'</span><span class="keyword">][</span><span class="default">4</span><span class="keyword">] = </span><span class="string">'Love'</span><span class="keyword">;<br />
<br />
echo </span><span class="string">"&lt;pre&gt;"</span><span class="keyword">;<br />
<br />
</span><span class="comment">//Just call the function with 3 first parameters set:<br />
//&nbsp; 1) The array to search<br />
//&nbsp; 2) The value to find<br />
//&nbsp; 3) A variable to store the result<br />
</span><span class="default">multiArrayValueSearch</span><span class="keyword">(</span><span class="default">$ary</span><span class="keyword">,</span><span class="string">'Love'</span><span class="keyword">,</span><span class="default">$match</span><span class="keyword">);<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$match</span><span class="keyword">);<br />
echo </span><span class="string">"&lt;/pre&gt;"</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
Output:<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [ballon] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [red] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; Love<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [ribbon] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [red] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [3] =&gt; Love<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [4] =&gt; Love<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
)<br />
<br />
You can easily adapt it to suit your need of matching, by changing line 16 in the function:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">if (</span><span class="default">$straw </span><span class="keyword">== </span><span class="default">$needle</span><span class="keyword">) {<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95926""></a>
  <div class="note">
   <strong class="user">james at bandit.co.nz</strong>
   <a href="#95926" class="date">28-Jan-2010 05:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A couple of staple custom PHP array searching functions I rely on in most of my projects;<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// array_search with partial matches and optional search by key<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">array_find</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$search_keys </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">)) return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$what </span><span class="keyword">= (</span><span class="default">$search_keys</span><span class="keyword">) ? </span><span class="default">$key </span><span class="keyword">: </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$what</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">)!==</span><span class="default">false</span><span class="keyword">) return </span><span class="default">$key</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// array_search with recursive searching, optional partial matches and optional search by key<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">array_find_r</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$partial_matches </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">, </span><span class="default">$search_keys </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">)) return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$what </span><span class="keyword">= (</span><span class="default">$search_keys</span><span class="keyword">) ? </span><span class="default">$key </span><span class="keyword">: </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$needle</span><span class="keyword">===</span><span class="default">$what</span><span class="keyword">) return </span><span class="default">$key</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else if(</span><span class="default">$partial_matches </span><span class="keyword">&amp;&amp; @</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$what</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">)!==</span><span class="default">false</span><span class="keyword">) return </span><span class="default">$key</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) &amp;&amp; </span><span class="default">array_find_r</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">, </span><span class="default">$partial_matches</span><span class="keyword">, </span><span class="default">$search_keys</span><span class="keyword">)!==</span><span class="default">false</span><span class="keyword">) return </span><span class="default">$key</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
Hope they help someone!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94598""></a>
  <div class="note">
   <strong class="user">mrjay42 at gmail dot com</strong>
   <a href="#94598" class="date">13-Nov-2009 06:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you search a key position in an associative array (keys are uniques), i suggest this function :<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">public function </span><span class="default">getKeyPositionInArray</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$keyNeedle</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$key </span><span class="keyword">== </span><span class="default">$keyNeedle</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$i</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">++;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93833""></a>
  <div class="note">
   <strong class="user">codeslinger at compsalot dot com</strong>
   <a href="#93833" class="date">02-Oct-2009 12:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
one thing to be very aware of is that array_search() will fail if the needle is a string and the array itself contains values that are mixture of numbers and strings.&nbsp; (or even a string that looks like a number)<br />
<br />
The problem is that unless you specify "strict" the match is done using ==&nbsp; &nbsp; and in that case any string will match a numeric value of zero which is not what you want.<br />
<br />
-----<br />
<br />
also, php can lookup an index pretty darn fast.&nbsp; for many scenarios, it is practical to maintain multiple arrays, one in which the index of the array is the search key and the normal array that contains the data.<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp; $normal</span><span class="keyword">[</span><span class="default">$index</span><span class="keyword">] = array(</span><span class="string">'key'</span><span class="keyword">=&gt;</span><span class="default">$key</span><span class="keyword">, </span><span class="string">'data'</span><span class="keyword">=&gt;</span><span class="string">'foo'</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$inverse</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$index</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="comment">//very fast lookup, this beats any other kind of search<br />
<br />
&nbsp; </span><span class="keyword">if (</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$inverse</span><span class="keyword">)) <br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$index </span><span class="keyword">= </span><span class="default">$inverse</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$normal</span><span class="keyword">[</span><span class="default">$index</span><span class="keyword">];<br />
&nbsp; }<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93780""></a>
  <div class="note">
   <strong class="user">pi3ch at gmx dot com</strong>
   <a href="#93780" class="date">28-Sep-2009 09:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The return value for array_search is confusing if the return key is zero. it is better to double check it with in_array() function.<br />
<br />
Example:<br />
<span class="default">&lt;?php<br />
<br />
$SampleArray </span><span class="keyword">= (</span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'b'</span><span class="keyword">, </span><span class="string">'c'</span><span class="keyword">);<br />
<br />
</span><span class="default">$Key </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="string">'a'</span><span class="keyword">, </span><span class="default">$SampleArray</span><span class="keyword">);<br />
</span><span class="default">$Zero </span><span class="keyword">= </span><span class="default">in_array</span><span class="keyword">(</span><span class="string">'a'</span><span class="keyword">, </span><span class="default">$SampleArray</span><span class="keyword">);<br />
<br />
if(</span><span class="default">$Key </span><span class="keyword">== </span><span class="default">NULL </span><span class="keyword">&amp;&amp; !</span><span class="default">$Zero</span><span class="keyword">)<br />
&nbsp;&nbsp; echo </span><span class="string">"Key doesnt exists"</span><span class="keyword">;<br />
else<br />
&nbsp;&nbsp; echo </span><span class="string">"Key exists"</span><span class="keyword">;<br />
<br />
&nbsp;</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93721""></a>
  <div class="note">
   <strong class="user">pvenakis at efrontlearning dot net</strong>
   <a href="#93721" class="date">24-Sep-2009 05:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
if $haystack is not an array, for example false from some previous action, the function returns null instead of false in php 5.3.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93352""></a>
  <div class="note">
   <strong class="user">temporal dot pl at gmail dot com</strong>
   <a href="#93352" class="date">04-Sep-2009 03:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Sometimes you need to find a given value in a sorted array or - if not found - detect the place where it should be. After that you can for example split the array into two halves, the&nbsp; greater and the smaller one.<br />
<br />
greenmr, dennis.decoene and php at celerondude had all posted very good binary search functions but these functions all return false if the needle was not found in the haystack. I've tweaked greenmr's code a little:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">Array_BinarySearch</span><span class="keyword">( </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$comparator </span><span class="keyword">, &amp;</span><span class="default">$probe </span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$high </span><span class="keyword">= </span><span class="default">Count</span><span class="keyword">( </span><span class="default">$haystack </span><span class="keyword">) -</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$low </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; while ( </span><span class="default">$high </span><span class="keyword">&gt;= </span><span class="default">$low </span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$probe </span><span class="keyword">= </span><span class="default">Floor</span><span class="keyword">( ( </span><span class="default">$high </span><span class="keyword">+ </span><span class="default">$low </span><span class="keyword">) / </span><span class="default">2 </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$comparison </span><span class="keyword">= </span><span class="default">$comparator</span><span class="keyword">( </span><span class="default">$haystack</span><span class="keyword">[</span><span class="default">$probe</span><span class="keyword">], </span><span class="default">$needle </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">$comparison </span><span class="keyword">&lt; </span><span class="default">0 </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$low </span><span class="keyword">= </span><span class="default">$probe </span><span class="keyword">+</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; elseif ( </span><span class="default">$comparison </span><span class="keyword">&gt; </span><span class="default">0 </span><span class="keyword">) <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$high </span><span class="keyword">= </span><span class="default">$probe </span><span class="keyword">-</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//The loop ended without a match <br />
&nbsp;&nbsp;&nbsp; //Compensate for needle greater than highest haystack element<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">$comparator</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">[</span><span class="default">count</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">], </span><span class="default">$needle</span><span class="keyword">) &lt; </span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$probe </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; } <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Now, the function returns true if it finds something and false otherwise. If a needle was found, then $probe will contain it's position. Otherwise, $probe will contain position of where the needle would be if it were there :). This is possible because we pass $probe by reference.<br />
<br />
Example:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">//ultra-simple comparator :)<br />
</span><span class="keyword">function </span><span class="default">CompareNumbers</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$obj </span><span class="keyword">- </span><span class="default">$needle</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">//use examples<br />
</span><span class="default">$testArr </span><span class="keyword">= array(</span><span class="default">10</span><span class="keyword">, </span><span class="default">20</span><span class="keyword">, </span><span class="default">30</span><span class="keyword">, </span><span class="default">40</span><span class="keyword">, </span><span class="default">50</span><span class="keyword">);<br />
</span><span class="default">$res </span><span class="keyword">= </span><span class="default">Array_BinarySearch</span><span class="keyword">(</span><span class="default">30</span><span class="keyword">, </span><span class="default">$testArr</span><span class="keyword">, </span><span class="string">'CompareNumbers'</span><span class="keyword">, </span><span class="default">$probe</span><span class="keyword">);<br />
echo (int)</span><span class="default">$res</span><span class="keyword">.</span><span class="string">' '</span><span class="keyword">.</span><span class="default">$probe</span><span class="keyword">.</span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;<br />
</span><span class="comment">//output is: 1 2 - found at position 2<br />
<br />
</span><span class="default">$res </span><span class="keyword">= </span><span class="default">Array_BinarySearch</span><span class="keyword">(</span><span class="default">45</span><span class="keyword">, </span><span class="default">$testArr</span><span class="keyword">, </span><span class="string">'CompareNumbers'</span><span class="keyword">, </span><span class="default">$probe</span><span class="keyword">);<br />
echo (int)</span><span class="default">$res</span><span class="keyword">.</span><span class="string">' '</span><span class="keyword">.</span><span class="default">$probe</span><span class="keyword">.</span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;<br />
</span><span class="comment">//output is: 0 4 - not found, but it would be at position 4 (between 40 and 45)<br />
&nbsp;<br />
</span><span class="default">$res </span><span class="keyword">= </span><span class="default">Array_BinarySearch</span><span class="keyword">(-</span><span class="default">3</span><span class="keyword">, </span><span class="default">$testArr</span><span class="keyword">, </span><span class="string">'CompareNumbers'</span><span class="keyword">, </span><span class="default">$probe</span><span class="keyword">);<br />
echo (int)</span><span class="default">$res</span><span class="keyword">.</span><span class="string">' '</span><span class="keyword">.</span><span class="default">$probe</span><span class="keyword">.</span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;<br />
</span><span class="comment">//output is: 0 0 - not found, but it would be at position 0 (before 10)<br />
<br />
</span><span class="default">$res </span><span class="keyword">= </span><span class="default">Array_BinarySearch</span><span class="keyword">(</span><span class="default">300</span><span class="keyword">, </span><span class="default">$testArr</span><span class="keyword">, </span><span class="string">'CompareNumbers'</span><span class="keyword">, </span><span class="default">$probe</span><span class="keyword">);<br />
echo (int)</span><span class="default">$res</span><span class="keyword">.</span><span class="string">' '</span><span class="keyword">.</span><span class="default">$probe</span><span class="keyword">.</span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;<br />
</span><span class="comment">//output is: 0 5 - not found, but it would be at position 5 (after 50; note, that count($haystack) == 5)<br />
</span><span class="default">?&gt;<br />
</span><br />
See original greenmr's note for additional details about usage of this binary search: <a href="http://php.net/manual/en/function.array-search.php#89413" rel="nofollow" target="_blank">http://php.net/manual/en/function.array-search.php#89413</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93103""></a>
  <div class="note">
   <strong class="user">Nguyen KimKha</strong>
   <a href="#93103" class="date">23-Aug-2009 10:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can remove some values from array, by using unset() and array_search().<br />
<br />
<span class="default">&lt;?php<br />
<br />
$friends </span><span class="keyword">= array( </span><span class="string">'Bob'</span><span class="keyword">, </span><span class="string">'Ann'</span><span class="keyword">, </span><span class="string">'Peter' </span><span class="keyword">); </span><span class="comment">// Two persons named 'Bob'<br />
</span><span class="default">$find </span><span class="keyword">= </span><span class="string">'Bob'</span><span class="keyword">;<br />
</span><span class="default">$key </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">( </span><span class="default">$find</span><span class="keyword">, </span><span class="default">$friends </span><span class="keyword">); </span><span class="comment">// Find key of given value<br />
</span><span class="keyword">if (</span><span class="default">$key </span><span class="keyword">!= </span><span class="default">NULL </span><span class="keyword">|| </span><span class="default">$key </span><span class="keyword">!== </span><span class="default">FALSE</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; unset(</span><span class="default">$friends</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]); </span><span class="comment">// remove key from array<br />
</span><span class="keyword">}<br />
<br />
</span><span class="comment">// Now, $friends = array( 'Ann', 'Peter');<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92991""></a>
  <div class="note">
   <strong class="user">Frank A Cefalu frankcefalu at gmail dot com</strong>
   <a href="#92991" class="date">18-Aug-2009 11:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The original function for searching a multidimensional array didn't let you filter by arraykeys.<br />
<br />
This one is modified so you can search by array keys or not.<br />
<br />
If you want a general search for a value and don't care which specific key to target you dont have to specify it but example.<br />
<br />
<span class="default">&lt;?php<br />
$array </span><span class="keyword">= (</span><span class="string">"shoes" </span><span class="keyword">=&gt; array(</span><span class="string">"test1"</span><span class="keyword">=&gt; </span><span class="string">"123"</span><span class="keyword">,</span><span class="string">"test2"</span><span class="keyword">=&gt;</span><span class="string">"1234"</span><span class="keyword">,</span><span class="string">"test3"</span><span class="keyword">=&gt;</span><span class="string">"12345"</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"shoes2"</span><span class="keyword">=&gt; array(</span><span class="string">"test1"</span><span class="keyword">=&gt;</span><span class="string">"324"</span><span class="keyword">,</span><span class="string">"test2"</span><span class="keyword">=&gt;</span><span class="string">"3515"</span><span class="keyword">,</span><span class="string">"test3"</span><span class="keyword">=&gt;</span><span class="string">"123131"</span><span class="keyword">);<br />
<br />
</span><span class="default">array_search_value</span><span class="keyword">(</span><span class="string">"123"</span><span class="keyword">,</span><span class="default">$array</span><span class="keyword">,</span><span class="string">"test1"</span><span class="keyword">); </span><span class="comment">// would return shoes<br />
</span><span class="default">array_search_value</span><span class="keyword">(</span><span class="string">"12223"</span><span class="keyword">,</span><span class="default">$array</span><span class="keyword">,</span><span class="string">"test1"</span><span class="keyword">); </span><span class="comment">// would return false;<br />
</span><span class="default">?&gt;<br />
</span>this makes it easier to validate a multi-dimensional array to make sure certain data is present.<br />
<br />
Enjoy!<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">array_search_value</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">,</span><span class="default">$haystack</span><span class="keyword">,</span><span class="default">$arraykey</span><span class="keyword">=</span><span class="default">FALSE</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$current_key</span><span class="keyword">=</span><span class="default">$key</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$arraykey</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$needle </span><span class="keyword">== </span><span class="default">$value</span><span class="keyword">[</span><span class="default">$arraykey</span><span class="keyword">]){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$value</span><span class="keyword">[</span><span class="string">'id'</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">array_search_value</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">,</span><span class="default">$value</span><span class="keyword">[</span><span class="default">$arraykey</span><span class="keyword">]) == </span><span class="default">true</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$current_key</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$needle </span><span class="keyword">== </span><span class="default">$value</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">array_search_value</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">,</span><span class="default">$value</span><span class="keyword">) == </span><span class="default">true</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$current_key</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92396""></a>
  <div class="note">
   <strong class="user">mikeytown2</strong>
   <a href="#92396" class="date">22-Jul-2009 04:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Made a function that I used to search the $_SERVER variable ( <a href="http://php.net/reserved.variables.server " rel="nofollow" target="_blank">http://php.net/reserved.variables.server </a>) for matches to getcwd ( <a href="http://php.net/getcwd " rel="nofollow" target="_blank">http://php.net/getcwd </a>) excluding some key's that I don't want.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;* Returns all key/values in array that match.<br />
&nbsp;*<br />
&nbsp;* @param $needle<br />
&nbsp;*&nbsp; What your searching for<br />
&nbsp;* @param $haystack<br />
&nbsp;*&nbsp; Array of values<br />
&nbsp;* @param $a_not<br />
&nbsp;*&nbsp; Optional array of key names to exclude<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">boost_array_find</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$a_not </span><span class="keyword">= array()) {<br />
&nbsp; </span><span class="default">$out </span><span class="keyword">= array();<br />
&nbsp; foreach(</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">) !== </span><span class="default">FALSE</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$good </span><span class="keyword">= </span><span class="default">TRUE</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$a_not </span><span class="keyword">as </span><span class="default">$not</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$not</span><span class="keyword">) !== </span><span class="default">FALSE</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$good </span><span class="keyword">= </span><span class="default">FALSE</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">$good</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$out</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
&nbsp; return </span><span class="default">$out</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">// Example Usage<br />
</span><span class="default">$document_root </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"\\"</span><span class="keyword">, </span><span class="string">'/'</span><span class="keyword">, </span><span class="default">getcwd</span><span class="keyword">());<br />
</span><span class="default">$rejects </span><span class="keyword">= array(</span><span class="string">'SCRIPT_FILENAME'</span><span class="keyword">);<br />
</span><span class="default">$out </span><span class="keyword">= </span><span class="default">boost_array_find</span><span class="keyword">(</span><span class="default">$document_root</span><span class="keyword">, </span><span class="default">$_SERVER</span><span class="keyword">, </span><span class="default">$rejects</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$out</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Which should output this on most servers.<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [DOCUMENT_ROOT] =&gt; path/to/webroot<br />
)<br />
<br />
On Mosso's servers it will output this<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [PHP_DOCUMENT_ROOT] =&gt; path/to/webroot<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91663""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#91663" class="date">22-Jun-2009 02:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a cool trick:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">arr_search </span><span class="keyword">( </span><span class="default">$array</span><span class="keyword">, </span><span class="default">$expression </span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$expression </span><span class="keyword">= </span><span class="default">preg_replace </span><span class="keyword">( </span><span class="string">"/([^\s]+?)(=|&lt;|&gt;|!)/"</span><span class="keyword">, </span><span class="string">"\$a['$1']$2"</span><span class="keyword">, </span><span class="default">$expression </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; foreach ( </span><span class="default">$array </span><span class="keyword">as </span><span class="default">$a </span><span class="keyword">) if ( eval ( </span><span class="string">"return </span><span class="default">$expression</span><span class="string">;" </span><span class="keyword">) ) </span><span class="default">$result</span><span class="keyword">[] = </span><span class="default">$a</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$data </span><span class="keyword">= array (<br />
&nbsp;&nbsp;&nbsp; array ( </span><span class="string">"name" </span><span class="keyword">=&gt; </span><span class="string">"bill"</span><span class="keyword">, </span><span class="string">"age" </span><span class="keyword">=&gt; </span><span class="default">40 </span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; array ( </span><span class="string">"name" </span><span class="keyword">=&gt; </span><span class="string">"john"</span><span class="keyword">, </span><span class="string">"age" </span><span class="keyword">=&gt; </span><span class="default">30 </span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; array ( </span><span class="string">"name" </span><span class="keyword">=&gt; </span><span class="string">"jack"</span><span class="keyword">, </span><span class="string">"age" </span><span class="keyword">=&gt; </span><span class="default">50 </span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; array ( </span><span class="string">"name" </span><span class="keyword">=&gt; </span><span class="string">"john"</span><span class="keyword">, </span><span class="string">"age" </span><span class="keyword">=&gt; </span><span class="default">25 </span><span class="keyword">)<br />
);<br />
<br />
</span><span class="default">print_r </span><span class="keyword">( </span><span class="default">arr_search </span><span class="keyword">( </span><span class="default">$data</span><span class="keyword">, </span><span class="string">"age&gt;=30" </span><span class="keyword">) );<br />
</span><span class="default">print_r </span><span class="keyword">( </span><span class="default">arr_search </span><span class="keyword">( </span><span class="default">$data</span><span class="keyword">, </span><span class="string">"name=='john'" </span><span class="keyword">) );<br />
</span><span class="default">print_r </span><span class="keyword">( </span><span class="default">arr_search </span><span class="keyword">( </span><span class="default">$data</span><span class="keyword">, </span><span class="string">"age&gt;25 and name=='john'" </span><span class="keyword">) );<br />
</span><span class="default">?&gt;<br />
</span><br />
-- results --<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; bill<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [age] =&gt; 40<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; john<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [age] =&gt; 30<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; jack<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [age] =&gt; 50<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
)<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; john<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [age] =&gt; 30<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; john<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [age] =&gt; 25<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
)<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; john<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [age] =&gt; 30<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91365""></a>
  <div class="note">
   <strong class="user">buddel</strong>
   <a href="#91365" class="date">08-Jun-2009 08:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
the recursive function by tony have a small bug. it failes when a key is 0<br />
<br />
here is the corrected version of this helpful function:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">recursive_array_search</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">,</span><span class="default">$haystack</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$current_key</span><span class="keyword">=</span><span class="default">$key</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$needle</span><span class="keyword">===</span><span class="default">$value </span><span class="keyword">OR (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) &amp;&amp; </span><span class="default">recursive_array_search</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">,</span><span class="default">$value</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$current_key</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90822""></a>
  <div class="note">
   <strong class="user">tony dot peter at wanadoo dot fr</strong>
   <a href="#90822" class="date">11-May-2009 12:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A simple recursive array_search function : <br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">recursive_array_search</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">,</span><span class="default">$haystack</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$current_key</span><span class="keyword">=</span><span class="default">$key</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$needle</span><span class="keyword">===</span><span class="default">$value </span><span class="keyword">OR (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) &amp;&amp; </span><span class="default">recursive_array_search</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">,</span><span class="default">$value</span><span class="keyword">))) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$current_key</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90711""></a>
  <div class="note">
   <strong class="user">n-regen</strong>
   <a href="#90711" class="date">05-May-2009 10:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you only know a part of a value in an array and want to know the complete value, you can use the following function:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_find</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp; foreach (</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$item</span><span class="keyword">)<br />
&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$item</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">) !== </span><span class="default">FALSE</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$item</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; break;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span>The function returns the complete first value of $haystack that contains $needle.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90577""></a>
  <div class="note">
   <strong class="user">alex at softservice dot org</strong>
   <a href="#90577" class="date">28-Apr-2009 09:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Can be useful for searching in a multi-dimensional array:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_search_in_level</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">, &amp;</span><span class="default">$result</span><span class="keyword">, </span><span class="default">$searchlevel </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">) {&nbsp; <br />
&nbsp; while(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">) &amp;&amp; isset(</span><span class="default">$haystack</span><span class="keyword">[</span><span class="default">key</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">)])) {<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$searchlevel </span><span class="keyword">== </span><span class="default">0 </span><span class="keyword">&amp;&amp; </span><span class="default">key</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">) == </span><span class="default">$key </span><span class="keyword">&amp;&amp; </span><span class="default">$haystack</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] == </span><span class="default">$needle</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">$haystack</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; } elseif(</span><span class="default">$searchlevel </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">array_search_in_level</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">[</span><span class="default">key</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">)], </span><span class="default">$key</span><span class="keyword">, </span><span class="default">$result</span><span class="keyword">, </span><span class="default">$searchlevel </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">next</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">);<br />
&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Examples:<br />
<br />
1. 2-dimensional array, search by both key and value<br />
$arr1 = array(<br />
&nbsp; 1 =&gt; array('id' =&gt; 1, 'name' =&gt; 'Alex', 'gender' =&gt; 'male'),<br />
&nbsp; ...<br />
&nbsp; 12 =&gt; array('id' =&gt; 12, 'name' =&gt; 'John', 'gender' =&gt; 'male'),<br />
);<br />
<br />
<br />
<span class="default">&lt;?php array_search_in_level</span><span class="keyword">(</span><span class="string">'John'</span><span class="keyword">, </span><span class="default">$arr1</span><span class="keyword">, </span><span class="string">'name'</span><span class="keyword">, </span><span class="default">$result</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">); </span><span class="default">?&gt;<br />
</span><br />
$result is:<br />
array(<br />
&nbsp; 'id' =&gt; int 12<br />
&nbsp; 'name' =&gt; string 'John' (length=4)<br />
&nbsp; 'gender' =&gt; string 'male' (length=4)<br />
)<br />
<br />
2. 3-dimensional array, search by value only:<br />
<br />
<span class="default">&lt;?php<br />
$arr2 </span><span class="keyword">= array(<br />
&nbsp; </span><span class="default">1 </span><span class="keyword">=&gt; array(</span><span class="string">'id' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'Alex'</span><span class="keyword">, </span><span class="string">'gender' </span><span class="keyword">=&gt; </span><span class="string">'male'</span><span class="keyword">),<br />
&nbsp; </span><span class="comment">/* ... */<br />
&nbsp; </span><span class="default">12 </span><span class="keyword">=&gt; array(</span><span class="string">'id' </span><span class="keyword">=&gt; </span><span class="default">12</span><span class="keyword">, </span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'John'</span><span class="keyword">, </span><span class="string">'gender' </span><span class="keyword">=&gt; </span><span class="string">'male'</span><span class="keyword">, </span><span class="string">'friends' </span><span class="keyword">=&gt; array(</span><span class="string">'Helen'</span><span class="keyword">, </span><span class="string">'Julia'</span><span class="keyword">)),<br />
);<br />
<br />
</span><span class="default">array_search_in_level</span><span class="keyword">(</span><span class="string">'Helen'</span><span class="keyword">, </span><span class="default">$arr1</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$result</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
$result is:<br />
array(<br />
&nbsp; 0 =&gt; string 'Helen' (length=5)<br />
&nbsp; 1 =&gt; string 'Julia' (length=5)<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90034""></a>
  <div class="note">
   <strong class="user">office at drsoft dot com</strong>
   <a href="#90034" class="date">02-Apr-2009 04:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you wish to search a multidimensional array by keys:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">extract_values_by_key </span><span class="keyword">( </span><span class="default">$array</span><span class="keyword">, </span><span class="default">$needle_key</span><span class="keyword">, &amp;</span><span class="default">$out </span><span class="keyword">= array () ) {<br />
&nbsp;&nbsp;&nbsp; foreach ( (array) </span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ( ! </span><span class="default">is_array </span><span class="keyword">( </span><span class="default">$value </span><span class="keyword">) &amp;&amp; </span><span class="default">$key </span><span class="keyword">== </span><span class="default">$needle_key </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_push </span><span class="keyword">( </span><span class="default">$out</span><span class="keyword">, </span><span class="default">$value </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">extract_values_by_key </span><span class="keyword">( </span><span class="default">$value</span><span class="keyword">, </span><span class="default">$needle_key</span><span class="keyword">, &amp;</span><span class="default">$out </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$out</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89885""></a>
  <div class="note">
   <strong class="user">elie at najberg dot fr</strong>
   <a href="#89885" class="date">26-Mar-2009 06:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is how to search a part of a val in an array :<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">array_ereg_search</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$return </span><span class="keyword">= array();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$v</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">eregi</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">, </span><span class="default">$v</span><span class="keyword">)) </span><span class="default">$return</span><span class="keyword">[] = </span><span class="default">$i</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$i</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp;&nbsp; return </span><span class="default">$return</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89414""></a>
  <div class="note">
   <strong class="user">greenmr</strong>
   <a href="#89414" class="date">06-Mar-2009 11:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Incidentally, the KeyCompare() function I described above is a generalized version. Since array_bsearch() doesn't care about specific return values, just greater then, less than, or equal to zero, when you are comparing two numbers you can greatly simplify the comparison function to something like:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp; </span><span class="keyword">function </span><span class="default">KeyCompare</span><span class="keyword">( </span><span class="default">$obj</span><span class="keyword">, </span><span class="default">$needle </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; return </span><span class="default">$obj</span><span class="keyword">[</span><span class="string">'my_key'</span><span class="keyword">] - </span><span class="default">$needle</span><span class="keyword">;<br />
&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89413""></a>
  <div class="note">
   <strong class="user">greenmr</strong>
   <a href="#89413" class="date">06-Mar-2009 10:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As others have noted, if your array is already sorted, a binary search is the way to go. When I realized PHP doesn't have a native one, I came here to see what others had done to implement this workhorse algorithm. While I appreciate those that have posted their own solutions here, none of those implementations met my needs. Also, due mainly to non-optimal loop processing, the code offered required extra post-processing to handle various ways the search loop may have exited. Proper coding of initial conditions and the main loop eliminates this extra processing.<br />
<br />
Also, the solutions presented assumed a simple one-dimensional array and basic comparisons. I needed to search an array of user objects, with the comparison performed on one of the object attributes. C/C++ handles the need for comparison flexibility by the binary search function taking a parameter that points to a user function that performs any arbitrarily complex comparison and returns a defined result depending on the relative magnitudes of the compared entities. Since PHP allows similar function reference parameters, I realised it would be quite easy to implement this functionality.<br />
<br />
I won't go into an explanation of the algorithm chosen for the main binary search function, google "binary searches" if you don't understand how they work. I will mention however that the ONLY way to exit the main loop in this function is on a match, or a definite fail. The loop will never terminate while the result of the search is indeterminate.<br />
<br />
Some solutions I've seen here and elsewhere return the index of the found element on a match, and "false" on a fail. Since PHP treats a zero the same as false in expressions, and zero is a valid array index, using false to designate "not found" gives an ambiguous result in some cases. I chose to use the value -1 to signify a search failure instead. <br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">array_bsearch</span><span class="keyword">( </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$comparator </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$high </span><span class="keyword">= </span><span class="default">Count</span><span class="keyword">( </span><span class="default">$haystack </span><span class="keyword">) -</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$low </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while ( </span><span class="default">$high </span><span class="keyword">&gt;= </span><span class="default">$low </span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$probe </span><span class="keyword">= </span><span class="default">Floor</span><span class="keyword">( ( </span><span class="default">$high </span><span class="keyword">+ </span><span class="default">$low </span><span class="keyword">) / </span><span class="default">2 </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$comparison </span><span class="keyword">= </span><span class="default">$comparator</span><span class="keyword">( </span><span class="default">$haystack</span><span class="keyword">[</span><span class="default">$probe</span><span class="keyword">], </span><span class="default">$needle </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">$comparison </span><span class="keyword">&lt; </span><span class="default">0 </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$low </span><span class="keyword">= </span><span class="default">$probe </span><span class="keyword">+</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } elseif ( </span><span class="default">$comparison </span><span class="keyword">&gt; </span><span class="default">0 </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$high </span><span class="keyword">= </span><span class="default">$probe </span><span class="keyword">-</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$probe</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="comment">// ---The loop ended without a match<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="keyword">return -</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
In this function the parameters "$needle" and "$haystack" have the same meaning as for the native array_search() PHP function. The third parameter, "$comparator" is the name of the function to use to determine if an array element matches the needle.<br />
<br />
The array_bsearch() function is self-contained, and doesn't need modification no matter how complex the comparison needs to be. The actual comparison is performed by a purpose-written user function that takes two parameters and returns a numerical result. array_bsearch() will call this function each time it needs to compare an array element to the needle. The first parameter passed will be the element to test, and the second will the the needle value passed to array_bsearch(). Note that if you will always search for the same thing your user function can ignore the second parameter and hard-code the test on the first parameter.<br />
<br />
The comparison user function must return a positive number if the element is greater than the needle, a negative number if it is smaller than the needle, and zero if they match.<br />
<br />
Given a scenario where you want to find the index of a user object loaded from MySQL in an array, where the "my_key" property equals 54. Here's how you could code it using a user function and the new array_bsearch() function.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp; </span><span class="keyword">function </span><span class="default">KeyCompare</span><span class="keyword">( </span><span class="default">$obj</span><span class="keyword">, </span><span class="default">$needle </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; if ( </span><span class="default">$obj</span><span class="keyword">[</span><span class="string">'my_key'</span><span class="keyword">] &lt; </span><span class="default">$needle </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return -</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; } elseif ( </span><span class="default">$obj</span><span class="keyword">[</span><span class="string">'my_key'</span><span class="keyword">] &gt; </span><span class="default">$needle </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp; }<br />
<br />
&nbsp; </span><span class="default">$index </span><span class="keyword">= </span><span class="default">array_bsearch</span><span class="keyword">( </span><span class="default">54</span><span class="keyword">, </span><span class="default">$my_array</span><span class="keyword">, </span><span class="string">'KeyCompare' </span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Hope this is helpful to somebody out there.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88710""></a>
  <div class="note">
   <strong class="user">info  at  [hidden]  dot  apanel  dot nl</strong>
   <a href="#88710" class="date">04-Feb-2009 05:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I made this function after I didnt find a recursive array_search function with a limit and the possibility to inverse the search. So here is it:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">search_in_array </span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$inverse </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">, </span><span class="default">$limit </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment"># Settings<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$path </span><span class="keyword">= array ();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$count </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment"># Check if inverse<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$inverse </span><span class="keyword">== </span><span class="default">true</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$haystack </span><span class="keyword">= </span><span class="default">array_reverse </span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment"># Loop<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">foreach (</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment"># Check for return<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$count </span><span class="keyword">&gt; </span><span class="default">0 </span><span class="keyword">&amp;&amp; </span><span class="default">$count </span><span class="keyword">== </span><span class="default">$limit</span><span class="keyword">)&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$path</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment"># Check for val<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$value </span><span class="keyword">=== </span><span class="default">$needle</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment"># Add to path<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$path</span><span class="keyword">[] = </span><span class="default">$key</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment"># Count<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$count</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else if (</span><span class="default">is_array </span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment"># Fetch subs<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sub </span><span class="keyword">= </span><span class="default">search_in_array </span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">, </span><span class="default">$inverse</span><span class="keyword">, </span><span class="default">$limit</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment"># Check if there are subs<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">count </span><span class="keyword">(</span><span class="default">$sub</span><span class="keyword">) &gt; </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment"># Add to path<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$path</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$sub</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment"># Add to count<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$count </span><span class="keyword">+= </span><span class="default">count </span><span class="keyword">(</span><span class="default">$sub</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$path</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88465""></a>
  <div class="note">
   <strong class="user">helenadeus at gmail dot com</strong>
   <a href="#88465" class="date">25-Jan-2009 01:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was trying to use array_search to retrieve all the values that match a given needle, but it turns out only the first match key is returned. I built this little function, which works just like array_search, but returns all the keys that match a given needle instead. The output is an array.<br />
<br />
<span class="default">&lt;?php<br />
<br />
$haystack </span><span class="keyword">= array(</span><span class="string">'a'</span><span class="keyword">,</span><span class="string">'b'</span><span class="keyword">,</span><span class="string">'a'</span><span class="keyword">,</span><span class="string">'b'</span><span class="keyword">);<br />
<br />
</span><span class="default">$needle </span><span class="keyword">= </span><span class="string">'a'</span><span class="keyword">;<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_search_all</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">));<br />
<br />
</span><span class="comment">//Output will be<br />
// Array<br />
// (<br />
//&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0]=&gt;1<br />
//&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1]=&gt;3<br />
// )<br />
<br />
</span><span class="keyword">function </span><span class="default">array_search_all</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">)<br />
{</span><span class="comment">#array_search_match($needle, $haystack) returns all the keys of the values that match $needle in $haystack<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">foreach (</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$k</span><span class="keyword">=&gt;</span><span class="default">$v</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$haystack</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">]==</span><span class="default">$needle</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$array</span><span class="keyword">[] = </span><span class="default">$k</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return (</span><span class="default">$array</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; <br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88047""></a>
  <div class="note">
   <strong class="user">tim_hauber at stev dot net</strong>
   <a href="#88047" class="date">07-Jan-2009 08:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A slight addition to array_search_recursive by Alireza Eliaderani below.&nbsp; The original searched the entire haystack, even if it found the needle at the beginning of the haystack. I must admit I had a little trouble wrapping my head around how to break out of a loop in a recursive function.&nbsp; This version returns after first occurrence of needle. changes commented.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_search_recursive</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$path</span><span class="keyword">=array();<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$id </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$val </span><span class="keyword">=== </span><span class="default">$needle</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$path</span><span class="keyword">[]=</span><span class="default">$id</span><span class="keyword">;<br />
&nbsp;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment"># ^^this breaks out of loop when it finds needle<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">} else if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$found</span><span class="keyword">=</span><span class="default">array_search_recursive</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$val</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">count</span><span class="keyword">(</span><span class="default">$found</span><span class="keyword">)&gt;</span><span class="default">0</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$path</span><span class="keyword">[</span><span class="default">$id</span><span class="keyword">]=</span><span class="default">$found</span><span class="keyword">;<br />
&nbsp;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment"># ^^this breaks out of loop when recursive call found needle<br />
&nbsp;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">}&nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; return </span><span class="default">$path</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87773""></a>
  <div class="note">
   <strong class="user">azaozz, gmail</strong>
   <a href="#87773" class="date">20-Dec-2008 05:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Expanding on the comment by hansen{}cointel.de:<br />
<br />
When searching for a string and the array contains 0 (zero), the string is casted to (int) by the type-casting which is always 0 (perhaps the opposite is the proper behaviour, the array value 0 should have been casted to string). That produces unexpected results if strict comparison is not used:<br />
<br />
<span class="default">&lt;?php<br />
$a </span><span class="keyword">= array(</span><span class="default">0</span><span class="keyword">, </span><span class="string">"str1"</span><span class="keyword">, </span><span class="string">"str2"</span><span class="keyword">, </span><span class="string">"str3"</span><span class="keyword">);<br />
echo </span><span class="string">"<br />
str1 = "</span><span class="keyword">.</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"str1"</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">).</span><span class="string">",<br />
str2 = "</span><span class="keyword">.</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"str2"</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">).</span><span class="string">",<br />
str3 = "</span><span class="keyword">.</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"str3"</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">).</span><span class="string">",<br />
<br />
str1 strict = "</span><span class="keyword">.</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"str1"</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">).</span><span class="string">",<br />
str2 strict = "</span><span class="keyword">.</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"str2"</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">).</span><span class="string">",<br />
str3 strict = "</span><span class="keyword">.</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"str3"</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
This will return:<br />
str1 = 0, str2 = 0, str3 = 0, str1 strict = 1, str2 strict = 2, str3 strict = 3</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87579""></a>
  <div class="note">
   <strong class="user">grezvany13 [at] notitia.nl</strong>
   <a href="#87579" class="date">11-Dec-2008 03:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function can search for an array or string within an array.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_search_array</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">) &amp;&amp; </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">)) { <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp </span><span class="keyword">= </span><span class="default">array_diff_assoc</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(empty(</span><span class="default">$tmp</span><span class="keyword">)) return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp </span><span class="keyword">= </span><span class="default">array_diff_assoc</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(empty(</span><span class="default">$tmp</span><span class="keyword">)) return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">) &amp;&amp; !</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp </span><span class="keyword">= </span><span class="default">array_diff_assoc</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(empty(</span><span class="default">$tmp</span><span class="keyword">)) return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } elseif(</span><span class="default">$needle </span><span class="keyword">== </span><span class="default">$value</span><span class="keyword">) return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; } elseif(</span><span class="default">$needle </span><span class="keyword">== </span><span class="default">$haystack</span><span class="keyword">) return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
It's not recursive yet, so please improve it if you feel for it ;)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87227""></a>
  <div class="note">
   <strong class="user">Alireza Eliaderani</strong>
   <a href="#87227" class="date">25-Nov-2008 10:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
this function return a multidimensional path of recursively founded $needle in a multidimensional $haystack<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_search_recursive</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$path</span><span class="keyword">=array();<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$id </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$val </span><span class="keyword">=== </span><span class="default">$needle</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$path</span><span class="keyword">[]=</span><span class="default">$id</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; else if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$found</span><span class="keyword">=</span><span class="default">array_search_recursive</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$val</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">count</span><span class="keyword">(</span><span class="default">$found</span><span class="keyword">)&gt;</span><span class="default">0</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$path</span><span class="keyword">[</span><span class="default">$id</span><span class="keyword">]=</span><span class="default">$found</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; return </span><span class="default">$path</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87060""></a>
  <div class="note">
   <strong class="user">michi7x7</strong>
   <a href="#87060" class="date">17-Nov-2008 11:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you exit the function whith "return", there is no need to break ;)<br />
<br />
i would write it like this:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">array_search_recursive</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$path</span><span class="keyword">=array())<br />
{<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$id </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$path2</span><span class="keyword">=</span><span class="default">$path</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$path2</span><span class="keyword">[] = </span><span class="default">$id</span><span class="keyword">;<br />
&nbsp;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$val </span><span class="keyword">=== </span><span class="default">$needle</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$path2</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; else if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$ret </span><span class="keyword">= </span><span class="default">array_search_recursive</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$val</span><span class="keyword">, </span><span class="default">$path2</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$ret</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
}<br />
&nbsp;<br />
</span><span class="default">$array </span><span class="keyword">= array(<br />
&nbsp;&nbsp; </span><span class="string">"a" </span><span class="keyword">=&gt; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="string">"b" </span><span class="keyword">=&gt; array(</span><span class="string">"c"</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="string">"d" </span><span class="keyword">=&gt; array(</span><span class="string">"e"</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; ),<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">"f" </span><span class="keyword">=&gt; array( </span><span class="string">"g"</span><span class="keyword">, </span><span class="string">"h"</span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; );<br />
&nbsp;<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">array_search_recursive</span><span class="keyword">(</span><span class="string">"e"</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">));<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
var dump prints a array: (a, d, 0)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85686""></a>
  <div class="note">
   <strong class="user">s0i0m at dreamevilconcepts dot com</strong>
   <a href="#85686" class="date">12-Sep-2008 02:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I wrote a better array_search_recursive function.&nbsp; The other functions listed work and will evaluate to true, however, they loop through the stack even after the needle is found: so this function will take the overhead off the cpu =P<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp; </span><span class="keyword">function </span><span class="default">array_search_recursive</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">)<br />
&nbsp; {&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">count</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$v</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] === </span><span class="default">$needle</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } <br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
<br />
&nbsp; </span><span class="default">$access</span><span class="keyword">[</span><span class="string">'admin'</span><span class="keyword">] = array(</span><span class="string">'nick1'</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$access</span><span class="keyword">[</span><span class="string">'voice'</span><span class="keyword">] = array(</span><span class="string">'nick2'</span><span class="keyword">, </span><span class="string">'nick3'</span><span class="keyword">);<br />
<br />
&nbsp; if (</span><span class="default">array_search_recursive</span><span class="keyword">(</span><span class="string">'nick3'</span><span class="keyword">, </span><span class="default">$access</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">'yes'</span><span class="keyword">;<br />
&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$access</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
I wrote this for an access list that I have implemented into an IRC bot.&nbsp; See more interesting stuff at dreamevilconcept's forum.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82897""></a>
  <div class="note">
   <strong class="user">dcez at land dot ru</strong>
   <a href="#82897" class="date">30-Apr-2008 01:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Simple way to get variable name by using array_search function:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">varname</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">){<br />
<br />
&nbsp;&nbsp;&nbsp; return (isset(</span><span class="default">$var</span><span class="keyword">))? </span><span class="default">array_search</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">, </span><span class="default">$GLOBALS</span><span class="keyword">) : </span><span class="default">false</span><span class="keyword">;<br />
<br />
}<br />
<br />
</span><span class="default">$boogie </span><span class="keyword">= </span><span class="string">'tonight'</span><span class="keyword">;<br />
<br />
echo </span><span class="default">varname</span><span class="keyword">(</span><span class="default">$boogie</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82283""></a>
  <div class="note">
   <strong class="user">andreas dot damm at maxmachine dot de</strong>
   <a href="#82283" class="date">03-Apr-2008 04:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Combining syntax of array_search() and functionality of array_keys() to get all key=&gt;value associations of an array with the given search-value:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_search_values</span><span class="keyword">( </span><span class="default">$m_needle</span><span class="keyword">, </span><span class="default">$a_haystack</span><span class="keyword">, </span><span class="default">$b_strict </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">array_intersect_key</span><span class="keyword">( </span><span class="default">$a_haystack</span><span class="keyword">, </span><span class="default">array_flip</span><span class="keyword">( </span><span class="default">array_keys</span><span class="keyword">( </span><span class="default">$a_haystack</span><span class="keyword">, </span><span class="default">$m_needle</span><span class="keyword">, </span><span class="default">$b_strict</span><span class="keyword">)));<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Usage:<br />
<span class="default">&lt;?php<br />
$array1 </span><span class="keyword">= array( </span><span class="string">'pre'</span><span class="keyword">=&gt;</span><span class="string">'2'</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">, </span><span class="string">'1'</span><span class="keyword">, </span><span class="string">'2'</span><span class="keyword">, </span><span class="string">'3'</span><span class="keyword">, </span><span class="string">'post'</span><span class="keyword">=&gt;</span><span class="default">2</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">( </span><span class="default">array_search_values</span><span class="keyword">( </span><span class="string">'2'</span><span class="keyword">, </span><span class="default">$array1</span><span class="keyword">));<br />
</span><span class="default">print_r</span><span class="keyword">( </span><span class="default">array_search_values</span><span class="keyword">( </span><span class="string">'2'</span><span class="keyword">, </span><span class="default">$array1</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">));<br />
</span><span class="default">print_r</span><span class="keyword">( </span><span class="default">array_search_values</span><span class="keyword">( </span><span class="default">2</span><span class="keyword">, </span><span class="default">$array1</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
Will return:<br />
array(4) {<br />
&nbsp;&nbsp;&nbsp; ["pre"] =&gt;<br />
&nbsp;&nbsp;&nbsp; string(1) "2"<br />
&nbsp;&nbsp;&nbsp; [1] =&gt;<br />
&nbsp;&nbsp;&nbsp; int(2)<br />
&nbsp;&nbsp;&nbsp; [4] =&gt;<br />
&nbsp;&nbsp;&nbsp; string(1) "2"<br />
&nbsp;&nbsp;&nbsp; ["post"] =&gt;<br />
&nbsp;&nbsp;&nbsp; int(2)<br />
}<br />
array(2) {<br />
&nbsp;&nbsp;&nbsp; ["pre"] =&gt;<br />
&nbsp;&nbsp;&nbsp; string(1) "2"<br />
&nbsp;&nbsp;&nbsp; [4] =&gt;<br />
&nbsp;&nbsp;&nbsp; string(1) "2"<br />
}<br />
array(2) {<br />
&nbsp;&nbsp;&nbsp; [1] =&gt;<br />
&nbsp;&nbsp;&nbsp; int(2)<br />
&nbsp;&nbsp;&nbsp; ["post"] =&gt;<br />
&nbsp;&nbsp;&nbsp; int(2)<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81677""></a>
  <div class="note">
   <strong class="user">dot  dot  dot  dot  dot alexander at gmail dot com</strong>
   <a href="#81677" class="date">09-Mar-2008 08:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is the phpfied version of the array_search function for PHP version under 4.0.5<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">if(!</span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">"array_search"</span><span class="keyword">)){<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">array_search</span><span class="keyword">( </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$strict </span><span class="keyword">= </span><span class="default">FALSE </span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if( !</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">) )return </span><span class="default">FALSE</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(&nbsp;&nbsp; (&nbsp; ( </span><span class="default">$strict </span><span class="keyword">) &amp;&amp; ( </span><span class="default">$needle </span><span class="keyword">=== </span><span class="default">$val </span><span class="keyword">)&nbsp; ) || (&nbsp; ( !</span><span class="default">$strict </span><span class="keyword">) &amp;&amp; ( </span><span class="default">$needle </span><span class="keyword">== </span><span class="default">$val </span><span class="keyword">)&nbsp; )&nbsp;&nbsp; )return </span><span class="default">$key</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">FALSE</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }</span><span class="comment">/* endfunction array_search */<br />
</span><span class="keyword">}</span><span class="comment">/* endfunction exists array_search*/<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80902""></a>
  <div class="note">
   <strong class="user">mjaning at gmail dot com</strong>
   <a href="#80902" class="date">05-Feb-2008 11:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hi! Based on Chris function, I made another to simplify code and improve diferents features...<br />
<br />
With this function you can:<br />
- Filter Key and Values recursively<br />
- Call function many times using previows result<br />
- Final result always will be an array numeric index contenting a value or sigle array key=&gt;value.<br />
<br />
Thanks for PHP!<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_search_recursive</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$nodes</span><span class="keyword">=array())<br />
{&nbsp; &nbsp; &nbsp; <br />
&nbsp; foreach (</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$key1</span><span class="keyword">=&gt;</span><span class="default">$value1</span><span class="keyword">) <br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value1</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$nodes </span><span class="keyword">= </span><span class="default">array_search_recursive</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$value1</span><span class="keyword">, </span><span class="default">$nodes</span><span class="keyword">);<br />
&nbsp;&nbsp; elseif ((</span><span class="default">$key1 </span><span class="keyword">== </span><span class="default">$needle</span><span class="keyword">) or (</span><span class="default">$value1 </span><span class="keyword">== </span><span class="default">$needle</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$nodes</span><span class="keyword">[] = array(</span><span class="default">$key1</span><span class="keyword">=&gt;</span><span class="default">$value1</span><span class="keyword">);<br />
&nbsp; } <br />
&nbsp; return </span><span class="default">$nodes</span><span class="keyword">;<br />
}<br />
&nbsp;&nbsp;&nbsp; <br />
</span><span class="default">$arg</span><span class="keyword">[] = array(</span><span class="string">"column1"</span><span class="keyword">=&gt;</span><span class="string">"Class3"</span><span class="keyword">);<br />
</span><span class="default">$arg</span><span class="keyword">[] = array(</span><span class="string">"column2"</span><span class="keyword">=&gt;</span><span class="string">"Class1"</span><span class="keyword">);<br />
</span><span class="default">$arg</span><span class="keyword">[] = array(</span><span class="string">"column3"</span><span class="keyword">=&gt;</span><span class="string">"Class3"</span><span class="keyword">);<br />
</span><span class="default">$arg</span><span class="keyword">[] = array(</span><span class="string">"column4"</span><span class="keyword">=&gt;</span><span class="string">"Class4"</span><span class="keyword">);<br />
</span><span class="default">$arg</span><span class="keyword">[] = array(</span><span class="string">"column4"</span><span class="keyword">=&gt;</span><span class="string">"Class3"</span><span class="keyword">);<br />
</span><span class="default">$arg</span><span class="keyword">[] = </span><span class="string">"column3"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
</span><span class="default">$filter </span><span class="keyword">= </span><span class="default">array_search_recursive</span><span class="keyword">(</span><span class="string">"Class3"</span><span class="keyword">,</span><span class="default">$arg</span><span class="keyword">);<br />
echo </span><span class="string">"&lt;hr&gt;"</span><span class="keyword">;</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$filter</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
</span><span class="default">$filter </span><span class="keyword">= </span><span class="default">array_search_recursive</span><span class="keyword">(</span><span class="string">"column3"</span><span class="keyword">,</span><span class="default">$filter</span><span class="keyword">);<br />
echo </span><span class="string">"&lt;hr&gt;"</span><span class="keyword">;</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$filter</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80692""></a>
  <div class="note">
   <strong class="user">pmmout at gmail dot com</strong>
   <a href="#80692" class="date">29-Jan-2008 04:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
MultiArray find function.<br />
After some time unsuccessful looking for algorithm to find a string in multidimensional array I wrote one:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">multidimArrayLocate</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$text</span><span class="keyword">){<br />
&nbsp; foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$arrayValue</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$arrayValue</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">$key </span><span class="keyword">== </span><span class="default">$text</span><span class="keyword">) </span><span class="default">$arrayResult</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$arrayValue</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$temp</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">multidimArrayLocate</span><span class="keyword">(</span><span class="default">$arrayValue</span><span class="keyword">, </span><span class="default">$text</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">$temp</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]) </span><span class="default">$arrayResult</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$temp</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else{<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">$key </span><span class="keyword">== </span><span class="default">$text</span><span class="keyword">) </span><span class="default">$arrayResult</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$arrayValue</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
&nbsp; return </span><span class="default">$arrayResult</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80385""></a>
  <div class="note">
   <strong class="user">steev at anticulture dot co dot uk</strong>
   <a href="#80385" class="date">13-Jan-2008 02:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just adding my two penneth to someone else's script from below. If you need to easily index your csv use this slightly modified script to parse a csv file into an associative array 2d, indexed by the first column value<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">buildStock</span><span class="keyword">(</span><span class="default">$File</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$handle </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="default">$File</span><span class="keyword">, </span><span class="string">"r"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$fields </span><span class="keyword">= </span><span class="default">fgetcsv</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">, </span><span class="default">1000</span><span class="keyword">, </span><span class="string">","</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while(</span><span class="default">$data </span><span class="keyword">= </span><span class="default">fgetcsv</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">, </span><span class="default">1000</span><span class="keyword">, </span><span class="string">","</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$detail</span><span class="keyword">[] = </span><span class="default">$data</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"details"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$detail</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"&lt;br /&gt;"</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$x </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$y </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$detail </span><span class="keyword">as </span><span class="default">$i</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$fields </span><span class="keyword">as </span><span class="default">$z</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//original code<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //$stock[$x][$z] = $i[$y];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$stock</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">[</span><span class="string">'0'</span><span class="keyword">]][</span><span class="default">$z</span><span class="keyword">] = </span><span class="default">$i</span><span class="keyword">[</span><span class="default">$y</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$y</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$y </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$x</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$stock</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">buildStock</span><span class="keyword">(</span><span class="string">"conf.csv"</span><span class="keyword">));<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="79535""></a>
  <div class="note">
   <strong class="user">toni dot garcia dot gutsens at gmail dot com</strong>
   <a href="#79535" class="date">02-Dec-2007 05:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Make a recursive search on array and return the matches elements in the same structure than the original array and unset empty arrays:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_search_recursive</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">,&amp;</span><span class="default">$tree</span><span class="keyword">=Array(),</span><span class="default">$index</span><span class="keyword">=</span><span class="string">""</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$tree</span><span class="keyword">)==</span><span class="default">0</span><span class="keyword">) </span><span class="default">$tree</span><span class="keyword">=</span><span class="default">array_merge</span><span class="keyword">(Array(),</span><span class="default">$haystack</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$k</span><span class="keyword">=&gt;</span><span class="default">$current</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$current</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_search_recursive</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">,</span><span class="default">$current</span><span class="keyword">,</span><span class="default">$tree</span><span class="keyword">,</span><span class="default">$index</span><span class="keyword">.</span><span class="string">"[</span><span class="default">$k</span><span class="string">]"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; eval(</span><span class="string">"\$a=\$tree</span><span class="keyword">{</span><span class="default">$index</span><span class="keyword">}</span><span class="string">[</span><span class="keyword">{</span><span class="default">$k</span><span class="keyword">}</span><span class="string">];"</span><span class="keyword">); </span><span class="comment">// unset all elements = empty array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">)==</span><span class="default">0</span><span class="keyword">)&nbsp; </span><span class="comment">//is empty?<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">eval(</span><span class="string">"unset(\$tree</span><span class="keyword">{</span><span class="default">$index</span><span class="keyword">}</span><span class="string">[</span><span class="default">$k</span><span class="string">]);"</span><span class="keyword">); </span><span class="comment">// unset array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$current</span><span class="keyword">!=</span><span class="default">$needle</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; eval(</span><span class="string">"unset(\$tree</span><span class="keyword">{</span><span class="default">$index</span><span class="keyword">}</span><span class="string">[</span><span class="keyword">{</span><span class="default">$k</span><span class="keyword">}</span><span class="string">]);"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$tree</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="79327""></a>
  <div class="note">
   <strong class="user">chris</strong>
   <a href="#79327" class="date">20-Nov-2007 07:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">/*Another recursive array_search that works better for me<br />
* Returns all the keys to all the needles found<br />
*and put them in an array. <br />
*/<br />
<br />
</span><span class="keyword">function </span><span class="default">array_search_recursive</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">, </span><span class="default">$nodes_temp</span><span class="keyword">=array()){<br />
global </span><span class="default">$nodes_found</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$a</span><span class="keyword">++;<br />
&nbsp; foreach (</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$key1</span><span class="keyword">=&gt;</span><span class="default">$value1</span><span class="keyword">) { <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$nodes_temp</span><span class="keyword">[</span><span class="default">$a</span><span class="keyword">] = </span><span class="default">$key1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value1</span><span class="keyword">)){&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">array_search_recursive</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$value1</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">, </span><span class="default">$nodes_temp</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else if (</span><span class="default">$value1 </span><span class="keyword">=== </span><span class="default">$needle</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$nodes_found</span><span class="keyword">[] = </span><span class="default">$nodes_temp</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }&nbsp; <br />
&nbsp; return </span><span class="default">$nodes_found</span><span class="keyword">; <br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="77750""></a>
  <div class="note">
   <strong class="user">kermes [at] thesevens [dot] net</strong>
   <a href="#77750" class="date">11-Sep-2007 03:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A variation of previous searches that returns an array of keys that match the given value:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_ksearch</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">); </span><span class="default">next</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">), </span><span class="default">$i</span><span class="keyword">++)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">current</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)) == </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">, </span><span class="default">key</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Usage would be as follows:<br />
<span class="default">&lt;?php<br />
$testArray </span><span class="keyword">= array(</span><span class="string">'one' </span><span class="keyword">=&gt; </span><span class="string">'test1'</span><span class="keyword">, </span><span class="string">'two' </span><span class="keyword">=&gt; </span><span class="string">'test2'</span><span class="keyword">, </span><span class="string">'three' </span><span class="keyword">=&gt; </span><span class="string">'test1'</span><span class="keyword">, </span><span class="string">'four' </span><span class="keyword">=&gt; </span><span class="string">'test2'</span><span class="keyword">, </span><span class="string">'five' </span><span class="keyword">=&gt; </span><span class="string">'test1'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_ksearch</span><span class="keyword">(</span><span class="default">$testArray</span><span class="keyword">, </span><span class="string">'test1'</span><span class="keyword">));<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="77525""></a>
  <div class="note">
   <strong class="user">robertark at gmail dot com</strong>
   <a href="#77525" class="date">01-Sep-2007 11:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A better array_isearch would be to store all results in an array, then return the KEYS stored in $found, such as:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_isearch</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">){<br />
&nbsp; </span><span class="default">$found </span><span class="keyword">= array();<br />
&nbsp; foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">) == </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">)) </span><span class="default">$found</span><span class="keyword">[] = </span><span class="default">$k</span><span class="keyword">;<br />
&nbsp; return </span><span class="default">$found</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
To use, simply have an array to search from then search it, for example:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">array_isearch</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">$found </span><span class="keyword">= array();<br />
&nbsp; foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">) == </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">)) </span><span class="default">$found</span><span class="keyword">[] = </span><span class="default">$k</span><span class="keyword">;<br />
&nbsp; return </span><span class="default">$found</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$stored </span><span class="keyword">= </span><span class="string">"these are an array"</span><span class="keyword">;<br />
</span><span class="default">$stored </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">" "</span><span class="keyword">, </span><span class="default">$stored</span><span class="keyword">);<br />
<br />
</span><span class="default">$compare </span><span class="keyword">= array(</span><span class="string">"these"</span><span class="keyword">, </span><span class="string">"are"</span><span class="keyword">, </span><span class="string">"some"</span><span class="keyword">, </span><span class="string">"results"</span><span class="keyword">, </span><span class="string">"stored"</span><span class="keyword">, </span><span class="string">"in"</span><span class="keyword">, </span><span class="string">"an"</span><span class="keyword">, </span><span class="string">"array"</span><span class="keyword">);<br />
foreach(</span><span class="default">$stored </span><span class="keyword">as </span><span class="default">$store</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">$results </span><span class="keyword">= </span><span class="default">array_isearch</span><span class="keyword">(</span><span class="default">$store</span><span class="keyword">, </span><span class="default">$compare</span><span class="keyword">);<br />
&nbsp; foreach(</span><span class="default">$results </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$result</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"Key: "</span><span class="keyword">.</span><span class="default">$results</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">].</span><span class="string">"&lt;br /&gt;Found: "</span><span class="keyword">.</span><span class="default">$compare</span><span class="keyword">[</span><span class="default">$result</span><span class="keyword">].</span><span class="string">"&lt;br /&gt;"</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Hope this helps :-)<br />
<br />
-Rob</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75319""></a>
  <div class="note">
   <strong class="user">php5 site builder</strong>
   <a href="#75319" class="date">23-May-2007 10:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you encounter a situation where condition test is failing on the result of either array_search or in_array, even when using "===" and "!==", make sure to set $strict = true in your array_search() or in_array() function call.<br />
<br />
A situation such as :<br />
<br />
$arTemp[0] = 1;<br />
$arTemp[1] = 0;<br />
$arTemp[2] = 3;<br />
$arTemp[3] = 5;<br />
$sTempTest = 'BLAH';<br />
<br />
$bResult = in_array($sTempTest,$arTemp);<br />
$bResult2 = array_search($sTempTest,$arTemp);<br />
<br />
var_dump($bResult);<br />
var_dump($bResult2);<br />
<br />
will result in :<br />
<br />
boolean true<br />
int 1<br />
<br />
Using :<br />
<br />
$bResult = in_array($sTempTest,$arTemp,true);<br />
$bResult2 = array_search($sTempTest,$arTemp,true);<br />
<br />
will yield :<br />
boolean false<br />
boolean false<br />
<br />
This is necessary in any instance where you have an array value equal to the integer zero.&nbsp; As soon as you put the zero in quotes or double quotes (a string), the evaluation works with in_array &amp; array_search without the $strict parameter being set.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="72640""></a>
  <div class="note">
   <strong class="user">elvenone at gmail dot com</strong>
   <a href="#72640" class="date">27-Jan-2007 05:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Search an array in reverse order.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">array_reverse_search</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&gt;=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">--) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] == </span><span class="default">$value</span><span class="keyword">) return </span><span class="default">$i</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return -</span><span class="default">1</span><span class="keyword">;&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="72424""></a>
  <div class="note">
   <strong class="user">francois at tekwire dot net</strong>
   <a href="#72424" class="date">18-Jan-2007 02:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Please note that, in PHP5, if you search for an object in an array using the array_search() function, PHP will return the first object whose properties match, not the same class and instance as your needle. In other words, the object comparison is of type '==', not '===' (see the 'Comparing objects' page).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="72139""></a>
  <div class="note">
   <strong class="user">erick dot xavier at gmail dot com</strong>
   <a href="#72139" class="date">04-Jan-2007 04:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Modifing the "multiarray_search" to unordered Array....<br />
<span class="default">&lt;?PHP<br />
</span><span class="keyword">function </span><span class="default">multiarray_search</span><span class="keyword">(</span><span class="default">$arrayVet</span><span class="keyword">, </span><span class="default">$campo</span><span class="keyword">, </span><span class="default">$valor</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; while(isset(</span><span class="default">$arrayVet</span><span class="keyword">[</span><span class="default">key</span><span class="keyword">(</span><span class="default">$arrayVet</span><span class="keyword">)])){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$arrayVet</span><span class="keyword">[</span><span class="default">key</span><span class="keyword">(</span><span class="default">$arrayVet</span><span class="keyword">)][</span><span class="default">$campo</span><span class="keyword">] == </span><span class="default">$valor</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">key</span><span class="keyword">(</span><span class="default">$arrayVet</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">next</span><span class="keyword">(</span><span class="default">$arrayVet</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return -</span><span class="default">1</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">//I.e.:<br />
<br />
</span><span class="default">$myArr </span><span class="keyword">= array(<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">13 </span><span class="keyword">=&gt; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"fruit" </span><span class="keyword">=&gt; </span><span class="string">"banana"<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">654 </span><span class="keyword">=&gt; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"fruit" </span><span class="keyword">=&gt; </span><span class="string">"apple"<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">2445 </span><span class="keyword">=&gt; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"fruit" </span><span class="keyword">=&gt; </span><span class="string">"nothing more"<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">)<br />
);<br />
<br />
print(</span><span class="default">multiarray_search</span><span class="keyword">(</span><span class="default">$myArr </span><span class="keyword">, </span><span class="string">"fruit"</span><span class="keyword">, </span><span class="string">"apple"</span><span class="keyword">));<br />
<br />
</span><span class="comment">/*<br />
Output:<br />
654<br />
*/<br />
<br />
//and<br />
<br />
</span><span class="keyword">print(</span><span class="default">multiarray_search</span><span class="keyword">(</span><span class="default">$myArr </span><span class="keyword">, </span><span class="string">"fruit"</span><span class="keyword">, </span><span class="string">"orange"</span><span class="keyword">));<br />
<br />
</span><span class="comment">/*<br />
Output:<br />
-1<br />
*/<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="71746""></a>
  <div class="note">
   <strong class="user">otto at twbc dot net</strong>
   <a href="#71746" class="date">13-Dec-2006 11:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Unlimited depth array regular expression search, I found it useful, perhaps someone else will too. Searches on the array values only. Key search could be easily added.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">Array_Search_Preg</span><span class="keyword">( </span><span class="default">$find</span><span class="keyword">, </span><span class="default">$in_array</span><span class="keyword">, </span><span class="default">$keys_found</span><span class="keyword">=Array() )<br />
{<br />
&nbsp;&nbsp;&nbsp; if( </span><span class="default">is_array</span><span class="keyword">( </span><span class="default">$in_array </span><span class="keyword">) )<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach( </span><span class="default">$in_array </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt; </span><span class="default">$val </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( </span><span class="default">is_array</span><span class="keyword">( </span><span class="default">$val </span><span class="keyword">) ) </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">Array_Search_Preg</span><span class="keyword">( </span><span class="default">$find</span><span class="keyword">, </span><span class="default">$val</span><span class="keyword">, </span><span class="default">$keys_found </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( </span><span class="default">preg_match</span><span class="keyword">( </span><span class="string">'/'</span><span class="keyword">. </span><span class="default">$find </span><span class="keyword">.</span><span class="string">'/'</span><span class="keyword">, </span><span class="default">$val </span><span class="keyword">) ) </span><span class="default">$keys_found</span><span class="keyword">[] = </span><span class="default">$key</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$keys_found</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="71129""></a>
  <div class="note">
   <strong class="user">evert_18 at hotmail dot com</strong>
   <a href="#71129" class="date">13-Nov-2006 06:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function can search in multidimensional arrays, no mather how multidimensional the array is! <br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_search</span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">,</span><span class="default">$needle</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$value </span><span class="keyword">== </span><span class="default">$needle </span><span class="keyword">|| </span><span class="default">$key </span><span class="keyword">== </span><span class="default">$needle</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return(</span><span class="default">true</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">search</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">,</span><span class="default">$needle</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return(</span><span class="default">false</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="70615""></a>
  <div class="note">
   <strong class="user">dmitry dot polushkin at gmail dot com</strong>
   <a href="#70615" class="date">21-Oct-2006 10:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To get the key of the found search value, use:<br />
<span class="default">&lt;?php<br />
$a </span><span class="keyword">= array(</span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'b'</span><span class="keyword">, </span><span class="string">'c'</span><span class="keyword">);<br />
echo </span><span class="default">array_search</span><span class="keyword">(</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">'c'</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">), </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">));<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="70001""></a>
  <div class="note">
   <strong class="user">jupiter at nospam dot com</strong>
   <a href="#70001" class="date">29-Sep-2006 02:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Checks that array value STARTS with the string(needle), while other functions require an exact match OR the needle can be anywhere within.&nbsp; This function can be manipulated to END with the needle if needed<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// returns first key of haystackarray which array valuestring starts with needlestring, is case-sensitive<br />
</span><span class="keyword">function </span><span class="default">arrayHaystackStartsWithNeedleString</span><span class="keyword">(</span><span class="default">$haystackarray</span><span class="keyword">, </span><span class="default">$needlestring</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$haystackarray</span><span class="keyword">)) {&nbsp; </span><span class="comment">// confirms array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$needlelength </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$needlestring</span><span class="keyword">);&nbsp; </span><span class="comment">// length of string needle<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">foreach (</span><span class="default">$haystackarray </span><span class="keyword">as </span><span class="default">$arraykey </span><span class="keyword">=&gt; </span><span class="default">$arrayvalue</span><span class="keyword">) {&nbsp; </span><span class="comment">// gets array value<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arraypart </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$arrayvalue</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$needlelength</span><span class="keyword">);&nbsp; </span><span class="comment">// first characters of array value<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$needlestring </span><span class="keyword">== </span><span class="default">$arraypart</span><span class="keyword">) {&nbsp; </span><span class="comment">// did we find a match<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$arraykey</span><span class="keyword">;&nbsp; </span><span class="comment">// return will stop loop<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}&nbsp; </span><span class="comment">// end match conditional<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}&nbsp; </span><span class="comment">// end loop<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">}&nbsp; </span><span class="comment">// end array check<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">false</span><span class="keyword">;&nbsp; </span><span class="comment">// no matches found if this far<br />
</span><span class="keyword">}<br />
</span><span class="default">?&gt;<br />
</span>I haven't speed tested this, but it should be pretty quick.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="69965""></a>
  <div class="note">
   <strong class="user">Digitally Designed dot co dot uk</strong>
   <a href="#69965" class="date">28-Sep-2006 02:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
My Function to search a Multidimensional array.<br />
<br />
Pass in :<br />
<br />
$theNeedle as what you want to find.<br />
$theHaystack as the array <br />
$keyToSearch as what key in the array you want to find the value in.<br />
<br />
<span class="default">&lt;?php&nbsp; &nbsp; <br />
<br />
</span><span class="keyword">function </span><span class="default">myMulti_Array_Search</span><span class="keyword">(</span><span class="default">$theNeedle</span><span class="keyword">, </span><span class="default">$theHaystack</span><span class="keyword">, </span><span class="default">$keyToSearch</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$theHaystack </span><span class="keyword">as </span><span class="default">$theKey </span><span class="keyword">=&gt; </span><span class="default">$theValue</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$intCurrentKey </span><span class="keyword">= </span><span class="default">$theKey</span><span class="keyword">;&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$theValue</span><span class="keyword">[</span><span class="default">$keyToSearch</span><span class="keyword">] == </span><span class="default">$theNeedle</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$intCurrentKey </span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="69826""></a>
  <div class="note">
   <strong class="user">lars-magne</strong>
   <a href="#69826" class="date">22-Sep-2006 05:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Further comments on the multidimensional array searches given earlier:<br />
<br />
I needed an extended search function which could search in both keys and values in any # dimension array and return all results. Each result contains key/value hit, type (key or value), key path and value (in case result is a key).<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">array_search_ext</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">, </span><span class="default">$search</span><span class="keyword">, </span><span class="default">$exact </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">, </span><span class="default">$trav_keys </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">)<br />
{<br />
&nbsp; if(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">) || !</span><span class="default">$search </span><span class="keyword">|| (</span><span class="default">$trav_keys </span><span class="keyword">&amp;&amp; !</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$trav_keys</span><span class="keyword">))) return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$res_arr </span><span class="keyword">= array();<br />
&nbsp; foreach(</span><span class="default">$arr </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">)<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$used_keys </span><span class="keyword">= </span><span class="default">$trav_keys </span><span class="keyword">? </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$trav_keys</span><span class="keyword">, array(</span><span class="default">$key</span><span class="keyword">)) : array(</span><span class="default">$key</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if((</span><span class="default">$key </span><span class="keyword">=== </span><span class="default">$search</span><span class="keyword">) || (!</span><span class="default">$exact </span><span class="keyword">&amp;&amp; (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">), </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">)) !== </span><span class="default">false</span><span class="keyword">))) </span><span class="default">$res_arr</span><span class="keyword">[] = array(</span><span class="string">'type' </span><span class="keyword">=&gt; </span><span class="string">"key"</span><span class="keyword">, </span><span class="string">'hit' </span><span class="keyword">=&gt; </span><span class="default">$key</span><span class="keyword">, </span><span class="string">'keys' </span><span class="keyword">=&gt; </span><span class="default">$used_keys</span><span class="keyword">, </span><span class="string">'val' </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">) &amp;&amp; (</span><span class="default">$children_res </span><span class="keyword">= </span><span class="default">array_search_ext</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">, </span><span class="default">$search</span><span class="keyword">, </span><span class="default">$exact</span><span class="keyword">, </span><span class="default">$used_keys</span><span class="keyword">))) </span><span class="default">$res_arr </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$res_arr</span><span class="keyword">, </span><span class="default">$children_res</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; else if((</span><span class="default">$val </span><span class="keyword">=== </span><span class="default">$search</span><span class="keyword">) || (!</span><span class="default">$exact </span><span class="keyword">&amp;&amp; (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">), </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">)) !== </span><span class="default">false</span><span class="keyword">))) </span><span class="default">$res_arr</span><span class="keyword">[] = array(</span><span class="string">'type' </span><span class="keyword">=&gt; </span><span class="string">"val"</span><span class="keyword">, </span><span class="string">'hit' </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">, </span><span class="string">'keys' </span><span class="keyword">=&gt; </span><span class="default">$used_keys</span><span class="keyword">, </span><span class="string">'val' </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">);<br />
&nbsp; }<br />
&nbsp; return </span><span class="default">$res_arr </span><span class="keyword">? </span><span class="default">$res_arr </span><span class="keyword">: </span><span class="default">false</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">// I.e.:<br />
</span><span class="default">$haystack</span><span class="keyword">[</span><span class="default">754</span><span class="keyword">] = </span><span class="string">"Norwegian"</span><span class="keyword">;<br />
</span><span class="default">$haystack</span><span class="keyword">[</span><span class="default">28</span><span class="keyword">][</span><span class="string">'details'</span><span class="keyword">][</span><span class="string">'Norway'</span><span class="keyword">] = </span><span class="string">"Oslo"</span><span class="keyword">;<br />
</span><span class="default">$needle </span><span class="keyword">= </span><span class="string">"Norw"</span><span class="keyword">;<br />
<br />
if(</span><span class="default">$results </span><span class="keyword">= </span><span class="default">array_search_ext</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">false</span><span class="keyword">))<br />
&nbsp; foreach(</span><span class="default">$results </span><span class="keyword">as </span><span class="default">$res</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"Found '</span><span class="default">$needle</span><span class="string">' in </span><span class="default">$res</span><span class="keyword">[</span><span class="default">type</span><span class="keyword">]</span><span class="string"> '</span><span class="default">$res</span><span class="keyword">[</span><span class="default">hit</span><span class="keyword">]</span><span class="string">', using key(s) '"</span><span class="keyword">.</span><span class="default">implode</span><span class="keyword">(</span><span class="string">"', '"</span><span class="keyword">, </span><span class="default">$res</span><span class="keyword">[</span><span class="string">'keys'</span><span class="keyword">]).</span><span class="string">"'. (Value: </span><span class="default">$res</span><span class="keyword">[</span><span class="default">val</span><span class="keyword">]</span><span class="string">)&lt;br /&gt;\n"</span><span class="keyword">;<br />
<br />
</span><span class="comment">/* Printed result will be:<br />
Found 'Norw' in val 'Norwegian', using key(s) '754'. (Value: Norwegian)<br />
Found 'Norw' in key 'Norway', using key(s) '28', 'details', 'Norway'. (Value: Oslo)<br />
*/<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="69588""></a>
  <div class="note">
   <strong class="user">mark dot php at mhudson dot net</strong>
   <a href="#69588" class="date">11-Sep-2006 05:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was going to complain bitterly about array_search() using zero-based indexes, but then I realized I should be using in_array() instead.<br />
<br />
// if ( isset( $_GET['table'] ) and array_search( $_GET['table'], $valid_tables) ) {&nbsp; // BAD: fails on first[0] element<br />
// if ( isset( $_GET['table'] ) and ( FALSE !== array_search( $_GET['table'], $valid_tables) ) ) { OK: but wasteful and convoluted<br />
&nbsp;&nbsp; if ( isset( $_GET['table'] ) and in_array( $_GET['table'], $valid_tables) ) { // BETTER<br />
<br />
The essence is this: if you really want to know the location of an element in an array, then use array_search, else if you only want to know whether that element exists, then use in_array()</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="69232""></a>
  <div class="note">
   <strong class="user">ob at babcom dot biz</strong>
   <a href="#69232" class="date">28-Aug-2006 02:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function is based on the function in comment "array_search" from July 26th 2006.<br />
<br />
I added the possibility of defining the key which $Needle shall be searched for.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// search haystack for needle and return an array of the key path,<br />
// FALSE otherwise.<br />
// if NeedleKey is given, return only for this key<br />
// mixed ArraySearchRecursive(mixed Needle,array Haystack<br />
//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [,NeedleKey[,bool Strict[,array Path]]])<br />
<br />
</span><span class="keyword">function </span><span class="default">ArraySearchRecursive</span><span class="keyword">(</span><span class="default">$Needle</span><span class="keyword">,</span><span class="default">$Haystack</span><span class="keyword">,</span><span class="default">$NeedleKey</span><span class="keyword">=</span><span class="string">""</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$Strict</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">,</span><span class="default">$Path</span><span class="keyword">=array()) {<br />
&nbsp; if(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$Haystack</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp; foreach(</span><span class="default">$Haystack </span><span class="keyword">as </span><span class="default">$Key </span><span class="keyword">=&gt; </span><span class="default">$Val</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$Val</span><span class="keyword">)&amp;&amp;<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$SubPath</span><span class="keyword">=</span><span class="default">ArraySearchRecursive</span><span class="keyword">(</span><span class="default">$Needle</span><span class="keyword">,</span><span class="default">$Val</span><span class="keyword">,</span><span class="default">$NeedleKey</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$Strict</span><span class="keyword">,</span><span class="default">$Path</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$Path</span><span class="keyword">=</span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$Path</span><span class="keyword">,Array(</span><span class="default">$Key</span><span class="keyword">),</span><span class="default">$SubPath</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; return </span><span class="default">$Path</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; elseif((!</span><span class="default">$Strict</span><span class="keyword">&amp;&amp;</span><span class="default">$Val</span><span class="keyword">==</span><span class="default">$Needle</span><span class="keyword">&amp;&amp;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$Key</span><span class="keyword">==(</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$NeedleKey</span><span class="keyword">)&gt;</span><span class="default">0</span><span class="keyword">?</span><span class="default">$NeedleKey</span><span class="keyword">:</span><span class="default">$Key</span><span class="keyword">))||<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (</span><span class="default">$Strict</span><span class="keyword">&amp;&amp;</span><span class="default">$Val</span><span class="keyword">===</span><span class="default">$Needle</span><span class="keyword">&amp;&amp;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$Key</span><span class="keyword">==(</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$NeedleKey</span><span class="keyword">)&gt;</span><span class="default">0</span><span class="keyword">?</span><span class="default">$NeedleKey</span><span class="keyword">:</span><span class="default">$Key</span><span class="keyword">))) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$Path</span><span class="keyword">[]=</span><span class="default">$Key</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; return </span><span class="default">$Path</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Remove unnecessary new lines. I had to add them because of too long lines.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68424""></a>
  <div class="note">
   
   <a href="#68424" class="date">26-Jul-2006 07:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;* Searches haystack for needle and returns an array of the key path if it is found in the (multidimensional) array, FALSE otherwise.<br />
&nbsp;*<br />
&nbsp;* mixed array_searchRecursive ( mixed needle, array haystack [, bool strict[, array path]] )<br />
&nbsp;*/<br />
<br />
</span><span class="keyword">function </span><span class="default">array_searchRecursive</span><span class="keyword">( </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$strict</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">, </span><span class="default">$path</span><span class="keyword">=array() )<br />
{<br />
&nbsp;&nbsp;&nbsp; if( !</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">) ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; foreach( </span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if( </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">) &amp;&amp; </span><span class="default">$subPath </span><span class="keyword">= </span><span class="default">array_searchRecursive</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$val</span><span class="keyword">, </span><span class="default">$strict</span><span class="keyword">, </span><span class="default">$path</span><span class="keyword">) ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$path </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">, array(</span><span class="default">$key</span><span class="keyword">), </span><span class="default">$subPath</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$path</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } elseif( (!</span><span class="default">$strict </span><span class="keyword">&amp;&amp; </span><span class="default">$val </span><span class="keyword">== </span><span class="default">$needle</span><span class="keyword">) || (</span><span class="default">$strict </span><span class="keyword">&amp;&amp; </span><span class="default">$val </span><span class="keyword">=== </span><span class="default">$needle</span><span class="keyword">) ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$path</span><span class="keyword">[] = </span><span class="default">$key</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$path</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">; <br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="64598""></a>
  <div class="note">
   <strong class="user">gullevek at gullevek dot org</strong>
   <a href="#64598" class="date">18-Apr-2006 10:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There were two previous entries for having a recursive search. The first one only searched for values, second one for values with an optional key.<br />
<br />
But both of those stopped after they found an entry. I needed, that it searches recursive, with optional key and returns me all matches found in the array.<br />
<br />
So I wrote this function:<br />
<br />
needle is the value you search, haystack is the array of course, key is the optional key in the array where the needle should be. path should be never set on intial call. its an internal used variable.<br />
<br />
It returns an array $path with the array entry 'found' where you can find all found groups. In these groups you have the array which holds the keys to find the data.<br />
<br />
I hope this helps some of you.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">array_search_recursive_all</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">, </span><span class="default">$path </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">$path</span><span class="keyword">[</span><span class="string">'level'</span><span class="keyword">])<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$path</span><span class="keyword">[</span><span class="string">'level'</span><span class="keyword">] = </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">$path</span><span class="keyword">[</span><span class="string">'work'</span><span class="keyword">])<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$path</span><span class="keyword">[</span><span class="string">'work'</span><span class="keyword">] = array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$haystack </span><span class="keyword">= array();<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// go through the array,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">foreach (</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$_key </span><span class="keyword">=&gt; </span><span class="default">$_value</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// only value matches<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">is_scalar</span><span class="keyword">(</span><span class="default">$_value</span><span class="keyword">) &amp;&amp; </span><span class="default">$_value </span><span class="keyword">== </span><span class="default">$needle </span><span class="keyword">&amp;&amp; !</span><span class="default">$key</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$path</span><span class="keyword">[</span><span class="string">'work'</span><span class="keyword">][</span><span class="default">$path</span><span class="keyword">[</span><span class="string">'level'</span><span class="keyword">]] = </span><span class="default">$_key</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$path</span><span class="keyword">[</span><span class="string">'found'</span><span class="keyword">][] = </span><span class="default">$path</span><span class="keyword">[</span><span class="string">'work'</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// key and value matches<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">elseif (</span><span class="default">is_scalar</span><span class="keyword">(</span><span class="default">$_value</span><span class="keyword">) &amp;&amp; </span><span class="default">$_value </span><span class="keyword">== </span><span class="default">$needle </span><span class="keyword">&amp;&amp; </span><span class="default">$_key </span><span class="keyword">== </span><span class="default">$key</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$path</span><span class="keyword">[</span><span class="string">'work'</span><span class="keyword">][</span><span class="default">$path</span><span class="keyword">[</span><span class="string">'level'</span><span class="keyword">]] = </span><span class="default">$_key</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$path</span><span class="keyword">[</span><span class="string">'found'</span><span class="keyword">][] = </span><span class="default">$path</span><span class="keyword">[</span><span class="string">'work'</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; elseif (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$_value</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// add position to working<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$path</span><span class="keyword">[</span><span class="string">'work'</span><span class="keyword">][</span><span class="default">$path</span><span class="keyword">[</span><span class="string">'level'</span><span class="keyword">]] = </span><span class="default">$_key</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// we will up a level<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$path</span><span class="keyword">[</span><span class="string">'level'</span><span class="keyword">] += </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// call recursive<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$path </span><span class="keyword">= </span><span class="default">array_search_recursive_all</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$_value</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">, </span><span class="default">$path</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// cut all that is &gt;= level<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_splice</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">[</span><span class="string">'work'</span><span class="keyword">], </span><span class="default">$path</span><span class="keyword">[</span><span class="string">'level'</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// step back a level<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$path</span><span class="keyword">[</span><span class="string">'level'</span><span class="keyword">] -= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$path</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
If you call it with this:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $right_side </span><span class="keyword">= array (</span><span class="string">'foo' </span><span class="keyword">=&gt; </span><span class="string">'alpha'</span><span class="keyword">, </span><span class="string">'bar' </span><span class="keyword">=&gt; </span><span class="string">'beta'</span><span class="keyword">, </span><span class="string">'delta' </span><span class="keyword">=&gt; </span><span class="string">'gamma'</span><span class="keyword">, </span><span class="string">'gamma' </span><span class="keyword">=&gt; </span><span class="string">'delta'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="string">'beta'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$key </span><span class="keyword">= </span><span class="string">'bar'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">array_search_recursive_all</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$right_side</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
You will find in $pos this data<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [level] =&gt; -1<br />
&nbsp;&nbsp;&nbsp; [work] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [found] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; bar<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="63338""></a>
  <div class="note">
   <strong class="user">RichGC</strong>
   <a href="#63338" class="date">20-Mar-2006 05:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To expand on previous comments, here are some examples of<br />
where using array_search within an IF statement can go<br />
wrong when you want to use the array key thats returned.<br />
<br />
Take the following two arrays you wish to search:<br />
<br />
<span class="default">&lt;?php<br />
$fruit_array </span><span class="keyword">= array(</span><span class="string">"apple"</span><span class="keyword">, </span><span class="string">"pear"</span><span class="keyword">, </span><span class="string">"orange"</span><span class="keyword">);<br />
</span><span class="default">$fruit_array </span><span class="keyword">= array(</span><span class="string">"a" </span><span class="keyword">=&gt; </span><span class="string">"apple"</span><span class="keyword">, </span><span class="string">"b" </span><span class="keyword">=&gt; </span><span class="string">"pear"</span><span class="keyword">, </span><span class="string">"c" </span><span class="keyword">=&gt; </span><span class="string">"orange"</span><span class="keyword">);<br />
<br />
if (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"apple"</span><span class="keyword">, </span><span class="default">$fruit_array</span><span class="keyword">))<br />
</span><span class="comment">//PROBLEM: the first array returns a key of 0 and IF treats it as FALSE<br />
<br />
</span><span class="keyword">if (</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"apple"</span><span class="keyword">, </span><span class="default">$fruit_array</span><span class="keyword">)))<br />
</span><span class="comment">//PROBLEM: works on numeric keys of the first array but fails on the second<br />
<br />
</span><span class="keyword">if (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"apple"</span><span class="keyword">, </span><span class="default">$fruit_array</span><span class="keyword">)))<br />
</span><span class="comment">//PROBLEM: using the above in the wrong order causes $i to always equal 1<br />
<br />
</span><span class="keyword">if (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"apple"</span><span class="keyword">, </span><span class="default">$fruit_array</span><span class="keyword">) !== </span><span class="default">FALSE</span><span class="keyword">)<br />
</span><span class="comment">//PROBLEM: explicit with no extra brackets causes $i to always equal 1<br />
<br />
</span><span class="keyword">if ((</span><span class="default">$i </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"apple"</span><span class="keyword">, </span><span class="default">$fruit_array</span><span class="keyword">)) !== </span><span class="default">FALSE</span><span class="keyword">)<br />
</span><span class="comment">//YES: works on both arrays returning their keys<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="62810""></a>
  <div class="note">
   <strong class="user">congaz at yahoo dot dk</strong>
   <a href="#62810" class="date">09-Mar-2006 07:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Search a multi-dimensional array on keys!<br />
-------------------------------------------<br />
<br />
I needed to search dynamically in a multi-dimen array on keys. I came up with this little neat function. It is so amazingly simple, that I actually didn't think it would work - but it does... <br />
<br />
mixed array_searchMultiOnKeys(array, array);<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_searchMultiOnKeys</span><span class="keyword">(</span><span class="default">$multiArray</span><span class="keyword">, </span><span class="default">$searchKeysArray</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Iterate through searchKeys, making $multiArray smaller and smaller.<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">foreach (</span><span class="default">$searchKeysArray </span><span class="keyword">as </span><span class="default">$keySearch</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$multiArray </span><span class="keyword">= </span><span class="default">$multiArray</span><span class="keyword">[</span><span class="default">$keySearch</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">$multiArray</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Check $result. <br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$multiArray</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// An array was found at the end of the search. Return true.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else if (</span><span class="default">$result </span><span class="keyword">== </span><span class="string">''</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// There was nothing found at the end of the search. Return false.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;<br />
</span><span class="comment">// End of function,<br />
</span><span class="keyword">}<br />
<br />
</span><span class="comment">// --- Test array_searchMultiOnKeys ---<br />
</span><span class="default">$multiArray</span><span class="keyword">[</span><span class="string">'webpages'</span><span class="keyword">][</span><span class="string">'downloads'</span><span class="keyword">][</span><span class="string">'music'</span><span class="keyword">] = </span><span class="default">1</span><span class="keyword">;<br />
</span><span class="default">$multiArray</span><span class="keyword">[</span><span class="string">'webpages'</span><span class="keyword">][</span><span class="string">'downloads'</span><span class="keyword">][</span><span class="string">'pressmaterial'</span><span class="keyword">] = </span><span class="default">5</span><span class="keyword">;<br />
</span><span class="default">$multiArray</span><span class="keyword">[</span><span class="string">'webpages'</span><span class="keyword">][</span><span class="string">'links'</span><span class="keyword">] = </span><span class="default">7</span><span class="keyword">;<br />
<br />
</span><span class="default">array_searchMultiOnKeys</span><span class="keyword">(</span><span class="default">$multiArray</span><span class="keyword">, array(</span><span class="string">'webpages'</span><span class="keyword">, </span><span class="string">'links'</span><span class="keyword">)); </span><span class="comment">// returns 7.<br />
</span><span class="default">array_searchMultiOnKeys</span><span class="keyword">(</span><span class="default">$multiArray</span><span class="keyword">, array(</span><span class="string">'webpages'</span><span class="keyword">, </span><span class="string">'downloads'</span><span class="keyword">)); </span><span class="comment">// returns true.<br />
</span><span class="default">array_searchMultiOnKeys</span><span class="keyword">(</span><span class="default">$multiArray</span><span class="keyword">, array(</span><span class="string">'webpages'</span><span class="keyword">, </span><span class="string">'downloads'</span><span class="keyword">, </span><span class="string">'software'</span><span class="keyword">)); </span><span class="comment">// returns false.<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
$multiArray / $searchKeysArray can be any size.<br />
<br />
Happy hacking...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="61768""></a>
  <div class="note">
   <strong class="user">chappy at citromail dot hu</strong>
   <a href="#61768" class="date">11-Feb-2006 12:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you're searching for strings and you need a case-insensetive script, there's one:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_lsearch</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">$array</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$found</span><span class="keyword">=array();<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$k</span><span class="keyword">=&gt;</span><span class="default">$v</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">)==</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$found</span><span class="keyword">[]=</span><span class="default">$v</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$f</span><span class="keyword">=</span><span class="default">count</span><span class="keyword">(</span><span class="default">$found</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$f</span><span class="keyword">===</span><span class="default">0</span><span class="keyword">)return </span><span class="default">false</span><span class="keyword">;elseif(</span><span class="default">$f</span><span class="keyword">===</span><span class="default">1</span><span class="keyword">)return </span><span class="default">$found</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];else return </span><span class="default">$found</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
It returns the original string, not the lower. Also good if use strtoupper().</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="61672""></a>
  <div class="note">
   <strong class="user">hansen{}cointel.de</strong>
   <a href="#61672" class="date">08-Feb-2006 06:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
may be good to take note of PHP's mind-boggling 'fuzzy' (vulgo "magic type-casting") comparison features not only in using the results, but also in the search, too:<br />
<span class="default">&lt;?php<br />
$a</span><span class="keyword">=array(</span><span class="string">"a"</span><span class="keyword">,</span><span class="string">"b"</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="string">"c"</span><span class="keyword">,</span><span class="string">"d"</span><span class="keyword">);<br />
echo </span><span class="string">"a: "</span><span class="keyword">.</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"a"</span><span class="keyword">,</span><span class="default">$a</span><span class="keyword">);<br />
echo </span><span class="string">"b: "</span><span class="keyword">.</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"b"</span><span class="keyword">,</span><span class="default">$a</span><span class="keyword">);<br />
echo </span><span class="string">"c: "</span><span class="keyword">.</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"c"</span><span class="keyword">,</span><span class="default">$a</span><span class="keyword">);<br />
echo </span><span class="string">"d: "</span><span class="keyword">.</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"d"</span><span class="keyword">,</span><span class="default">$a</span><span class="keyword">);<br />
echo </span><span class="string">"0: "</span><span class="keyword">.</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"0"</span><span class="keyword">,</span><span class="default">$a</span><span class="keyword">);<br />
echo </span><span class="string">"x: "</span><span class="keyword">.</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"x"</span><span class="keyword">,</span><span class="default">$a</span><span class="keyword">);<br />
echo </span><span class="string">"1: "</span><span class="keyword">.</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"1"</span><span class="keyword">,</span><span class="default">$a</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span>will result in:<br />
a: 0, b: 1, c: 2, d: 2, 0: 2, x: 2, 1: false<br />
<br />
as from "c" on, the first match found in $a is "0", as any string compared to an int is automatically cast to (int)0.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="59013""></a>
  <div class="note">
   <strong class="user">ludwig_von_rocht at yahoo dot com</strong>
   <a href="#59013" class="date">23-Nov-2005 03:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's a little function I wrote to find the key of the LAST occurrance of something in an array.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">if(!</span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">'array_rsearch'</span><span class="keyword">)){<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">array_rsearch</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">, </span><span class="default">$strict </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">array_reverse</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$strict</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$value </span><span class="keyword">=== </span><span class="default">$search</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$key</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$search</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$key</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="58974""></a>
  <div class="note">
   <strong class="user">mark meves</strong>
   <a href="#58974" class="date">22-Nov-2005 03:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A quick-and-dirty array_search_all() that i used for a small<br />
dup-checking routine.&nbsp; <br />
<br />
there are many, many ways to do something like this, not <br />
the worst of which would be to use a relational database <br />
for a dataset any larger than this ;)<br />
<br />
-mark meves<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
@return array of zero or more keys form $aHaystack whose <br />
&nbsp;&nbsp;&nbsp; values match $mScalarNeedle using a <br />
&nbsp;&nbsp;&nbsp; '==', (ie not strict) comparison<br />
*/<br />
</span><span class="keyword">function </span><span class="default">array_search_all</span><span class="keyword">(</span><span class="default">$mScalarNeedle</span><span class="keyword">,</span><span class="default">$aHaystack</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">array_keys</span><span class="keyword">( </span><span class="default">array_filter</span><span class="keyword">(</span><span class="default">$aHaystack</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'$v'</span><span class="keyword">,</span><span class="string">'return $v == \''</span><span class="keyword">.</span><span class="default">addslashes</span><span class="keyword">(</span><span class="default">$mScalarNeedle</span><span class="keyword">).</span><span class="string">'\';'</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; ));<br />
}<br />
<br />
</span><span class="comment">/*<br />
test it:<br />
*/<br />
</span><span class="default">$aNicknames </span><span class="keyword">= array(</span><span class="string">'jimmy'</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">,</span><span class="string">'james'</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">,</span><span class="string">'jim'</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'billy'</span><span class="keyword">=&gt;</span><span class="default">2</span><span class="keyword">,</span><span class="string">'william'</span><span class="keyword">=&gt;</span><span class="default">2</span><span class="keyword">,</span><span class="string">'bill'</span><span class="keyword">=&gt;</span><span class="default">2</span><span class="keyword">);<br />
foreach(array(</span><span class="string">'jim'</span><span class="keyword">,</span><span class="string">'bill'</span><span class="keyword">) as </span><span class="default">$sName</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"variations for \"</span><span class="default">$sName</span><span class="string">\" :("</span><span class="keyword">.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">implode</span><span class="keyword">(</span><span class="string">', '</span><span class="keyword">, </span><span class="default">array_search_all</span><span class="keyword">(</span><span class="default">$aNicknames</span><span class="keyword">[</span><span class="default">$sName</span><span class="keyword">],</span><span class="default">$aNicknames</span><span class="keyword">)).<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">")\n"</span><span class="keyword">;<br />
}<br />
</span><span class="comment">/* outputs: <br />
variations for "jim" are (jimmy, james, jim)<br />
variations for "bill" are (billy, william, bill)<br />
*/<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="47579""></a>
  <div class="note">
   <strong class="user">pornsak at neowin dot net</strong>
   <a href="#47579" class="date">21-Nov-2004 07:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is a modified version of Mark Meves's wonderful function. I needed something that would be able to let me force search the key name where the needle should be found.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_search_recursive</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$key_lookin</span><span class="keyword">=</span><span class="string">""</span><span class="keyword">) {<br />
<br />
</span><span class="default">$path </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; if (!empty(</span><span class="default">$key_lookin</span><span class="keyword">) &amp;&amp; </span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$key_lookin</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">) &amp;&amp; </span><span class="default">$needle </span><span class="keyword">=== </span><span class="default">$haystack</span><span class="keyword">[</span><span class="default">$key_lookin</span><span class="keyword">]) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$path</span><span class="keyword">[] = </span><span class="default">$key_lookin</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; } else {<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_scalar</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">) &amp;&amp; </span><span class="default">$val </span><span class="keyword">=== </span><span class="default">$needle </span><span class="keyword">&amp;&amp; empty(</span><span class="default">$key_lookin</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$path</span><span class="keyword">[] = </span><span class="default">$key</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }&nbsp; &nbsp; &nbsp; &nbsp; <br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; elseif (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">) &amp;&amp; </span><span class="default">$path </span><span class="keyword">= </span><span class="default">array_search_recursive</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$val</span><span class="keyword">, </span><span class="default">$key_lookin</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_unshift</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
return </span><span class="default">$path</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="47116""></a>
  <div class="note">
   <strong class="user">scripts at webfire dot org</strong>
   <a href="#47116" class="date">03-Nov-2004 09:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
* Multi-Dimensional Array Search *<br />
If you're searching for a function to search in Multi-Arrays,<br />
this is probably usefull for you. <br />
-------------------------------------------------------------<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">multi_array_search</span><span class="keyword">(</span><span class="default">$search_value</span><span class="keyword">, </span><span class="default">$the_array</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$the_array</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$the_array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">multi_array_search</span><span class="keyword">(</span><span class="default">$search_value</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">)) <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$return </span><span class="keyword">= </span><span class="default">$result</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_unshift</span><span class="keyword">(</span><span class="default">$return</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$return</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; elseif (</span><span class="default">$result </span><span class="keyword">== </span><span class="default">true</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$return</span><span class="keyword">[] = </span><span class="default">$key</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$return</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$search_value </span><span class="keyword">== </span><span class="default">$the_array</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
-------------------------------------------------------------<br />
It will return an Array with the keys from the original array<br />
where your search-string was found or false. e.g.:<br />
-------------------------------------------------------------<br />
<br />
<span class="default">&lt;?php<br />
$foo</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="string">'a'</span><span class="keyword">][</span><span class="string">'xx'</span><span class="keyword">] = </span><span class="string">'bar 1'</span><span class="keyword">;<br />
</span><span class="default">$foo</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="string">'b'</span><span class="keyword">][</span><span class="string">'xx'</span><span class="keyword">] = </span><span class="string">'bar 2'</span><span class="keyword">;<br />
</span><span class="default">$foo</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="string">'a'</span><span class="keyword">][</span><span class="string">'bb'</span><span class="keyword">] = </span><span class="string">'bar 3'</span><span class="keyword">;<br />
</span><span class="default">$foo</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="string">'a'</span><span class="keyword">][</span><span class="string">'yy'</span><span class="keyword">] = </span><span class="string">'bar 4'</span><span class="keyword">;<br />
</span><span class="default">$foo</span><span class="keyword">[</span><span class="string">'info'</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">] = </span><span class="string">'bar 5'</span><span class="keyword">;<br />
<br />
</span><span class="default">$result </span><span class="keyword">= </span><span class="default">multi_array_search</span><span class="keyword">(</span><span class="string">'bar 3'</span><span class="keyword">, </span><span class="default">$foo</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
-------------------------------------------------------------<br />
<br />
Output:<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp; &nbsp;&nbsp; [0] =&gt; 2<br />
&nbsp;&nbsp; &nbsp;&nbsp; [1] =&gt; a<br />
&nbsp;&nbsp; &nbsp;&nbsp; [2] =&gt; bb<br />
)<br />
<br />
-------------------------------------------------------------<br />
<br />
I hope you like it ;)<br />
greetz Udo<br />
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="46762""></a>
  <div class="note">
   <strong class="user">Flix Cloutier &lt;felixcca at yahoo dot ca&gt;</strong>
   <a href="#46762" class="date">22-Oct-2004 05:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There is no function to count the occurences of needle in haystack, so I made my own one...<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_match</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; if( !</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">) ) return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; while( (</span><span class="default">in_array</span><span class="keyword">( </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack </span><span class="keyword">)) != </span><span class="default">FALSE </span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$haystack</span><span class="keyword">[</span><span class="default">array_search</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">)] = </span><span class="default">md5</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">reset</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$i</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
I know it's a bit crappy, but don't ask me too much, I'm still only 13... ;)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="44894""></a>
  <div class="note">
   <strong class="user">Wouter van Vliet &lt;me at woutervanvliet dot nl&gt;</strong>
   <a href="#44894" class="date">19-Aug-2004 08:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was looking for a way to use a user defined function for array_search and eventually came up writing my own. Which was remarkably simple :P. Let me share this:<br />
<br />
<span class="default">&lt;?php <br />
</span><span class="keyword">function </span><span class="default">array_usearch</span><span class="keyword">(</span><span class="default">$cb</span><span class="keyword">, </span><span class="default">$ndl</span><span class="keyword">, </span><span class="default">$hs</span><span class="keyword">, </span><span class="default">$strict</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$hs</span><span class="keyword">)) </span><span class="default">user_error</span><span class="keyword">(</span><span class="string">'Third argument to array_usearch is expected to be an array, '</span><span class="keyword">.</span><span class="default">gettype</span><span class="keyword">(</span><span class="default">$hs</span><span class="keyword">).</span><span class="string">' given'</span><span class="keyword">, </span><span class="default">E_USER_ERROR</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$hs </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">) if (</span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="default">$cb</span><span class="keyword">, Array(</span><span class="default">$ndl</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">, </span><span class="default">$strict</span><span class="keyword">))) return </span><span class="default">$key</span><span class="keyword">;<br />
};<br />
</span><span class="default">?&gt;<br />
</span><br />
I'm not sure if I'm following correct conventions to specify the callback as the first argument, but it seemed most logical to me to not interrupt the order of the other four arguments (mixed needle, array haystack, boole strict).<br />
<br />
[so far for my first post to the php notes]</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="44492""></a>
  <div class="note">
   <strong class="user">andrey at php dot net</strong>
   <a href="#44492" class="date">07-Aug-2004 04:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
array_search() has kind of hidden behaviour which comes from the way PHP compares values of different types (PHP is a type-loose language) - so called type juggling.<br />
for example :<br />
<span class="default">&lt;?php<br />
$a</span><span class="keyword">=array(</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">);<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">array_search</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span>In the array there are only integers but we give a boolean value TRUE for be the needle. The result is that array_search() returns the first non-negative value in the haystack array. The same way if we pass FALSE it will return the first value that compared with FALSE gives TRUE - for example NULL<br />
<span class="default">&lt;?php<br />
$a</span><span class="keyword">=array(</span><span class="default">1</span><span class="keyword">,</span><span class="default">NULL</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">);<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">array_search</span><span class="keyword">(</span><span class="default">FALSE</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span>Returns:<br />
int(1)&nbsp; &lt;-- the key of the NULL value</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="42101""></a>
  <div class="note">
   <strong class="user">softexpert [at] libertysurf [dot] fr</strong>
   <a href="#42101" class="date">03-May-2004 11:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I use this for searching for a value in a bidimensional array .<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">SearchBiDimArray</span><span class="keyword">(&amp;</span><span class="default">$theArray</span><span class="keyword">, </span><span class="default">$dimNo</span><span class="keyword">, </span><span class="default">$searchValue</span><span class="keyword">, </span><span class="default">$returnIndex </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$theArray</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$keys </span><span class="keyword">= </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$theArray</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$key </span><span class="keyword">= </span><span class="default">$keys</span><span class="keyword">[</span><span class="default">$dimNo</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$elcount </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$theArray</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$elcount</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$theArray</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">] === </span><span class="default">$searchValue</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$returnIndex</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$i</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$theArray</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">array_search</span><span class="keyword">(</span><span class="default">$searchValue</span><span class="keyword">, </span><span class="default">$theArray</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">$theArray </span><span class="keyword">= array();<br />
</span><span class="default">$theArray</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="string">'firstproperty'</span><span class="keyword">] = </span><span class="string">'avalue1'</span><span class="keyword">;<br />
</span><span class="default">$theArray</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="string">'secondproperty'</span><span class="keyword">] = </span><span class="string">'anothervalue1'</span><span class="keyword">;<br />
<br />
</span><span class="default">$theArray</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="string">'firstproperty'</span><span class="keyword">] = </span><span class="string">'avalue2'</span><span class="keyword">;<br />
</span><span class="default">$theArray</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="string">'secondproperty'</span><span class="keyword">] = </span><span class="string">'anothervalue2'</span><span class="keyword">;<br />
<br />
</span><span class="default">$theArray</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="string">'firstproperty'</span><span class="keyword">] = </span><span class="string">'avalue3'</span><span class="keyword">;<br />
</span><span class="default">$theArray</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="string">'secondproperty'</span><span class="keyword">] = </span><span class="string">'anothervalue3'</span><span class="keyword">;<br />
<br />
print </span><span class="default">SearchBiDimArray</span><span class="keyword">(</span><span class="default">$theArray</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="string">'anothervalue2'</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />
</span><span class="comment">// result is 1<br />
<br />
</span><span class="keyword">print </span><span class="default">SearchBiDimArray</span><span class="keyword">(</span><span class="default">$theArray</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="string">'anothervalue2'</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />
</span><span class="comment">// result is<br />
//Array<br />
//(<br />
//&nbsp; &nbsp; [firstproperty] =&gt; avalue2<br />
//&nbsp; &nbsp; [secondproperty] =&gt; anothervalue2<br />
//)<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="39419""></a>
  <div class="note">
   <strong class="user">dcsoboda at oakland dot edu</strong>
   <a href="#39419" class="date">28-Jan-2004 01:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I've noticed problems with array_search() when it's handling extremely large arrays.<br />
<br />
In one example, I had a 2000 slot array with a 128 char string in each slot, and was searching for a 128 char string within the array.<br />
<br />
It regularly returned the wrong key. I even had it print the search string, along with the found key in the array, as a&nbsp; test, and it would print obvious different strings.<br />
<br />
The problem was alleviated when I ran gzcompress() on each array slot (and on my search string, obviously). In this case, no strings were longer than 67 bytes. It performed far faster and had no accuracy problems.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="39115""></a>
  <div class="note">
   <strong class="user">dennis dot decoene at removthis dot moveit dot be</strong>
   <a href="#39115" class="date">17-Jan-2004 10:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It has been said before: array_search is VERY slow. Everyone knows binary search is fast by design. Here is an implementation.<br />
<br />
<span class="default">&lt;?php<br />
$arr</span><span class="keyword">=array(</span><span class="default">1</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">,</span><span class="default">7</span><span class="keyword">,</span><span class="default">9</span><span class="keyword">,</span><span class="default">10</span><span class="keyword">,</span><span class="default">11</span><span class="keyword">,</span><span class="default">13</span><span class="keyword">);<br />
</span><span class="default">$searchfor </span><span class="keyword">= </span><span class="default">6</span><span class="keyword">;<br />
echo </span><span class="default">binsearch</span><span class="keyword">(</span><span class="default">$searchfor</span><span class="keyword">, </span><span class="default">$arr</span><span class="keyword">);<br />
<br />
</span><span class="comment">/**<br />
&nbsp;* @return integer<br />
&nbsp;* @param var $needle<br />
&nbsp;* @param array $haystack<br />
&nbsp;* @desc Feed a sorted array to $haystack and a value to search for to $needle.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; It will return false if not found or the index where it was found.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; This function is superfast. Try an array with 50.000 elements and search for something,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; you will be amazed.<br />
*/<br />
</span><span class="keyword">function </span><span class="default">binsearch</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$high </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$low </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; while (</span><span class="default">$high </span><span class="keyword">- </span><span class="default">$low </span><span class="keyword">&gt; </span><span class="default">1</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$probe </span><span class="keyword">= (</span><span class="default">$high </span><span class="keyword">+ </span><span class="default">$low</span><span class="keyword">) / </span><span class="default">2</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$haystack</span><span class="keyword">[</span><span class="default">$probe</span><span class="keyword">] &lt; </span><span class="default">$needle</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$low </span><span class="keyword">= </span><span class="default">$probe</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$high </span><span class="keyword">= </span><span class="default">$probe</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$high </span><span class="keyword">== </span><span class="default">count</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">) || </span><span class="default">$haystack</span><span class="keyword">[</span><span class="default">$high</span><span class="keyword">] != </span><span class="default">$needle</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$high</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="37533""></a>
  <div class="note">
   <strong class="user">jwhite at ytztech dot com</strong>
   <a href="#37533" class="date">18-Nov-2003 06:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Searching arrays is a very slow process.&nbsp; I've tried to use as many strings as I can for where an array is called, if possible. Here's a quick test to show the (eye-popping) difference between searching for a match between strings and arrays:<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp; $test_string </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
&nbsp; for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt;= </span><span class="default">500000</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$test_string </span><span class="keyword">.= </span><span class="string">'['</span><span class="keyword">.</span><span class="default">$i</span><span class="keyword">.</span><span class="string">']'</span><span class="keyword">;<br />
&nbsp; }<br />
<br />
&nbsp; </span><span class="default">$test_array </span><span class="keyword">= array();<br />
&nbsp; for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt;= </span><span class="default">5000</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$test_array</span><span class="keyword">[] = </span><span class="default">$i</span><span class="keyword">;<br />
&nbsp; }<br />
<br />
&nbsp; </span><span class="default">$time_str </span><span class="keyword">= </span><span class="default">getmicrotime</span><span class="keyword">();<br />
&nbsp; for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt;= </span><span class="default">500000</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">strstr</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">,</span><span class="default">$test_string</span><span class="keyword">);<br />
&nbsp; }<br />
&nbsp; </span><span class="default">$time_str </span><span class="keyword">= </span><span class="default">getmicrotime</span><span class="keyword">() - </span><span class="default">$time_str</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="default">$time_array </span><span class="keyword">= </span><span class="default">getmicrotime</span><span class="keyword">();<br />
&nbsp; for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt;= </span><span class="default">5000</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">array_search</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">,</span><span class="default">$test_array</span><span class="keyword">);<br />
&nbsp; }<br />
&nbsp; </span><span class="default">$time_array </span><span class="keyword">= </span><span class="default">getmicrotime</span><span class="keyword">() - </span><span class="default">$time_array</span><span class="keyword">;<br />
<br />
&nbsp; echo </span><span class="string">"&lt;H1&gt;Test Results&lt;/H1&gt;\r\n"</span><span class="keyword">;<br />
&nbsp; echo </span><span class="string">"&lt;P&gt;String Test:&amp;nbsp; </span><span class="default">$time_str</span><span class="string"> seconds.&lt;/P&gt;\r\n"</span><span class="keyword">;<br />
&nbsp; echo </span><span class="string">"&lt;P&gt;Array Test:&amp;nbsp; </span><span class="default">$time_array</span><span class="string"> seconds.&lt;/P&gt;\r\n"</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; function </span><span class="default">getmicrotime</span><span class="keyword">(){<br />
&nbsp;&nbsp; &nbsp; list(</span><span class="default">$usec</span><span class="keyword">, </span><span class="default">$sec</span><span class="keyword">) = </span><span class="default">explode</span><span class="keyword">(</span><span class="string">" "</span><span class="keyword">,</span><span class="default">microtime</span><span class="keyword">());<br />
&nbsp;&nbsp; &nbsp; return ((float)</span><span class="default">$usec </span><span class="keyword">+ (float)</span><span class="default">$sec</span><span class="keyword">);<br />
&nbsp;&nbsp; }<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
This code block takes some time to get going (because of the number of strings to place into memory), the results, even on modest hardware are staggering.&nbsp; Comparing 500000 strstr() operations to 5000 array_search() operations on a P3-800 with 512 MB of RAM got the following output:<br />
<br />
[H1]Test Results[/H1]<br />
[P]String Test: 3.09137701988 seconds.[/P]<br />
[P]Array Test:&nbsp; 4.23609495163 seconds.[/P]<br />
<br />
The getmicrotime() function came from the note on microtime(), so that's not mine...credit to "daniel141 at yahoo dot com".<br />
<br />
STRINGS RULE!<br />
--<br />
Justin White<br />
YTZ Technical Services, LLC</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="37364""></a>
  <div class="note">
   <strong class="user">php at celerondude dot com</strong>
   <a href="#37364" class="date">12-Nov-2003 03:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I think array_search uses serial search because they binary search function i wrote here seems to do a better job for records that are not always at the beginning of the array. <br />
<br />
Here it is<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">binarySearch </span><span class="keyword">( </span><span class="default">$a</span><span class="keyword">, </span><span class="default">$t</span><span class="keyword">, </span><span class="default">$l</span><span class="keyword">, </span><span class="default">$r </span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$t</span><span class="keyword">&lt;</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$l</span><span class="keyword">]||</span><span class="default">$t</span><span class="keyword">&gt;</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$r</span><span class="keyword">])return </span><span class="default">NULL</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; while ( </span><span class="default">$l </span><span class="keyword">&lt; </span><span class="default">$r </span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$m</span><span class="keyword">=</span><span class="default">intval</span><span class="keyword">(</span><span class="default">$l</span><span class="keyword">+</span><span class="default">$r</span><span class="keyword">)/</span><span class="default">2</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$m</span><span class="keyword">]==</span><span class="default">$t</span><span class="keyword">)return </span><span class="default">$m</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; elseif(</span><span class="default">$t</span><span class="keyword">&lt;</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$m</span><span class="keyword">])</span><span class="default">$r</span><span class="keyword">=</span><span class="default">$m</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; elseif(</span><span class="default">$t</span><span class="keyword">&gt;</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$m</span><span class="keyword">])</span><span class="default">$l </span><span class="keyword">= </span><span class="default">$m </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$t</span><span class="keyword">==</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$r</span><span class="keyword">])<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$r</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">NULL</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
usage:<br />
binarySearch ( array, target, left range, right range );<br />
<br />
if your array is a multidimensional array, simply change the comparison method. :)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="32883""></a>
  <div class="note">
   <strong class="user">cue at openxbox dot com</strong>
   <a href="#32883" class="date">09-Jun-2003 07:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you are using the result of array_search in a condition statement, make sure you use the === operator instead of == to test whether or not it found a match.&nbsp; Otherwise, searching through an array with numeric indicies will result in index 0 always getting evaluated as false/null.&nbsp; This nuance cost me a lot of time and sanity, so I hope this helps someone.&nbsp; In case you don't know what I'm talking about, here's an example:<br />
<br />
<span class="default">&lt;?php<br />
$code </span><span class="keyword">= array(</span><span class="string">"a"</span><span class="keyword">, </span><span class="string">"b"</span><span class="keyword">, </span><span class="string">"a"</span><span class="keyword">, </span><span class="string">"c"</span><span class="keyword">, </span><span class="string">"a"</span><span class="keyword">, </span><span class="string">"b"</span><span class="keyword">, </span><span class="string">"b"</span><span class="keyword">); </span><span class="comment">// infamous abacabb mortal kombat code :-P<br />
<br />
// this is WRONG<br />
</span><span class="keyword">while ((</span><span class="default">$key </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"a"</span><span class="keyword">, </span><span class="default">$code</span><span class="keyword">)) != </span><span class="default">NULL</span><span class="keyword">)<br />
{<br />
&nbsp;</span><span class="comment">// infinite loop, regardless of the unset<br />
&nbsp;</span><span class="keyword">unset(</span><span class="default">$code</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);<br />
}<br />
<br />
</span><span class="comment">// this is _RIGHT_<br />
</span><span class="keyword">while ((</span><span class="default">$key </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"a"</span><span class="keyword">, </span><span class="default">$code</span><span class="keyword">)) !== </span><span class="default">NULL</span><span class="keyword">)<br />
{<br />
&nbsp;</span><span class="comment">// loop will terminate<br />
&nbsp;</span><span class="keyword">unset(</span><span class="default">$code</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="31280""></a>
  <div class="note">
   <strong class="user">richard at richard-sumilang dot com</strong>
   <a href="#31280" class="date">16-Apr-2003 03:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; Search an array recursivly<br />
&nbsp;&nbsp; &nbsp; *<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; This function will search an array recursivly<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; till it finds what it is looking for. An array<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; within an array within an array within array<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; is all good :-)<br />
&nbsp;&nbsp; &nbsp; *<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; @author&nbsp; &nbsp; &nbsp; &nbsp; Richard Sumilang&nbsp; &nbsp; &lt;richard@richard-sumilang.com&gt;<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; @param&nbsp; &nbsp; &nbsp; &nbsp; string&nbsp; &nbsp; $needle&nbsp; &nbsp; &nbsp; &nbsp; What are you searching for?<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; @param&nbsp; &nbsp; &nbsp; &nbsp; array&nbsp; &nbsp; $haystack&nbsp; &nbsp; What you want to search in<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; @return&nbsp; &nbsp; &nbsp; &nbsp; boolean<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; @access&nbsp; &nbsp; &nbsp; &nbsp; public<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">array_search_r</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$value</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$match</span><span class="keyword">=</span><span class="default">array_search_r</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$value</span><span class="keyword">==</span><span class="default">$needle</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$match</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$match</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="30385""></a>
  <div class="note">
   <strong class="user">Darkvie</strong>
   <a href="#30385" class="date">16-Mar-2003 04:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I wanted to search a&nbsp; multidimensional array for a value &amp; assign another element of array CONTAINING the searched value.<br />
<br />
In the array I am using ($Projects), each item in $Projects contains a "Text_ID" &amp; "Text_Value" field from a database result. I want to search for a "Text_ID" value (456 in this example)&nbsp; &amp; get it's "Text_Value" value assigned to a variable called $Text_Value.<br />
<br />
Here's how I did it:<br />
============================================<br />
<br />
<span class="default">&lt;?PHP<br />
</span><span class="comment">//Array I am going to look in: <br />
</span><span class="default">$Projects</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] = array(</span><span class="default">123</span><span class="keyword">, </span><span class="string">"Text 1"</span><span class="keyword">);&nbsp;&nbsp; <br />
</span><span class="default">$Projects</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] = array(</span><span class="default">456</span><span class="keyword">, </span><span class="string">"Text 2"</span><span class="keyword">);&nbsp;&nbsp; <br />
</span><span class="default">$Projects</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">] = array(</span><span class="default">789</span><span class="keyword">, </span><span class="string">"Text 3"</span><span class="keyword">);&nbsp;&nbsp; <br />
<br />
</span><span class="comment">// This loop goes through every element in $Projects<br />
</span><span class="keyword">foreach (</span><span class="default">$Projects </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$ArrayRow</span><span class="keyword">)<br />
{&nbsp; &nbsp; <br />
</span><span class="comment">// Now: $ArrayRow[0] = $Projects[x][0] and $ArrayRow[1] = $Projects[x][1]<br />
<br />
// Look for the value "456".&nbsp; Assign to variable &amp; stop looking if found.<br />
</span><span class="keyword">if (</span><span class="default">$ArrayRow</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] == </span><span class="string">"456"</span><span class="keyword">)&nbsp; {</span><span class="default">$Text_Value</span><span class="keyword">= </span><span class="default">$ArrayRow</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]; break; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
============================================<br />
Hope this helps someone. <br />
-Darkive</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="29930""></a>
  <div class="note">
   <strong class="user">retestro_REMOVE at SPAM_esperanto dot org dot il</strong>
   <a href="#29930" class="date">28-Feb-2003 08:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you're interested in finding a line in a file, after you read it into an array using file(), you can not use array_search since the match should be exact, and lines have line-endings ('\n', '\r' or '\n\r') - or else you know for sure what your lines contain physically.<br />
<br />
The solution is to traverse the whole array, trim() each entry and then use array_search() - or - use something like the following small function I wrote for myself:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">search_array</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">) || !</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;&nbsp; </span><span class="comment">// not valid argument types<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">@</span><span class="default">reset</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while (list (</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">) = </span><span class="default">each</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">);&nbsp; </span><span class="comment">// remove spaces from the beginning and the end<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$value </span><span class="keyword">=== </span><span class="default">$needle</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$key</span><span class="keyword">;&nbsp; </span><span class="comment">// $needle was found, return the key<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;&nbsp; </span><span class="comment">// no $needle was found in $haystack<br />
</span><span class="keyword">}<br />
</span><span class="default">?&gt;<br />
</span><br />
-----------------------------<br />
Notes:<br />
1. you should check the return value with === since 0 as a key equals to 'false'.<br />
&nbsp;&nbsp;&nbsp; i.e. if (search_array('my_line', $my_array) === false)&nbsp; { ... }<br />
2. I have no need in whitespace at the beginning of the line, therefore I use trim(). If it's important to you, use rtrim() or chop() instead.<br />
<br />
-<br />
- Sergey.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="22605""></a>
  <div class="note">
   <strong class="user">saltymeat at hotmail dot com</strong>
   <a href="#22605" class="date">24-Jun-2002 02:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's how you can use array_search() to replace all occurances of a value in an array:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_replace</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$tofind</span><span class="keyword">, </span><span class="default">$toreplace</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="default">$tofind</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$i </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$a</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$a</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">$toreplace</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">array_replace</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$tofind</span><span class="keyword">, </span><span class="default">$toreplace</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Usage:<br />
$a = array(1,2,3);<br />
$a = array_replace($a, 1, 4);<br />
echo $a[0]; // Outputs 4</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="21845""></a>
  <div class="note">
   <strong class="user">dakota at dir dot bg</strong>
   <a href="#21845" class="date">29-May-2002 04:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For versions later than 4.2.0, the check&nbsp; isset($key) won't work properly because the function now returns false, which "isset". This change is missing in the Change Log!<br />
<br />
So the right way to use the function is:<br />
<br />
<span class="default">&lt;?php<br />
$key </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">);<br />
if (</span><span class="default">$key</span><span class="keyword">!==</span><span class="default">null</span><span class="keyword">&amp;&amp;</span><span class="default">$key</span><span class="keyword">!==</span><span class="default">false</span><span class="keyword">) {<br />
&nbsp; ...<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
This example will work in both older and newer to 4.2.0 versions.<br />
<br />
P.S.: My previous post where isset() is used won't work in newer versions.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="21182""></a>
  <div class="note">
   <strong class="user">swbrown at ucsd dot edu</strong>
   <a href="#21182" class="date">02-May-2002 01:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be absolutely sure to check that your code that uses array_search now checks for 'false' too if you upgrade to PHP 4.2.0!<br />
<br />
I was using array_search in my page authentication routines and this change had the fun side-effect of causing my code to always think a user had full permissions!&nbsp; It was letting anyone click through to our installation of phpMyAdmin.&nbsp; Not good indeed!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="18765""></a>
  <div class="note">
   <strong class="user">saconner at iastate dot edu</strong>
   <a href="#18765" class="date">04-Feb-2002 01:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In PHP versions before 4.2.0 needle was not allowed to be an array.&nbsp; (funnily enough, at time of posting this note, we're still at ver 4.1.1 )</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.array-reverse.html">array_reverse</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.array-shift.html">array_shift</a></div>
 <div class="up"><a href="ref.array.html">Array Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
