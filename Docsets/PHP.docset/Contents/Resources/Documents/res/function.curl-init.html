<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Initialize a cURL session</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.curl-getinfo.html">curl_getinfo</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.curl-multi-add-handle.html">curl_multi_add_handle</a></div>
 <div class="up"><a href="ref.curl.html">cURL Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.curl-init" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">curl_init</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.0.2, PHP 5)</p><p class="refpurpose"><span class="refname">curl_init</span> &mdash; <span class="dc-title">Initialize a cURL session</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.curl-init-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">resource</span> <span class="methodname"><b>curl_init</b></span>
    ([ <span class="methodparam"><span class="type">string</span> <tt class="parameter">$url</tt><span class="initializer"> = <b><tt>NULL</tt></b></span></span>
  ] )</div>

  <p class="para rdfs-comment">
   Initializes a new session and return a cURL handle for use with the
   <span class="function"><a href="function.curl-setopt.html" class="function">curl_setopt()</a></span>, <span class="function"><a href="function.curl-exec.html" class="function">curl_exec()</a></span>,
   and <span class="function"><a href="function.curl-close.html" class="function">curl_close()</a></span> functions.  
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.curl-init-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><i><tt class="parameter">url</tt></i></span>
     <dd>

      <p class="para">
       If provided, the <b><tt>CURLOPT_URL</tt></b> option will be set
       to its value. You can manually set this using the 
       <span class="function"><a href="function.curl-setopt.html" class="function">curl_setopt()</a></span> function.
      </p>
      <blockquote class="note"><p><b class="note">Note</b>: 
       <p class="para">
        The <i>file</i> protocol is disabled by cURL if
        <a href="ini.core.html#ini.open-basedir" class="link">open_basedir</a> is set.
       </p>
      </p></blockquote>
     </dd>

    </dt>

   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.curl-init-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns a cURL handle on success, <b><tt>FALSE</tt></b> on errors.
  </p>
 </div>

 
 <div class="refsect1 examples" id="refsect1-function.curl-init-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   <div class="example" id="example-3831">
    <p><b>Example #1 
     Initializing a new cURL session and fetching a web page
    </b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;create&nbsp;a&nbsp;new&nbsp;cURL&nbsp;resource<br /></span><span style="color: #0000BB">$ch&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">curl_init</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">//&nbsp;set&nbsp;URL&nbsp;and&nbsp;other&nbsp;appropriate&nbsp;options<br /></span><span style="color: #0000BB">curl_setopt</span><span style="color: #007700">(</span><span style="color: #0000BB">$ch</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">CURLOPT_URL</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"http://www.example.com/"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">curl_setopt</span><span style="color: #007700">(</span><span style="color: #0000BB">$ch</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">CURLOPT_HEADER</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;grab&nbsp;URL&nbsp;and&nbsp;pass&nbsp;it&nbsp;to&nbsp;the&nbsp;browser<br /></span><span style="color: #0000BB">curl_exec</span><span style="color: #007700">(</span><span style="color: #0000BB">$ch</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;close&nbsp;cURL&nbsp;resource,&nbsp;and&nbsp;free&nbsp;up&nbsp;system&nbsp;resources<br /></span><span style="color: #0000BB">curl_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$ch</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.curl-init-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.curl-close.html" class="function" rel="rdfs-seeAlso">curl_close()</a> - Close a cURL session</span></li>
    <li class="member"><span class="function"><a href="function.curl-multi-init.html" class="function" rel="rdfs-seeAlso">curl_multi_init()</a> - Returns a new cURL multi handle</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="101233""></a>
  <div class="note">
   <strong class="user">jharris at et2brut dot us</strong>
   <a href="#101233" class="date">03-Dec-2010 02:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just to clarify:<br />
<br />
Spaces in the URL need to be replaced with a %20.<br />
<br />
Spaces in the querystring need to be replaced with a +</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100392""></a>
  <div class="note">
   <strong class="user">james at mettro dot com dot au</strong>
   <a href="#100392" class="date">12-Oct-2010 11:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Someone mentioned you may need to replace spaces with +.<br />
<br />
This didn't work for me, I had to replace them with %20, eg:<br />
<br />
<span class="default">&lt;?php $url </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">, </span><span class="string">'%20'</span><span class="keyword">, </span><span class="default">$url</span><span class="keyword">); </span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91337""></a>
  <div class="note">
   <strong class="user">Brett</strong>
   <a href="#91337" class="date">06-Jun-2009 01:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be careful when using spaces in the URL... make sure to replace them with + signs, otherwise it won't work.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78746""></a>
  <div class="note">
   <strong class="user">rossixx at gmx dot net</strong>
   <a href="#78746" class="date">25-Oct-2007 09:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
e.g. you can check how many characters are on test_1.php<br />
<br />
or you can it use for more, i have used this function for a nagios check.<br />
<br />
<span class="default">&lt;?PHP<br />
</span><span class="keyword">echo </span><span class="string">"CURL - function test &lt;br&gt;" </span><span class="keyword">;<br />
if (</span><span class="default">$load </span><span class="keyword">== </span><span class="default">1</span><span class="keyword">){<br />
function </span><span class="default">webcheck </span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ch </span><span class="keyword">= </span><span class="default">curl_init </span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">) ;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">curl_setopt </span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_RETURNTRANSFER</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">) ;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$res </span><span class="keyword">= </span><span class="default">curl_exec </span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">) ;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">curl_close </span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">) ;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return (</span><span class="default">$res</span><span class="keyword">) ;<br />
}<br />
echo </span><span class="string">"url = </span><span class="default">$url</span><span class="string"> &lt;br&gt;" </span><span class="keyword">;<br />
<br />
</span><span class="default">$erg </span><span class="keyword">= </span><span class="default">webcheck</span><span class="keyword">(</span><span class="string">"my_page.php/test_1.php"</span><span class="keyword">) ;<br />
</span><span class="default">$zahl </span><span class="keyword">= </span><span class="default">strlen </span><span class="keyword">(</span><span class="default">$erg</span><span class="keyword">) ;<br />
echo </span><span class="string">"length = </span><span class="default">$zahl</span><span class="string"> " </span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78700""></a>
  <div class="note">
   <strong class="user">ezyang at php dot net</strong>
   <a href="#78700" class="date">23-Oct-2007 07:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
curl_init() has undefined behavior if you pass 'false' to it and can crash when you try to copy the resulting handle using curl_copy_handle(). Keep this in mind if you create a wrapper object for CURL.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="66523""></a>
  <div class="note">
   <strong class="user">darkstar_ae at hotmail dot com</strong>
   <a href="#66523" class="date">24-May-2006 08:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For some reason on some webservers it may not be able to understand what cURL is doing. If you're getting unexpected results (like getting no output when the URL is valid) while using curl_init(). Add a trailing slash '/' after the url if you haven't done so already.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56452""></a>
  <div class="note">
   <strong class="user">ru dot dy at gmx dot net</strong>
   <a href="#56452" class="date">02-Sep-2005 03:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The curl-functions can be used to check the ICQ-webstatus from an icq-number, to get the status as a string rather than as one of those standard images provided from ICQ. This can also be used to place your own Image instead of simple text, to show ones online-status, of course if activated in the options. The idea behind is to get just the text from the apache-site that would lead us to the picture&nbsp; that shows the online status. curl does not do any redirect, as long as we don't set CURLOPT_FOLLOWLOCATION. This is nice because the image can change, as long as the paths and filenames (contained in the site-text) don't. The different states are stored in a short array of unsigned crc-values.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">ICQ </span><span class="keyword">{<br />
&nbsp;&nbsp; <br />
&nbsp;var </span><span class="default">$crc </span><span class="keyword">= array(</span><span class="string">'253889085' </span><span class="keyword">=&gt; </span><span class="string">'offline'</span><span class="keyword">, </span><span class="string">'1177883536' </span><span class="keyword">=&gt; </span><span class="string">'online'</span><span class="keyword">, </span><span class="string">'1182613274' </span><span class="keyword">=&gt; </span><span class="string">'hidden'</span><span class="keyword">); <br />
</span><span class="comment">//CRCs valid as long as the redirect-page does not change<br />
&nbsp;&nbsp; <br />
&nbsp;</span><span class="keyword">function </span><span class="default">getCrc</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">) {<br />
&nbsp;&nbsp; </span><span class="default">$ch </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">();<br />
&nbsp;&nbsp; </span><span class="default">curl_setopt </span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_URL</span><span class="keyword">, </span><span class="default">$url</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">curl_setopt </span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_HEADER</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">ob_start</span><span class="keyword">();<br />
&nbsp;&nbsp; </span><span class="default">curl_exec </span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">curl_close </span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">$cache </span><span class="keyword">= </span><span class="default">ob_get_contents</span><span class="keyword">();<br />
<br />
&nbsp;&nbsp; </span><span class="default">ob_end_clean</span><span class="keyword">();<br />
&nbsp;&nbsp; </span><span class="comment">//print($cache);<br />
&nbsp;&nbsp; </span><span class="keyword">return (string)</span><span class="default">abs</span><span class="keyword">(</span><span class="default">crc32</span><span class="keyword">(</span><span class="default">$cache</span><span class="keyword">));<br />
&nbsp;}<br />
&nbsp;&nbsp; <br />
&nbsp;function </span><span class="default">status</span><span class="keyword">(</span><span class="default">$number</span><span class="keyword">) {<br />
&nbsp;&nbsp; </span><span class="default">$check </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">getCrc</span><span class="keyword">( </span><span class="string">'<a href="http://status.icq.com/online.gif?icq=" rel="nofollow" target="_blank">http://status.icq.com/online.gif?icq=</a>' </span><span class="keyword">. </span><span class="default">$number </span><span class="keyword">. </span><span class="string">'&amp;img=5'</span><span class="keyword">);<br />
&nbsp;&nbsp; if (</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$check</span><span class="keyword">, </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">crc</span><span class="keyword">))) {<br />
&nbsp;&nbsp; &nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">crc</span><span class="keyword">[</span><span class="default">$check</span><span class="keyword">];<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;}<br />
&nbsp;&nbsp; &nbsp; <br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Usage:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;$icq </span><span class="keyword">= new </span><span class="default">ICQ</span><span class="keyword">();<br />
&nbsp;print(</span><span class="default">$icq</span><span class="keyword">-&gt;</span><span class="default">status</span><span class="keyword">(</span><span class="string">'123456789'</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
Outputs 'online', 'offline' or 'hidden'.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="49692""></a>
  <div class="note">
   <strong class="user">José Enrique Serrano Expósito</strong>
   <a href="#49692" class="date">04-Feb-2005 02:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; vWritePageToFile</span><span class="keyword">( </span><span class="string">'<a href="http://es.php.net" rel="nofollow" target="_blank">http://es.php.net</a>'</span><span class="keyword">, </span><span class="string">'es.php.net.txt' </span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span>... And the text file stand in the server in the same folder that the script.<br />
This is the function code.-<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">vWritePageToFile</span><span class="keyword">( </span><span class="default">$sHTMLpage</span><span class="keyword">, </span><span class="default">$sTxtfile </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$sh </span><span class="keyword">=&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">curl_init</span><span class="keyword">( </span><span class="default">$sHTMLpage </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$hFile </span><span class="keyword">=&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">FOpen</span><span class="keyword">( </span><span class="default">$sTxtfile</span><span class="keyword">, </span><span class="string">'w' </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">curl_setopt</span><span class="keyword">( </span><span class="default">$sh</span><span class="keyword">, </span><span class="default">CURLOPT_FILE</span><span class="keyword">, </span><span class="default">$hFile </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">curl_setopt</span><span class="keyword">( </span><span class="default">$sh</span><span class="keyword">, </span><span class="default">CURLOPT_HEADER</span><span class="keyword">, </span><span class="default">0 </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">curl_exec&nbsp; </span><span class="keyword">( </span><span class="default">$sh </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$sAverageSpeedDownload </span><span class="keyword">= </span><span class="default">curl_getInfo</span><span class="keyword">( </span><span class="default">$sh</span><span class="keyword">, </span><span class="default">CURLINFO_SPEED_DOWNLOAD </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$sAverageSpeedUpload&nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">curl_getInfo</span><span class="keyword">( </span><span class="default">$sh</span><span class="keyword">, </span><span class="default">CURLINFO_SPEED_UPLOAD </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; echo </span><span class="string">'&lt;pre&gt;'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; echo </span><span class="string">'Average speed download == ' </span><span class="keyword">. </span><span class="default">$sAverageSpeedDownload </span><span class="keyword">. </span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; echo </span><span class="string">'Average Speed upload&nbsp; &nbsp; == ' </span><span class="keyword">. </span><span class="default">$sAverageSpeedUpload&nbsp;&nbsp; </span><span class="keyword">. </span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; echo </span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$aCURLinfo </span><span class="keyword">= </span><span class="default">curl_getInfo</span><span class="keyword">( </span><span class="default">$sh </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">print_r</span><span class="keyword">( </span><span class="default">$aCURLinfo </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; echo </span><span class="string">'&lt;/pre&gt;'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">curl_close</span><span class="keyword">(&nbsp; </span><span class="default">$sh </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">FClose&nbsp; &nbsp; </span><span class="keyword">(&nbsp; </span><span class="default">$hFile </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; echo </span><span class="string">'(&lt;b&gt;See the file&nbsp; "'</span><span class="keyword">.</span><span class="default">$sTxtfile</span><span class="keyword">.</span><span class="string">'"&nbsp; in the same path of the hosting'</span><span class="keyword">.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">' to where this script PHP&lt;/b&gt;).&lt;br&gt;'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.curl-getinfo.html">curl_getinfo</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.curl-multi-add-handle.html">curl_multi_add_handle</a></div>
 <div class="up"><a href="ref.curl.html">cURL Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
