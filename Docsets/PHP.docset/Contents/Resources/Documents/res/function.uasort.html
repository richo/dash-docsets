<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Sort an array with a user-defined comparison function and maintain index association</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.sort.html">sort</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.uksort.html">uksort</a></div>
 <div class="up"><a href="ref.array.html">Array Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.uasort" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">uasort</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">uasort</span> &mdash; <span class="dc-title">Sort an array with a user-defined comparison function and maintain index association</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.uasort-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><b>uasort</b></span>
    ( <span class="methodparam"><span class="type">array</span> <tt class="parameter reference">&$array</tt></span>
   , <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.callback" class="type callback">callback</a></span> <tt class="parameter">$cmp_function</tt></span>
   )</div>

  <p class="para rdfs-comment">
   This function sorts an array such that array indices maintain their
   correlation with the array elements they are associated with, using a
   user-defined comparison function.
  </p>
  <p class="para">
   This is used mainly when sorting associative arrays where the actual
   element order is significant.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.uasort-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><i><tt class="parameter">array</tt></i></span>
     <dd>

      <p class="para">
       The input array.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">cmp_function</tt></i></span>
     <dd>

      <p class="para">
       See <span class="function"><a href="function.usort.html" class="function">usort()</a></span> and <span class="function"><a href="function.uksort.html" class="function">uksort()</a></span> for
       examples of user-defined comparison functions.
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.uasort-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns <b><tt>TRUE</tt></b> on success or <b><tt>FALSE</tt></b> on failure.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.uasort-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   <div class="example" id="example-4577">
    <p><b>Example #1 Basic <span class="function"><b>uasort()</b></span> example</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Comparison&nbsp;function<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">cmp</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">&lt;&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">)&nbsp;?&nbsp;-</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">:&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #FF8000">//&nbsp;Array&nbsp;to&nbsp;be&nbsp;sorted<br /></span><span style="color: #0000BB">$array&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'a'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'b'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">8</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'c'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;-</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'d'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;-</span><span style="color: #0000BB">9</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'e'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'f'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'g'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'h'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;-</span><span style="color: #0000BB">4</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$array</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Sort&nbsp;and&nbsp;print&nbsp;the&nbsp;resulting&nbsp;array<br /></span><span style="color: #0000BB">uasort</span><span style="color: #007700">(</span><span style="color: #0000BB">$array</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'cmp'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$array</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Array
(
    [a] =&gt; 4
    [b] =&gt; 8
    [c] =&gt; -1
    [d] =&gt; -9
    [e] =&gt; 2
    [f] =&gt; 5
    [g] =&gt; 3
    [h] =&gt; -4
)
Array
(
    [d] =&gt; -9
    [h] =&gt; -4
    [c] =&gt; -1
    [e] =&gt; 2
    [g] =&gt; 3
    [a] =&gt; 4
    [f] =&gt; 5
    [b] =&gt; 8
)
</pre></div>
    </div>
   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.uasort-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.usort.html" class="function" rel="rdfs-seeAlso">usort()</a> - Sort an array by values using a user-defined comparison function</span></li>
    <li class="member">The <a href="array.sorting.html" class="link">comparison of array sorting functions</a></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="106120""></a>
  <div class="note">
   <strong class="user">Said Dashuk</strong>
   <a href="#106120" class="date">11-Oct-2011 10:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
My simple and effective solution for sort multi-dimensional array by any key:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">sort_by_key </span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">,</span><span class="default">$key</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; global </span><span class="default">$key2sort</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$key2sort </span><span class="keyword">= </span><span class="default">$key</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">uasort</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">, </span><span class="string">'sbk'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return (</span><span class="default">$arr</span><span class="keyword">);<br />
}<br />
function </span><span class="default">sbk </span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) {global </span><span class="default">$key2sort</span><span class="keyword">; return (</span><span class="default">strcasecmp </span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$key2sort</span><span class="keyword">],</span><span class="default">$b</span><span class="keyword">[</span><span class="default">$key2sort</span><span class="keyword">]));}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105604""></a>
  <div class="note">
   <strong class="user">clem at fragment dot at</strong>
   <a href="#105604" class="date">31-Aug-2011 04:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
for a simple case insensitive compare you can use this (php &gt;= 5.3):<br />
<br />
<span class="default">&lt;?php<br />
$greetings </span><span class="keyword">= array(</span><span class="string">'howdy'</span><span class="keyword">, </span><span class="string">'Hey'</span><span class="keyword">, </span><span class="string">'aloha he'</span><span class="keyword">);<br />
<br />
</span><span class="default">uasort</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, function(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">){ return </span><span class="default">strcasecmp</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">); });<br />
<br />
</span><span class="comment">//$a == array('aloha he', 'howdy', 'Hey');<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104714""></a>
  <div class="note">
   <strong class="user">englishman at bigmir dot net</strong>
   <a href="#104714" class="date">02-Jul-2011 04:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In case you need to sort an associative array by one of its keys, this function might be useful:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">sortByOneKey</span><span class="keyword">(array </span><span class="default">$array</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">, </span><span class="default">$asc </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$values </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$id </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$values</span><span class="keyword">[</span><span class="default">$id</span><span class="keyword">] = isset(</span><span class="default">$value</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]) ? </span><span class="default">$value</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] : </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$asc</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">asort</span><span class="keyword">(</span><span class="default">$values</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">arsort</span><span class="keyword">(</span><span class="default">$values</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$values </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Consider the following example:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$users </span><span class="keyword">= array(<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">1 </span><span class="keyword">=&gt; array(</span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'John'</span><span class="keyword">, </span><span class="string">'age' </span><span class="keyword">=&gt; </span><span class="default">35</span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">2 </span><span class="keyword">=&gt; array(</span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'Alice'</span><span class="keyword">, </span><span class="string">'age' </span><span class="keyword">=&gt; </span><span class="default">23</span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">3 </span><span class="keyword">=&gt; array(</span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'Bob'</span><span class="keyword">, </span><span class="string">'age' </span><span class="keyword">=&gt; </span><span class="default">26</span><span class="keyword">)<br />
);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
</span><span class="default">$sortedByNameAsc </span><span class="keyword">= </span><span class="default">sortByOneKey</span><span class="keyword">(</span><span class="default">$users</span><span class="keyword">, </span><span class="string">'name'</span><span class="keyword">);<br />
</span><span class="default">$sortedByNameDesc </span><span class="keyword">= </span><span class="default">sortByOneKey</span><span class="keyword">(</span><span class="default">$users</span><span class="keyword">, </span><span class="string">'name'</span><span class="keyword">, </span><span class="default">false</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
echo </span><span class="string">"Sorted by Name in ascending order: "</span><span class="keyword">;<br />
echo </span><span class="string">"&lt;pre&gt;" </span><span class="keyword">. </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$sortedByNameAsc</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">) . </span><span class="string">"&lt;/pre&gt;"</span><span class="keyword">;<br />
echo </span><span class="string">"&lt;br /&gt;&lt;br /&gt;Sorted by Name in descending order: "</span><span class="keyword">;<br />
echo </span><span class="string">"&lt;pre&gt;" </span><span class="keyword">. </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$sortedByNameDesc</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">) . </span><span class="string">"&lt;/pre&gt;"</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
The output will be the following: <br />
<br />
Sorted by Name in ascending order: <br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; Alice<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [age] =&gt; 23<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; Bob<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [age] =&gt; 26<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; John<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [age] =&gt; 35<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
)<br />
<br />
Sorted by Name in descending order: <br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; John<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [age] =&gt; 35<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; Bob<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [age] =&gt; 26<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; Alice<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [age] =&gt; 23<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100961""></a>
  <div class="note">
   <strong class="user">yannick dot battail at gmail dot com</strong>
   <a href="#100961" class="date">17-Nov-2010 06:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
An Example using anonymous function.<br />
Anonymous functions make some time the code easier to understand.<br />
<span class="default">&lt;?php<br />
$fruits </span><span class="keyword">= array(</span><span class="string">'Orange9'</span><span class="keyword">,</span><span class="string">'Orange11'</span><span class="keyword">,</span><span class="string">'Orange10'</span><span class="keyword">,</span><span class="string">'Orange6'</span><span class="keyword">,</span><span class="string">'Orange15'</span><span class="keyword">);<br />
</span><span class="default">uasort </span><span class="keyword">( </span><span class="default">$fruits </span><span class="keyword">, function (</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">strnatcmp</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">,</span><span class="default">$b</span><span class="keyword">); </span><span class="comment">// or other function/code<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp;&nbsp; );<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$fruits</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span>returns<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; Orange6<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; Orange9<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; Orange10<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; Orange11<br />
&nbsp;&nbsp;&nbsp; [4] =&gt; Orange15<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100485""></a>
  <div class="note">
   <strong class="user">magikMaker</strong>
   <a href="#100485" class="date">19-Oct-2010 02:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
a quick reminder on the syntax if you want to use uasort in a Class or Object:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">// procedural:<br />
</span><span class="default">uasort</span><span class="keyword">(</span><span class="default">$collection</span><span class="keyword">, </span><span class="string">'my_sort_function'</span><span class="keyword">);<br />
<br />
</span><span class="comment">// Object Oriented<br />
</span><span class="default">uasort</span><span class="keyword">(</span><span class="default">$collection</span><span class="keyword">, array(</span><span class="default">$this</span><span class="keyword">, </span><span class="string">'mySortMethod'</span><span class="keyword">));<br />
<br />
</span><span class="comment">// Objet Oriented with static method<br />
</span><span class="default">uasort</span><span class="keyword">(</span><span class="default">$collection</span><span class="keyword">, array(</span><span class="string">'self'</span><span class="keyword">, </span><span class="string">'myStaticSortMethod'</span><span class="keyword">));<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100325""></a>
  <div class="note">
   <strong class="user">Yves</strong>
   <a href="#100325" class="date">08-Oct-2010 12:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Took me some time to figure that out:<br />
the user function must return an *integer*, if you return a float, you may not get the expected result.<br />
<br />
<span class="default">&lt;?php <br />
&nbsp; $a </span><span class="keyword">= (</span><span class="string">'a' </span><span class="keyword">=&gt; </span><span class="default">0.9</span><span class="keyword">, </span><span class="string">'b' </span><span class="keyword">=&gt; </span><span class="default">0.7</span><span class="keyword">, </span><span class="string">'c' </span><span class="keyword">=&gt; </span><span class="default">0.8</span><span class="keyword">);<br />
<br />
&nbsp; function </span><span class="default">sorting</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) { return </span><span class="default">$a </span><span class="keyword">- </span><span class="default">$b</span><span class="keyword">; } <br />
<br />
&nbsp; </span><span class="comment">// The function above will not =work, you have to<br />
<br />
&nbsp; </span><span class="keyword">function </span><span class="default">sorting</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">)<br />
&nbsp; {<br />
&nbsp;&nbsp; </span><span class="default">$d </span><span class="keyword">= </span><span class="default">$a </span><span class="keyword">= </span><span class="default">$b</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$d </span><span class="keyword">&lt; </span><span class="default">0 </span><span class="keyword">? -</span><span class="default">1 </span><span class="keyword">: (</span><span class="default">$d </span><span class="keyword">&gt; </span><span class="default">0 </span><span class="keyword">? </span><span class="default">1 </span><span class="keyword">: </span><span class="default">0</span><span class="keyword">);<br />
&nbsp; } <br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100279""></a>
  <div class="note">
   <strong class="user">phire_sk</strong>
   <a href="#100279" class="date">05-Oct-2010 02:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I tried using some of the previous built multisorts, but they weren't working as expected.<br />
<br />
So, I made my own Class, and it seems to work wonderfully.<br />
<br />
Here is the code:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/************************************<br />
*&nbsp; &nbsp; Allows sorting multi-dimensional<br />
*&nbsp; &nbsp; arrays by a specific key and in<br />
*&nbsp; &nbsp; asc or desc order<br />
**/<br />
</span><span class="keyword">class </span><span class="default">multiSort<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; var </span><span class="default">$key</span><span class="keyword">;&nbsp; &nbsp; </span><span class="comment">//key in your array<br />
<br />
&nbsp;&nbsp;&nbsp; //runs the sort, and returns sorted array<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">run </span><span class="keyword">(</span><span class="default">$myarray</span><span class="keyword">, </span><span class="default">$key_to_sort</span><span class="keyword">, </span><span class="default">$type_of_sort </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">key </span><span class="keyword">= </span><span class="default">$key_to_sort</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$type_of_sort </span><span class="keyword">== </span><span class="string">'desc'</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">uasort</span><span class="keyword">(</span><span class="default">$myarray</span><span class="keyword">, array(</span><span class="default">$this</span><span class="keyword">, </span><span class="string">'myreverse_compare'</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">uasort</span><span class="keyword">(</span><span class="default">$myarray</span><span class="keyword">, array(</span><span class="default">$this</span><span class="keyword">, </span><span class="string">'mycompare'</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$myarray</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//for ascending order<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">mycompare</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">, </span><span class="default">$y</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">$x</span><span class="keyword">[</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">key</span><span class="keyword">] == </span><span class="default">$y</span><span class="keyword">[</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">key</span><span class="keyword">] )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else if ( </span><span class="default">$x</span><span class="keyword">[</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">key</span><span class="keyword">] &lt; </span><span class="default">$y</span><span class="keyword">[</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">key</span><span class="keyword">] )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return -</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//for descending order<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">myreverse_compare</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">, </span><span class="default">$y</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">$x</span><span class="keyword">[</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">key</span><span class="keyword">] == </span><span class="default">$y</span><span class="keyword">[</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">key</span><span class="keyword">] )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else if ( </span><span class="default">$x</span><span class="keyword">[</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">key</span><span class="keyword">] &gt; </span><span class="default">$y</span><span class="keyword">[</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">key</span><span class="keyword">] )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return -</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99017""></a>
  <div class="note">
   <strong class="user">stephan dot hoyer at netresearch dot de</strong>
   <a href="#99017" class="date">22-Jul-2010 05:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To sort string containing Umlauts you can use this callback function:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">sortWUmlauts</span><span class="keyword">(</span><span class="default">$s1</span><span class="keyword">, </span><span class="default">$s2</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$search </span><span class="keyword">= array(</span><span class="string">'Ã„'</span><span class="keyword">,</span><span class="string">'Ã–'</span><span class="keyword">,</span><span class="string">'Ãœ'</span><span class="keyword">,</span><span class="string">'ÃŸ'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$replace </span><span class="keyword">= array(</span><span class="string">'A'</span><span class="keyword">,</span><span class="string">'O'</span><span class="keyword">,</span><span class="string">'U'</span><span class="keyword">,</span><span class="string">'s'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">strcmp</span><span class="keyword">(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">str_ireplace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$s1</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">str_ireplace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$s2</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; );<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
simply call:<br />
<br />
<span class="default">&lt;?php uasort</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="string">'sortWUmlauts'</span><span class="keyword">); </span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94883""></a>
  <div class="note">
   <strong class="user">paul at webtop-designs dot com</strong>
   <a href="#94883" class="date">30-Nov-2009 01:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just expanding on php arobase kochira period com's method:<br />
<br />
If you are looking to sort a multi-D array by a specific column and have entries in both upper and lower case, simply drop the entries to lowercase before doing the strcmp.<br />
<br />
<span class="default">&lt;?php<br />
$dirs </span><span class="keyword">= array(<br />
&nbsp; array(</span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'First Folder'</span><span class="keyword">, </span><span class="string">'path' </span><span class="keyword">=&gt; </span><span class="string">'sompath'</span><span class="keyword">),<br />
&nbsp; array(</span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'second folder'</span><span class="keyword">, </span><span class="string">'path' </span><span class="keyword">=&gt; </span><span class="string">'sompath2'</span><span class="keyword">),<br />
&nbsp; array(</span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'Third Folder'</span><span class="keyword">, </span><span class="string">'path' </span><span class="keyword">=&gt; </span><span class="string">'sompath3'</span><span class="keyword">)<br />
);<br />
<br />
function </span><span class="default">so</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) { <br />
&nbsp;&nbsp;&nbsp; return (</span><span class="default">strcmp </span><span class="keyword">(</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">[</span><span class="string">'name'</span><span class="keyword">]), </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">[</span><span class="string">'name'</span><span class="keyword">])));<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93986""></a>
  <div class="note">
   <strong class="user">Alt_F4</strong>
   <a href="#93986" class="date">09-Oct-2009 08:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I couldn't work out a way to specify what element to sort by using the existing php functions - maybe I didn't look hard enough?? So i wrote my own multidimensional array sorting class. <br />
<br />
<span class="default">&lt;?php<br />
<br />
$stock </span><span class="keyword">= array(array(</span><span class="string">"id" </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">,</span><span class="string">"item" </span><span class="keyword">=&gt; </span><span class="string">"hat"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"number" </span><span class="keyword">=&gt; </span><span class="default">5</span><span class="keyword">,&nbsp; &nbsp; </span><span class="string">"price" </span><span class="keyword">=&gt; </span><span class="default">15</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array(</span><span class="string">"id" </span><span class="keyword">=&gt; </span><span class="default">5</span><span class="keyword">,</span><span class="string">"item" </span><span class="keyword">=&gt; </span><span class="string">"shoes"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"number" </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">,&nbsp; &nbsp; </span><span class="string">"price" </span><span class="keyword">=&gt; </span><span class="default">50</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array(</span><span class="string">"id" </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">,</span><span class="string">"item" </span><span class="keyword">=&gt; </span><span class="string">"tie"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"number" </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">,&nbsp; &nbsp; </span><span class="string">"price" </span><span class="keyword">=&gt; </span><span class="default">30</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
</span><span class="default">$sort </span><span class="keyword">= new </span><span class="default">multiSort</span><span class="keyword">();<br />
<br />
</span><span class="comment">//will sort the array by id in ascending order<br />
</span><span class="default">print_r </span><span class="keyword">(</span><span class="default">$sort</span><span class="keyword">-&gt;</span><span class="default">sortArray</span><span class="keyword">(</span><span class="default">$stock</span><span class="keyword">,</span><span class="string">'id'</span><span class="keyword">,</span><span class="string">'rcmp'</span><span class="keyword">));<br />
<br />
</span><span class="comment">//will sort the array by id in descending order<br />
</span><span class="default">print_r </span><span class="keyword">(</span><span class="default">$sort</span><span class="keyword">-&gt;</span><span class="default">sortArray</span><span class="keyword">(</span><span class="default">$stock</span><span class="keyword">,</span><span class="string">'id'</span><span class="keyword">,</span><span class="string">'cmp'</span><span class="keyword">));<br />
<br />
</span><span class="comment">//can also be used like so (specifying the index of the array)<br />
</span><span class="default">print_r </span><span class="keyword">(</span><span class="default">$sort</span><span class="keyword">-&gt;</span><span class="default">sortArray</span><span class="keyword">(</span><span class="default">$stock</span><span class="keyword">,</span><span class="string">'0'</span><span class="keyword">,</span><span class="string">'rcmp'</span><span class="keyword">));<br />
<br />
</span><span class="comment">//////////////////////////////////////////////////////<br />
<br />
</span><span class="keyword">class </span><span class="default">multiSort </span><span class="keyword">{<br />
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">sortArray</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">,</span><span class="default">$parameter</span><span class="keyword">,</span><span class="default">$_function</span><span class="keyword">) { return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_uasort</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">,</span><span class="default">$_function</span><span class="keyword">,</span><span class="default">$parameter</span><span class="keyword">); }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">cmp </span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">, </span><span class="default">$p</span><span class="keyword">) { return (</span><span class="default">strcmp </span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$p</span><span class="keyword">],</span><span class="default">$b</span><span class="keyword">[</span><span class="default">$p</span><span class="keyword">]));}<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">rcmp </span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">, </span><span class="default">$p</span><span class="keyword">) { return -</span><span class="default">1 </span><span class="keyword">* (</span><span class="default">strcmp </span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$p</span><span class="keyword">],</span><span class="default">$b</span><span class="keyword">[</span><span class="default">$p</span><span class="keyword">]));}<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">_uasort</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">,</span><span class="default">$func</span><span class="keyword">,</span><span class="default">$param</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);</span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp </span><span class="keyword">= </span><span class="default">$i</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for(</span><span class="default">$j</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">;</span><span class="default">$j</span><span class="keyword">&lt;</span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);</span><span class="default">$j</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">$func</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$tmp</span><span class="keyword">],</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">],</span><span class="default">$param</span><span class="keyword">);&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$result </span><span class="keyword">== -</span><span class="default">1</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">arraySwap</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">,</span><span class="default">$tmp</span><span class="keyword">,</span><span class="default">$j</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp </span><span class="keyword">= </span><span class="default">$j</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$array</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">arrayswap</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">, </span><span class="default">$src</span><span class="keyword">, </span><span class="default">$dst</span><span class="keyword">) { <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp </span><span class="keyword">= </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$dst</span><span class="keyword">]; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$dst</span><span class="keyword">] = </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$src</span><span class="keyword">]; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$src</span><span class="keyword">] = </span><span class="default">$tmp</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$arr</span><span class="keyword">; <br />
&nbsp;&nbsp;&nbsp; } <br />
}<br />
</span><span class="comment">//////////////////////////////////////////////////////////<br />
</span><span class="default">?&gt;<br />
</span><br />
hope someone finds this useful.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83701""></a>
  <div class="note">
   <strong class="user">php arobase kochira period com</strong>
   <a href="#83701" class="date">08-Jun-2008 04:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Difference between uasort() and usort(), the missing example ...<br />
<br />
<span class="default">&lt;?php<br />
&nbsp; $arr </span><span class="keyword">= array ( </span><span class="default">10 </span><span class="keyword">=&gt; array(</span><span class="string">'id' </span><span class="keyword">=&gt; </span><span class="string">'dix'</span><span class="keyword">,&nbsp; </span><span class="string">'aa' </span><span class="keyword">=&gt; </span><span class="string">'1010'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">100 </span><span class="keyword">=&gt; array(</span><span class="string">'id' </span><span class="keyword">=&gt; </span><span class="string">'cent'</span><span class="keyword">, </span><span class="string">'aa' </span><span class="keyword">=&gt; </span><span class="string">'100100'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">2 </span><span class="keyword">=&gt; array(</span><span class="string">'id' </span><span class="keyword">=&gt; </span><span class="string">'deux'</span><span class="keyword">, </span><span class="string">'aa' </span><span class="keyword">=&gt; </span><span class="string">'22'</span><span class="keyword">), <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">7 </span><span class="keyword">=&gt; array(</span><span class="string">'id' </span><span class="keyword">=&gt; </span><span class="string">'sept'</span><span class="keyword">, </span><span class="string">'aa' </span><span class="keyword">=&gt; </span><span class="string">'77'</span><span class="keyword">));<br />
<br />
&nbsp; </span><span class="comment">// id sorting<br />
&nbsp; </span><span class="keyword">function </span><span class="default">so </span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) { return (</span><span class="default">strcmp </span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">[</span><span class="string">'id'</span><span class="keyword">],</span><span class="default">$b</span><span class="keyword">[</span><span class="string">'id'</span><span class="keyword">]));&nbsp; &nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
*** uasort($arr, 'so') output:<br />
<br />
<span class="default">&lt;?php </span><span class="keyword">Array (<br />
&nbsp;&nbsp;&nbsp; [</span><span class="default">100</span><span class="keyword">] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [</span><span class="default">id</span><span class="keyword">] =&gt; </span><span class="default">cent<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">aa</span><span class="keyword">] =&gt; </span><span class="default">100100<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">)<br />
<br />
&nbsp;&nbsp;&nbsp; [</span><span class="default">2</span><span class="keyword">] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [</span><span class="default">id</span><span class="keyword">] =&gt; </span><span class="default">deux<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">aa</span><span class="keyword">] =&gt; </span><span class="default">22<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">)<br />
<br />
&nbsp;&nbsp;&nbsp; [</span><span class="default">10</span><span class="keyword">] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [</span><span class="default">id</span><span class="keyword">] =&gt; </span><span class="default">dix<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">aa</span><span class="keyword">] =&gt; </span><span class="default">1010<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">)<br />
<br />
&nbsp;&nbsp;&nbsp; [</span><span class="default">7</span><span class="keyword">] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [</span><span class="default">id</span><span class="keyword">] =&gt; </span><span class="default">sept<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">aa</span><span class="keyword">] =&gt; </span><span class="default">77<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">))</span><span class="default">?&gt;<br />
</span><br />
*** usort($arr, 'so') output:<br />
<br />
<span class="default">&lt;?php </span><span class="keyword">Array (<br />
&nbsp;&nbsp;&nbsp; [</span><span class="default">0</span><span class="keyword">] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [</span><span class="default">id</span><span class="keyword">] =&gt; </span><span class="default">cent<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">aa</span><span class="keyword">] =&gt; </span><span class="default">100100<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">)<br />
<br />
&nbsp;&nbsp;&nbsp; [</span><span class="default">1</span><span class="keyword">] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [</span><span class="default">id</span><span class="keyword">] =&gt; </span><span class="default">deux<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">aa</span><span class="keyword">] =&gt; </span><span class="default">22<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">)<br />
<br />
&nbsp;&nbsp;&nbsp; [</span><span class="default">2</span><span class="keyword">] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [</span><span class="default">id</span><span class="keyword">] =&gt; </span><span class="default">dix<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">aa</span><span class="keyword">] =&gt; </span><span class="default">1010<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">)<br />
<br />
&nbsp;&nbsp;&nbsp; [</span><span class="default">3</span><span class="keyword">] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [</span><span class="default">id</span><span class="keyword">] =&gt; </span><span class="default">sept<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">aa</span><span class="keyword">] =&gt; </span><span class="default">77<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">))</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="72148""></a>
  <div class="note">
   <strong class="user">joeseed86 at gmail dot com</strong>
   <a href="#72148" class="date">04-Jan-2007 09:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Using uasort to alphabetically sort nested objects:<br />
<br />
In this example, a "collection" object contains an array of "dataItem" objects which consist of a string name, a string attribute x and an arbitrary integer y. <br />
<br />
This code allows you to sort the dataset by any of the dataItem attributes, or the order in which they were originally added to the set.<br />
<br />
I'm using PHP 4.23 at work at the moment for legacy reasons, so I wrote the example following that object model.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">dataItem<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; var </span><span class="default">$name</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; var </span><span class="default">$x</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//Constructor<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">dataItem</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">,</span><span class="default">$x</span><span class="keyword">,</span><span class="default">$y</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">name </span><span class="keyword">= </span><span class="default">$name</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">x </span><span class="keyword">= </span><span class="default">$x</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">y </span><span class="keyword">= </span><span class="default">$y</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
class </span><span class="default">collection<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; var </span><span class="default">$dataSet </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//Creates a new data item and adds it to our array<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">add</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">,</span><span class="default">$x</span><span class="keyword">,</span><span class="default">$y</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">dataSet</span><span class="keyword">[] = new </span><span class="default">dataItem</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">,</span><span class="default">$x</span><span class="keyword">,</span><span class="default">$y</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//The wrapper sort function<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">sortDataSet</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//Sort by the given parameter<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">switch(</span><span class="default">$s</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="string">"name"</span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//Note use of array to reference member method of this object in callback<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">uasort</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">dataSet</span><span class="keyword">,array(</span><span class="default">$this</span><span class="keyword">,</span><span class="string">"cmpName"</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="string">"x"</span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">uasort</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">dataSet</span><span class="keyword">,array(</span><span class="default">$this</span><span class="keyword">,</span><span class="string">"cmpX"</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="string">"y"</span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">uasort</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">dataSet</span><span class="keyword">,array(</span><span class="default">$this</span><span class="keyword">,</span><span class="string">"cmpY"</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="string">"added"</span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; default:<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//Re-sort array by original keys<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ksort</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">dataSet</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//Callback function for sorting by name<br />
&nbsp;&nbsp;&nbsp; //$a and $b are dataItem objects<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">cmpName</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">,</span><span class="default">$b</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//Use sort() for simple alphabetical comparison<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //Convert to lowercase to ensure consistent behaviour<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sortable </span><span class="keyword">= array(</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">),</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sorted </span><span class="keyword">= </span><span class="default">$sortable</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">sort</span><span class="keyword">(</span><span class="default">$sorted</span><span class="keyword">);&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//If the names have switched position, return -1. Otherwise, return 1.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return (</span><span class="default">$sorted</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] == </span><span class="default">$sortable</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]) ? -</span><span class="default">1 </span><span class="keyword">: </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//Callback function for sorting by x<br />
&nbsp;&nbsp;&nbsp; //$a and $b are dataItem objects<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">cmpX</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">,</span><span class="default">$b</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//Use sort() for simple alphabetical comparison<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //Convert to lowercase to ensure consistent behaviour<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sortable </span><span class="keyword">= array(</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">x</span><span class="keyword">),</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">x</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sorted </span><span class="keyword">= </span><span class="default">$sortable</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">sort</span><span class="keyword">(</span><span class="default">$sorted</span><span class="keyword">);&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//If the names have switched position, return -1. Otherwise, return 1.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return (</span><span class="default">$sorted</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] == </span><span class="default">$sortable</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]) ? -</span><span class="default">1 </span><span class="keyword">: </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//Callback function for sorting by y<br />
&nbsp;&nbsp;&nbsp; //$a and $b are dataItem objects<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">cmpY</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">,</span><span class="default">$b</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//If $a's y attribute &gt;= $b's y attribute, return 1. Otherwise, return -1.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return (</span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">y </span><span class="keyword">&gt;= </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">y</span><span class="keyword">) ? </span><span class="default">1 </span><span class="keyword">: -</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }&nbsp; &nbsp; <br />
<br />
}<br />
<br />
</span><span class="comment">//Create a collection object<br />
</span><span class="default">$myCollection </span><span class="keyword">= new </span><span class="default">collection</span><span class="keyword">();<br />
<br />
</span><span class="comment">//Add a few "records"<br />
</span><span class="default">$myCollection</span><span class="keyword">-&gt;</span><span class="default">add</span><span class="keyword">(</span><span class="string">"pancake"</span><span class="keyword">,</span><span class="string">"egg"</span><span class="keyword">,</span><span class="default">7</span><span class="keyword">);<br />
</span><span class="default">$myCollection</span><span class="keyword">-&gt;</span><span class="default">add</span><span class="keyword">(</span><span class="string">"France"</span><span class="keyword">,</span><span class="string">"Paris"</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">);<br />
</span><span class="default">$myCollection</span><span class="keyword">-&gt;</span><span class="default">add</span><span class="keyword">(</span><span class="string">"Naked Gun"</span><span class="keyword">,</span><span class="string">"Leslie Nielsen"</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">);<br />
</span><span class="default">$myCollection</span><span class="keyword">-&gt;</span><span class="default">add</span><span class="keyword">(</span><span class="string">"OSX"</span><span class="keyword">,</span><span class="string">"huge icons"</span><span class="keyword">,</span><span class="default">33</span><span class="keyword">);<br />
</span><span class="default">$myCollection</span><span class="keyword">-&gt;</span><span class="default">add</span><span class="keyword">(</span><span class="string">"telephone"</span><span class="keyword">,</span><span class="string">"keypad"</span><span class="keyword">,-</span><span class="default">3</span><span class="keyword">);<br />
<br />
</span><span class="comment">//Test the output<br />
<br />
//Sort by name:<br />
</span><span class="default">$myCollection</span><span class="keyword">-&gt;</span><span class="default">sortDataSet</span><span class="keyword">(</span><span class="string">"name"</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$myCollection</span><span class="keyword">-&gt;</span><span class="default">dataSet</span><span class="keyword">);<br />
<br />
</span><span class="comment">//Sort by x<br />
</span><span class="default">$myCollection</span><span class="keyword">-&gt;</span><span class="default">sortDataSet</span><span class="keyword">(</span><span class="string">"x"</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$myCollection</span><span class="keyword">-&gt;</span><span class="default">dataSet</span><span class="keyword">);<br />
<br />
</span><span class="comment">//Sort by y<br />
</span><span class="default">$myCollection</span><span class="keyword">-&gt;</span><span class="default">sortDataSet</span><span class="keyword">(</span><span class="string">"y"</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$myCollection</span><span class="keyword">-&gt;</span><span class="default">dataSet</span><span class="keyword">);<br />
<br />
</span><span class="comment">//Sort by order added<br />
</span><span class="default">$myCollection</span><span class="keyword">-&gt;</span><span class="default">sortDataSet</span><span class="keyword">(</span><span class="string">"added"</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$myCollection</span><span class="keyword">-&gt;</span><span class="default">dataSet</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Will give this output (Anotated and re-formatted for ease of reading):<br />
<br />
Sorted by name:<br />
France&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Paris&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2<br />
Naked Gun&nbsp; &nbsp; &nbsp; Leslie Nielsen&nbsp;&nbsp; 1<br />
OSX&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; huge icons&nbsp; &nbsp; &nbsp;&nbsp; 33<br />
pancake&nbsp; &nbsp; &nbsp; &nbsp; egg&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 7<br />
telephone&nbsp; &nbsp; &nbsp; keypad&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -3<br />
<br />
Sorted by x:<br />
pancake&nbsp; &nbsp; &nbsp; &nbsp; egg&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 7<br />
OSX&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; huge icons&nbsp; &nbsp; &nbsp;&nbsp; 33<br />
telephone&nbsp; &nbsp; &nbsp; keypad&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -3<br />
Naked Gun&nbsp; &nbsp; &nbsp; Leslie Nielsen&nbsp;&nbsp; 1<br />
France&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Paris&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2<br />
<br />
Sorted by y:<br />
telephone&nbsp; &nbsp; &nbsp; keypad&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -3<br />
Naked Gun&nbsp; &nbsp; &nbsp; Leslie Nielsen&nbsp;&nbsp; 1<br />
France&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Paris&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2<br />
pancake&nbsp; &nbsp; &nbsp; &nbsp; egg&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 7<br />
OSX&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; huge icons&nbsp; &nbsp; &nbsp;&nbsp; 33<br />
<br />
Sorted as added:<br />
pancake&nbsp; &nbsp; &nbsp; &nbsp; egg&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 7<br />
France&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Paris&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2<br />
Naked Gun&nbsp; &nbsp; &nbsp; Leslie Nielsen&nbsp;&nbsp; 1<br />
OSX&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; huge icons&nbsp; &nbsp; &nbsp;&nbsp; 33<br />
telephone&nbsp; &nbsp; &nbsp; keypad&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -3<br />
<br />
This is obviously a trivial case, but it can be very useful for larger data structures.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="52888""></a>
  <div class="note">
   <strong class="user">rlynch at lynchmarks dot com</strong>
   <a href="#52888" class="date">16-May-2005 05:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A subtle bug, corrected...<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">masort</span><span class="keyword">(&amp;</span><span class="default">$data</span><span class="keyword">, </span><span class="default">$sortby</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp; static </span><span class="default">$sort_funcs </span><span class="keyword">= array();<br />
&nbsp; <br />
&nbsp;&nbsp; if (empty(</span><span class="default">$sort_funcs</span><span class="keyword">[</span><span class="default">$sortby</span><span class="keyword">])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$code </span><span class="keyword">= </span><span class="string">"\$c=0;"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; foreach (</span><span class="default">split</span><span class="keyword">(</span><span class="string">','</span><span class="keyword">, </span><span class="default">$sortby</span><span class="keyword">) as </span><span class="default">$key</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">array_pop</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$code </span><span class="keyword">.= </span><span class="string">"if ( \$c = ((\$a['</span><span class="default">$key</span><span class="string">'] == \$b['</span><span class="default">$key</span><span class="string">']) ? 0:((\$a['</span><span class="default">$key</span><span class="string">'] &lt; \$b['</span><span class="default">$key</span><span class="string">']) ? -1 : 1 )) ) return \$c;"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$code </span><span class="keyword">.= </span><span class="string">"if ( (\$c = strcasecmp(\$a['</span><span class="default">$key</span><span class="string">'],\$b['</span><span class="default">$key</span><span class="string">'])) != 0 ) return \$c;\n"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$code </span><span class="keyword">.= </span><span class="string">'return $c;'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$sort_func </span><span class="keyword">= </span><span class="default">$sort_funcs</span><span class="keyword">[</span><span class="default">$sortby</span><span class="keyword">] = </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'$a, $b'</span><span class="keyword">, </span><span class="default">$code</span><span class="keyword">);<br />
&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$sort_func </span><span class="keyword">= </span><span class="default">$sort_funcs</span><span class="keyword">[</span><span class="default">$sortby</span><span class="keyword">];<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp; </span><span class="default">$sort_func </span><span class="keyword">= </span><span class="default">$sort_funcs</span><span class="keyword">[</span><span class="default">$sortby</span><span class="keyword">];<br />
&nbsp;&nbsp; </span><span class="default">uasort</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">, </span><span class="default">$sort_func</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;</span> <br />
<br />
Note that <br />
<br />
$code .= "if ( \$c = ((\$a['$key'] == \$b['$key']) ? 0:((\$a['$key'] &lt; \$b['$key']) ? -1 : 1 )) ) return \$c;";<br />
<br />
Has had the "return \$c" added.&nbsp; Ultimately what the method is trying to accomplish is to build a chain of sort-order precedence.&nbsp; But this requires each evaluation to short-circuit out with a return.&nbsp; It was missing.<br />
<br />
Peace</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="49940""></a>
  <div class="note">
   <strong class="user">lucas dot karisny at linuxmail dot org</strong>
   <a href="#49940" class="date">12-Feb-2005 06:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The following is a modification of the dholme/messju masort func using david's float code with automatic data type detection.&nbsp; As long as the value isn't a string numeral (I.E. "1", '13.4') this should sort strings and numbers without having to explicity set which they are.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">masort</span><span class="keyword">(&amp;</span><span class="default">$data</span><span class="keyword">, </span><span class="default">$sortby</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp; static </span><span class="default">$sort_funcs </span><span class="keyword">= array();<br />
&nbsp; <br />
&nbsp;&nbsp; if (empty(</span><span class="default">$sort_funcs</span><span class="keyword">[</span><span class="default">$sortby</span><span class="keyword">])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$code </span><span class="keyword">= </span><span class="string">"\$c=0;"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; foreach (</span><span class="default">split</span><span class="keyword">(</span><span class="string">','</span><span class="keyword">, </span><span class="default">$sortby</span><span class="keyword">) as </span><span class="default">$key</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">array_pop</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$code </span><span class="keyword">.= </span><span class="string">"if ( \$c = ((\$a['</span><span class="default">$key</span><span class="string">'] == \$b['</span><span class="default">$key</span><span class="string">']) ? 0:((\$a['</span><span class="default">$key</span><span class="string">'] &lt; \$b['</span><span class="default">$key</span><span class="string">']) ? -1 : 1 )) );"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$code </span><span class="keyword">.= </span><span class="string">"if ( (\$c = strcasecmp(\$a['</span><span class="default">$key</span><span class="string">'],\$b['</span><span class="default">$key</span><span class="string">'])) != 0 ) return \$c;\n"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$code </span><span class="keyword">.= </span><span class="string">'return $c;'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$sort_func </span><span class="keyword">= </span><span class="default">$sort_funcs</span><span class="keyword">[</span><span class="default">$sortby</span><span class="keyword">] = </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'$a, $b'</span><span class="keyword">, </span><span class="default">$code</span><span class="keyword">);<br />
&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$sort_func </span><span class="keyword">= </span><span class="default">$sort_funcs</span><span class="keyword">[</span><span class="default">$sortby</span><span class="keyword">];<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp; </span><span class="default">$sort_func </span><span class="keyword">= </span><span class="default">$sort_funcs</span><span class="keyword">[</span><span class="default">$sortby</span><span class="keyword">];<br />
&nbsp;&nbsp; </span><span class="default">uasort</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">, </span><span class="default">$sort_func</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="46245""></a>
  <div class="note">
   <strong class="user">siefer at sym dot net</strong>
   <a href="#46245" class="date">04-Oct-2004 02:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hello naholyr at yahoo dot fr!<br />
<br />
should it be<br />
<br />
$cmp = create_function('$a, $b', "return $cmp_val;");<br />
<br />
?<br />
<br />
this works with my arrays ;-)<br />
<br />
regards, Christopher</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="42723""></a>
  <div class="note">
   <strong class="user">marek at lewczuk dot com</strong>
   <a href="#42723" class="date">27-May-2004 04:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Below another array sorting function - you can use many keys, whether order type is ascendant or descendant, if values of given key should be treat as string or numeric, if array keys should be preserved. This function is locale-safe - it means that string sorting will be based on setLocale settings. You should be aware that I did not make comprehensive tests, so be careful... <br />
<br />
// my locales<br />
SetLocale(LC_COLLATE,"pl_PL.UTF-8");<br />
SetLocale(LC_CTYPE, "pl_PL.UTF-8");<br />
<br />
function Array_Sort ($array, $arguments = Array(), $keys = true) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; <br />
&nbsp; // comparing function code<br />
&nbsp; $code = "";<br />
&nbsp;&nbsp; &nbsp; &nbsp; <br />
&nbsp; // foreach sorting argument (array key)<br />
&nbsp; foreach ($arguments as $argument) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; // order field<br />
&nbsp;&nbsp;&nbsp; $field = substr($argument, 2, strlen($argument));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; // sort type ("s" -&gt; string, "n" -&gt; numeric)<br />
&nbsp;&nbsp;&nbsp; $type = $argument[0];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; // sort order ("+" -&gt; "ASC", "-" -&gt; "DESC")<br />
&nbsp;&nbsp;&nbsp; $order = $argument[1];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; // add "if" statement, which checks if this argument&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; should be used<br />
&nbsp;&nbsp;&nbsp; $code .= "if (!Is_Numeric(\$result) || \$result == 0) ";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; // if "numeric" sort type<br />
&nbsp;&nbsp;&nbsp; if (strtolower($type) == "n") $code .= $order == "-" ? "\$result = (\$a['{$field}'] &gt; \$b['{$field}'] ? -1 : (\$a['{$field}'] &lt; \$b['{$field}'] ? 1 : 0));" : "\$result = (\$a['{$field}'] &gt; \$b['{$field}'] ? 1 : (\$a['{$field}'] &lt; \$b['{$field}'] ? -1 : 0));";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; // if "string" sort type<br />
&nbsp;&nbsp;&nbsp; else $code .= $order == "-" ? "\$result = strcoll(\$a['{$field}'], \$b['{$field}']) * -1;" : "\$result = strcoll(\$a['{$field}'], \$b['{$field}']);";<br />
&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp; // return result<br />
&nbsp; $code .= "return \$result;";<br />
&nbsp;&nbsp; <br />
&nbsp; // create comparing function<br />
&nbsp; $compare = create_function('$a, $b', $code);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp; // sort array and preserve keys <br />
&nbsp; if ($keys) uasort($array, $compare); <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp; // sort array, but not preserve keys<br />
&nbsp; else usort($array, $compare);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; // return array<br />
&nbsp; return $array;<br />
}<br />
<br />
Example array:<br />
$array['sdsd'] = array("dir" =&gt; 1, "name" =&gt; "sas", "olek" =&gt; "sdsd");<br />
$array['sds2'] = array("dir" =&gt; 2, "name" =&gt; "&amp;#347;as", "olek" =&gt; "t");<br />
<br />
Example - preserve keys:<br />
print_r(Array_Sort($array, Array("s-name", "n-dir", "s+olek")));<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [sds2] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [dir] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; &amp;#347;as<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [olek] =&gt; t<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [sdsd] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [dir] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; sas<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [olek] =&gt; sdsd<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
)<br />
<br />
Example - without preserving keys:<br />
print_r(Array_Sort($array, Array("s-name", "n-dir", "s+olek")), false);<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [dir] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; &amp;#347;as<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [olek] =&gt; t<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [dir] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; sas<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [olek] =&gt; sdsd<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
)<br />
<br />
Enyoj</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="42264""></a>
  <div class="note">
   <strong class="user">david [__at__] castlelaing.com</strong>
   <a href="#42264" class="date">10-May-2004 09:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
WARNING:-Regarding remmy.cjb.net (22-Oct-2003 05:57) mutisort() function:<br />
<br />
Sorting by floating point numbers doesn't work in the current function. Use the modified version below if you want to sort by a floating point column.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// Based on the other notes given before.<br />
// Sorts an array (you know the kind) by key<br />
// and by the comparison operator you prefer.<br />
<br />
// Note that instead of most important criteron first, it's<br />
// least important criterion first.<br />
<br />
// The default sort order is ascending, and the default sort<br />
// type is strnatcmp.<br />
<br />
// function multisort($array[, $key, $order, $type]...)<br />
</span><span class="keyword">function </span><span class="default">multisort</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp; for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">func_num_args</span><span class="keyword">(); </span><span class="default">$i </span><span class="keyword">+= </span><span class="default">3</span><span class="keyword">)<br />
&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$key </span><span class="keyword">= </span><span class="default">func_get_arg</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; if (</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">)) </span><span class="default">$key </span><span class="keyword">= </span><span class="string">'"'</span><span class="keyword">.</span><span class="default">$key</span><span class="keyword">.</span><span class="string">'"'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$order </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; if(</span><span class="default">$i </span><span class="keyword">+ </span><span class="default">1 </span><span class="keyword">&lt; </span><span class="default">func_num_args</span><span class="keyword">())<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$order </span><span class="keyword">= </span><span class="default">func_get_arg</span><span class="keyword">(</span><span class="default">$i </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$type </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; if(</span><span class="default">$i </span><span class="keyword">+ </span><span class="default">2 </span><span class="keyword">&lt; </span><span class="default">func_num_args</span><span class="keyword">())<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$type </span><span class="keyword">= </span><span class="default">func_get_arg</span><span class="keyword">(</span><span class="default">$i </span><span class="keyword">+ </span><span class="default">2</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; switch(</span><span class="default">$type</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="default">1</span><span class="keyword">: </span><span class="comment">// Case insensitive natural.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$t </span><span class="keyword">= </span><span class="string">'strcasecmp($a[' </span><span class="keyword">. </span><span class="default">$key </span><span class="keyword">. </span><span class="string">'], $b[' </span><span class="keyword">. </span><span class="default">$key </span><span class="keyword">. </span><span class="string">'])'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="default">2</span><span class="keyword">: </span><span class="comment">// Numeric.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$t </span><span class="keyword">= </span><span class="string">'($a[' </span><span class="keyword">. </span><span class="default">$key </span><span class="keyword">. </span><span class="string">'] == $b[' </span><span class="keyword">. </span><span class="default">$key </span><span class="keyword">. </span><span class="string">']) ? 0:(($a[' </span><span class="keyword">. </span><span class="default">$key </span><span class="keyword">. </span><span class="string">'] &lt; $b[' </span><span class="keyword">. </span><span class="default">$key </span><span class="keyword">. </span><span class="string">']) ? -1 : 1)'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="default">3</span><span class="keyword">: </span><span class="comment">// Case sensitive string.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$t </span><span class="keyword">= </span><span class="string">'strcmp($a[' </span><span class="keyword">. </span><span class="default">$key </span><span class="keyword">. </span><span class="string">'], $b[' </span><span class="keyword">. </span><span class="default">$key </span><span class="keyword">. </span><span class="string">'])'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="default">4</span><span class="keyword">: </span><span class="comment">// Case insensitive string.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$t </span><span class="keyword">= </span><span class="string">'strcasecmp($a[' </span><span class="keyword">. </span><span class="default">$key </span><span class="keyword">. </span><span class="string">'], $b[' </span><span class="keyword">. </span><span class="default">$key </span><span class="keyword">. </span><span class="string">'])'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; default: </span><span class="comment">// Case sensitive natural.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$t </span><span class="keyword">= </span><span class="string">'strnatcmp($a[' </span><span class="keyword">. </span><span class="default">$key </span><span class="keyword">. </span><span class="string">'], $b[' </span><span class="keyword">. </span><span class="default">$key </span><span class="keyword">. </span><span class="string">'])'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; echo </span><span class="default">$t</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">usort</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'$a, $b'</span><span class="keyword">, </span><span class="string">'; return ' </span><span class="keyword">. (</span><span class="default">$order </span><span class="keyword">? </span><span class="string">'' </span><span class="keyword">: </span><span class="string">'-'</span><span class="keyword">) . </span><span class="string">'(' </span><span class="keyword">. </span><span class="default">$t </span><span class="keyword">. </span><span class="string">');'</span><span class="keyword">));<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp; return </span><span class="default">$array</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="37711""></a>
  <div class="note">
   <strong class="user">dn dot php at gmx dot de</strong>
   <a href="#37711" class="date">23-Nov-2003 04:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
regarding remmy.cjb.net (22-Oct-2003 05:57) note:<br />
The "multisort" function is not working. Try the following example.<br />
( I hope this and your note will be deleted soon.)<br />
..- Denis<br />
<br />
<span class="default">&lt;?php<br />
$a </span><span class="keyword">= array(<br />
&nbsp;&nbsp;&nbsp; array(</span><span class="string">'c1' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'c2' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'c3' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'c4' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; array(</span><span class="string">'c1' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'c2' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'c3' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'c4' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; array(</span><span class="string">'c1' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'c2' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'c3' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, </span><span class="string">'c4' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; array(</span><span class="string">'c1' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'c2' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'c3' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, </span><span class="string">'c4' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">)<br />
);<br />
<br />
echo(</span><span class="string">'&lt;pre&gt;'</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">multisort</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="string">"'c4'"</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">,</span><span class="string">"'c3'"</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">,</span><span class="string">"'c2'"</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">,</span><span class="string">"'c1'"</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">));<br />
echo(</span><span class="string">'&lt;/pre&gt;'</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="36774""></a>
  <div class="note">
   <strong class="user">remmy.cjb.net</strong>
   <a href="#36774" class="date">21-Oct-2003 11:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hope this helps!<br />
<br />
- Remmy<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">// Based on the other notes given before.<br />
// Sorts an array (you know the kind) by key<br />
// and by the comparison operator you prefer.<br />
<br />
// Note that instead of most important criteron first, it's<br />
// least important criterion first.<br />
<br />
// The default sort order is ascending, and the default sort<br />
// type is strnatcmp.<br />
<br />
// function multisort($array[, $key, $order, $type]...)<br />
</span><span class="keyword">function </span><span class="default">multisort</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">func_num_args</span><span class="keyword">(); </span><span class="default">$i </span><span class="keyword">+= </span><span class="default">3</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$key </span><span class="keyword">= </span><span class="default">func_get_arg</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$order </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$i </span><span class="keyword">+ </span><span class="default">1 </span><span class="keyword">&lt; </span><span class="default">func_num_args</span><span class="keyword">())<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$order </span><span class="keyword">= </span><span class="default">func_get_arg</span><span class="keyword">(</span><span class="default">$i </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$type </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$i </span><span class="keyword">+ </span><span class="default">2 </span><span class="keyword">&lt; </span><span class="default">func_num_args</span><span class="keyword">())<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$type </span><span class="keyword">= </span><span class="default">func_get_arg</span><span class="keyword">(</span><span class="default">$i </span><span class="keyword">+ </span><span class="default">2</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; switch(</span><span class="default">$type</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="default">1</span><span class="keyword">: </span><span class="comment">// Case insensitive natural.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$t </span><span class="keyword">= </span><span class="string">'strcasenatcmp($a[' </span><span class="keyword">. </span><span class="default">$key </span><span class="keyword">. </span><span class="string">'], $b[' </span><span class="keyword">. </span><span class="default">$key </span><span class="keyword">. </span><span class="string">'])'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="default">2</span><span class="keyword">: </span><span class="comment">// Numeric.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$t </span><span class="keyword">= </span><span class="string">'$a[' </span><span class="keyword">. </span><span class="default">$key </span><span class="keyword">. </span><span class="string">'] - $b[' </span><span class="keyword">. </span><span class="default">$key </span><span class="keyword">. </span><span class="string">']'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="default">3</span><span class="keyword">: </span><span class="comment">// Case sensitive string.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$t </span><span class="keyword">= </span><span class="string">'strcmp($a[' </span><span class="keyword">. </span><span class="default">$key </span><span class="keyword">. </span><span class="string">'], $b[' </span><span class="keyword">. </span><span class="default">$key </span><span class="keyword">. </span><span class="string">'])'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="default">4</span><span class="keyword">: </span><span class="comment">// Case insensitive string.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$t </span><span class="keyword">= </span><span class="string">'strcasecmp($a[' </span><span class="keyword">. </span><span class="default">$key </span><span class="keyword">. </span><span class="string">'], $b[' </span><span class="keyword">. </span><span class="default">$key </span><span class="keyword">. </span><span class="string">'])'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; default: </span><span class="comment">// Case sensitive natural.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$t </span><span class="keyword">= </span><span class="string">'strnatcmp($a[' </span><span class="keyword">. </span><span class="default">$key </span><span class="keyword">. </span><span class="string">'], $b[' </span><span class="keyword">. </span><span class="default">$key </span><span class="keyword">. </span><span class="string">'])'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">uasort</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'$a, $b'</span><span class="keyword">, </span><span class="string">'return ' </span><span class="keyword">. (</span><span class="default">$order </span><span class="keyword">? </span><span class="string">'' </span><span class="keyword">: </span><span class="string">'-'</span><span class="keyword">) . </span><span class="string">'(' </span><span class="keyword">. </span><span class="default">$t </span><span class="keyword">. </span><span class="string">');'</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$array</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$a </span><span class="keyword">= array(<br />
&nbsp;&nbsp;&nbsp; array(</span><span class="string">'id' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'apple'</span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; array(</span><span class="string">'id' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, </span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'orange'</span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; array(</span><span class="string">'id' </span><span class="keyword">=&gt; </span><span class="default">8</span><span class="keyword">, </span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'banana'</span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; array(</span><span class="string">'id' </span><span class="keyword">=&gt; </span><span class="default">8</span><span class="keyword">, </span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'grapefruit'</span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; array(</span><span class="string">'id' </span><span class="keyword">=&gt; </span><span class="default">9</span><span class="keyword">, </span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'smoke'</span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; array(</span><span class="string">'id' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'screen'</span><span class="keyword">)<br />
);<br />
<br />
</span><span class="comment">// This works like MYSQL 'ORDER BY id DESC, name ASC'<br />
// Note the quoting of string literal keys.<br />
</span><span class="keyword">echo(</span><span class="string">'&lt;pre&gt;'</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">multisort</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="string">"'name'"</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="string">"'id'"</span><span class="keyword">, </span><span class="default">false</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">));<br />
echo(</span><span class="string">'&lt;/pre&gt;'</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="35833""></a>
  <div class="note">
   <strong class="user">cablehead</strong>
   <a href="#35833" class="date">16-Sep-2003 09:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
dholmes we turned your masort function into a smarty plugin:<br />
<br />
<a href="http://www.phpinsider.com/smarty-forum/viewtopic.php?t=1079" rel="nofollow" target="_blank">http://www.phpinsider.com/smarty-forum/viewtopic.php?t=1079</a><br />
<br />
messju contributed the following performance improvements.&nbsp; <br />
<br />
function masort(&amp;$data, $sortby)<br />
{ <br />
&nbsp;&nbsp;&nbsp; static $sort_funcs = array();<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; if (empty($sort_funcs[$sortby])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $code = "\$c=0;";<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (split(',', $sortby) as $key) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $code .= "if ( (\$c = strcasecmp(\$a['$key'],\$b['$key'])) != 0 ) return \$c;\n";<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $code .= 'return $c;';<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $sort_func = $sort_funcs[$sortby] = create_function('$a, $b', $code);<br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $sort_func = $sort_funcs[$sortby];<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; $sort_func = $sort_funcs[$sortby];<br />
&nbsp;&nbsp;&nbsp; uasort($data, $sort_func);<br />
}<br />
<br />
thank you for the cool function!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="34159""></a>
  <div class="note">
   <strong class="user">php at eden2 dot com</strong>
   <a href="#34159" class="date">17-Jul-2003 04:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Is it just me, or are the examples below misleading, and actually demonstrating situations that would be more appropriate for usort()?<br />
<br />
After trying to make sense of the uasort() description, it sounds like it's more for sorting a 1D array like this:<br />
<br />
"john" =&gt; "$23.12"<br />
"tim" =&gt; "$6.50"<br />
"bob" =&gt; "$18.54"<br />
<br />
and getting back:<br />
<br />
"tim" =&gt; "$6.50"<br />
"bob" =&gt; "$18.54"<br />
"john" =&gt; $23.12"<br />
<br />
(assuming, of course, that your sort function is lopping off the $ and evaluating as a number -- which would complicate the use of asort() ;)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="28360""></a>
  <div class="note">
   <strong class="user">naholyr at yahoo dot fr</strong>
   <a href="#28360" class="date">10-Jan-2003 09:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can sort a multidimensionnal array by any of its key with this function:<br />
<br />
function multi_sort($array, $key)<br />
{<br />
&nbsp; $cmp_val="((\$a['$key']&gt;\$b['$key'])?1:<br />
&nbsp;&nbsp;&nbsp; ((\$a['$key']==\$b['$key'])?0:-1))";<br />
&nbsp; $cmp=create_function('$a, $b', "return $body;");<br />
&nbsp; uasort($array, $cmp);<br />
&nbsp; return $array;<br />
}<br />
<br />
example:<br />
$myarray = array(<br />
&nbsp; array("name"=&gt;"kernighan", "language"=&gt;"c"),<br />
&nbsp; array("name"=&gt;"lerdorf", "language"=&gt;"php"),<br />
&nbsp; array("name"=&gt;"Stroustrup", "language"=&gt;"c++"),<br />
&nbsp; array("name"=&gt;"Gosling", "language"=&gt;"java")<br />
);<br />
<br />
multi_sort($myarray, "name") returns:<br />
name=Gosling&nbsp; &nbsp; language=java<br />
name=Kernighan&nbsp; &nbsp; language=c<br />
name=Lerdorf&nbsp; &nbsp; language=php<br />
name=Stroustrup&nbsp; &nbsp; language=c++</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="25882""></a>
  <div class="note">
   <strong class="user">dholmes at jccc d0t net</strong>
   <a href="#25882" class="date">09-Oct-2002 02:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a little sort function that actually uses a dynamic callback for usort to do it's thing.<br />
<br />
It assumes your data is in the form of:<br />
&nbsp;&nbsp;&nbsp; $data = array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array('ID'=&gt;'6','LAST'=&gt;'Holmes','FIRST'=&gt;'Dan'),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array('ID'=&gt;'1234','LAST'=&gt;'Smith','FIRST'=&gt;'Agent K'),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array('ID'=&gt;'2','LAST'=&gt;'Smith','FIRST'=&gt;'Agent J'),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array('ID'=&gt;'4','LAST'=&gt;'Barney','FIRST'=&gt;'Bob'));<br />
<br />
Now, you want to sort on one or more cols, don't you?&nbsp; <br />
<br />
masort($data, 'LAST,FIRST');<br />
or <br />
masort($data,array('FIRST','ID'));<br />
<br />
Of course you could add a bunch to it (like numeric comparison if appropriate, desc/asc, etc) but it works for me.<br />
<br />
function masort(&amp;$data, $sortby){<br />
&nbsp;&nbsp;&nbsp; if(is_array($sortby)){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $sortby = join(',',$sortby);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; uasort($data,create_function('$a,$b','$skeys = split(\',\',\''.$sortby.'\');<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach($skeys as $key){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( ($c = strcasecmp($a[$key],$b[$key])) != 0 ){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return($c);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return($c); '));<br />
}<br />
Notice that I am splitting the string in the comparison function? While this is certainly slower, it was the only way I would find to "pass" and "array".&nbsp; If anyone has a better way, please suggest.&nbsp; Then inside, we (string) compare the values only moving to the next key if the values are the same...and so on, and so on.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="15328""></a>
  <div class="note">
   <strong class="user">stilgar_cpsNOSPAM at zipmail dot NOSPAMcom dot br</strong>
   <a href="#15328" class="date">05-Sep-2001 02:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Use example:<br />
<br />
$array[0]['Fator1']=7;<br />
$array[0]['Fator2']="Name";<br />
$array[1]['Fator1']=5;<br />
$array[1]['Fator2']="Name";<br />
$array[2]['Fator1']=7;<br />
$array[2]['Fator2']="NameDiferente";<br />
.....<br />
<br />
We want to order by Fator1, then Fator2, then:<br />
<br />
function Compare($ar1, $ar2)<br />
{<br />
&nbsp;&nbsp; if ($ar1['Fator1']&lt;$ar2['Fator1'])<br />
&nbsp;&nbsp; &nbsp;&nbsp; return -1;<br />
&nbsp;&nbsp; else if ($ar1['Fator1']&gt;$ar2['Fator1'])<br />
&nbsp;&nbsp; &nbsp;&nbsp; return 1;<br />
&nbsp;&nbsp; if ($ar1['Fator2']&lt;$ar2['Fator2'])<br />
&nbsp;&nbsp; &nbsp;&nbsp; return -1;<br />
&nbsp;&nbsp; else if ($ar1['Fator2']&gt;$ar2['Fator2'])<br />
&nbsp;&nbsp; &nbsp;&nbsp; return 1;<br />
&nbsp;&nbsp; return 0;<br />
}<br />
<br />
To sort now, we use:<br />
<br />
uasort($array, 'Compare');</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.sort.html">sort</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.uksort.html">uksort</a></div>
 <div class="up"><a href="ref.array.html">Array Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
