<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Returns the total size of a filesystem or disk partition</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.disk-free-space.html">disk_free_space</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.diskfreespace.html">diskfreespace</a></div>
 <div class="up"><a href="ref.filesystem.html">Filesystem Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.disk-total-space" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">disk_total_space</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.1.0, PHP 5)</p><p class="refpurpose"><span class="refname">disk_total_space</span> &mdash; <span class="dc-title">Returns the total size of a filesystem or disk partition</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.disk-total-space-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">float</span> <span class="methodname"><b>disk_total_space</b></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$directory</tt></span>
   )</div>

  <p class="para rdfs-comment">
   Given a string containing a directory, this function will return the total
   number of bytes on the corresponding filesystem or disk partition.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.disk-total-space-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><i><tt class="parameter">directory</tt></i></span>
     <dd>

      <p class="para">
       A directory of the filesystem or disk partition.
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.disk-total-space-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns the total number of bytes as a float
    or <b><tt>FALSE</tt></b> on failure.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.disk-total-space-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   <div class="example" id="example-2151">
    <p><b>Example #1 <span class="function"><b>disk_total_space()</b></span> example</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;$ds&nbsp;contains&nbsp;the&nbsp;total&nbsp;number&nbsp;of&nbsp;bytes&nbsp;available&nbsp;on&nbsp;"/"<br /></span><span style="color: #0000BB">$ds&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">disk_total_space</span><span style="color: #007700">(</span><span style="color: #DD0000">"/"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;On&nbsp;Windows:<br /></span><span style="color: #0000BB">$ds&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">disk_total_space</span><span style="color: #007700">(</span><span style="color: #DD0000">"C:"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$ds&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">disk_total_space</span><span style="color: #007700">(</span><span style="color: #DD0000">"D:"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.disk-total-space-notes">
  <h3 class="title">Notes</h3>
  <blockquote class="note"><p><b class="note">Note</b>: <span class="simpara">This function will not work on
<a href="features.remote-files.html" class="link">remote files</a> as the file to
be examined must be accessible via the server&#039;s filesystem.</span></p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.disk-total-space-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.disk-free-space.html" class="function" rel="rdfs-seeAlso">disk_free_space()</a> - Returns available space on filesystem or disk partition</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="98050""></a>
  <div class="note">
   <strong class="user">khumlo at gmail dot com</strong>
   <a href="#98050" class="date">23-May-2010 01:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
PHP 6 has already come to the market but still there are no standard function that can help retrieve directory size as it has to calculate disk space such as disk_total_space. Although we can use system level call such as exec() and system(), it is too risky to enable these function. So we look for an alternate method so as to calculate directory size.<br />
<br />
Sol: retrieving directory size using php<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">get_dir_size</span><span class="keyword">(</span><span class="default">$dir_name</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$dir_size </span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$dir_name</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$dh </span><span class="keyword">= </span><span class="default">opendir</span><span class="keyword">(</span><span class="default">$dir_name</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while ((</span><span class="default">$file </span><span class="keyword">= </span><span class="default">readdir</span><span class="keyword">(</span><span class="default">$dh</span><span class="keyword">)) !== </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$file </span><span class="keyword">!=</span><span class="default">”</span><span class="keyword">.</span><span class="default">” </span><span class="keyword">&amp;&amp; </span><span class="default">$file </span><span class="keyword">!= </span><span class="default">“</span><span class="keyword">..</span><span class="default">”</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_file</span><span class="keyword">(</span><span class="default">$dir_name</span><span class="keyword">.</span><span class="default">”</span><span class="keyword">/</span><span class="default">”</span><span class="keyword">.</span><span class="default">$file</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$dir_size </span><span class="keyword">+= </span><span class="default">filesize</span><span class="keyword">(</span><span class="default">$dir_name</span><span class="keyword">.</span><span class="default">”</span><span class="keyword">/</span><span class="default">”</span><span class="keyword">.</span><span class="default">$file</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">/* check for any new directory inside this directory */<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if(</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$dir_name</span><span class="keyword">.</span><span class="default">”</span><span class="keyword">/</span><span class="default">”</span><span class="keyword">.</span><span class="default">$file</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$dir_size </span><span class="keyword">+=&nbsp; </span><span class="default">get_dir_size</span><span class="keyword">(</span><span class="default">$dir_name</span><span class="keyword">.</span><span class="default">”</span><span class="keyword">/</span><span class="default">”</span><span class="keyword">.</span><span class="default">$file</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; }<br />
</span><span class="default">closedir</span><span class="keyword">(</span><span class="default">$dh</span><span class="keyword">);<br />
return </span><span class="default">$dir_size</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$dir_name </span><span class="keyword">= </span><span class="default">“directory name here”</span><span class="keyword">;<br />
</span><span class="comment">/* 1048576 bytes == 1MB */<br />
</span><span class="default">$total_size</span><span class="keyword">= </span><span class="default">round</span><span class="keyword">((</span><span class="default">get_dir_size</span><span class="keyword">(</span><span class="default">$dir_name</span><span class="keyword">) / </span><span class="default">1048576</span><span class="keyword">),</span><span class="default">2</span><span class="keyword">) ;<br />
print </span><span class="default">“Directory $dir_name size </span><span class="keyword">: </span><span class="default">$total_size MB”</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
Depending upon the size format you want to achieve, divide directory size by 1024 or 1024 * 1024 or 1024 * 1024 * 1024 for KB or MB or GB respectively.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95305""></a>
  <div class="note">
   <strong class="user">cotact[at]covac-software[dot]com</strong>
   <a href="#95305" class="date">25-Dec-2009 06:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Something that might go well with this function is the ability to list available disks. On Windows, here's the relevant code:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;* Finds a list of disk drives on the server.<br />
&nbsp;* @return array The array velues are the existing disks.<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">get_disks</span><span class="keyword">(){<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">php_uname</span><span class="keyword">(</span><span class="string">'s'</span><span class="keyword">)==</span><span class="string">'Windows NT'</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// windows<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$disks</span><span class="keyword">=`</span><span class="string">fsutil fsinfo drives</span><span class="keyword">`;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$disks</span><span class="keyword">=</span><span class="default">str_word_count</span><span class="keyword">(</span><span class="default">$disks</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$disks</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]!=</span><span class="string">'Drives'</span><span class="keyword">)return </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$disks</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$disks </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$disk</span><span class="keyword">)</span><span class="default">$disks</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]=</span><span class="default">$disk</span><span class="keyword">.</span><span class="string">':\\'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$disks</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// unix<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$data</span><span class="keyword">=`</span><span class="string">mount</span><span class="keyword">`;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$data</span><span class="keyword">=</span><span class="default">explode</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">,</span><span class="default">$data</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$disks</span><span class="keyword">=array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$data </span><span class="keyword">as </span><span class="default">$token</span><span class="keyword">)if(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$token</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">)==</span><span class="string">'/dev/'</span><span class="keyword">)</span><span class="default">$disks</span><span class="keyword">[]=</span><span class="default">$token</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$disks</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
EXAMPLE OF USE:<br />
<span class="default">&lt;?php print_r</span><span class="keyword">(</span><span class="default">get_disks</span><span class="keyword">()); </span><span class="default">?&gt;<br />
</span><br />
EXAMPLE RESULT:<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; A:\<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; C:\<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; D:\<br />
&nbsp;&nbsp;&nbsp; [4] =&gt; E:\<br />
&nbsp;&nbsp;&nbsp; [5] =&gt; F:\<br />
&nbsp;&nbsp;&nbsp; [6] =&gt; G:\<br />
&nbsp;&nbsp;&nbsp; [7] =&gt; H:\<br />
&nbsp;&nbsp;&nbsp; [8] =&gt; I:\<br />
&nbsp;&nbsp;&nbsp; [9] =&gt; M:\<br />
&nbsp;&nbsp;&nbsp; [10] =&gt; X:\<br />
&nbsp;&nbsp;&nbsp; [11] =&gt; Z:\<br />
)<br />
<br />
Warning: This also finds empty disk drives (eg; CD or SMD drives or the more common floppy drive).<br />
<br />
Warning2: If you want to find space usage using the info from my function, prepend the disk function with the "@", eg:<br />
<br />
$free=@disk_free_space('A:\\');</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80850""></a>
  <div class="note">
   <strong class="user">Viitala</strong>
   <a href="#80850" class="date">04-Feb-2008 01:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Beware of empty files!<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Wrong<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$exp </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">log</span><span class="keyword">(</span><span class="default">$bytes</span><span class="keyword">) / </span><span class="default">log</span><span class="keyword">(</span><span class="default">1024</span><span class="keyword">));<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//Correct<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$exp </span><span class="keyword">= </span><span class="default">$bytes </span><span class="keyword">? </span><span class="default">floor</span><span class="keyword">(</span><span class="default">log</span><span class="keyword">(</span><span class="default">$bytes</span><span class="keyword">) / </span><span class="default">log</span><span class="keyword">(</span><span class="default">1024</span><span class="keyword">)) : </span><span class="default">0</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75971""></a>
  <div class="note">
   <strong class="user">tularis at php dot net</strong>
   <a href="#75971" class="date">25-Jun-2007 03:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For a non-looping way to add symbols to a number of bytes:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">getSymbolByQuantity</span><span class="keyword">(</span><span class="default">$bytes</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$symbols </span><span class="keyword">= array(</span><span class="string">'B'</span><span class="keyword">, </span><span class="string">'KiB'</span><span class="keyword">, </span><span class="string">'MiB'</span><span class="keyword">, </span><span class="string">'GiB'</span><span class="keyword">, </span><span class="string">'TiB'</span><span class="keyword">, </span><span class="string">'PiB'</span><span class="keyword">, </span><span class="string">'EiB'</span><span class="keyword">, </span><span class="string">'ZiB'</span><span class="keyword">, </span><span class="string">'YiB'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$exp </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">log</span><span class="keyword">(</span><span class="default">$bytes</span><span class="keyword">)/</span><span class="default">log</span><span class="keyword">(</span><span class="default">1024</span><span class="keyword">));<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">'%.2f '</span><span class="keyword">.</span><span class="default">$symbol</span><span class="keyword">[</span><span class="default">$exp</span><span class="keyword">], (</span><span class="default">$bytes</span><span class="keyword">/</span><span class="default">pow</span><span class="keyword">(</span><span class="default">1024</span><span class="keyword">, </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$exp</span><span class="keyword">))));<br />
}</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75967""></a>
  <div class="note">
   <strong class="user">stierguy1 at msn dot com</strong>
   <a href="#75967" class="date">24-Jun-2007 07:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
function roundsize($size){<br />
&nbsp;&nbsp;&nbsp; $i=0;<br />
&nbsp;&nbsp;&nbsp; $iec = array("B", "Kb", "Mb", "Gb", "Tb");<br />
&nbsp;&nbsp;&nbsp; while (($size/1024)&gt;1) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $size=$size/1024;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $i++;}<br />
&nbsp;&nbsp;&nbsp; return(round($size,1)." ".$iec[$i]);}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74570""></a>
  <div class="note">
   <strong class="user">nikolayku at tut dot by</strong>
   <a href="#74570" class="date">17-Apr-2007 01:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Very simple function that convert bytes to kilobytes, megabytes ...<br />
<br />
function ConvertBytes($number)<br />
{<br />
&nbsp;&nbsp;&nbsp; $len = strlen($number);<br />
&nbsp;&nbsp;&nbsp; if($len &lt; 4)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return sprintf("%d b", $number);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if($len &gt;= 4 &amp;&amp; $len &lt;=6)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return sprintf("%0.2f Kb", $number/1024);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if($len &gt;= 7 &amp;&amp; $len &lt;=9)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return sprintf("%0.2f Mb", $number/1024/1024);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return sprintf("%0.2f Gb", $number/1024/1024/1024);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74326""></a>
  <div class="note">
   <strong class="user">Mat</strong>
   <a href="#74326" class="date">05-Apr-2007 03:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
JulieC:<br />
<br />
I think you may have misunderstood - given a directory, this function tells you how big the disk paritition is that the directory exists on.<br />
<br />
So disk_total_space("C:\Windows\") will tell you how big drive C is.<br />
<br />
It is not suggesting that a directory is a disk partition.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="72723""></a>
  <div class="note">
   <strong class="user">JulieC</strong>
   <a href="#72723" class="date">30-Jan-2007 07:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
"filesystem or disk partition" does not equal "directory" for Windows.&nbsp; Thanks.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="72324""></a>
  <div class="note">
   <strong class="user">martijn at mo dot com</strong>
   <a href="#72324" class="date">13-Jan-2007 02:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This works for me (on a UNIX server):<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">du</span><span class="keyword">( </span><span class="default">$dir </span><span class="keyword">) <br />
{ <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$res </span><span class="keyword">= `</span><span class="string">du -sk </span><span class="default">$dir</span><span class="keyword">`;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Unix command<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">preg_match</span><span class="keyword">( </span><span class="string">'/\d+/'</span><span class="keyword">, </span><span class="default">$res</span><span class="keyword">, </span><span class="default">$KB </span><span class="keyword">); </span><span class="comment">// Parse result<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$MB </span><span class="keyword">= </span><span class="default">round</span><span class="keyword">( </span><span class="default">$KB</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] / </span><span class="default">1024</span><span class="keyword">, </span><span class="default">1 </span><span class="keyword">);&nbsp; </span><span class="comment">// From kilobytes to megabytes<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$MB</span><span class="keyword">;<br />
} <br />
<br />
</span><span class="default">$dirSize </span><span class="keyword">= </span><span class="default">du</span><span class="keyword">(</span><span class="string">'/path/to/dir/'</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="34100""></a>
  <div class="note">
   <strong class="user">shalless at rubix dot net dot au</strong>
   <a href="#34100" class="date">16-Jul-2003 07:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
My first contribution. Trouble is the sum of the byte sizes of the files in your directories is not equal to the amount of disk space consumed, as andudi points out. A 1-byte file occupies 4096 bytes of disk space if the block size is 4096. Couldn't understand why andudi did $s["blksize"]*$s["blocks"]/8. Could only be because $s["blocks"] counts the number of 512-byte disk blocks not the number of $s["blksize"] blocks, so it may as well just be $s["blocks"]*512. Furthermore none of the dirspace suggestions allow for the fact that directories are also files and that they also consume disk space. The following code dskspace addresses all these issues and can also be used to return the disk space consumed by a single non-directory file. It will return much larger numbers than you would have been seeing with any of the other suggestions but I think they are much more realistic:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">dskspace</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">)<br />
{ <br />
&nbsp;&nbsp; </span><span class="default">$s </span><span class="keyword">= </span><span class="default">stat</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">$space </span><span class="keyword">= </span><span class="default">$s</span><span class="keyword">[</span><span class="string">"blocks"</span><span class="keyword">]*</span><span class="default">512</span><span class="keyword">;<br />
&nbsp;&nbsp; if (</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">))<br />
&nbsp;&nbsp; { <br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$dh </span><span class="keyword">= </span><span class="default">opendir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">); <br />
&nbsp;&nbsp; &nbsp; while ((</span><span class="default">$file </span><span class="keyword">= </span><span class="default">readdir</span><span class="keyword">(</span><span class="default">$dh</span><span class="keyword">)) !== </span><span class="default">false</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; if (</span><span class="default">$file </span><span class="keyword">!= </span><span class="string">"." </span><span class="keyword">and </span><span class="default">$file </span><span class="keyword">!= </span><span class="string">".."</span><span class="keyword">) <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$space </span><span class="keyword">+= </span><span class="default">dskspace</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">.</span><span class="default">$file</span><span class="keyword">); <br />
&nbsp;&nbsp; &nbsp; </span><span class="default">closedir</span><span class="keyword">(</span><span class="default">$dh</span><span class="keyword">);<br />
&nbsp;&nbsp; } <br />
&nbsp;&nbsp; return </span><span class="default">$space</span><span class="keyword">; <br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="22234""></a>
  <div class="note">
   <strong class="user">andudi at gmx dot ch</strong>
   <a href="#22234" class="date">11-Jun-2002 03:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To find the total size of a file/directory you have to differ two situations:<br />
(on Linux/Unix based systems only!?)<br />
<br />
you are interested:<br />
1) in the total size of the files in the dir/subdirs<br />
2) what place on the disk your dir/subdirs/files uses<br />
<br />
- 1) and 2) normaly differs, depending on the size of the inodes<br />
- mostly 2) is greater than 1) (in the order of any kB)<br />
- filesize($file) gives 1)<br />
- "du -ab $file" gives 2)<br />
<br />
so you have to choose your situation!<br />
<br />
on my server I have no rights to use "exec du" in the case of 2), so I use:<br />
&nbsp; $s = stat($file);<br />
&nbsp; $size = $s[11]*$s[12]/8);<br />
whitch is counting the inodes [12] times the size of them in Bits [11]<br />
<br />
hopes this helps to count the used disk place in a right way... :-)<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Andreas Dick</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.disk-free-space.html">disk_free_space</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.diskfreespace.html">diskfreespace</a></div>
 <div class="up"><a href="ref.filesystem.html">Filesystem Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
